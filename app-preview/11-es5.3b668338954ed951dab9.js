!function(){function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==i)return;var n,a,r=[],s=!0,o=!1;try{for(i=i.call(t);!(s=(n=i.next()).done)&&(r.push(n.value),!e||r.length!==e);s=!0);}catch(c){o=!0,a=c}finally{try{s||null==i.return||i.return()}finally{if(o)throw a}}return r}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{hO9l:function(t,e,i){"use strict";i.r(e),i.d(e,"TabsPageModule",function(){return b});var n,r,o,c=i("ofXK"),u=i("3Pt+"),h=i("TEn/"),l=i("tyNb"),f=i("fXoL"),v=i("pEgL"),m=[{path:"tab",component:(n=function(){function t(e,i){var n=this;a(this,t),this.router=e,this.canvasDisplayService=i,this.updateUseSmallUI=function(){var t=!!document.querySelector("html.md"),e=t?56:44;n.useSmallUI=n.canvasArea(window.innerHeight-e-(t?57:51)-6,window.innerWidth-6)<n.canvasArea(window.innerHeight-e-25-6,window.innerWidth-6)},this.useSmallUI=!1,window.addEventListener("resize",this.updateUseSmallUI),this.updateUseSmallUI()}return s(t,[{key:"smallUI",get:function(){return"/tab/emulation"===this.router.url&&this.useSmallUI}},{key:"canvasArea",value:function(t,e){var i,n;return t=Math.min(t,this.canvasDisplayService.height/devicePixelRatio),(e=Math.min(e,this.canvasDisplayService.width/devicePixelRatio))/t>this.canvasDisplayService.width/this.canvasDisplayService.height?(n=t,i=t/this.canvasDisplayService.height*this.canvasDisplayService.width):(i=e,n=e/this.canvasDisplayService.width*this.canvasDisplayService.height),i*n}}]),t}(),n.\u0275fac=function(t){return new(t||n)(f.Jb(l.g),f.Jb(v.a))},n.\u0275cmp=f.Db({type:n,selectors:[["app-tabs"]],decls:19,vars:2,consts:[[1,"overflow-wrapper"],["slot","bottom"],["tab","emulation"],["name","phone-portrait-outline"],["tab","sessions"],["name","albums-outline"],["tab","settings"],["name","cog-outline"],["tab","about"],["name","help-outline"]],template:function(t,e){1&t&&(f.Mb(0,"ion-tabs"),f.Mb(1,"div",0),f.Mb(2,"ion-tab-bar",1),f.Mb(3,"ion-tab-button",2),f.Kb(4,"ion-icon",3),f.Mb(5,"ion-label"),f.hc(6,"Emulator"),f.Lb(),f.Lb(),f.Mb(7,"ion-tab-button",4),f.Kb(8,"ion-icon",5),f.Mb(9,"ion-label"),f.hc(10,"Sessions"),f.Lb(),f.Lb(),f.Mb(11,"ion-tab-button",6),f.Kb(12,"ion-icon",7),f.Mb(13,"ion-label"),f.hc(14,"Settings"),f.Lb(),f.Lb(),f.Mb(15,"ion-tab-button",8),f.Kb(16,"ion-icon",9),f.Mb(17,"ion-label"),f.hc(18,"About"),f.Lb(),f.Lb(),f.Lb(),f.Lb(),f.Lb()),2&t&&(f.zb(2),f.Bb("small-ui",e.smallUI))},directives:[h.w,h.u,h.v,h.h,h.n],styles:["ion-tab-bar[_ngcontent-%COMP%]{min-width:280px}ion-tab-bar.small-ui[_ngcontent-%COMP%]{height:25px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:21px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-icon.md[_ngcontent-%COMP%]{margin-top:3px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:none}.overflow-wrapper[_ngcontent-%COMP%]{overflow-x:auto}"]}),n),children:[{path:"emulation",loadChildren:function(){return Promise.all([i.e(0),i.e(13)]).then(i.bind(null,"6aA7")).then(function(t){return t.EmulationPageModule})}},{path:"sessions",loadChildren:function(){return Promise.all([i.e(0),i.e(10)]).then(i.bind(null,"/NlI")).then(function(t){return t.SessionsPageModule})}},{path:"settings",loadChildren:function(){return Promise.all([i.e(0),i.e(14)]).then(i.bind(null,"07hj")).then(function(t){return t.SettingsPageModule})}},{path:"about",loadChildren:function(){return Promise.all([i.e(0),i.e(12)]).then(i.bind(null,"Ht3H")).then(function(t){return t.AboutPageModule})}},{path:"",redirectTo:"/tab/sessions",pathMatch:"full"}]},{path:"",redirectTo:"/tab/sessions",pathMatch:"full"}],d=((o=function t(){a(this,t)}).\u0275fac=function(t){return new(t||o)},o.\u0275mod=f.Hb({type:o}),o.\u0275inj=f.Gb({imports:[[l.i.forChild(m)],l.i]}),o),b=((r=function t(){a(this,t)}).\u0275fac=function(t){return new(t||r)},r.\u0275mod=f.Hb({type:r}),r.\u0275inj=f.Gb({imports:[[h.A,c.b,u.e,d]]}),r)},pEgL:function(i,n,r){"use strict";r.d(n,"a",function(){return I});var o=r("mrSG"),c=r("N/dm"),u=r("z9fa"),h=r("FJT/"),l=r("fXoL"),f=u.a.m515,v=h.a[2],m=h.a[0];function d(t){var e=Object(c.a)(t),i=(1===e.screenSize?2:3)*devicePixelRatio,n={frameDevice:1,frameCanvas:i},a=function(t){return{frameDevice:t,frameCanvas:t*i}},r=function(t){return{frameDevice:t,frameCanvas:n.frameCanvas+t*i}},s=a(1),o=a(1===e.screenSize?60:30);return{scale:i,borderWidth:n,height:a(2*n.frameDevice+e.height+s.frameDevice+e.silkscreenHeight+o.frameDevice),width:a(2*n.frameDevice+e.width),screenHeight:a(e.height),screenWidth:a(e.width),screenLeft:r(0),screenTop:r(0),screenBottom:r(e.height),separatorHeight:s,silkscreenHeight:a(e.silkscreenHeight),silkscreenTop:r(e.height+s.frameDevice),silkscreenBottom:r(e.height+s.frameDevice+e.silkscreenHeight),buttonHeight:o,buttonWidth:o,buttonTop:r(e.height+s.frameDevice+e.silkscreenHeight),buttonBottom:r(e.height+s.frameDevice+e.silkscreenHeight+o.frameDevice)}}function b(t){var e,i,n=this,a=document.createElement("canvas");return function(r,s){return Object(o.a)(n,void 0,void 0,regeneratorRuntime.mark(function n(){var o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e!==r||i!==s){n.next=2;break}return n.abrupt("return",a);case 2:if(a.width=r,a.height=s,o=a.getContext("2d")){n.next=6;break}throw new Error("get a new browser");case 6:return n.t0=o,n.next=9,t;case 9:return n.t1=n.sent,n.t2=a.width,n.t3=a.height,n.t0.drawImage.call(n.t0,n.t1,0,0,n.t2,n.t3),e=r,i=s,n.abrupt("return",a);case 16:case"end":return n.stop()}},n)}))}}function g(t){return new Promise(function(e,i){var n=new Image;n.onload=function(){return e(n)},n.onerror=function(){return i()},n.src=t})}var y=b(g("assets/skin/silkscreen/v.svg")),p=b(g("assets/skin/silkscreen/m515.svg")),w=b(g("assets/skin/silkscreen/iiic.svg")),D=b(g("assets/skin/silkscreen/m100.svg")),k=b(g("assets/skin/silkscreen/m130.svg")),x=b(g("assets/skin/silkscreen/tungstenw.svg")),C=b(g("assets/skin/hard-buttons/v.svg")),S=b(g("assets/skin/hard-buttons/m515.svg")),H=b(g("assets/skin/hard-buttons/iiic.svg")),W=b(g("assets/skin/hard-buttons/iiix.svg")),M=b(g("assets/skin/hard-buttons/iiie.svg")),P=b(g("assets/skin/hard-buttons/m100.svg")),T=b(g("assets/skin/hard-buttons/m130.svg")),R=b(g("assets/skin/hard-buttons/tungstenw.svg")),I=function(){var i=function(){function i(){a(this,i),this.layout=d(f)}return s(i,[{key:"width",get:function(){return this.layout.width.frameCanvas}},{key:"height",get:function(){return this.layout.height.frameCanvas}},{key:"initialize",value:function(t,e){var i;return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.layout=d(null!==(i=null==e?void 0:e.device)&&void 0!==i?i:u.a.m515),t.width=this.width,t.height=this.height,a=t.getContext("2d")){n.next=4;break}throw new Error("canvas not supported - get a new browser");case 4:return this.ctx=a,this.session=e,this.fillCanvasRect(0,0,this.width,this.height,this.frameColor()),this.fillRect(0,0,this.layout.screenWidth.frameDevice,this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice+this.layout.separatorHeight.frameDevice+this.layout.buttonHeight.frameDevice,this.backgroundColor()),n.next=10,this.drawSilkscreen();case 10:return n.next=12,this.drawButtons();case 12:case"end":return n.stop()}},n,this)}))}},{key:"drawSilkscreen",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.ctx,!t.t0){t.next=14;break}return this.fillRect(this.layout.screenLeft.frameDevice,this.layout.silkscreenTop.frameDevice,this.layout.screenWidth.frameDevice,this.layout.silkscreenHeight.frameDevice,v),this.ctx.imageSmoothingEnabled=!0,this.ctx.imageSmoothingQuality="high",t.t1=this.ctx,t.next=8,this.silkscreenImage()(this.layout.screenWidth.frameCanvas,this.layout.silkscreenHeight.frameCanvas);case 8:t.t2=t.sent,t.t3=this.layout.borderWidth.frameCanvas,t.t4=this.layout.silkscreenTop.frameCanvas,t.t5=this.layout.screenWidth.frameCanvas,t.t6=this.layout.silkscreenHeight.frameCanvas,t.t1.drawImage.call(t.t1,t.t2,t.t3,t.t4,t.t5,t.t6);case 14:case"end":return t.stop()}},t,this)}))}},{key:"drawStatistics",value:function(t,i){var n,a;return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var s,o=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.ctx){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,this.drawSilkscreen();case 4:this.ctx.beginPath(),this.fillRect(this.layout.screenLeft.frameDevice,this.layout.silkscreenTop.frameDevice,this.layout.screenWidth.frameDevice,this.layout.silkscreenHeight.frameDevice,"rgba(255,255,255,0.6)"),s=1===Object(c.a)(null!==(a=null===(n=this.session)||void 0===n?void 0:n.device)&&void 0!==a?a:f).screenSize?2:1,this.ctx.font=6*this.layout.scale*s+"px monospace",this.ctx.fillStyle="black",[].concat(e(t||i?[]:["collecting statistics..."]),e(t?["last snapshot          : ".concat(new Date(t.timestamp).toLocaleTimeString()),"snapshot pages         : ".concat(t.pages),"snapshot time total    : ".concat(t.timeTotal.toFixed(2)," msec"),"snapshot time blocking : ".concat(t.timeBlocking.toFixed(2)," msec")]:[]),e(i?["host speed             : ".concat(i.hostSpeed.toFixed(2),"x"),"emulation speed        : ".concat(i.emulationSpeed.toFixed(2),"x"),"average FPS            : ".concat(i.averageFPS.toFixed(2))]:[])).forEach(function(t,e){return o.ctx.fillText(t,o.layout.screenLeft.frameCanvas+s*o.layout.scale,o.layout.silkscreenTop.frameCanvas+s*o.layout.scale*(8+6*e))});case 8:case"end":return r.stop()}},r,this)}))}},{key:"drawButtons",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ctx,!e.t0){e.next=17;break}return e.t1=this.ctx,e.next=5,this.buttonsImage()(this.layout.screenWidth.frameCanvas,this.layout.buttonHeight.frameCanvas);case 5:e.t2=e.sent,e.t3=this.layout.screenLeft.frameCanvas,e.t4=this.layout.buttonTop.frameCanvas,e.t5=this.layout.screenWidth.frameCanvas,e.t6=this.layout.buttonHeight.frameCanvas,e.t1.drawImage.call(e.t1,e.t2,e.t3,e.t4,e.t5,e.t6),t.includes(0)&&this.fillRect(0,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,"rgba(0,0,0,0.2)"),t.includes(1)&&this.fillRect(this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,"rgba(0,0,0,0.2)"),t.includes(2)&&this.fillRect(this.layout.screenWidth.frameDevice-2*this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,"rgba(0,0,0,0.2)"),t.includes(3)&&this.fillRect(this.layout.screenWidth.frameDevice-this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,"rgba(0,0,0,0.2)"),t.includes(4)&&this.fillRect(2*this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.screenWidth.frameDevice-4*this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice/2,"rgba(0,0,0,0.2)"),t.includes(5)&&this.fillRect(2*this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice+this.layout.buttonHeight.frameDevice/2,this.layout.screenWidth.frameDevice-4*this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice/2,"rgba(0,0,0,0.2)");case 17:case"end":return e.stop()}},e,this)}))}},{key:"drawEmulationCanvas",value:function(t){this.ctx&&(this.ctx.imageSmoothingEnabled=!1,this.ctx.drawImage(t,this.layout.screenLeft.frameCanvas,this.layout.screenTop.frameCanvas,this.layout.screenWidth.frameCanvas,this.layout.screenHeight.frameCanvas))}},{key:"eventToPalmCoordinates",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ctx){var i,n,a,r,s=this.ctx.canvas.getBoundingClientRect();s.width/s.height>this.width/this.height?(r=s.height,a=this.width/this.height*s.height,n=s.top,i=s.left+(s.width-a)/2):(a=s.width,r=this.height/this.width*s.width,i=s.left,n=s.top+(s.height-r)/2);var o=Math.floor((t.clientX-i)/a*this.width/this.layout.scale)-this.layout.borderWidth.frameDevice,c=Math.floor((t.clientY-n)/r*this.height/this.layout.scale)-this.layout.borderWidth.frameDevice;c>=this.layout.screenHeight.frameDevice&&(c<=this.layout.screenHeight.frameDevice+this.layout.separatorHeight.frameDevice?c=this.layout.screenHeight.frameDevice:c-=this.layout.separatorHeight.frameDevice);var u=this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice+this.layout.buttonHeight.frameDevice;if(e)o<0&&(o=0),o>=this.layout.screenWidth.frameDevice&&(o=this.layout.screenWidth.frameDevice-1),c<0&&(c=0),c>=u&&(c=u-1);else if(o<0||o>=this.layout.screenWidth.frameDevice||c<0||c>=u)return;return[o,c]}}},{key:"isButtons",value:function(e){return t(e,2)[1]>=this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice}},{key:"determineButton",value:function(e){var i=t(e,2),n=i[0],a=i[1];return n>=this.layout.screenWidth.frameDevice-this.layout.buttonWidth.frameDevice?3:n>=this.layout.screenWidth.frameDevice-2*this.layout.buttonWidth.frameDevice?2:n>=2*this.layout.buttonWidth.frameDevice?a>=this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice+this.layout.buttonHeight.frameDevice/2?5:4:n>=this.layout.buttonWidth.frameDevice?1:0}},{key:"fillRect",value:function(t,e,i,n,a){this.ctx&&(this.ctx.beginPath(),this.ctx.rect(this.layout.borderWidth.frameCanvas+this.layout.scale*t,this.layout.borderWidth.frameCanvas+this.layout.scale*e,this.layout.scale*i,this.layout.scale*n),this.ctx.fillStyle=a,this.ctx.fill())}},{key:"fillCanvasRect",value:function(t,e,i,n,a){this.ctx&&(this.ctx.beginPath(),this.ctx.rect(t,e,i,n),this.ctx.fillStyle=a,this.ctx.fill())}},{key:"silkscreenImage",value:function(){var t;switch(null===(t=this.session)||void 0===t?void 0:t.device){case u.a.m515:return p;case u.a.iiic:return w;case u.a.m100:case u.a.m105:return D;case u.a.m130:return k;case u.a.i710:return x;case u.a.iiic:case u.a.iiix:case u.a.palmVx:case u.a.palmV:default:return y}}},{key:"buttonsImage",value:function(){var t;switch(null===(t=this.session)||void 0===t?void 0:t.device){case u.a.m515:return S;case u.a.iiic:return H;case u.a.m100:case u.a.m105:return P;case u.a.m130:return T;case u.a.i710:return R;case u.a.iiix:return W;case u.a.iiie:return M;case u.a.palmVx:case u.a.palmV:default:return C}}},{key:"backgroundColor",value:function(){var t;return Object(c.c)(null===(t=this.session)||void 0===t?void 0:t.device)?"white":m}},{key:"frameColor",value:function(){var t;return Object(c.c)(null===(t=this.session)||void 0===t?void 0:t.device)?"white":"#ccc"}}]),i}();return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Fb({token:i,factory:i.\u0275fac,providedIn:"root"}),i}()}}])}();
//# sourceMappingURL=11-es5.3b668338954ed951dab9.js.map