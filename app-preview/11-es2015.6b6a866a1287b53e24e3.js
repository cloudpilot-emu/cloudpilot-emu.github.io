(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{hO9l:function(e,t,i){"use strict";i.r(t),i.d(t,"TabsPageModule",function(){return u});var a=i("ofXK"),s=i("3Pt+"),n=i("TEn/"),o=i("tyNb"),r=i("fXoL"),h=i("pEgL");const c=[{path:"tab",component:(()=>{class e{constructor(e,t){this.router=e,this.canvasDisplayService=t,this.updateUseSmallUI=()=>{const e=!!document.querySelector("html.md"),t=e?56:44;this.useSmallUI=this.canvasArea(window.innerHeight-t-(e?57:51)-6,window.innerWidth-6)<this.canvasArea(window.innerHeight-t-25-6,window.innerWidth-6)},this.useSmallUI=!1,window.addEventListener("resize",this.updateUseSmallUI),this.updateUseSmallUI()}get smallUI(){return"/tab/emulation"===this.router.url&&this.useSmallUI}canvasArea(e,t){let i,a;return e=Math.min(e,this.canvasDisplayService.height/devicePixelRatio),(t=Math.min(t,this.canvasDisplayService.width/devicePixelRatio))/e>this.canvasDisplayService.width/this.canvasDisplayService.height?(a=e,i=e/this.canvasDisplayService.height*this.canvasDisplayService.width):(i=t,a=t/this.canvasDisplayService.width*this.canvasDisplayService.height),i*a}}return e.\u0275fac=function(t){return new(t||e)(r.Jb(o.g),r.Jb(h.a))},e.\u0275cmp=r.Db({type:e,selectors:[["app-tabs"]],decls:19,vars:2,consts:[[1,"overflow-wrapper"],["slot","bottom"],["tab","emulation"],["name","phone-portrait-outline"],["tab","sessions"],["name","albums-outline"],["tab","settings"],["name","cog-outline"],["tab","about"],["name","help-outline"]],template:function(e,t){1&e&&(r.Mb(0,"ion-tabs"),r.Mb(1,"div",0),r.Mb(2,"ion-tab-bar",1),r.Mb(3,"ion-tab-button",2),r.Kb(4,"ion-icon",3),r.Mb(5,"ion-label"),r.hc(6,"Emulator"),r.Lb(),r.Lb(),r.Mb(7,"ion-tab-button",4),r.Kb(8,"ion-icon",5),r.Mb(9,"ion-label"),r.hc(10,"Sessions"),r.Lb(),r.Lb(),r.Mb(11,"ion-tab-button",6),r.Kb(12,"ion-icon",7),r.Mb(13,"ion-label"),r.hc(14,"Settings"),r.Lb(),r.Lb(),r.Mb(15,"ion-tab-button",8),r.Kb(16,"ion-icon",9),r.Mb(17,"ion-label"),r.hc(18,"About"),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb()),2&e&&(r.zb(2),r.Bb("small-ui",t.smallUI))},directives:[n.w,n.u,n.v,n.h,n.n],styles:["ion-tab-bar[_ngcontent-%COMP%]{min-width:280px}ion-tab-bar.small-ui[_ngcontent-%COMP%]{height:25px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:21px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-icon.md[_ngcontent-%COMP%]{margin-top:3px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:none}.overflow-wrapper[_ngcontent-%COMP%]{overflow-x:auto}"]}),e})(),children:[{path:"emulation",loadChildren:()=>Promise.all([i.e(0),i.e(13)]).then(i.bind(null,"6aA7")).then(e=>e.EmulationPageModule)},{path:"sessions",loadChildren:()=>Promise.all([i.e(0),i.e(10)]).then(i.bind(null,"/NlI")).then(e=>e.SessionsPageModule)},{path:"settings",loadChildren:()=>Promise.all([i.e(0),i.e(14)]).then(i.bind(null,"07hj")).then(e=>e.SettingsPageModule)},{path:"about",loadChildren:()=>Promise.all([i.e(0),i.e(12)]).then(i.bind(null,"Ht3H")).then(e=>e.AboutPageModule)},{path:"",redirectTo:"/tab/sessions",pathMatch:"full"}]},{path:"",redirectTo:"/tab/sessions",pathMatch:"full"}];let l=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({imports:[[o.i.forChild(c)],o.i]}),e})(),u=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({imports:[[n.A,a.b,s.e,l]]}),e})()},pEgL:function(e,t,i){"use strict";i.d(t,"a",function(){return L});var a=i("mrSG"),s=i("N/dm"),n=i("z9fa"),o=i("FJT/"),r=i("fXoL");const h=i.e(15).then(i.bind(null,"CIXq")),c=n.a.m515,l=o.a[2],u=o.a[0];function m(e){const t=Object(s.a)(e),i=(1===t.screenSize?2:3)*devicePixelRatio,a={frameDevice:1,frameCanvas:i},n=e=>({frameDevice:e,frameCanvas:e*i}),o=e=>({frameDevice:e,frameCanvas:a.frameCanvas+e*i}),r=n(1),h=n(1===t.screenSize?60:30);return{scale:i,borderWidth:a,height:n(2*a.frameDevice+t.height+r.frameDevice+t.silkscreenHeight+h.frameDevice),width:n(2*a.frameDevice+t.width),screenHeight:n(t.height),screenWidth:n(t.width),screenLeft:o(0),screenTop:o(0),screenBottom:o(t.height),separatorHeight:r,silkscreenHeight:n(t.silkscreenHeight),silkscreenTop:o(t.height+r.frameDevice),silkscreenBottom:o(t.height+r.frameDevice+t.silkscreenHeight),buttonHeight:h,buttonWidth:h,buttonTop:o(t.height+r.frameDevice+t.silkscreenHeight),buttonBottom:o(t.height+r.frameDevice+t.silkscreenHeight+h.frameDevice)}}const d=e=>function(e){let t,i;const s=document.createElement("canvas");return(n,o)=>Object(a.a)(this,void 0,void 0,function*(){if(t===n&&i===o)return s;s.width=n,s.height=o;const a=s.getContext("2d");if(!a)throw new Error("get a new browser");return a.drawImage(yield e(),0,0,s.width,s.height),t=n,i=o,s})}(function(e){let t;return()=>Object(a.a)(this,void 0,void 0,function*(){if(!t){const i=(yield h)[e];t=new Promise((e,t)=>{const a=new Image;a.onload=()=>e(a),a.onerror=()=>t(),a.src=`data:image/svg+xml;base64,${btoa(i)}`})}return t})}(e)),v=d("SILKSCREEN_V"),f=d("SILKSCREEN_M500"),b=d("SILKSCREEN_M515"),g=d("SILKSCREEN_IIIC"),y=d("SILKSCREEN_M100"),p=d("SILKSCREEN_M130"),D=d("SILKSCREEN_TUNGSTEN_W"),w=d("SILKSCREEN_PILOT"),S=d("HARD_BUTTONS_PALM_V"),C=d("HARD_BUTTONS_M515"),H=d("HARD_BUTTONS_M500"),x=d("HARD_BUTTONS_IIIC"),T=d("HARD_BUTTONS_IIIX"),I=d("HARD_BUTTONS_IIIE"),W=d("HARD_BUTTONS_M100"),_=d("HARD_BUTTONS_M125"),M=d("HARD_BUTTONS_M130"),P=d("HARD_BUTTONS_TUNGSTEN_W"),R=d("HARD_BUTTONS_PILOT");let L=(()=>{class e{constructor(){this.layout=m(c)}get width(){return this.layout.width.frameCanvas}get height(){return this.layout.height.frameCanvas}initialize(e,t){var i;return Object(a.a)(this,void 0,void 0,function*(){this.layout=m(null!==(i=null==t?void 0:t.device)&&void 0!==i?i:n.a.m515),e.width=this.width,e.height=this.height;const a=e.getContext("2d");if(!a)throw new Error("canvas not supported - get a new browser");this.ctx=a,this.session=t,this.fillCanvasRect(0,0,this.width,this.height,this.frameColor()),this.fillRect(0,0,this.layout.screenWidth.frameDevice,this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice+this.layout.separatorHeight.frameDevice+this.layout.buttonHeight.frameDevice,this.backgroundColor()),yield Promise.all([this.drawSilkscreen(),this.drawButtons()])})}drawSilkscreen(){return Object(a.a)(this,void 0,void 0,function*(){this.ctx&&(this.fillRect(this.layout.screenLeft.frameDevice,this.layout.silkscreenTop.frameDevice,this.layout.screenWidth.frameDevice,this.layout.silkscreenHeight.frameDevice,l),this.ctx.imageSmoothingEnabled=!0,this.ctx.imageSmoothingQuality="high",this.ctx.drawImage(yield this.silkscreenImage()(this.layout.screenWidth.frameCanvas,this.layout.silkscreenHeight.frameCanvas),this.layout.borderWidth.frameCanvas,this.layout.silkscreenTop.frameCanvas,this.layout.screenWidth.frameCanvas,this.layout.silkscreenHeight.frameCanvas))})}drawStatistics(e,t){var i,n;return Object(a.a)(this,void 0,void 0,function*(){if(!this.ctx)return;yield this.drawSilkscreen(),this.ctx.beginPath(),this.fillRect(this.layout.screenLeft.frameDevice,this.layout.silkscreenTop.frameDevice,this.layout.screenWidth.frameDevice,this.layout.silkscreenHeight.frameDevice,"rgba(255,255,255,0.6)");const a=1===Object(s.a)(null!==(n=null===(i=this.session)||void 0===i?void 0:i.device)&&void 0!==n?n:c).screenSize?2:1;this.ctx.font=6*this.layout.scale*a+"px monospace",this.ctx.fillStyle="black",[...e||t?[]:["collecting statistics..."],...e?[`last snapshot          : ${new Date(e.timestamp).toLocaleTimeString()}`,`snapshot pages         : ${e.pages}`,`snapshot time total    : ${e.timeTotal.toFixed(2)} msec`,`snapshot time blocking : ${e.timeBlocking.toFixed(2)} msec`]:[],...t?[`host speed             : ${t.hostSpeed.toFixed(2)}x`,`emulation speed        : ${t.emulationSpeed.toFixed(2)}x`,`average FPS            : ${t.averageFPS.toFixed(2)}`]:[]].forEach((e,t)=>this.ctx.fillText(e,this.layout.screenLeft.frameCanvas+a*this.layout.scale,this.layout.silkscreenTop.frameCanvas+a*this.layout.scale*(8+6*t)))})}drawButtons(e=[]){return Object(a.a)(this,void 0,void 0,function*(){this.ctx&&(this.ctx.drawImage(yield this.buttonsImage()(this.layout.screenWidth.frameCanvas,this.layout.buttonHeight.frameCanvas),this.layout.screenLeft.frameCanvas,this.layout.buttonTop.frameCanvas,this.layout.screenWidth.frameCanvas,this.layout.buttonHeight.frameCanvas),e.includes(0)&&this.fillRect(0,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,"rgba(0,0,0,0.2)"),e.includes(1)&&this.fillRect(this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,"rgba(0,0,0,0.2)"),e.includes(2)&&this.fillRect(this.layout.screenWidth.frameDevice-2*this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,"rgba(0,0,0,0.2)"),e.includes(3)&&this.fillRect(this.layout.screenWidth.frameDevice-this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,"rgba(0,0,0,0.2)"),e.includes(4)&&this.fillRect(2*this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.screenWidth.frameDevice-4*this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice/2,"rgba(0,0,0,0.2)"),e.includes(5)&&this.fillRect(2*this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice+this.layout.buttonHeight.frameDevice/2,this.layout.screenWidth.frameDevice-4*this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice/2,"rgba(0,0,0,0.2)"))})}drawEmulationCanvas(e){this.ctx&&(this.ctx.imageSmoothingEnabled=!1,this.ctx.drawImage(e,this.layout.screenLeft.frameCanvas,this.layout.screenTop.frameCanvas,this.layout.screenWidth.frameCanvas,this.layout.screenHeight.frameCanvas))}eventToPalmCoordinates(e,t=!1){if(!this.ctx)return;const i=this.ctx.canvas.getBoundingClientRect();let a,s,n,o;i.width/i.height>this.width/this.height?(o=i.height,n=this.width/this.height*i.height,s=i.top,a=i.left+(i.width-n)/2):(n=i.width,o=this.height/this.width*i.width,a=i.left,s=i.top+(i.height-o)/2);let r=Math.floor((e.clientX-a)/n*this.width/this.layout.scale)-this.layout.borderWidth.frameDevice,h=Math.floor((e.clientY-s)/o*this.height/this.layout.scale)-this.layout.borderWidth.frameDevice;h>=this.layout.screenHeight.frameDevice&&(h<=this.layout.screenHeight.frameDevice+this.layout.separatorHeight.frameDevice?h=this.layout.screenHeight.frameDevice:h-=this.layout.separatorHeight.frameDevice);const c=this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice+this.layout.buttonHeight.frameDevice;if(t)r<0&&(r=0),r>=this.layout.screenWidth.frameDevice&&(r=this.layout.screenWidth.frameDevice-1),h<0&&(h=0),h>=c&&(h=c-1);else if(r<0||r>=this.layout.screenWidth.frameDevice||h<0||h>=c)return;return[r,h]}isButtons([,e]){return e>=this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice}determineButton([e,t]){return e>=this.layout.screenWidth.frameDevice-this.layout.buttonWidth.frameDevice?3:e>=this.layout.screenWidth.frameDevice-2*this.layout.buttonWidth.frameDevice?2:e>=2*this.layout.buttonWidth.frameDevice?t>=this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice+this.layout.buttonHeight.frameDevice/2?5:4:e>=this.layout.buttonWidth.frameDevice?1:0}fillRect(e,t,i,a,s){this.ctx&&(this.ctx.beginPath(),this.ctx.rect(this.layout.borderWidth.frameCanvas+this.layout.scale*e,this.layout.borderWidth.frameCanvas+this.layout.scale*t,this.layout.scale*i,this.layout.scale*a),this.ctx.fillStyle=s,this.ctx.fill())}fillCanvasRect(e,t,i,a,s){this.ctx&&(this.ctx.beginPath(),this.ctx.rect(e,t,i,a),this.ctx.fillStyle=s,this.ctx.fill())}silkscreenImage(){var e;switch(null===(e=this.session)||void 0===e?void 0:e.device){case n.a.palmPilot:case n.a.pilot:case n.a.iii:case n.a.palmVII:return w;case n.a.m500:return f;case n.a.m505:case n.a.m515:return b;case n.a.iiic:return g;case n.a.m100:case n.a.m105:case n.a.m125:return y;case n.a.m130:return p;case n.a.i710:return D;case n.a.iiic:case n.a.iiix:case n.a.iiixe:case n.a.palmVx:case n.a.palmV:default:return v}}buttonsImage(){var e;switch(null===(e=this.session)||void 0===e?void 0:e.device){case n.a.pilot:case n.a.palmPilot:return R;case n.a.m500:return H;case n.a.m505:case n.a.m515:return C;case n.a.iiic:return x;case n.a.m100:case n.a.m105:return W;case n.a.m125:return _;case n.a.m130:return M;case n.a.i710:return P;case n.a.iii:case n.a.iiix:case n.a.iiixe:case n.a.palmVII:return T;case n.a.iiie:return I;case n.a.palmVx:case n.a.palmV:default:return S}}backgroundColor(){var e;return Object(s.c)(null===(e=this.session)||void 0===e?void 0:e.device)?"white":u}frameColor(){var e;return Object(s.c)(null===(e=this.session)||void 0===e?void 0:e.device)?"white":"#ccc"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);
//# sourceMappingURL=11-es2015.6b6a866a1287b53e24e3.js.map