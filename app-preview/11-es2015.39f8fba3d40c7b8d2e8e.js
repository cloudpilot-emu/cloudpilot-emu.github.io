(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{hO9l:function(t,i,s){"use strict";s.r(i),s.d(i,"TabsPageModule",function(){return d});var e=s("ofXK"),n=s("3Pt+"),h=s("TEn/"),o=s("tyNb"),a=s("fXoL"),r=s("pEgL");const c=[{path:"tab",component:(()=>{class t{constructor(t,i){this.router=t,this.canvasDisplayService=i,this.updateUseSmallUI=()=>{const t=!!document.querySelector("html.md"),i=t?56:44;this.useSmallUI=this.canvasArea(window.innerHeight-i-(t?57:51)-6,window.innerWidth-6)<this.canvasArea(window.innerHeight-i-25-6,window.innerWidth-6)},this.useSmallUI=!1,window.addEventListener("resize",this.updateUseSmallUI),this.updateUseSmallUI()}get smallUI(){return"/tab/emulation"===this.router.url&&this.useSmallUI}canvasArea(t,i){let s,e;return t=Math.min(t,this.canvasDisplayService.height/devicePixelRatio),(i=Math.min(i,this.canvasDisplayService.width/devicePixelRatio))/t>this.canvasDisplayService.width/this.canvasDisplayService.height?(e=t,s=t/this.canvasDisplayService.height*this.canvasDisplayService.width):(s=i,e=i/this.canvasDisplayService.width*this.canvasDisplayService.height),s*e}}return t.\u0275fac=function(i){return new(i||t)(a.Jb(o.g),a.Jb(r.a))},t.\u0275cmp=a.Db({type:t,selectors:[["app-tabs"]],decls:19,vars:2,consts:[[1,"overflow-wrapper"],["slot","bottom"],["tab","emulation"],["name","phone-portrait-outline"],["tab","sessions"],["name","albums-outline"],["tab","settings"],["name","cog-outline"],["tab","about"],["name","help-outline"]],template:function(t,i){1&t&&(a.Mb(0,"ion-tabs"),a.Mb(1,"div",0),a.Mb(2,"ion-tab-bar",1),a.Mb(3,"ion-tab-button",2),a.Kb(4,"ion-icon",3),a.Mb(5,"ion-label"),a.hc(6,"Emulator"),a.Lb(),a.Lb(),a.Mb(7,"ion-tab-button",4),a.Kb(8,"ion-icon",5),a.Mb(9,"ion-label"),a.hc(10,"Sessions"),a.Lb(),a.Lb(),a.Mb(11,"ion-tab-button",6),a.Kb(12,"ion-icon",7),a.Mb(13,"ion-label"),a.hc(14,"Settings"),a.Lb(),a.Lb(),a.Mb(15,"ion-tab-button",8),a.Kb(16,"ion-icon",9),a.Mb(17,"ion-label"),a.hc(18,"About"),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Lb()),2&t&&(a.zb(2),a.Bb("small-ui",i.smallUI))},directives:[h.u,h.s,h.t,h.h,h.n],styles:["ion-tab-bar[_ngcontent-%COMP%]{min-width:280px}ion-tab-bar.small-ui[_ngcontent-%COMP%]{height:25px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:21px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-icon.md[_ngcontent-%COMP%]{margin-top:3px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:none}.overflow-wrapper[_ngcontent-%COMP%]{overflow-x:auto}"]}),t})(),children:[{path:"emulation",loadChildren:()=>Promise.all([s.e(0),s.e(13)]).then(s.bind(null,"6aA7")).then(t=>t.EmulationPageModule)},{path:"sessions",loadChildren:()=>Promise.all([s.e(0),s.e(10)]).then(s.bind(null,"/NlI")).then(t=>t.SessionsPageModule)},{path:"settings",loadChildren:()=>Promise.all([s.e(0),s.e(14)]).then(s.bind(null,"07hj")).then(t=>t.SettingsPageModule)},{path:"about",loadChildren:()=>Promise.all([s.e(0),s.e(12)]).then(s.bind(null,"Ht3H")).then(t=>t.AboutPageModule)},{path:"",redirectTo:"/tab/sessions",pathMatch:"full"}]},{path:"",redirectTo:"/tab/sessions",pathMatch:"full"}];let l=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=a.Hb({type:t}),t.\u0275inj=a.Gb({imports:[[o.i.forChild(c)],o.i]}),t})(),d=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=a.Hb({type:t}),t.\u0275inj=a.Gb({imports:[[h.y,e.b,n.e,l]]}),t})()},pEgL:function(t,i,s){"use strict";s.d(i,"a",function(){return S});var e=s("mrSG"),n=s("z9fa"),h=s("bucj"),o=s("N/dm"),a=s("fXoL");const r=h.b[2],c=h.b[0];function l(t){return new Promise((i,s)=>{const e=new Image;e.onload=()=>i(e),e.onerror=()=>s(),e.src=t})}function d(t){const i=new Map;return s=>(i.has(s)||i.set(s,function(t,i){return Object(e.a)(this,void 0,void 0,function*(){const s=document.createElement("canvas");s.width=(1===i?640:480)*devicePixelRatio,s.height=(1===i?120:90)*devicePixelRatio;const e=s.getContext("2d");if(!e)throw new Error("get a new browser");return e.drawImage(yield l(t),0,0,s.width,s.height),s})}(t,s)),i.get(s))}const u=l("assets/skin/silkscreen/v.svg"),b=l("assets/skin/silkscreen/m515.svg"),m=l("assets/skin/silkscreen/iiic.svg"),g=l("assets/skin/silkscreen/m130.svg"),w=d("assets/skin/hard-buttons/v.svg"),p=d("assets/skin/hard-buttons/m515.svg"),v=d("assets/skin/hard-buttons/iiic.svg"),f=d("assets/skin/hard-buttons/m130.svg"),x=Object(o.a)(n.a.m515);[v,w,f,p].forEach(t=>{t(0),t(1)});let S=(()=>{class t{constructor(){this.dimensions=x}get scale(){return(1===this.dimensions.screenSize?2:3)*devicePixelRatio}get border(){return 1*this.scale}get width(){return this.scale*this.dimensions.width+2*this.border}get separator(){return 1===this.dimensions.screenSize?2:1}get buttonsHeight(){return 1===this.dimensions.screenSize?60:30}get height(){return this.scale*(this.dimensions.height+this.dimensions.silkscreenHeight+this.separator+this.buttonsHeight)+2*this.border}initialize(t,i){return Object(e.a)(this,void 0,void 0,function*(){this.dimensions=i?Object(o.a)(i.device):x,t.width=this.width,t.height=this.height;const s=t.getContext("2d");if(!s)throw new Error("canvas not supported - get a new browser");this.ctx=s,this.session=i,this.fillCanvasRect(0,0,this.width,this.height,this.backgroundColor()),yield this.drawSilkscreen(),yield this.drawButtons()})}drawSilkscreen(){return Object(e.a)(this,void 0,void 0,function*(){if(!this.ctx)return;const t=yield this.silkscreenImage();this.fillRect(0,this.dimensions.height+this.separator,this.dimensions.width,this.dimensions.silkscreenHeight,r),this.ctx.imageSmoothingEnabled=!0,this.ctx.imageSmoothingQuality="high",this.ctx.drawImage(t,this.border,this.border+(this.dimensions.height+this.separator)*this.scale,this.dimensions.width*this.scale,this.dimensions.silkscreenHeight*this.scale)})}drawStatistics(t,i){return Object(e.a)(this,void 0,void 0,function*(){if(!this.ctx)return;yield this.drawSilkscreen(),this.ctx.beginPath(),this.fillRect(0,this.dimensions.height+this.separator,this.dimensions.width,this.dimensions.silkscreenHeight,"rgba(255,255,255,0.6)");const s=1===this.dimensions.screenSize?2:1;this.ctx.font=6*this.scale*s+"px monospace",this.ctx.fillStyle="black",[...t||i?[]:["collecting statistics..."],...t?[`last snapshot          : ${new Date(t.timestamp).toLocaleTimeString()}`,`snapshot pages         : ${t.pages}`,`snapshot time total    : ${t.timeTotal.toFixed(2)} msec`,`snapshot time blocking : ${t.timeBlocking.toFixed(2)} msec`]:[],...i?[`host speed             : ${i.hostSpeed.toFixed(2)}x`,`emulation speed        : ${i.emulationSpeed.toFixed(2)}x`,`average FPS            : ${i.averageFPS.toFixed(2)}`]:[]].forEach((t,i)=>this.ctx.fillText(t,this.border+s*this.scale,this.border+(this.dimensions.height+s*(8+6*i))*this.scale))})}drawButtons(t=[]){return Object(e.a)(this,void 0,void 0,function*(){if(!this.ctx)return;const i=this.dimensions.height+this.dimensions.silkscreenHeight+this.separator,s=1===this.dimensions.screenSize?60:30;this.ctx.drawImage(yield this.buttonsImage(),this.border,this.border+this.scale*i,this.dimensions.width*this.scale,this.buttonsHeight*this.scale),t.includes(0)&&this.fillRect(0,i,s,this.buttonsHeight,"rgba(0,0,0,0.2)"),t.includes(1)&&this.fillRect(s,i,s,this.buttonsHeight,"rgba(0,0,0,0.2)"),t.includes(2)&&this.fillRect(this.dimensions.width-2*s,i,s,this.buttonsHeight,"rgba(0,0,0,0.2)"),t.includes(3)&&this.fillRect(this.dimensions.width-s,i,s,this.buttonsHeight,"rgba(0,0,0,0.2)"),t.includes(4)&&this.fillRect(2*s,i,this.dimensions.width-4*s,this.buttonsHeight/2,"rgba(0,0,0,0.2)"),t.includes(5)&&this.fillRect(2*s,i+this.buttonsHeight/2,this.dimensions.width-4*s,this.buttonsHeight/2,"rgba(0,0,0,0.2)")})}drawEmulationCanvas(t){this.ctx&&(this.ctx.imageSmoothingEnabled=!1,this.ctx.drawImage(t,this.border,this.border,this.scale*this.dimensions.width,this.scale*this.dimensions.height))}eventToPalmCoordinates(t,i=!1){if(!this.ctx)return;const s=this.ctx.canvas.getBoundingClientRect();let e,n,h,o;s.width/s.height>this.width/this.height?(o=s.height,h=this.width/this.height*s.height,n=s.top,e=s.left+(s.width-h)/2):(h=s.width,o=this.height/this.width*s.width,e=s.left,n=s.top+(s.height-o)/2);let a=Math.floor((t.clientX-e)/h*this.width/this.scale)-this.border/this.scale,r=Math.floor((t.clientY-n)/o*this.height/this.scale)-this.border/this.scale;r>=this.dimensions.height+this.separator&&(r-=1);const c=this.dimensions.height+this.dimensions.silkscreenHeight+this.buttonsHeight;if(i)a<0&&(a=0),a>=this.dimensions.width&&(a=this.dimensions.width-1),r<0&&(r=0),r>=c&&(r=this.dimensions.height+this.dimensions.silkscreenHeight-1);else if(a<0||a>=this.dimensions.width||r<0||r>=c)return;return[a,r]}isButtons([,t]){return t>=this.dimensions.height+this.dimensions.silkscreenHeight}determineButton([t,i]){const s=1===this.dimensions.screenSize?60:30;return t>=this.dimensions.width-s?3:t>=this.dimensions.width-2*s?2:t>=2*s?i>=this.dimensions.height+this.dimensions.silkscreenHeight+this.separator+this.buttonsHeight/2?5:4:t>=s?1:0}fillRect(t,i,s,e,n){this.ctx&&(this.ctx.beginPath(),this.ctx.rect(this.border+this.scale*t,this.border+this.scale*i,this.scale*s,this.scale*e),this.ctx.fillStyle=n,this.ctx.fill())}fillCanvasRect(t,i,s,e,n){this.ctx&&(this.ctx.beginPath(),this.ctx.rect(t,i,s,e),this.ctx.fillStyle=n,this.ctx.fill())}silkscreenImage(){var t;switch(null===(t=this.session)||void 0===t?void 0:t.device){case n.a.m515:return b;case n.a.iiic:return m;case n.a.i710:case n.a.m130:return g;case n.a.palmV:default:return u}}buttonsImage(){var t;switch(null===(t=this.session)||void 0===t?void 0:t.device){case n.a.m515:case n.a.i710:return p(this.dimensions.screenSize);case n.a.iiic:return v(this.dimensions.screenSize);case n.a.m130:return f(this.dimensions.screenSize);case n.a.palmV:default:return w(this.dimensions.screenSize)}}backgroundColor(){var t;return Object(n.b)(null===(t=this.session)||void 0===t?void 0:t.device)?"white":c}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=a.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);
//# sourceMappingURL=11-es2015.39f8fba3d40c7b8d2e8e.js.map