{"version":3,"sources":["webpack:///src/app/tabs/tabs.page.ts","webpack:///src/app/tabs/tabs-routing.module.ts","webpack:///src/app/tabs/tabs.module.ts","webpack:///src/app/tabs/tabs.page.html","webpack:///src/app/service/canvas-display.service.ts"],"names":["canvasArea","availableHeight","availableWidth","scaledWidth","scaledHeight","Math","min","devicePixelRatio","TabsPage","TabsPageModule","TabsPageRoutingModule","routes","path","component","router","updateUseSmallUI","isMD","document","querySelector","headerHeight","this","useSmallUI","window","innerHeight","innerWidth","addEventListener","url","children","loadChildren","then","m","EmulationPageModule","SessionsPageModule","SettingsPageModule","AboutPageModule","redirectTo","pathMatch","forChild","BACKGROUND_COLOR_SILKSCREEN","BACKGROUND_COLOR_GRAYSCALE_DEVICE","SCALE","BORDER","round","WIDTH","HEIGHT","loadImage","Promise","resolve","reject","image","Image","onload","onerror","src","prerenderButtons","canvas","createElement","width","height","ctx","getContext","Error","drawImage","IMAGE_SILKSCREEN_V","IMAGE_SILKSCREEN_M515","IMAGE_SILKSCREEN_IIIC","IMAGE_SILKSCREEN_M130","IMAGE_BUTTONS_V","IMAGE_BUTTONS_M515","IMAGE_BUTTONS_IIIC","IMAGE_BUTTONS_M130","CanvasDisplayService","session","backgroundColor","fillCanvasRect","drawSilkscreen","drawButtons","silkscreenImage","fillRect","imageSmoothingEnabled","imageSmoothingQuality","snapshotStatistics","emulationStatistics","beginPath","font","fillStyle","Date","timestamp","toLocaleTimeString","pages","timeTotal","toFixed","timeBlocking","hostSpeed","emulationSpeed","averageFPS","forEach","line","i","fillText","activeButtons","buttonsImage","includes","x","y","style","rect","fill","device","m515","iiic","m130","palmV"],"mappings":"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","file":"x","sourcesContent":["import { HEIGHT, WIDTH } from '../service/canvas-display.service';\n\nimport { Component } from '@angular/core';\nimport { Router } from '@angular/router';\n\nfunction canvasArea(availableHeight: number, availableWidth: number): number {\n    availableHeight = Math.min(availableHeight, HEIGHT / devicePixelRatio);\n    availableWidth = Math.min(availableWidth, WIDTH / devicePixelRatio);\n\n    let scaledWidth: number;\n    let scaledHeight: number;\n\n    if (availableWidth / availableHeight > WIDTH / HEIGHT) {\n        scaledHeight = availableHeight;\n        scaledWidth = (availableHeight / HEIGHT) * WIDTH;\n    } else {\n        scaledWidth = availableWidth;\n        scaledHeight = (availableWidth / WIDTH) * HEIGHT;\n    }\n\n    return scaledWidth * scaledHeight;\n}\n\n@Component({\n    selector: 'app-tabs',\n    templateUrl: 'tabs.page.html',\n    styleUrls: ['tabs.page.scss'],\n})\nexport class TabsPage {\n    constructor(private router: Router) {\n        window.addEventListener('resize', this.updateUseSmallUI);\n\n        this.updateUseSmallUI();\n    }\n\n    get smallUI(): boolean {\n        return this.router.url === '/tab/emulation' && this.useSmallUI;\n    }\n\n    private updateUseSmallUI = (): void => {\n        const isMD = !!document.querySelector('html.md');\n        const headerHeight = isMD ? 56 : 44;\n        const tabbarHeight = isMD ? 57 : 51;\n        const canvasPadding = 6;\n\n        this.useSmallUI =\n            canvasArea(window.innerHeight - headerHeight - tabbarHeight - canvasPadding, window.innerWidth - 6) <\n            canvasArea(window.innerHeight - headerHeight - 25 - canvasPadding, window.innerWidth - 6);\n    };\n\n    private useSmallUI = false;\n}\n","import { RouterModule, Routes } from '@angular/router';\n\nimport { NgModule } from '@angular/core';\nimport { TabsPage } from './tabs.page';\n\nconst routes: Routes = [\n    {\n        path: 'tab',\n        component: TabsPage,\n        children: [\n            {\n                path: 'emulation',\n                loadChildren: () => import('../page/emulation/emulation.module').then((m) => m.EmulationPageModule),\n            },\n            {\n                path: 'sessions',\n                loadChildren: () => import('../page/sessions/sessions.module').then((m) => m.SessionsPageModule),\n            },\n            {\n                path: 'settings',\n                loadChildren: () => import('../page/settings/settings.module').then((m) => m.SettingsPageModule),\n            },\n            {\n                path: 'about',\n                loadChildren: () => import('../page/about/about.module').then((m) => m.AboutPageModule),\n            },\n            {\n                path: '',\n                redirectTo: '/tab/sessions',\n                pathMatch: 'full',\n            },\n        ],\n    },\n    {\n        path: '',\n        redirectTo: '/tab/sessions',\n        pathMatch: 'full',\n    },\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule],\n})\nexport class TabsPageRoutingModule {}\n","import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { TabsPage } from './tabs.page';\nimport { TabsPageRoutingModule } from './tabs-routing.module';\n\n@NgModule({\n    imports: [IonicModule, CommonModule, FormsModule, TabsPageRoutingModule],\n    declarations: [TabsPage],\n})\nexport class TabsPageModule {}\n","<ion-tabs>\n\n  <div class=\"overflow-wrapper\">\n    <ion-tab-bar [class.small-ui]=\"smallUI\" slot=\"bottom\">\n      <ion-tab-button tab=\"emulation\">\n        <ion-icon name=\"phone-portrait-outline\"></ion-icon>\n        <ion-label>Emulator</ion-label>\n      </ion-tab-button>\n\n      <ion-tab-button tab=\"sessions\">\n        <ion-icon name=\"albums-outline\"></ion-icon>\n        <ion-label>Sessions</ion-label>\n      </ion-tab-button>\n\n      <ion-tab-button tab=\"settings\">\n        <ion-icon name=\"cog-outline\"></ion-icon>\n        <ion-label>Settings</ion-label>\n      </ion-tab-button>\n\n      <ion-tab-button tab=\"about\">\n        <ion-icon name=\"help-outline\"></ion-icon>\n        <ion-label>About</ion-label>\n      </ion-tab-button>\n    </ion-tab-bar>\n  </div>\n\n</ion-tabs>\n","import { DeviceId, isColor } from '../model/DeviceId';\n\nimport { EmulationStatistics } from './../model/EmulationStatistics';\nimport { GRAYSCALE_PALETTE_HEX } from './emulation.service';\nimport { Injectable } from '@angular/core';\nimport { PalmButton } from '../helper/Cloudpilot';\nimport { Session } from '../model/Session';\nimport { SnapshotStatistics } from './../model/SnapshotStatistics';\n\nconst BACKGROUND_COLOR_SILKSCREEN = GRAYSCALE_PALETTE_HEX[2];\nconst BACKGROUND_COLOR_GRAYSCALE_DEVICE = GRAYSCALE_PALETTE_HEX[0];\nconst BACKGROUND_COLOR_COLOR_DEVICE = 'white';\nconst BACKGROUND_ACTIVE_BUTTON = 'rgba(0,0,0,0.2)';\n\nexport const SCALE = 3 * devicePixelRatio;\nexport const BORDER = Math.round(1 * SCALE);\nexport const WIDTH = SCALE * 160 + 2 * BORDER;\nexport const HEIGHT = SCALE * 251 + 2 * BORDER;\n\nfunction loadImage(url: string): Promise<HTMLImageElement> {\n    return new Promise<HTMLImageElement>((resolve, reject) => {\n        const image = new Image();\n\n        image.onload = () => resolve(image);\n        image.onerror = () => reject();\n\n        image.src = url;\n    });\n}\n\nasync function prerenderButtons(url: string): Promise<HTMLCanvasElement> {\n    const canvas = document.createElement('canvas');\n    canvas.width = 160 * SCALE;\n    canvas.height = 30 * SCALE;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) throw new Error('get a new browser');\n\n    ctx.drawImage(await loadImage(url), 0, 0, SCALE * 160, SCALE * 30);\n\n    return canvas;\n}\n\nconst IMAGE_SILKSCREEN_V = loadImage('assets/skin/silkscreen/v.svg');\nconst IMAGE_SILKSCREEN_M515 = loadImage('assets/skin/silkscreen/m515.svg');\nconst IMAGE_SILKSCREEN_IIIC = loadImage('assets/skin/silkscreen/iiic.svg');\nconst IMAGE_SILKSCREEN_M130 = loadImage('assets/skin/silkscreen/m130.svg');\n\nconst IMAGE_BUTTONS_V = prerenderButtons('assets/skin/hard-buttons/v.svg');\nconst IMAGE_BUTTONS_M515 = prerenderButtons('assets/skin/hard-buttons/m515.svg');\nconst IMAGE_BUTTONS_IIIC = prerenderButtons('assets/skin/hard-buttons/iiic.svg');\nconst IMAGE_BUTTONS_M130 = prerenderButtons('assets/skin/hard-buttons/m130.svg');\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class CanvasDisplayService {\n    constructor() {}\n\n    async initialize(canvas: HTMLCanvasElement, session: Session | undefined): Promise<void> {\n        const ctx = canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('canvas not supported - get a new browser');\n        }\n\n        this.ctx = ctx;\n\n        this.session = session;\n        this.fillCanvasRect(0, 0, WIDTH, HEIGHT, this.backgroundColor());\n\n        await this.drawSilkscreen();\n        await this.drawButtons();\n    }\n\n    async drawSilkscreen(): Promise<void> {\n        if (!this.ctx) return;\n\n        const image = await this.silkscreenImage();\n\n        this.fillRect(0, 161, 160, 60, BACKGROUND_COLOR_SILKSCREEN);\n\n        this.ctx.imageSmoothingEnabled = true;\n        this.ctx.imageSmoothingQuality = 'high';\n\n        this.ctx.drawImage(image, BORDER, BORDER + 161 * SCALE, 160 * SCALE, 60 * SCALE);\n    }\n\n    async drawStatistics(\n        snapshotStatistics?: SnapshotStatistics,\n        emulationStatistics?: EmulationStatistics\n    ): Promise<void> {\n        if (!this.ctx) return;\n\n        await this.drawSilkscreen();\n\n        this.ctx.beginPath();\n        this.fillRect(0, 161, 160, 60, 'rgba(255,255,255,0.6)');\n\n        this.ctx.font = `${SCALE * 6}px monospace`;\n        this.ctx.fillStyle = 'black';\n        [\n            ...(!snapshotStatistics && !emulationStatistics ? ['collecting statistics...'] : []),\n            ...(snapshotStatistics\n                ? [\n                      `last snapshot          : ${new Date(snapshotStatistics.timestamp).toLocaleTimeString()}`,\n                      `snapshot pages         : ${snapshotStatistics.pages}`,\n                      `snapshot time total    : ${snapshotStatistics.timeTotal.toFixed(2)} msec`,\n                      `snapshot time blocking : ${snapshotStatistics.timeBlocking.toFixed(2)} msec`,\n                  ]\n                : []),\n            ...(emulationStatistics\n                ? [\n                      `host speed             : ${emulationStatistics.hostSpeed.toFixed(2)}x`,\n                      `emulation speed        : ${emulationStatistics.emulationSpeed.toFixed(2)}x`,\n                      `average FPS            : ${emulationStatistics.averageFPS.toFixed(2)}`,\n                  ]\n                : []),\n        ].forEach((line, i) => this.ctx!.fillText(line, BORDER + 1 * SCALE, BORDER + (168 + i * 6) * SCALE));\n    }\n\n    async drawButtons(activeButtons: Array<PalmButton> = []): Promise<void> {\n        if (!this.ctx) return;\n\n        this.ctx.drawImage(await this.buttonsImage(), BORDER, BORDER + 221 * SCALE, 160 * SCALE, 30 * SCALE);\n\n        if (activeButtons.includes(PalmButton.cal)) this.fillRect(0, 221, 30, 30, BACKGROUND_ACTIVE_BUTTON);\n        if (activeButtons.includes(PalmButton.phone)) this.fillRect(30, 221, 30, 30, BACKGROUND_ACTIVE_BUTTON);\n        if (activeButtons.includes(PalmButton.todo)) this.fillRect(100, 221, 30, 30, BACKGROUND_ACTIVE_BUTTON);\n        if (activeButtons.includes(PalmButton.notes)) this.fillRect(130, 221, 30, 30, BACKGROUND_ACTIVE_BUTTON);\n        if (activeButtons.includes(PalmButton.up)) this.fillRect(60, 221, 40, 15, BACKGROUND_ACTIVE_BUTTON);\n        if (activeButtons.includes(PalmButton.down)) this.fillRect(60, 236, 40, 15, BACKGROUND_ACTIVE_BUTTON);\n    }\n\n    drawEmulationCanvas(canvas: HTMLCanvasElement): void {\n        if (!this.ctx) return;\n\n        this.ctx.imageSmoothingEnabled = false;\n        this.ctx.drawImage(canvas, BORDER, BORDER, SCALE * 160, SCALE * 160);\n    }\n\n    private fillRect(x: number, y: number, width: number, height: number, style: string): void {\n        if (!this.ctx) return;\n\n        this.ctx.beginPath();\n        this.ctx.rect(BORDER + SCALE * x, BORDER + SCALE * y, SCALE * width, SCALE * height);\n        this.ctx.fillStyle = style;\n        this.ctx.fill();\n    }\n\n    private fillCanvasRect(x: number, y: number, width: number, height: number, style: string): void {\n        if (!this.ctx) return;\n\n        this.ctx.beginPath();\n        this.ctx.rect(x, y, width, height);\n        this.ctx.fillStyle = style;\n        this.ctx.fill();\n    }\n\n    private silkscreenImage(): Promise<HTMLImageElement> {\n        switch (this.session?.device) {\n            case DeviceId.m515:\n                return IMAGE_SILKSCREEN_M515;\n\n            case DeviceId.iiic:\n                return IMAGE_SILKSCREEN_IIIC;\n\n            case DeviceId.m130:\n                return IMAGE_SILKSCREEN_M130;\n\n            case DeviceId.palmV:\n            default:\n                return IMAGE_SILKSCREEN_V;\n        }\n    }\n\n    private buttonsImage(): Promise<HTMLCanvasElement> {\n        switch (this.session?.device) {\n            case DeviceId.m515:\n                return IMAGE_BUTTONS_M515;\n\n            case DeviceId.iiic:\n                return IMAGE_BUTTONS_IIIC;\n\n            case DeviceId.m130:\n                return IMAGE_BUTTONS_M130;\n\n            case DeviceId.palmV:\n            default:\n                return IMAGE_BUTTONS_V;\n        }\n    }\n\n    private backgroundColor(): string {\n        return isColor(this.session?.device) ? BACKGROUND_COLOR_COLOR_DEVICE : BACKGROUND_COLOR_GRAYSCALE_DEVICE;\n    }\n\n    private ctx: CanvasRenderingContext2D | undefined;\n    private session: Session | undefined;\n}\n"]}