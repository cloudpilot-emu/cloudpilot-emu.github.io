!function(){function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==i)return;var a,n,r=[],s=!0,o=!1;try{for(i=i.call(t);!(s=(a=i.next()).done)&&(r.push(a.value),!e||r.length!==e);s=!0);}catch(c){o=!0,n=c}finally{try{s||null==i.return||i.return()}finally{if(o)throw n}}return r}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function s(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{hO9l:function(t,e,i){"use strict";i.r(e),i.d(e,"TabsPageModule",function(){return b});var a,r,o,c=i("ofXK"),u=i("3Pt+"),h=i("TEn/"),l=i("tyNb"),f=i("fXoL"),m=i("pEgL"),v=[{path:"tab",component:(a=function(){function t(e,i){var a=this;n(this,t),this.router=e,this.canvasDisplayService=i,this.updateUseSmallUI=function(){var t=!!document.querySelector("html.md"),e=t?56:44;a.useSmallUI=a.canvasArea(window.innerHeight-e-(t?57:51)-6,window.innerWidth-6)<a.canvasArea(window.innerHeight-e-25-6,window.innerWidth-6)},this.useSmallUI=!1,window.addEventListener("resize",this.updateUseSmallUI),this.updateUseSmallUI()}return s(t,[{key:"smallUI",get:function(){return"/tab/emulation"===this.router.url&&this.useSmallUI}},{key:"canvasArea",value:function(t,e){var i,a;return t=Math.min(t,this.canvasDisplayService.height/devicePixelRatio),(e=Math.min(e,this.canvasDisplayService.width/devicePixelRatio))/t>this.canvasDisplayService.width/this.canvasDisplayService.height?(a=t,i=t/this.canvasDisplayService.height*this.canvasDisplayService.width):(i=e,a=e/this.canvasDisplayService.width*this.canvasDisplayService.height),i*a}}]),t}(),a.\u0275fac=function(t){return new(t||a)(f.Jb(l.g),f.Jb(m.a))},a.\u0275cmp=f.Db({type:a,selectors:[["app-tabs"]],decls:19,vars:2,consts:[[1,"overflow-wrapper"],["slot","bottom"],["tab","emulation"],["name","phone-portrait-outline"],["tab","sessions"],["name","albums-outline"],["tab","settings"],["name","cog-outline"],["tab","about"],["name","help-outline"]],template:function(t,e){1&t&&(f.Mb(0,"ion-tabs"),f.Mb(1,"div",0),f.Mb(2,"ion-tab-bar",1),f.Mb(3,"ion-tab-button",2),f.Kb(4,"ion-icon",3),f.Mb(5,"ion-label"),f.hc(6,"Emulator"),f.Lb(),f.Lb(),f.Mb(7,"ion-tab-button",4),f.Kb(8,"ion-icon",5),f.Mb(9,"ion-label"),f.hc(10,"Sessions"),f.Lb(),f.Lb(),f.Mb(11,"ion-tab-button",6),f.Kb(12,"ion-icon",7),f.Mb(13,"ion-label"),f.hc(14,"Settings"),f.Lb(),f.Lb(),f.Mb(15,"ion-tab-button",8),f.Kb(16,"ion-icon",9),f.Mb(17,"ion-label"),f.hc(18,"About"),f.Lb(),f.Lb(),f.Lb(),f.Lb(),f.Lb()),2&t&&(f.zb(2),f.Bb("small-ui",e.smallUI))},directives:[h.w,h.u,h.v,h.h,h.n],styles:["ion-tab-bar[_ngcontent-%COMP%]{min-width:280px}ion-tab-bar.small-ui[_ngcontent-%COMP%]{height:25px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:21px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-icon.md[_ngcontent-%COMP%]{margin-top:3px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:none}.overflow-wrapper[_ngcontent-%COMP%]{overflow-x:auto}"]}),a),children:[{path:"emulation",loadChildren:function(){return Promise.all([i.e(0),i.e(13)]).then(i.bind(null,"6aA7")).then(function(t){return t.EmulationPageModule})}},{path:"sessions",loadChildren:function(){return Promise.all([i.e(0),i.e(10)]).then(i.bind(null,"/NlI")).then(function(t){return t.SessionsPageModule})}},{path:"settings",loadChildren:function(){return Promise.all([i.e(0),i.e(14)]).then(i.bind(null,"07hj")).then(function(t){return t.SettingsPageModule})}},{path:"about",loadChildren:function(){return Promise.all([i.e(0),i.e(12)]).then(i.bind(null,"Ht3H")).then(function(t){return t.AboutPageModule})}},{path:"",redirectTo:"/tab/sessions",pathMatch:"full"}]},{path:"",redirectTo:"/tab/sessions",pathMatch:"full"}],d=((o=function t(){n(this,t)}).\u0275fac=function(t){return new(t||o)},o.\u0275mod=f.Hb({type:o}),o.\u0275inj=f.Gb({imports:[[l.i.forChild(v)],l.i]}),o),b=((r=function t(){n(this,t)}).\u0275fac=function(t){return new(t||r)},r.\u0275mod=f.Hb({type:r}),r.\u0275inj=f.Gb({imports:[[h.A,c.b,u.e,d]]}),r)},pEgL:function(i,a,r){"use strict";r.d(a,"a",function(){return A});var o=r("mrSG"),c=r("N/dm"),u=r("z9fa"),h=r("FJT/"),l=r("fXoL"),f=r.e(15).then(r.bind(null,"CIXq")),m=u.a.m515,v=h.a[2],d=h.a[0];function b(t){var e=Object(c.a)(t),i=(1===e.screenSize?2:3)*devicePixelRatio,a={frameDevice:1,frameCanvas:i},n=function(t){return{frameDevice:t,frameCanvas:t*i}},r=function(t){return{frameDevice:t,frameCanvas:a.frameCanvas+t*i}},s=n(1),o=n(1===e.screenSize?60:30);return{scale:i,borderWidth:a,height:n(2*a.frameDevice+e.height+s.frameDevice+e.silkscreenHeight+o.frameDevice),width:n(2*a.frameDevice+e.width),screenHeight:n(e.height),screenWidth:n(e.width),screenLeft:r(0),screenTop:r(0),screenBottom:r(e.height),separatorHeight:s,silkscreenHeight:n(e.silkscreenHeight),silkscreenTop:r(e.height+s.frameDevice),silkscreenBottom:r(e.height+s.frameDevice+e.silkscreenHeight),buttonHeight:o,buttonWidth:o,buttonTop:r(e.height+s.frameDevice+e.silkscreenHeight),buttonBottom:r(e.height+s.frameDevice+e.silkscreenHeight+o.frameDevice)}}var y=function(t){return function(t){var e,i,a=this,n=document.createElement("canvas");return function(r,s){return Object(o.a)(a,void 0,void 0,regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e!==r||i!==s){a.next=2;break}return a.abrupt("return",n);case 2:if(n.width=r,n.height=s,o=n.getContext("2d")){a.next=6;break}throw new Error("get a new browser");case 6:return a.t0=o,a.next=9,t();case 9:return a.t1=a.sent,a.t2=n.width,a.t3=n.height,a.t0.drawImage.call(a.t0,a.t1,0,0,a.t2,a.t3),e=r,i=s,a.abrupt("return",n);case 16:case"end":return a.stop()}},a)}))}}(function(t){var e,i=this;return function(){return Object(o.a)(i,void 0,void 0,regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e){i.next=6;break}return i.next=3,f;case 3:i.t0=t,a=i.sent[i.t0],e=new Promise(function(t,e){var i=new Image;i.onload=function(){return t(i)},i.onerror=function(){return e()},i.src="data:image/svg+xml;base64,".concat(btoa(a))});case 6:return i.abrupt("return",e);case 7:case"end":return i.stop()}},i)}))}}(t))},g=y("SILKSCREEN_V"),p=y("SILKSCREEN_M500"),D=y("SILKSCREEN_M515"),w=y("SILKSCREEN_IIIC"),S=y("SILKSCREEN_M100"),x=y("SILKSCREEN_M130"),k=y("SILKSCREEN_TUNGSTEN_W"),C=y("SILKSCREEN_PILOT"),H=y("HARD_BUTTONS_PALM_V"),T=y("HARD_BUTTONS_M515"),I=y("HARD_BUTTONS_M500"),R=y("HARD_BUTTONS_IIIC"),W=y("HARD_BUTTONS_IIIX"),M=y("HARD_BUTTONS_IIIE"),_=y("HARD_BUTTONS_M100"),O=y("HARD_BUTTONS_M125"),P=y("HARD_BUTTONS_M130"),E=y("HARD_BUTTONS_TUNGSTEN_W"),L=y("HARD_BUTTONS_PILOT"),A=function(){var i=function(){function i(){n(this,i),this.layout=b(m)}return s(i,[{key:"width",get:function(){return this.layout.width.frameCanvas}},{key:"height",get:function(){return this.layout.height.frameCanvas}},{key:"initialize",value:function(t,e){var i;return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function a(){var n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.layout=b(null!==(i=null==e?void 0:e.device)&&void 0!==i?i:u.a.m515),t.width=this.width,t.height=this.height,n=t.getContext("2d")){a.next=4;break}throw new Error("canvas not supported - get a new browser");case 4:return this.ctx=n,this.session=e,this.fillCanvasRect(0,0,this.width,this.height,this.frameColor()),this.fillRect(0,0,this.layout.screenWidth.frameDevice,this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice+this.layout.separatorHeight.frameDevice+this.layout.buttonHeight.frameDevice,this.backgroundColor()),a.next=10,Promise.all([this.drawSilkscreen(),this.drawButtons()]);case 10:case"end":return a.stop()}},a,this)}))}},{key:"drawSilkscreen",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.ctx,!t.t0){t.next=14;break}return this.fillRect(this.layout.screenLeft.frameDevice,this.layout.silkscreenTop.frameDevice,this.layout.screenWidth.frameDevice,this.layout.silkscreenHeight.frameDevice,v),this.ctx.imageSmoothingEnabled=!0,this.ctx.imageSmoothingQuality="high",t.t1=this.ctx,t.next=8,this.silkscreenImage()(this.layout.screenWidth.frameCanvas,this.layout.silkscreenHeight.frameCanvas);case 8:t.t2=t.sent,t.t3=this.layout.borderWidth.frameCanvas,t.t4=this.layout.silkscreenTop.frameCanvas,t.t5=this.layout.screenWidth.frameCanvas,t.t6=this.layout.silkscreenHeight.frameCanvas,t.t1.drawImage.call(t.t1,t.t2,t.t3,t.t4,t.t5,t.t6);case 14:case"end":return t.stop()}},t,this)}))}},{key:"drawStatistics",value:function(t,i){var a,n;return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var s,o=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.ctx){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,this.drawSilkscreen();case 4:this.ctx.beginPath(),this.fillRect(this.layout.screenLeft.frameDevice,this.layout.silkscreenTop.frameDevice,this.layout.screenWidth.frameDevice,this.layout.silkscreenHeight.frameDevice,"rgba(255,255,255,0.6)"),s=1===Object(c.a)(null!==(n=null===(a=this.session)||void 0===a?void 0:a.device)&&void 0!==n?n:m).screenSize?2:1,this.ctx.font=6*this.layout.scale*s+"px monospace",this.ctx.fillStyle="black",[].concat(e(t||i?[]:["collecting statistics..."]),e(t?["last snapshot          : ".concat(new Date(t.timestamp).toLocaleTimeString()),"snapshot pages         : ".concat(t.pages),"snapshot time total    : ".concat(t.timeTotal.toFixed(2)," msec"),"snapshot time blocking : ".concat(t.timeBlocking.toFixed(2)," msec")]:[]),e(i?["host speed             : ".concat(i.hostSpeed.toFixed(2),"x"),"emulation speed        : ".concat(i.emulationSpeed.toFixed(2),"x"),"average FPS            : ".concat(i.averageFPS.toFixed(2))]:[])).forEach(function(t,e){return o.ctx.fillText(t,o.layout.screenLeft.frameCanvas+s*o.layout.scale,o.layout.silkscreenTop.frameCanvas+s*o.layout.scale*(8+6*e))});case 8:case"end":return r.stop()}},r,this)}))}},{key:"drawButtons",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ctx,!e.t0){e.next=17;break}return e.t1=this.ctx,e.next=5,this.buttonsImage()(this.layout.screenWidth.frameCanvas,this.layout.buttonHeight.frameCanvas);case 5:e.t2=e.sent,e.t3=this.layout.screenLeft.frameCanvas,e.t4=this.layout.buttonTop.frameCanvas,e.t5=this.layout.screenWidth.frameCanvas,e.t6=this.layout.buttonHeight.frameCanvas,e.t1.drawImage.call(e.t1,e.t2,e.t3,e.t4,e.t5,e.t6),t.includes(0)&&this.fillRect(0,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,"rgba(0,0,0,0.2)"),t.includes(1)&&this.fillRect(this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,"rgba(0,0,0,0.2)"),t.includes(2)&&this.fillRect(this.layout.screenWidth.frameDevice-2*this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,"rgba(0,0,0,0.2)"),t.includes(3)&&this.fillRect(this.layout.screenWidth.frameDevice-this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,"rgba(0,0,0,0.2)"),t.includes(4)&&this.fillRect(2*this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.screenWidth.frameDevice-4*this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice/2,"rgba(0,0,0,0.2)"),t.includes(5)&&this.fillRect(2*this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice+this.layout.buttonHeight.frameDevice/2,this.layout.screenWidth.frameDevice-4*this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice/2,"rgba(0,0,0,0.2)");case 17:case"end":return e.stop()}},e,this)}))}},{key:"drawEmulationCanvas",value:function(t){this.ctx&&(this.ctx.imageSmoothingEnabled=!1,this.ctx.drawImage(t,this.layout.screenLeft.frameCanvas,this.layout.screenTop.frameCanvas,this.layout.screenWidth.frameCanvas,this.layout.screenHeight.frameCanvas))}},{key:"eventToPalmCoordinates",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ctx){var i,a,n,r,s=this.ctx.canvas.getBoundingClientRect();s.width/s.height>this.width/this.height?(r=s.height,n=this.width/this.height*s.height,a=s.top,i=s.left+(s.width-n)/2):(n=s.width,r=this.height/this.width*s.width,i=s.left,a=s.top+(s.height-r)/2);var o=Math.floor((t.clientX-i)/n*this.width/this.layout.scale)-this.layout.borderWidth.frameDevice,c=Math.floor((t.clientY-a)/r*this.height/this.layout.scale)-this.layout.borderWidth.frameDevice;c>=this.layout.screenHeight.frameDevice&&(c<=this.layout.screenHeight.frameDevice+this.layout.separatorHeight.frameDevice?c=this.layout.screenHeight.frameDevice:c-=this.layout.separatorHeight.frameDevice);var u=this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice+this.layout.buttonHeight.frameDevice;if(e)o<0&&(o=0),o>=this.layout.screenWidth.frameDevice&&(o=this.layout.screenWidth.frameDevice-1),c<0&&(c=0),c>=u&&(c=u-1);else if(o<0||o>=this.layout.screenWidth.frameDevice||c<0||c>=u)return;return[o,c]}}},{key:"isButtons",value:function(e){return t(e,2)[1]>=this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice}},{key:"determineButton",value:function(e){var i=t(e,2),a=i[0],n=i[1];return a>=this.layout.screenWidth.frameDevice-this.layout.buttonWidth.frameDevice?3:a>=this.layout.screenWidth.frameDevice-2*this.layout.buttonWidth.frameDevice?2:a>=2*this.layout.buttonWidth.frameDevice?n>=this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice+this.layout.buttonHeight.frameDevice/2?5:4:a>=this.layout.buttonWidth.frameDevice?1:0}},{key:"fillRect",value:function(t,e,i,a,n){this.ctx&&(this.ctx.beginPath(),this.ctx.rect(this.layout.borderWidth.frameCanvas+this.layout.scale*t,this.layout.borderWidth.frameCanvas+this.layout.scale*e,this.layout.scale*i,this.layout.scale*a),this.ctx.fillStyle=n,this.ctx.fill())}},{key:"fillCanvasRect",value:function(t,e,i,a,n){this.ctx&&(this.ctx.beginPath(),this.ctx.rect(t,e,i,a),this.ctx.fillStyle=n,this.ctx.fill())}},{key:"silkscreenImage",value:function(){var t;switch(null===(t=this.session)||void 0===t?void 0:t.device){case u.a.palmPilot:case u.a.pilot:case u.a.iii:case u.a.palmVII:return C;case u.a.m500:return p;case u.a.m505:case u.a.m515:return D;case u.a.iiic:return w;case u.a.m100:case u.a.m105:case u.a.m125:return S;case u.a.m130:return x;case u.a.i710:return k;case u.a.iiic:case u.a.iiix:case u.a.iiix:case u.a.palmVx:case u.a.palmV:default:return g}}},{key:"buttonsImage",value:function(){var t;switch(null===(t=this.session)||void 0===t?void 0:t.device){case u.a.pilot:case u.a.palmPilot:return L;case u.a.m500:return I;case u.a.m505:case u.a.m515:return T;case u.a.iiic:return R;case u.a.m100:case u.a.m105:return _;case u.a.m125:return O;case u.a.m130:return P;case u.a.i710:return E;case u.a.iii:case u.a.iiix:case u.a.iiixe:case u.a.palmVII:return W;case u.a.iiie:return M;case u.a.palmVx:case u.a.palmV:default:return H}}},{key:"backgroundColor",value:function(){var t;return Object(c.c)(null===(t=this.session)||void 0===t?void 0:t.device)?"white":d}},{key:"frameColor",value:function(){var t;return Object(c.c)(null===(t=this.session)||void 0===t?void 0:t.device)?"white":"#ccc"}}]),i}();return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Fb({token:i,factory:i.\u0275fac,providedIn:"root"}),i}()}}])}();
//# sourceMappingURL=11-es5.807f175884fe2f78e303.js.map