!function(){function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,s=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(h){s=!0,r=h}finally{try{n||null==o.return||o.return()}finally{if(s)throw r}}return i}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{hO9l:function(t,e,i){"use strict";i.r(e),i.d(e,"TabsPageModule",function(){return g});var n,r,o,h=i("ofXK"),c=i("3Pt+"),u=i("TEn/"),l=i("tyNb"),d=i("fXoL"),b=i("pEgL"),m=[{path:"tab",component:(n=function(){function t(e,i){var n=this;s(this,t),this.router=e,this.canvasDisplayService=i,this.updateUseSmallUI=function(){var t=!!document.querySelector("html.md"),e=t?56:44;n.useSmallUI=n.canvasArea(window.innerHeight-e-(t?57:51)-6,window.innerWidth-6)<n.canvasArea(window.innerHeight-e-25-6,window.innerWidth-6)},this.useSmallUI=!1,window.addEventListener("resize",this.updateUseSmallUI),this.updateUseSmallUI()}return a(t,[{key:"smallUI",get:function(){return"/tab/emulation"===this.router.url&&this.useSmallUI}},{key:"canvasArea",value:function(t,e){var i,n;return t=Math.min(t,this.canvasDisplayService.height/devicePixelRatio),(e=Math.min(e,this.canvasDisplayService.width/devicePixelRatio))/t>this.canvasDisplayService.width/this.canvasDisplayService.height?(n=t,i=t/this.canvasDisplayService.height*this.canvasDisplayService.width):(i=e,n=e/this.canvasDisplayService.width*this.canvasDisplayService.height),i*n}}]),t}(),n.\u0275fac=function(t){return new(t||n)(d.Jb(l.g),d.Jb(b.a))},n.\u0275cmp=d.Db({type:n,selectors:[["app-tabs"]],decls:19,vars:2,consts:[[1,"overflow-wrapper"],["slot","bottom"],["tab","emulation"],["name","phone-portrait-outline"],["tab","sessions"],["name","albums-outline"],["tab","settings"],["name","cog-outline"],["tab","about"],["name","help-outline"]],template:function(t,e){1&t&&(d.Mb(0,"ion-tabs"),d.Mb(1,"div",0),d.Mb(2,"ion-tab-bar",1),d.Mb(3,"ion-tab-button",2),d.Kb(4,"ion-icon",3),d.Mb(5,"ion-label"),d.hc(6,"Emulator"),d.Lb(),d.Lb(),d.Mb(7,"ion-tab-button",4),d.Kb(8,"ion-icon",5),d.Mb(9,"ion-label"),d.hc(10,"Sessions"),d.Lb(),d.Lb(),d.Mb(11,"ion-tab-button",6),d.Kb(12,"ion-icon",7),d.Mb(13,"ion-label"),d.hc(14,"Settings"),d.Lb(),d.Lb(),d.Mb(15,"ion-tab-button",8),d.Kb(16,"ion-icon",9),d.Mb(17,"ion-label"),d.hc(18,"About"),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb()),2&t&&(d.zb(2),d.Bb("small-ui",e.smallUI))},directives:[u.u,u.s,u.t,u.h,u.n],styles:["ion-tab-bar[_ngcontent-%COMP%]{min-width:280px}ion-tab-bar.small-ui[_ngcontent-%COMP%]{height:25px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:21px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-icon.md[_ngcontent-%COMP%]{margin-top:3px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:none}.overflow-wrapper[_ngcontent-%COMP%]{overflow-x:auto}"]}),n),children:[{path:"emulation",loadChildren:function(){return Promise.all([i.e(0),i.e(13)]).then(i.bind(null,"6aA7")).then(function(t){return t.EmulationPageModule})}},{path:"sessions",loadChildren:function(){return Promise.all([i.e(0),i.e(10)]).then(i.bind(null,"/NlI")).then(function(t){return t.SessionsPageModule})}},{path:"settings",loadChildren:function(){return Promise.all([i.e(0),i.e(14)]).then(i.bind(null,"07hj")).then(function(t){return t.SettingsPageModule})}},{path:"about",loadChildren:function(){return Promise.all([i.e(0),i.e(12)]).then(i.bind(null,"Ht3H")).then(function(t){return t.AboutPageModule})}},{path:"",redirectTo:"/tab/sessions",pathMatch:"full"}]},{path:"",redirectTo:"/tab/sessions",pathMatch:"full"}],f=((o=function t(){s(this,t)}).\u0275fac=function(t){return new(t||o)},o.\u0275mod=d.Hb({type:o}),o.\u0275inj=d.Gb({imports:[[l.i.forChild(m)],l.i]}),o),g=((r=function t(){s(this,t)}).\u0275fac=function(t){return new(t||r)},r.\u0275mod=d.Hb({type:r}),r.\u0275inj=d.Gb({imports:[[u.y,h.b,c.e,f]]}),r)},pEgL:function(i,n,r){"use strict";r.d(n,"a",function(){return P});var o=r("mrSG"),h=r("z9fa"),c=r("bucj"),u=r("N/dm"),l=r("fXoL"),d=c.b[2],b=c.b[0];function m(t){return new Promise(function(e,i){var n=new Image;n.onload=function(){return e(n)},n.onerror=function(){return i()},n.src=t})}function f(t){var e=new Map;return function(i){return e.has(i)||e.set(i,function(t,e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var n,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if((n=document.createElement("canvas")).width=(1===e?640:480)*devicePixelRatio,n.height=(1===e?120:90)*devicePixelRatio,s=n.getContext("2d")){i.next=5;break}throw new Error("get a new browser");case 5:return i.t0=s,i.next=8,m(t);case 8:return i.t1=i.sent,i.t2=n.width,i.t3=n.height,i.t0.drawImage.call(i.t0,i.t1,0,0,i.t2,i.t3),i.abrupt("return",n);case 13:case"end":return i.stop()}},i)}))}(t,i)),e.get(i)}}var g=m("assets/skin/silkscreen/v.svg"),v=m("assets/skin/silkscreen/m515.svg"),p=m("assets/skin/silkscreen/iiic.svg"),w=m("assets/skin/silkscreen/m130.svg"),y=f("assets/skin/hard-buttons/v.svg"),k=f("assets/skin/hard-buttons/m515.svg"),x=f("assets/skin/hard-buttons/iiic.svg"),S=f("assets/skin/hard-buttons/m130.svg"),M=Object(u.a)(h.a.m515);[x,y,S,k].forEach(function(t){t(0),t(1)});var P=function(){var i=function(){function i(){s(this,i),this.dimensions=M}return a(i,[{key:"scale",get:function(){return(1===this.dimensions.screenSize?2:3)*devicePixelRatio}},{key:"border",get:function(){return 1*this.scale}},{key:"width",get:function(){return this.scale*this.dimensions.width+2*this.border}},{key:"separator",get:function(){return 1===this.dimensions.screenSize?2:1}},{key:"buttonsHeight",get:function(){return 1===this.dimensions.screenSize?60:30}},{key:"height",get:function(){return this.scale*(this.dimensions.height+this.dimensions.silkscreenHeight+this.separator+this.buttonsHeight)+2*this.border}},{key:"initialize",value:function(t,e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(this.dimensions=e?Object(u.a)(e.device):M,t.width=this.width,t.height=this.height,n=t.getContext("2d")){i.next=4;break}throw new Error("canvas not supported - get a new browser");case 4:return this.ctx=n,this.session=e,this.fillCanvasRect(0,0,this.width,this.height,this.backgroundColor()),i.next=9,this.drawSilkscreen();case 9:return i.next=11,this.drawButtons();case 11:case"end":return i.stop()}},i,this)}))}},{key:"drawSilkscreen",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.ctx){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.silkscreenImage();case 4:e=t.sent,this.fillRect(0,this.dimensions.height+this.separator,this.dimensions.width,this.dimensions.silkscreenHeight,d),this.ctx.imageSmoothingEnabled=!0,this.ctx.imageSmoothingQuality="high",this.ctx.drawImage(e,this.border,this.border+(this.dimensions.height+this.separator)*this.scale,this.dimensions.width*this.scale,this.dimensions.silkscreenHeight*this.scale);case 6:case"end":return t.stop()}},t,this)}))}},{key:"drawStatistics",value:function(t,i){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var s,r=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.ctx){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,this.drawSilkscreen();case 4:this.ctx.beginPath(),this.fillRect(0,this.dimensions.height+this.separator,this.dimensions.width,this.dimensions.silkscreenHeight,"rgba(255,255,255,0.6)"),s=1===this.dimensions.screenSize?2:1,this.ctx.font=6*this.scale*s+"px monospace",this.ctx.fillStyle="black",[].concat(e(t||i?[]:["collecting statistics..."]),e(t?["last snapshot          : ".concat(new Date(t.timestamp).toLocaleTimeString()),"snapshot pages         : ".concat(t.pages),"snapshot time total    : ".concat(t.timeTotal.toFixed(2)," msec"),"snapshot time blocking : ".concat(t.timeBlocking.toFixed(2)," msec")]:[]),e(i?["host speed             : ".concat(i.hostSpeed.toFixed(2),"x"),"emulation speed        : ".concat(i.emulationSpeed.toFixed(2),"x"),"average FPS            : ".concat(i.averageFPS.toFixed(2))]:[])).forEach(function(t,e){return r.ctx.fillText(t,r.border+s*r.scale,r.border+(r.dimensions.height+s*(8+6*e))*r.scale)});case 8:case"end":return n.stop()}},n,this)}))}},{key:"drawButtons",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx){e.next=2;break}return e.abrupt("return");case 2:return i=this.dimensions.height+this.dimensions.silkscreenHeight+this.separator,n=1===this.dimensions.screenSize?60:30,e.t0=this.ctx,e.next=6,this.buttonsImage();case 6:e.t1=e.sent,e.t2=this.border,e.t3=this.border+this.scale*i,e.t4=this.dimensions.width*this.scale,e.t5=this.buttonsHeight*this.scale,e.t0.drawImage.call(e.t0,e.t1,e.t2,e.t3,e.t4,e.t5),t.includes(0)&&this.fillRect(0,i,n,this.buttonsHeight,"rgba(0,0,0,0.2)"),t.includes(1)&&this.fillRect(n,i,n,this.buttonsHeight,"rgba(0,0,0,0.2)"),t.includes(2)&&this.fillRect(this.dimensions.width-2*n,i,n,this.buttonsHeight,"rgba(0,0,0,0.2)"),t.includes(3)&&this.fillRect(this.dimensions.width-n,i,n,this.buttonsHeight,"rgba(0,0,0,0.2)"),t.includes(4)&&this.fillRect(2*n,i,this.dimensions.width-4*n,this.buttonsHeight/2,"rgba(0,0,0,0.2)"),t.includes(5)&&this.fillRect(2*n,i+this.buttonsHeight/2,this.dimensions.width-4*n,this.buttonsHeight/2,"rgba(0,0,0,0.2)");case 18:case"end":return e.stop()}},e,this)}))}},{key:"drawEmulationCanvas",value:function(t){this.ctx&&(this.ctx.imageSmoothingEnabled=!1,this.ctx.drawImage(t,this.border,this.border,this.scale*this.dimensions.width,this.scale*this.dimensions.height))}},{key:"eventToPalmCoordinates",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ctx){var i,n,s,r,a=this.ctx.canvas.getBoundingClientRect();a.width/a.height>this.width/this.height?(r=a.height,s=this.width/this.height*a.height,n=a.top,i=a.left+(a.width-s)/2):(s=a.width,r=this.height/this.width*a.width,i=a.left,n=a.top+(a.height-r)/2);var o=Math.floor((t.clientX-i)/s*this.width/this.scale)-this.border/this.scale,h=Math.floor((t.clientY-n)/r*this.height/this.scale)-this.border/this.scale;h>=this.dimensions.height+this.separator&&(h-=1);var c=this.dimensions.height+this.dimensions.silkscreenHeight+this.buttonsHeight;if(e)o<0&&(o=0),o>=this.dimensions.width&&(o=this.dimensions.width-1),h<0&&(h=0),h>=c&&(h=this.dimensions.height+this.dimensions.silkscreenHeight-1);else if(o<0||o>=this.dimensions.width||h<0||h>=c)return;return[o,h]}}},{key:"isButtons",value:function(e){return t(e,2)[1]>=this.dimensions.height+this.dimensions.silkscreenHeight}},{key:"determineButton",value:function(e){var i=t(e,2),n=i[0],s=i[1],r=1===this.dimensions.screenSize?60:30;return n>=this.dimensions.width-r?3:n>=this.dimensions.width-2*r?2:n>=2*r?s>=this.dimensions.height+this.dimensions.silkscreenHeight+this.separator+this.buttonsHeight/2?5:4:n>=r?1:0}},{key:"fillRect",value:function(t,e,i,n,s){this.ctx&&(this.ctx.beginPath(),this.ctx.rect(this.border+this.scale*t,this.border+this.scale*e,this.scale*i,this.scale*n),this.ctx.fillStyle=s,this.ctx.fill())}},{key:"fillCanvasRect",value:function(t,e,i,n,s){this.ctx&&(this.ctx.beginPath(),this.ctx.rect(t,e,i,n),this.ctx.fillStyle=s,this.ctx.fill())}},{key:"silkscreenImage",value:function(){var t;switch(null===(t=this.session)||void 0===t?void 0:t.device){case h.a.m515:return v;case h.a.iiic:return p;case h.a.i710:case h.a.m130:return w;case h.a.palmV:default:return g}}},{key:"buttonsImage",value:function(){var t;switch(null===(t=this.session)||void 0===t?void 0:t.device){case h.a.m515:case h.a.i710:return k(this.dimensions.screenSize);case h.a.iiic:return x(this.dimensions.screenSize);case h.a.m130:return S(this.dimensions.screenSize);case h.a.palmV:default:return y(this.dimensions.screenSize)}}},{key:"backgroundColor",value:function(){var t;return Object(h.b)(null===(t=this.session)||void 0===t?void 0:t.device)?"white":b}}]),i}();return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Fb({token:i,factory:i.\u0275fac,providedIn:"root"}),i}()}}])}();
//# sourceMappingURL=11-es5.39f8fba3d40c7b8d2e8e.js.map