(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{hO9l:function(t,e,i){"use strict";i.r(e),i.d(e,"TabsPageModule",function(){return u});var s=i("ofXK"),a=i("3Pt+"),n=i("TEn/"),o=i("tyNb"),h=i("fXoL"),r=i("pEgL");const c=[{path:"tab",component:(()=>{class t{constructor(t,e){this.router=t,this.canvasDisplayService=e,this.updateUseSmallUI=()=>{const t=!!document.querySelector("html.md"),e=t?56:44;this.useSmallUI=this.canvasArea(window.innerHeight-e-(t?57:51)-6,window.innerWidth-6)<this.canvasArea(window.innerHeight-e-25-6,window.innerWidth-6)},this.useSmallUI=!1,window.addEventListener("resize",this.updateUseSmallUI),this.updateUseSmallUI()}get smallUI(){return"/tab/emulation"===this.router.url&&this.useSmallUI}canvasArea(t,e){let i,s;return t=Math.min(t,this.canvasDisplayService.height/devicePixelRatio),(e=Math.min(e,this.canvasDisplayService.width/devicePixelRatio))/t>this.canvasDisplayService.width/this.canvasDisplayService.height?(s=t,i=t/this.canvasDisplayService.height*this.canvasDisplayService.width):(i=e,s=e/this.canvasDisplayService.width*this.canvasDisplayService.height),i*s}}return t.\u0275fac=function(e){return new(e||t)(h.Jb(o.g),h.Jb(r.a))},t.\u0275cmp=h.Db({type:t,selectors:[["app-tabs"]],decls:19,vars:2,consts:[[1,"overflow-wrapper"],["slot","bottom"],["tab","emulation"],["name","phone-portrait-outline"],["tab","sessions"],["name","albums-outline"],["tab","settings"],["name","cog-outline"],["tab","about"],["name","help-outline"]],template:function(t,e){1&t&&(h.Mb(0,"ion-tabs"),h.Mb(1,"div",0),h.Mb(2,"ion-tab-bar",1),h.Mb(3,"ion-tab-button",2),h.Kb(4,"ion-icon",3),h.Mb(5,"ion-label"),h.hc(6,"Emulator"),h.Lb(),h.Lb(),h.Mb(7,"ion-tab-button",4),h.Kb(8,"ion-icon",5),h.Mb(9,"ion-label"),h.hc(10,"Sessions"),h.Lb(),h.Lb(),h.Mb(11,"ion-tab-button",6),h.Kb(12,"ion-icon",7),h.Mb(13,"ion-label"),h.hc(14,"Settings"),h.Lb(),h.Lb(),h.Mb(15,"ion-tab-button",8),h.Kb(16,"ion-icon",9),h.Mb(17,"ion-label"),h.hc(18,"About"),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()),2&t&&(h.zb(2),h.Bb("small-ui",e.smallUI))},directives:[n.u,n.s,n.t,n.h,n.n],styles:["ion-tab-bar[_ngcontent-%COMP%]{min-width:280px}ion-tab-bar.small-ui[_ngcontent-%COMP%]{height:25px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:21px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-icon.md[_ngcontent-%COMP%]{margin-top:3px}ion-tab-bar.small-ui[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:none}.overflow-wrapper[_ngcontent-%COMP%]{overflow-x:auto}"]}),t})(),children:[{path:"emulation",loadChildren:()=>Promise.all([i.e(0),i.e(13)]).then(i.bind(null,"6aA7")).then(t=>t.EmulationPageModule)},{path:"sessions",loadChildren:()=>Promise.all([i.e(0),i.e(10)]).then(i.bind(null,"/NlI")).then(t=>t.SessionsPageModule)},{path:"settings",loadChildren:()=>Promise.all([i.e(0),i.e(14)]).then(i.bind(null,"07hj")).then(t=>t.SettingsPageModule)},{path:"about",loadChildren:()=>Promise.all([i.e(0),i.e(12)]).then(i.bind(null,"Ht3H")).then(t=>t.AboutPageModule)},{path:"",redirectTo:"/tab/sessions",pathMatch:"full"}]},{path:"",redirectTo:"/tab/sessions",pathMatch:"full"}];let l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.Hb({type:t}),t.\u0275inj=h.Gb({imports:[[o.i.forChild(c)],o.i]}),t})(),u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.Hb({type:t}),t.\u0275inj=h.Gb({imports:[[n.y,s.b,a.e,l]]}),t})()},pEgL:function(t,e,i){"use strict";i.d(e,"a",function(){return H});var s=i("mrSG"),a=i("z9fa"),n=i("FJT/"),o=i("N/dm"),h=i("fXoL");const r=a.a.m515,c=n.a[2],l=n.a[0],u=n.a[6];function d(t){const e=Object(o.a)(t),i=(1===e.screenSize?2:3)*devicePixelRatio,s={frameDevice:1,frameCanvas:i},a=t=>({frameDevice:t,frameCanvas:t*i}),n=t=>({frameDevice:t,frameCanvas:s.frameCanvas+t*i}),h=a(1),r=a(1===e.screenSize?60:30);return{scale:i,borderWidth:s,height:a(2*s.frameDevice+e.height+h.frameDevice+e.silkscreenHeight+r.frameDevice),width:a(2*s.frameDevice+e.width),screenHeight:a(e.height),screenWidth:a(e.width),screenLeft:n(0),screenTop:n(0),screenBottom:n(e.height),separatorHeight:h,silkscreenHeight:a(e.silkscreenHeight),silkscreenTop:n(e.height+h.frameDevice),silkscreenBottom:n(e.height+h.frameDevice+e.silkscreenHeight),buttonHeight:r,buttonWidth:r,buttonTop:n(e.height+h.frameDevice+e.silkscreenHeight),buttonBottom:n(e.height+h.frameDevice+e.silkscreenHeight+r.frameDevice)}}function m(t){let e,i;const a=document.createElement("canvas");return(n,o)=>Object(s.a)(this,void 0,void 0,function*(){if(e===n&&i===o)return a;a.width=n,a.height=o;const s=a.getContext("2d");if(!s)throw new Error("get a new browser");return s.drawImage(yield t,0,0,a.width,a.height),e=n,i=o,a})}function v(t){return new Promise((e,i)=>{const s=new Image;s.onload=()=>e(s),s.onerror=()=>i(),s.src=t})}const f=m(v("assets/skin/silkscreen/v.svg")),b=m(v("assets/skin/silkscreen/m515.svg")),g=m(v("assets/skin/silkscreen/iiic.svg")),y=m(v("assets/skin/silkscreen/m130.svg")),p=m(v("assets/skin/silkscreen/tungstenw.svg")),D=m(v("assets/skin/hard-buttons/v.svg")),w=m(v("assets/skin/hard-buttons/m515.svg")),C=m(v("assets/skin/hard-buttons/iiic.svg")),k=m(v("assets/skin/hard-buttons/m130.svg")),x=m(v("assets/skin/hard-buttons/tungstenw.svg"));let H=(()=>{class t{constructor(){this.layout=d(r)}get width(){return this.layout.width.frameCanvas}get height(){return this.layout.height.frameCanvas}initialize(t,e){var i;return Object(s.a)(this,void 0,void 0,function*(){this.layout=d(null!==(i=null==e?void 0:e.device)&&void 0!==i?i:a.a.m515),t.width=this.width,t.height=this.height;const s=t.getContext("2d");if(!s)throw new Error("canvas not supported - get a new browser");this.ctx=s,this.session=e,this.fillCanvasRect(0,0,this.width,this.height,this.frameColor()),this.fillRect(0,0,this.layout.screenWidth.frameDevice,this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice+this.layout.separatorHeight.frameDevice+this.layout.buttonHeight.frameDevice,this.backgroundColor()),yield this.drawSilkscreen(),yield this.drawButtons()})}drawSilkscreen(){return Object(s.a)(this,void 0,void 0,function*(){this.ctx&&(this.fillRect(this.layout.screenLeft.frameDevice,this.layout.silkscreenTop.frameDevice,this.layout.screenWidth.frameDevice,this.layout.silkscreenHeight.frameDevice,c),this.ctx.imageSmoothingEnabled=!0,this.ctx.imageSmoothingQuality="high",this.ctx.drawImage(yield this.silkscreenImage()(this.layout.screenWidth.frameCanvas,this.layout.silkscreenHeight.frameCanvas),this.layout.borderWidth.frameCanvas,this.layout.silkscreenTop.frameCanvas,this.layout.screenWidth.frameCanvas,this.layout.silkscreenHeight.frameCanvas))})}drawStatistics(t,e){var i,a;return Object(s.a)(this,void 0,void 0,function*(){if(!this.ctx)return;yield this.drawSilkscreen(),this.ctx.beginPath(),this.fillRect(this.layout.screenLeft.frameDevice,this.layout.silkscreenTop.frameDevice,this.layout.screenWidth.frameDevice,this.layout.silkscreenHeight.frameDevice,"rgba(255,255,255,0.6)");const s=1===Object(o.a)(null!==(a=null===(i=this.session)||void 0===i?void 0:i.device)&&void 0!==a?a:r).screenSize?2:1;this.ctx.font=6*this.layout.scale*s+"px monospace",this.ctx.fillStyle="black",[...t||e?[]:["collecting statistics..."],...t?[`last snapshot          : ${new Date(t.timestamp).toLocaleTimeString()}`,`snapshot pages         : ${t.pages}`,`snapshot time total    : ${t.timeTotal.toFixed(2)} msec`,`snapshot time blocking : ${t.timeBlocking.toFixed(2)} msec`]:[],...e?[`host speed             : ${e.hostSpeed.toFixed(2)}x`,`emulation speed        : ${e.emulationSpeed.toFixed(2)}x`,`average FPS            : ${e.averageFPS.toFixed(2)}`]:[]].forEach((t,e)=>this.ctx.fillText(t,this.layout.screenLeft.frameCanvas+s*this.layout.scale,this.layout.silkscreenTop.frameCanvas+s*this.layout.scale*(8+6*e)))})}drawButtons(t=[]){return Object(s.a)(this,void 0,void 0,function*(){this.ctx&&(this.ctx.drawImage(yield this.buttonsImage()(this.layout.screenWidth.frameCanvas,this.layout.buttonHeight.frameCanvas),this.layout.screenLeft.frameCanvas,this.layout.buttonTop.frameCanvas,this.layout.screenWidth.frameCanvas,this.layout.buttonHeight.frameCanvas),t.includes(0)&&this.fillRect(0,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,"rgba(0,0,0,0.2)"),t.includes(1)&&this.fillRect(this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,"rgba(0,0,0,0.2)"),t.includes(2)&&this.fillRect(this.layout.screenWidth.frameDevice-2*this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,"rgba(0,0,0,0.2)"),t.includes(3)&&this.fillRect(this.layout.screenWidth.frameDevice-this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,"rgba(0,0,0,0.2)"),t.includes(4)&&this.fillRect(2*this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.screenWidth.frameDevice-4*this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice/2,"rgba(0,0,0,0.2)"),t.includes(5)&&this.fillRect(2*this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice+this.layout.buttonHeight.frameDevice/2,this.layout.screenWidth.frameDevice-4*this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice/2,"rgba(0,0,0,0.2)"))})}drawEmulationCanvas(t){this.ctx&&(this.ctx.imageSmoothingEnabled=!1,this.ctx.drawImage(t,this.layout.screenLeft.frameCanvas,this.layout.screenTop.frameCanvas,this.layout.screenWidth.frameCanvas,this.layout.screenHeight.frameCanvas))}eventToPalmCoordinates(t,e=!1){if(!this.ctx)return;const i=this.ctx.canvas.getBoundingClientRect();let s,a,n,o;i.width/i.height>this.width/this.height?(o=i.height,n=this.width/this.height*i.height,a=i.top,s=i.left+(i.width-n)/2):(n=i.width,o=this.height/this.width*i.width,s=i.left,a=i.top+(i.height-o)/2);let h=Math.floor((t.clientX-s)/n*this.width/this.layout.scale)-this.layout.borderWidth.frameDevice,r=Math.floor((t.clientY-a)/o*this.height/this.layout.scale)-this.layout.borderWidth.frameDevice;r>=this.layout.screenHeight.frameDevice&&(r<=this.layout.screenHeight.frameDevice+this.layout.separatorHeight.frameDevice?r=this.layout.screenHeight.frameDevice:r-=this.layout.separatorHeight.frameDevice);const c=this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice+this.layout.buttonHeight.frameDevice;if(e)h<0&&(h=0),h>=this.layout.screenWidth.frameDevice&&(h=this.layout.screenWidth.frameDevice-1),r<0&&(r=0),r>=c&&(r=c-1);else if(h<0||h>=this.layout.screenWidth.frameDevice||r<0||r>=c)return;return[h,r]}isButtons([,t]){return t>=this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice}determineButton([t,e]){return t>=this.layout.screenWidth.frameDevice-this.layout.buttonWidth.frameDevice?3:t>=this.layout.screenWidth.frameDevice-2*this.layout.buttonWidth.frameDevice?2:t>=2*this.layout.buttonWidth.frameDevice?e>=this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice+this.layout.buttonHeight.frameDevice/2?5:4:t>=this.layout.buttonWidth.frameDevice?1:0}fillRect(t,e,i,s,a){this.ctx&&(this.ctx.beginPath(),this.ctx.rect(this.layout.borderWidth.frameCanvas+this.layout.scale*t,this.layout.borderWidth.frameCanvas+this.layout.scale*e,this.layout.scale*i,this.layout.scale*s),this.ctx.fillStyle=a,this.ctx.fill())}fillCanvasRect(t,e,i,s,a){this.ctx&&(this.ctx.beginPath(),this.ctx.rect(t,e,i,s),this.ctx.fillStyle=a,this.ctx.fill())}silkscreenImage(){var t;switch(null===(t=this.session)||void 0===t?void 0:t.device){case a.a.m515:return b;case a.a.iiic:return g;case a.a.m130:return y;case a.a.i710:return p;case a.a.palmV:default:return f}}buttonsImage(){var t;switch(null===(t=this.session)||void 0===t?void 0:t.device){case a.a.m515:return w;case a.a.iiic:return C;case a.a.m130:return k;case a.a.i710:return x;case a.a.palmV:default:return D}}backgroundColor(){var t;return Object(a.b)(null===(t=this.session)||void 0===t?void 0:t.device)?"white":l}frameColor(){var t;return Object(a.b)(null===(t=this.session)||void 0===t?void 0:t.device)?"white":u}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=h.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);
//# sourceMappingURL=11-es2015.5bcc0ff6d65b4ca166a8.js.map