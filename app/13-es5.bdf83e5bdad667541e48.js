!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(c){r=!0,a=c}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"6aA7":function(i,r,o){"use strict";o.r(r),o.d(r,"EmulationPageModule",function(){return Q});var c,u,l,h,v=o("ofXK"),d=o("tyNb"),f=o("mrSG"),b=o("pEgL"),m=o("fXoL"),p=o("bucj"),g=o("95eT"),y=o("TEn/"),k=o("G5Yk"),S=o("shLW"),w=o("Ld/c"),M=o("hq03"),x=((u=function(){function e(t,n,i,r,o,s){a(this,e),this.emulationService=t,this.loadingController=n,this.snapshotService=i,this.fileService=r,this.emulationStateService=o,this.alertService=s}return s(e,[{key:"saveBackup",value:function(){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,r,a,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.emulationStateService.getCurrentSession()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.loadingController.create();case 5:return n=e.sent,e.next=8,n.present();case 8:return r=[],e.next=11,this.emulationService.pause();case 11:return e.next=13,this.snapshotService.waitForPendingSnapshot();case 13:return e.prev=13,e.next=16,this.emulationService.cloudpilot;case 16:return a=e.sent,e.next=19,a.backup(function(e){return Object(f.a)(o,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.Init();case 1:if(!e.IsInProgress()){t.next=8;break}return n=e.GetCurrentDatabase(),e.Save()||r.push(n),t.next=6,new Promise(function(e){return setTimeout(e,0)});case 6:t.next=1;break;case 8:i=a.getArchive(e);case 9:case"end":return t.stop()}},t)}))});case 19:return e.prev=19,e.next=22,n.dismiss();case 22:return e.next=24,this.emulationService.resume();case 24:return e.finish(19);case 25:if(!i){e.next=34;break}if(!(r.length>0)){e.next=31;break}return e.next=29,this.alertService.message("Backup complete","\n                    ".concat(Object(g.a)(r)," failed  to backup.\n                    <br/><br/>\n                    Open databases cannot be backuped. Please run backup from the launcher\n                    in order to backup all databases.\n                "),{"Save Backup":function(){return o.fileService.saveFile(Object(g.b)(t),i)}},"Cancel");case 29:e.next=32;break;case 31:this.fileService.saveFile(Object(g.b)(t),i);case 32:e.next=36;break;case 34:return e.next=36,this.alertService.errorMessage("Backup failed.");case 36:case"end":return e.stop()}},e,this,[[13,,19,25]])}))}}]),e}()).\u0275fac=function(e){return new(e||u)(m.Qb(p.a),m.Qb(y.A),m.Qb(k.a),m.Qb(S.a),m.Qb(w.a),m.Qb(M.a))},u.\u0275prov=m.Fb({token:u,factory:u.\u0275fac,providedIn:"root"}),u),C=((c=function(){function e(t,n){a(this,e),this.emulationService=t,this.backupService=n,this.onClick=function(){},this.showHelp=function(){}}return s(e,[{key:"ngOnInit",value:function(){}},{key:"reset",value:function(){this.emulationService.reset(),this.onClick()}},{key:"resetNoExtensions",value:function(){this.emulationService.resetNoExtensions(),this.onClick()}},{key:"resetHard",value:function(){this.emulationService.resetHard(),this.onClick()}},{key:"power",value:function(){this.emulationService.engagePower(),this.onClick()}},{key:"help",value:function(){this.showHelp(),this.onClick()}},{key:"backup",value:function(){this.backupService.saveBackup(),this.onClick()}},{key:"backupDisabled",get:function(){return!this.emulationService.isRunning()||this.emulationService.isPowerOff()||!this.emulationService.isUiInitialized()}}]),e}()).\u0275fac=function(e){return new(e||c)(m.Jb(p.a),m.Jb(x))},c.\u0275cmp=m.Db({type:c,selectors:[["app-emulation-context-menu"]],inputs:{onClick:"onClick",showHelp:"showHelp"},decls:13,vars:11,consts:[["button","",3,"detail","disabled","click"],["button","",3,"detail","click"]],template:function(e,t){1&e&&(m.Mb(0,"ion-list"),m.Mb(1,"ion-item",0),m.Ub("click",function(){return t.power()}),m.hc(2," Power "),m.Lb(),m.Mb(3,"ion-item",0),m.Ub("click",function(){return t.reset()}),m.hc(4," Reset "),m.Lb(),m.Mb(5,"ion-item",0),m.Ub("click",function(){return t.resetNoExtensions()}),m.hc(6," Reset (no extensions) "),m.Lb(),m.Mb(7,"ion-item",0),m.Ub("click",function(){return t.resetHard()}),m.hc(8," Hard reset "),m.Lb(),m.Mb(9,"ion-item",0),m.Ub("click",function(){return t.backup()}),m.hc(10," Save backup "),m.Lb(),m.Mb(11,"ion-item",1),m.Ub("click",function(){return t.help()}),m.hc(12," Help "),m.Lb(),m.Lb()),2&e&&(m.zb(1),m.Zb("detail",!1)("disabled",!t.emulationService.isRunning()),m.zb(2),m.Zb("detail",!1)("disabled",!t.emulationService.isRunning()),m.zb(2),m.Zb("detail",!1)("disabled",!t.emulationService.isRunning()),m.zb(2),m.Zb("detail",!1)("disabled",!t.emulationService.isRunning()),m.zb(2),m.Zb("detail",!1)("disabled",t.backupDisabled),m.zb(2),m.Zb("detail",!1))},directives:[y.o,y.j],styles:[""]}),c),E=o("7yca"),L=o("oOyw"),D=o("xOb2"),T=((l=function(){function i(e,r,o){var s=this;a(this,i),this.emulationService=e,this.canvasDisplayService=r,this.ngZone=o,this.handleMouseDown=function(e){var t;if(0===e.button){var i=s.eventToPalmCoordinates(e);if(i){var r=s.determineArea(i);if(0===r)s.interactionMouse={area:r},(t=s.emulationService).handlePointerMove.apply(t,n(i));else{var a=s.determineButton(i);s.interactionMouse={area:r,button:a},s.handleButtonDown(a)}}}},this.handleMouseMove=function(e){var t,i;if(1&e.buttons&&0===(null===(i=s.interactionMouse)||void 0===i?void 0:i.area)){var r=s.eventToPalmCoordinates(e,!0);r&&(t=s.emulationService).handlePointerMove.apply(t,n(r))}},this.handeMouseUp=function(e){if(0===e.button){var t=s.interactionMouse;switch(s.interactionMouse=void 0,null==t?void 0:t.area){case 1:s.handleButtonUp(t.button);break;case 0:s.emulationService.handlePointerUp()}}},this.handleTouchStart=function(e){for(var t=0;t<e.changedTouches.length;t++){var i,r=e.changedTouches.item(t);if(r){var a=s.eventToPalmCoordinates(r);if(a){var o=s.determineArea(a);if(0===o)s.interactionsTouch.set(r.identifier,{area:o}),(i=s.emulationService).handlePointerMove.apply(i,n(a));else{var c=s.determineButton(a);s.interactionsTouch.set(r.identifier,{area:o,button:c}),s.handleButtonDown(c)}}}}!1!==e.cancelable&&e.preventDefault()},this.handleTouchMove=function(e){for(var t,i=0;i<e.changedTouches.length;i++){var r=e.changedTouches.item(i);if(r&&0===(null===(t=s.interactionsTouch.get(r.identifier))||void 0===t?void 0:t.area)){var a,o=s.eventToPalmCoordinates(r,!0);if(!o)continue;(a=s.emulationService).handlePointerMove.apply(a,n(o))}}!1!==e.cancelable&&e.preventDefault()},this.handleTouchEnd=function(e){for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches.item(t);if(n){var i=s.interactionsTouch.get(n.identifier);switch(s.interactionsTouch.delete(n.identifier),null==i?void 0:i.area){case 1:s.handleButtonUp(i.button);break;case 0:s.emulationService.handlePointerUp()}}}!1!==e.cancelable&&e.preventDefault()},this.handleKeyDown=function(e){if(s.isToggleGameMode(e))return e.preventDefault(),void s.ngZone.run(function(){return s.gameMode=!s.gameMode});var t=s.buttonFromEvent(e);if(void 0!==t)return s.handleButtonDown(t),void e.preventDefault();var n=s.keyCodeFromEvent(e);void 0!==n&&(s.emulationService.handleKeyDown(n),e.preventDefault())},this.handleKeyUp=function(e){var n=s.buttonFromEvent(e);if(void 0!==n)return s.handleButtonUp(n),void e.preventDefault();if("Control"===e.key){var i,r=t(s.activeButtons);try{for(r.s();!(i=r.n()).done;){var a=i.value;s.emulationService.handleButtonUp(a)}}catch(o){r.e(o)}finally{r.f()}s.activeButtons.clear(),s.canvasDisplayService.drawButtons([])}},this.interactionsTouch=new Map,this.activeButtons=new Set,this.gameMode=!1}return s(i,[{key:"bind",value:function(e){var t=this;this.canvas&&this.release(),this.canvas=e,this.ngZone.runOutsideAngular(function(){e.addEventListener("mousedown",t.handleMouseDown),window.addEventListener("mouseup",t.handeMouseUp),window.addEventListener("mousemove",t.handleMouseMove),e.addEventListener("touchstart",t.handleTouchStart),e.addEventListener("touchmove",t.handleTouchMove),e.addEventListener("touchend",t.handleTouchEnd),e.addEventListener("touchcancel",t.handleTouchEnd),window.addEventListener("keydown",t.handleKeyDown),window.addEventListener("keyup",t.handleKeyUp)})}},{key:"release",value:function(){if(this.canvas){this.canvas.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("mouseup",this.handeMouseUp),window.removeEventListener("mousemove",this.handleMouseMove),this.canvas.removeEventListener("touchstart",this.handleTouchStart),this.canvas.removeEventListener("touchmove",this.handleTouchMove),this.canvas.removeEventListener("touchend",this.handleTouchEnd),this.canvas.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp);var e,n=t(this.activeButtons);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.handleButtonUp(i)}}catch(r){n.e(r)}finally{n.f()}this.activeButtons.clear(),this.interactionsTouch.clear(),this.interactionMouse=void 0,this.canvas=void 0}}},{key:"isGameMode",value:function(){return this.gameMode}},{key:"eventToPalmCoordinates",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.canvas){var n,i,r,a,o=this.canvas.getBoundingClientRect();o.width/o.height>b.e/b.c?(a=o.height,r=b.e/b.c*o.height,i=o.top,n=o.left+(o.width-r)/2):(r=o.width,a=b.c/b.e*o.width,n=o.left,i=o.top+(o.height-a)/2);var s=Math.floor((e.clientX-n)/r*b.e/b.d)-b.a/b.d,c=Math.floor((e.clientY-i)/a*b.c/b.d)-b.a/b.d;if(c>=161&&(c-=1),t)s<0&&(s=0),s>159&&(s=159),c<0&&(c=0),c>249&&(c=249);else if(s<0||s>=160||c<0||c>=250)return;return[s,c]}}},{key:"determineArea",value:function(t){return e(t,2)[1]>=220?1:0}},{key:"determineButton",value:function(t){var n=e(t,2),i=n[0],r=n[1];return i>=130?3:i>=100?2:i>=60?r>=236?5:4:i>=30?1:0}},{key:"handleButtonDown",value:function(e){this.activeButtons.has(e)||(this.activeButtons.add(e),this.emulationService.handleButtonDown(e),this.canvasDisplayService.drawButtons(Array.from(this.activeButtons.values())))}},{key:"handleButtonUp",value:function(e){this.activeButtons.has(e)&&(this.activeButtons.delete(e),this.emulationService.handleButtonUp(e),this.canvasDisplayService.drawButtons(Array.from(this.activeButtons.values())))}},{key:"isToggleGameMode",value:function(e){return"Shift"===e.key&&e.ctrlKey||"Control"===e.key&&e.shiftKey}},{key:"isGameModeActive",value:function(e){return!this.gameMode&&e.ctrlKey||this.gameMode&&!e.ctrlKey}},{key:"buttonFromEvent",value:function(e){switch(e.key){case"PageUp":return 4;case"PageDown":return 5}if(this.isGameModeActive(e))switch(e.key){case"w":case"i":case"ArrowUp":return 4;case"s":case"k":case"ArrowDown":return 5;case"a":case"j":case"y":case"z":case"ArrowLeft":return 0;case"q":case"u":case"x":return 1;case"e":case"o":case"c":return 2;case"d":case"l":case"v":case"ArrowRight":return 3}}},{key:"keyCodeFromEvent",value:function(e){if(!this.isGameModeActive(e)){if(1===e.key.length&&e.key.charCodeAt(0)<=255)return e.key.charCodeAt(0);switch(e.key){case"ArrowLeft":return 28;case"ArrowRight":return 29;case"ArrowUp":return 30;case"ArrowDown":return 31;case"Backspace":return 8;case"Tab":return 9;case"Enter":return 10;default:return}}}}]),i}()).\u0275fac=function(e){return new(e||l)(m.Qb(p.a),m.Qb(b.b),m.Qb(m.B))},l.\u0275prov=m.Fb({token:l,factory:l.\u0275fac,providedIn:"root"}),l),A=o("ZW/x"),B=o("4otK"),P=((h=function(){function e(t,n,i,r,o){a(this,e),this.emulationService=t,this.loadingController=n,this.snapshotService=i,this.emulationStateService=r,this.alertService=o}return s(e,[{key:"installFiles",value:function(e){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var i,r,a,o,s,c,u,l,h,v=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.loadingController.create({message:"Installing..."});case 2:return i=n.sent,n.next=5,i.present();case 5:return n.next=7,this.emulationService.pause();case 7:return n.next=9,this.snapshotService.waitForPendingSnapshot();case 9:r=[],a=[],o=[],n.prev=10,s=t(e),n.prev=12,s.s();case 14:if((c=s.n()).done){n.next=34;break}if(u=c.value,!/\.(prc|pdb)$/i.test(u.name)){n.next=31;break}return n.next=19,this.emulationService.installDb(u.content);case 19:n.t0=n.sent,n.next=-1===n.t0?22:2===n.t0?24:1===n.t0?26:27;break;case 22:return a.push(u.name),n.abrupt("break",27);case 24:return o.push(u.name),r.push(u.name),n.abrupt("break",27);case 26:r.push(u.name);case 27:return n.next=29,new Promise(function(e){return setTimeout(e,0)});case 29:n.next=32;break;case 31:a.push(u.name);case 32:n.next=14;break;case 34:n.next=39;break;case 36:n.prev=36,n.t1=n.catch(12),s.e(n.t1);case 39:return n.prev=39,s.f(),n.finish(39);case 42:return n.prev=42,i.dismiss(),this.emulationService.resume(),n.finish(42);case 45:l=[this.messageSucces(r),this.messageFailed(a),this.messageRequireReset(o)].filter(function(e){return!!e}).join("<br/><br/>"),h=0===a.length?"Installation successful":0===r.length?"Installation failed":"Installation errors",this.alertService.message(h,l,o.length>0?{"Reset now":function(){return v.emulationService.reset()}}:void 0);case 47:case"end":return n.stop()}},n,this,[[10,,42,45],[12,36,39,42]])}))}},{key:"messageSucces",value:function(e){switch(e.length){case 0:return;case 1:return"Installation of ".concat(e[0]," successful.");default:return"Installation of ".concat(e.length," files successful.")}}},{key:"messageFailed",value:function(e){return e.length>0?"Installation of  ".concat(Object(g.a)(e)," failed."):void 0}},{key:"messageRequireReset",value:function(e){return e.length>0?"".concat(Object(g.a)(e)," require a device reset."):void 0}}]),e}()).\u0275fac=function(e){return new(e||h)(m.Qb(p.a),m.Qb(y.A),m.Qb(k.a),m.Qb(w.a),m.Qb(M.a))},h.\u0275prov=m.Fb({token:h,factory:h.\u0275fac,providedIn:"root"}),h),R=["canvas"];function O(e,t){if(1&e){var n=m.Nb();m.Mb(0,"ion-button",4),m.Ub("click",function(){return m.cc(n),m.Wb().mute(!1)}),m.Kb(1,"ion-icon",11),m.Lb()}}function I(e,t){if(1&e){var n=m.Nb();m.Mb(0,"ion-button",4),m.Ub("click",function(){return m.cc(n),m.Wb().mute(!0)}),m.Kb(1,"ion-icon",12),m.Lb()}}function U(e,t){if(1&e){var n=m.Nb();m.Mb(0,"ion-button",4),m.Ub("click",function(){return m.cc(n),m.Wb().showGameModeHint()}),m.Kb(1,"ion-icon",13),m.Lb()}}function H(e,t){1&e&&(m.Mb(0,"div",14),m.Mb(1,"div"),m.hc(2,"No session selected"),m.Lb(),m.Lb())}var j,F,z,K=[{path:"",component:(j=function(){function e(t,n,i,r,o,s,c,u,l,h,v,d,f,b){var m=this;a(this,e),this.emulationService=t,this.emulationState=n,this.storageService=i,this.eventHandlingService=r,this.canvasDisplayService=o,this.kvsService=s,this.audioService=c,this.popoverController=u,this.modalController=l,this.alertService=h,this.fileService=v,this.loadingController=d,this.snapshotService=f,this.installlationService=b,this.onSnapshot=function(e){m.kvsService.kvs.showStatistics&&m.canvasDisplayService.drawStatistics(e,m.emulationService.getStatistics())},this.onNewFrame=function(e){m.canvasDisplayService.drawEmulationCanvas(e)}}return s(e,[{key:"ngAfterViewInit",value:function(){}},{key:"canvasWidth",get:function(){return b.e}},{key:"canvasHeight",get:function(){return b.c}},{key:"cssWidth",get:function(){return this.canvasWidth/devicePixelRatio+"px"}},{key:"cssHeight",get:function(){return this.canvasHeight/devicePixelRatio+"px"}},{key:"ionViewDidEnter",value:function(){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.emulationState.getCurrentSession(),n=Object(L.b)(),e.t0=t||void 0===n,e.t0){e.next=7;break}return e.next=6,this.storageService.getSession(n);case 6:t=e.sent;case 7:this.canvasDisplayService.initialize(this.canvasRef.nativeElement,t).then(function(){i.kvsService.kvs.showStatistics&&i.canvasDisplayService.drawStatistics()}),this.onNewFrame(this.emulationService.getCanvas()),this.emulationService.newFrameEvent.addHandler(this.onNewFrame),this.snapshotService.snapshotEvent.addHandler(this.onSnapshot),this.emulationService.resume(),this.eventHandlingService.bind(this.canvasRef.nativeElement);case 13:case"end":return e.stop()}},e,this)}))}},{key:"ionViewWillLeave",value:function(){this.emulationService.pause(),this.emulationService.newFrameEvent.removeHandler(this.onNewFrame),this.snapshotService.snapshotEvent.removeHandler(this.onSnapshot),this.eventHandlingService.release()}},{key:"openContextMenu",value:function(e){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.popoverController.create({component:C,event:e,backdropDismiss:!0,showBackdrop:!1,componentProps:{onClick:function(){return n.dismiss()},showHelp:function(){return i.showHelp()}}});case 2:(n=t.sent).present();case 4:case"end":return t.stop()}},t,this)}))}},{key:"installFiles",value:function(){this.fileService.openFiles(this.installlationService.installFiles.bind(this.installlationService))}},{key:"showHelp",value:function(){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:E.a,componentProps:{url:"assets/doc/emulation.md"}});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"showGameModeHint",value:function(){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertService.message("Game mode","\n                The keyboard is in game mode and controls the hardware buttons.\n                Press ctrl-shift in order to exit game mode.\n                <br/><br/>\n                Check the help page for a description of the different keyboard mappings.\n            ",{Help:function(){return t.showHelp()}});case 2:case"end":return e.stop()}},e,this)}))}},{key:"installFileDisabled",get:function(){return!this.emulationService.isRunning()||this.emulationService.isPowerOff()||!this.emulationService.isUiInitialized()}},{key:"title",get:function(){var e;return(null===(e=this.emulationState.getCurrentSession())||void 0===e?void 0:e.name)||""}},{key:"isMuted",get:function(){return!this.audioService.isInitialized()||this.audioService.isMuted()}},{key:"isAudioOff",get:function(){return this.kvsService.kvs.volume<=0}},{key:"mute",value:function(e){e?this.audioService.mute(!0):this.audioService.isInitialized()?this.audioService.mute(!1):this.audioService.initialize()}}]),e}(),j.\u0275fac=function(e){return new(e||j)(m.Jb(p.a),m.Jb(w.a),m.Jb(D.b),m.Jb(T),m.Jb(b.b),m.Jb(A.a),m.Jb(B.a),m.Jb(y.C),m.Jb(y.B),m.Jb(M.a),m.Jb(S.a),m.Jb(y.A),m.Jb(k.a),m.Jb(P))},j.\u0275cmp=m.Db({type:j,selectors:[["app-emulation"]],viewQuery:function(e,t){var n;1&e&&m.lc(R,1),2&e&&m.ac(n=m.Vb())&&(t.canvasRef=n.first)},decls:18,vars:16,consts:[["slot","end"],[3,"disabled","click"],["name","download-outline"],["slot","start"],[3,"click"],["name","ellipsis-vertical-outline"],[3,"click",4,"ngIf"],[1,"container","running-session"],[3,"width","height"],["canvas",""],["class","container no-session",4,"ngIf"],["name","volume-mute-outline"],["name","volume-high-outline"],["name","game-controller-outline"],[1,"container","no-session"]],template:function(e,t){1&e&&(m.Mb(0,"ion-header"),m.Mb(1,"ion-toolbar"),m.Mb(2,"ion-title"),m.hc(3),m.Lb(),m.Mb(4,"ion-buttons",0),m.Mb(5,"ion-button",1),m.Ub("click",function(){return t.installFiles()}),m.Kb(6,"ion-icon",2),m.Lb(),m.Lb(),m.Mb(7,"ion-buttons",3),m.Mb(8,"ion-button",4),m.Ub("click",function(e){return t.openContextMenu(e)}),m.Kb(9,"ion-icon",5),m.Lb(),m.gc(10,O,2,0,"ion-button",6),m.gc(11,I,2,0,"ion-button",6),m.gc(12,U,2,0,"ion-button",6),m.Lb(),m.Lb(),m.Lb(),m.Mb(13,"ion-content"),m.Mb(14,"div",7),m.Kb(15,"canvas",8,9),m.Lb(),m.gc(17,H,3,0,"div",10),m.Lb()),2&e&&(m.zb(3),m.ic(t.title),m.zb(2),m.Zb("disabled",t.installFileDisabled),m.zb(5),m.Zb("ngIf",t.isMuted&&!t.isAudioOff),m.zb(1),m.Zb("ngIf",!t.isMuted&&!t.isAudioOff),m.zb(1),m.Zb("ngIf",t.eventHandlingService.isGameMode()),m.zb(2),m.fc("display",t.emulationState.getCurrentSession()?void 0:"none"),m.zb(1),m.fc("width",t.cssWidth)("height",t.cssHeight)("display",t.emulationState.getCurrentSession()?"block":"none"),m.Zb("width",t.canvasWidth)("height",t.canvasHeight),m.zb(2),m.Zb("ngIf",!t.emulationState.getCurrentSession()))},directives:[y.g,y.x,y.v,y.e,y.d,y.h,v.i,y.f],styles:["ion-title[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;padding:3px}.container.running-session[_ngcontent-%COMP%]{background:radial-gradient(circle,#ccc 0,#eee 100%)}@media (prefers-color-scheme:dark){.container.running-session[_ngcontent-%COMP%]{background:none}}canvas[_ngcontent-%COMP%]{max-width:100%;max-height:100%;-o-object-fit:contain;object-fit:contain}"]}),j)}],J=((F=function e(){a(this,e)}).\u0275fac=function(e){return new(e||F)},F.\u0275mod=m.Hb({type:F}),F.\u0275inj=m.Gb({imports:[[d.i.forChild(K)],d.i]}),F),Z=o("3Pt+"),G=o("vy64"),Q=((z=function e(){a(this,e)}).\u0275fac=function(e){return new(e||z)},z.\u0275mod=m.Hb({type:z}),z.\u0275inj=m.Gb({imports:[[v.b,Z.e,y.y,J,G.a]]}),z)}}])}();
//# sourceMappingURL=13-es5.bdf83e5bdad667541e48.js.map