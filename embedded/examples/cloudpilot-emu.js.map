{"version":3,"file":"cloudpilot-emu.js","mappings":"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MAAE54B,GAAS,CAAE,MAAO4I,GAAKqe,EAAOre,EAAI,CAAE,CAC7F,SAASkwB,EAAKG,GAJlB,IAAej5B,EAIai5B,EAAOC,KAAOlS,EAAQiS,EAAOj5B,QAJ1CA,EAIyDi5B,EAAOj5B,MAJhDA,aAAiB24B,EAAI34B,EAAQ,IAAI24B,EAAE,SAAU3R,GAAWA,EAAQhnB,EAAQ,IAIjBm5B,KAAKN,EAAWG,EAAW,CAC7GF,GAAMF,EAAYA,EAAU72B,MAAM02B,EAASC,GAAc,KAAKK,OAClE,EACF,C,uIA8B6Bj5B,OAAO4nB,OA2GX5nB,OAAO4nB,OAoEkB,mBAApB0R,iBAAiCA,gB,ICpUnD,EAAAC,E,2BAAAA,EAAA,MAAQ,KAChB,sBACA,gBACA,gBACA,kBACA,gBACA,oBACA,wBACA,sBACA,kBACA,kBACA,oBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,0BACA,4BACA,qBACA,qBACA,uBACA,qBACA,6BACA,sBACA,6BACA,qBACA,iBACA,qBACA,sBACA,oBACA,yBCRJ,IAAIC,EAAS,EA0Eb,MAAMC,EAA+B,CACjC,EAASC,UACT,EAASC,MACT,EAASC,IACT,EAASC,OACT,EAASC,MACT,EAASC,QACT,EAASC,UACT,EAASC,SACT,EAASC,MACT,EAASC,KACT,EAASC,KACT,EAASC,KACT,EAASC,KACT,EAASC,KACT,EAASC,KACT,EAASC,KACT,EAASC,KACT,EAASC,KACT,EAASC,KACT,EAASC,KACT,EAASC,KACT,EAASC,KACT,EAASC,WACT,EAASC,YACT,EAASC,QACT,EAASC,QACT,EAASC,SACT,EAASC,QACT,EAASC,SACT,EAASC,SACT,EAASC,SACT,EAASC,SACT,EAASC,QACT,EAASC,QACT,EAASC,OAUb,SAASC,IACL,MAAO,CAACzrB,EAAiB0rB,EAA8BzD,KACnD,MAAM0D,EAAY1D,EAAKn4B,MAMvB,OAJAm4B,EAAKn4B,MAAQ,SAA4B87B,EAAaC,GAClD,OAAOz7B,KAAKq7B,MAAM,IAAME,EAAU/E,KAAK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","sources":["webpack://cloudpilot/webpack/universalModuleDefinition","webpack://cloudpilot/./node_modules/microevent.ts/lib/index.js","webpack://cloudpilot/./node_modules/microevent.ts/lib/Event.js","webpack://cloudpilot/./node_modules/fast-unique-numbers/build/es5/bundle.js","webpack://cloudpilot/../src/cloudpilot/cloudpilot_web.js","webpack://cloudpilot/webpack/bootstrap","webpack://cloudpilot/webpack/runtime/compat get default export","webpack://cloudpilot/webpack/runtime/define property getters","webpack://cloudpilot/webpack/runtime/get javascript chunk filename","webpack://cloudpilot/webpack/runtime/global","webpack://cloudpilot/webpack/runtime/hasOwnProperty shorthand","webpack://cloudpilot/webpack/runtime/make namespace object","webpack://cloudpilot/webpack/runtime/publicPath","webpack://cloudpilot/webpack/runtime/jsonp chunk loading","webpack://cloudpilot/./node_modules/tslib/tslib.es6.mjs","webpack://cloudpilot/./common/model/DeviceId.ts","webpack://cloudpilot/./common/bridge/Cloudpilot.ts","webpack://cloudpilot/./common/bridge/ZipfileWalker.ts","webpack://cloudpilot/./common/helper/sessionfile.ts","webpack://cloudpilot/./common/bridge/util.ts","webpack://cloudpilot/./common/helper/wasm.ts","webpack://cloudpilot/./common/helper/deviceProperties.ts","webpack://cloudpilot/./common/model/DeviceOrientation.ts","webpack://cloudpilot/./common/helper/browser.ts","webpack://cloudpilot/./common/helper/image.ts","webpack://cloudpilot/./common/service/SkinLoader.ts","webpack://cloudpilot/./node_modules/async-mutex/index.mjs","webpack://cloudpilot/./embedded/src/Watcher.ts","webpack://cloudpilot/./common/service/AbstractAudioService.ts","webpack://cloudpilot/./embedded/src/service/EmbeddedAudioService.ts","webpack://cloudpilot/./common/helper/palette.ts","webpack://cloudpilot/./common/service/AbstractCanvasDisplayService.ts","webpack://cloudpilot/./embedded/src/service/EmbeddedCanvasDisplayService.ts","webpack://cloudpilot/./common/helper/Average.ts","webpack://cloudpilot/./common/helper/Fifo.ts","webpack://cloudpilot/./node_modules/broker-factory/build/es2019/guards/message-port.js","webpack://cloudpilot/./node_modules/broker-factory/build/es2019/helpers/port-map.js","webpack://cloudpilot/./node_modules/broker-factory/build/es2019/module.js","webpack://cloudpilot/./node_modules/worker-timers-broker/build/es2019/module.js","webpack://cloudpilot/./node_modules/broker-factory/build/es2019/helpers/extend-broker-implementation.js","webpack://cloudpilot/./node_modules/worker-timers/build/es2019/module.js","webpack://cloudpilot/./node_modules/worker-timers/build/es2019/factories/load-or-return-broker.js","webpack://cloudpilot/./node_modules/worker-timers/build/es2019/worker/worker.js","webpack://cloudpilot/./common/helper/scheduler.ts","webpack://cloudpilot/./common/engine/cloudpilot/SerialPort.ts","webpack://cloudpilot/./common/helper/crc.ts","webpack://cloudpilot/./common/helper/timed.ts","webpack://cloudpilot/./common/engine/cloudpilot/Snapshot.ts","webpack://cloudpilot/./common/engine/cloudpilot/EngineCloudpilot.ts","webpack://cloudpilot/./common/engine/uarm/RpcHost.ts","webpack://cloudpilot/./common/engine/uarm/Snapshot.ts","webpack://cloudpilot/./common/engine/uarm/EngineUarm.ts","webpack://cloudpilot/./common/service/AbstractEmulationService.ts","webpack://cloudpilot/./embedded/src/service/EmbeddedEmulationService.ts","webpack://cloudpilot/./common/service/GenericEventHandlingService.ts","webpack://cloudpilot/./embedded/src/service/EmbeddedEventHandlingService.ts","webpack://cloudpilot/./embedded/src/Emulator.ts","webpack://cloudpilot/./embedded/src/button.ts","webpack://cloudpilot/./embedded/src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cloudpilot\"] = factory();\n\telse\n\t\troot[\"cloudpilot\"] = factory();\n})(self, () => {\nreturn ","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Event_1 = require(\"./Event\");\nexports.Event = Event_1.default;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar factories = [];\nfactories[0] = function () {\n    return function dispatcher0() { };\n};\nfactories[1] = function (callback, context) {\n    if (typeof (context) === 'undefined')\n        return callback;\n    return function dispatcher1(payload) {\n        callback(payload, context);\n    };\n};\nfunction getFactory(handlerCount) {\n    if (!factories[handlerCount])\n        factories[handlerCount] = compileFactory(handlerCount);\n    return factories[handlerCount];\n}\nfunction compileFactory(handlerCount) {\n    var src = 'return function dispatcher' + handlerCount + '(payload) {\\n';\n    var argsHandlers = [], argsContexts = [];\n    for (var i = 0; i < handlerCount; i++) {\n        argsHandlers.push('cb' + i);\n        argsContexts.push('ctx' + i);\n        src += '    cb' + i + '(payload, ctx' + i + ');\\n';\n    }\n    src += '};';\n    return new (Function.bind.apply(Function, [void 0].concat(argsHandlers.concat(argsContexts), [src])))();\n}\nvar Event = /** @class */ (function () {\n    function Event() {\n        this.hasHandlers = false;\n        this._handlers = [];\n        this._contexts = [];\n        this._createDispatcher();\n    }\n    Event.prototype.addHandler = function (handler, context) {\n        if (!this.isHandlerAttached(handler, context)) {\n            this._handlers.push(handler);\n            this._contexts.push(context);\n            this._createDispatcher();\n            this._updateHasHandlers();\n        }\n        return this;\n    };\n    Event.prototype.removeHandler = function (handler, context) {\n        var idx = this._getHandlerIndex(handler, context);\n        if (typeof (idx) !== 'undefined') {\n            this._handlers.splice(idx, 1);\n            this._contexts.splice(idx, 1);\n            this._createDispatcher();\n            this._updateHasHandlers();\n        }\n        return this;\n    };\n    Event.prototype.isHandlerAttached = function (handler, context) {\n        return typeof (this._getHandlerIndex(handler, context)) !== 'undefined';\n    };\n    Event.prototype._updateHasHandlers = function () {\n        this.hasHandlers = !!this._handlers.length;\n    };\n    Event.prototype._getHandlerIndex = function (handler, context) {\n        var handlerCount = this._handlers.length;\n        var idx;\n        for (idx = 0; idx < handlerCount; idx++) {\n            if (this._handlers[idx] === handler && this._contexts[idx] === context)\n                break;\n        }\n        return idx < handlerCount ? idx : undefined;\n    };\n    Event.prototype._createDispatcher = function () {\n        this.dispatch = getFactory(this._handlers.length).apply(this, this._handlers.concat(this._contexts));\n    };\n    return Event;\n}());\nexports.default = Event;\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.fastUniqueNumbers = {}));\n})(this, (function (exports) { 'use strict';\n\n    var createAddUniqueNumber = function createAddUniqueNumber(generateUniqueNumber) {\n      return function (set) {\n        var number = generateUniqueNumber(set);\n        set.add(number);\n        return number;\n      };\n    };\n\n    var createCache = function createCache(lastNumberWeakMap) {\n      return function (collection, nextNumber) {\n        lastNumberWeakMap.set(collection, nextNumber);\n        return nextNumber;\n      };\n    };\n\n    /*\n     * The value of the constant Number.MAX_SAFE_INTEGER equals (2 ** 53 - 1) but it\n     * is fairly new.\n     */\n    var MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER === undefined ? 9007199254740991 : Number.MAX_SAFE_INTEGER;\n    var TWO_TO_THE_POWER_OF_TWENTY_NINE = 536870912;\n    var TWO_TO_THE_POWER_OF_THIRTY = TWO_TO_THE_POWER_OF_TWENTY_NINE * 2;\n    var createGenerateUniqueNumber = function createGenerateUniqueNumber(cache, lastNumberWeakMap) {\n      return function (collection) {\n        var lastNumber = lastNumberWeakMap.get(collection);\n        /*\n         * Let's try the cheapest algorithm first. It might fail to produce a new\n         * number, but it is so cheap that it is okay to take the risk. Just\n         * increase the last number by one or reset it to 0 if we reached the upper\n         * bound of SMIs (which stands for small integers). When the last number is\n         * unknown it is assumed that the collection contains zero based consecutive\n         * numbers.\n         */\n        var nextNumber = lastNumber === undefined ? collection.size : lastNumber < TWO_TO_THE_POWER_OF_THIRTY ? lastNumber + 1 : 0;\n        if (!collection.has(nextNumber)) {\n          return cache(collection, nextNumber);\n        }\n        /*\n         * If there are less than half of 2 ** 30 numbers stored in the collection,\n         * the chance to generate a new random number in the range from 0 to 2 ** 30\n         * is at least 50%. It's benifitial to use only SMIs because they perform\n         * much better in any environment based on V8.\n         */\n        if (collection.size < TWO_TO_THE_POWER_OF_TWENTY_NINE) {\n          while (collection.has(nextNumber)) {\n            nextNumber = Math.floor(Math.random() * TWO_TO_THE_POWER_OF_THIRTY);\n          }\n          return cache(collection, nextNumber);\n        }\n        // Quickly check if there is a theoretical chance to generate a new number.\n        if (collection.size > MAX_SAFE_INTEGER) {\n          throw new Error('Congratulations, you created a collection of unique numbers which uses all available integers!');\n        }\n        // Otherwise use the full scale of safely usable integers.\n        while (collection.has(nextNumber)) {\n          nextNumber = Math.floor(Math.random() * MAX_SAFE_INTEGER);\n        }\n        return cache(collection, nextNumber);\n      };\n    };\n\n    var LAST_NUMBER_WEAK_MAP = new WeakMap();\n    var cache = createCache(LAST_NUMBER_WEAK_MAP);\n    var generateUniqueNumber = createGenerateUniqueNumber(cache, LAST_NUMBER_WEAK_MAP);\n    var addUniqueNumber = createAddUniqueNumber(generateUniqueNumber);\n\n    exports.addUniqueNumber = addUniqueNumber;\n    exports.generateUniqueNumber = generateUniqueNumber;\n\n}));\n","var createModule = (() => {\n  var _scriptName = typeof document != 'undefined' ? document.currentScript?.src : undefined;\n  return (\nasync function(moduleArg = {}) {\n  var moduleRtn;\n\nvar Module=moduleArg;var ENVIRONMENT_IS_WEB=typeof window==\"object\";var ENVIRONMENT_IS_WORKER=typeof WorkerGlobalScope!=\"undefined\";var ENVIRONMENT_IS_NODE=typeof process==\"object\"&&process.versions?.node&&process.type!=\"renderer\";var arguments_=[];var thisProgram=\"./this.program\";var quit_=(status,toThrow)=>{throw toThrow};if(ENVIRONMENT_IS_WORKER){_scriptName=self.location.href}var scriptDirectory=\"\";function locateFile(path){if(Module[\"locateFile\"]){return Module[\"locateFile\"](path,scriptDirectory)}return scriptDirectory+path}var readAsync,readBinary;if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){try{scriptDirectory=new URL(\".\",_scriptName).href}catch{}{if(ENVIRONMENT_IS_WORKER){readBinary=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.responseType=\"arraybuffer\";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=async url=>{var response=await fetch(url,{credentials:\"same-origin\"});if(response.ok){return response.arrayBuffer()}throw new Error(response.status+\" : \"+response.url)}}}else{}var out=console.log.bind(console);var err=console.error.bind(console);var wasmBinary;var ABORT=false;var EXITSTATUS;function assert(condition,text){if(!condition){abort(text)}}function writeStackCookie(){var max=_emscripten_stack_get_end();if(max==0){max+=4}HEAPU32[max>>2]=34821223;HEAPU32[max+4>>2]=2310721022;HEAPU32[0>>2]=1668509029}function checkStackCookie(){if(ABORT)return;var max=_emscripten_stack_get_end();if(max==0){max+=4}var cookie1=HEAPU32[max>>2];var cookie2=HEAPU32[max+4>>2];if(cookie1!=34821223||cookie2!=2310721022){abort(`Stack overflow! Stack cookie has been overwritten at ${ptrToString(max)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${ptrToString(cookie2)} ${ptrToString(cookie1)}`)}if(HEAPU32[0>>2]!=1668509029){abort(\"Runtime error: The application has corrupted its heap memory area (address zero)!\")}}var readyPromiseResolve,readyPromiseReject;var wasmMemory;var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;var HEAP64,HEAPU64;var runtimeInitialized=false;function updateMemoryViews(){var b=wasmMemory.buffer;HEAP8=new Int8Array(b);HEAP16=new Int16Array(b);Module[\"HEAPU8\"]=HEAPU8=new Uint8Array(b);HEAPU16=new Uint16Array(b);HEAP32=new Int32Array(b);Module[\"HEAPU32\"]=HEAPU32=new Uint32Array(b);HEAPF32=new Float32Array(b);HEAPF64=new Float64Array(b);HEAP64=new BigInt64Array(b);HEAPU64=new BigUint64Array(b)}function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(onPreRuns)}function initRuntime(){runtimeInitialized=true;checkStackCookie();callRuntimeCallbacks(onInits);wasmExports[\"v\"]()}function preMain(){checkStackCookie()}function postRun(){checkStackCookie();if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(onPostRuns)}var runDependencies=0;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;Module[\"monitorRunDependencies\"]?.(runDependencies)}function removeRunDependency(id){runDependencies--;Module[\"monitorRunDependencies\"]?.(runDependencies);if(runDependencies==0){if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}function abort(what){Module[\"onAbort\"]?.(what);what=\"Aborted(\"+what+\")\";err(what);ABORT=true;what+=\". Build with -sASSERTIONS for more info.\";var e=new WebAssembly.RuntimeError(what);readyPromiseReject?.(e);throw e}var wasmBinaryFile;function findWasmBinary(){return locateFile(\"cloudpilot_web.wasm\")}function getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}throw\"both async and sync fetching of the wasm failed\"}async function getWasmBinary(binaryFile){if(!wasmBinary){try{var response=await readAsync(binaryFile);return new Uint8Array(response)}catch{}}return getBinarySync(binaryFile)}async function instantiateArrayBuffer(binaryFile,imports){try{var binary=await getWasmBinary(binaryFile);var instance=await WebAssembly.instantiate(binary,imports);return instance}catch(reason){err(`failed to asynchronously prepare wasm: ${reason}`);abort(reason)}}async function instantiateAsync(binary,binaryFile,imports){if(!binary&&typeof WebAssembly.instantiateStreaming==\"function\"){try{var response=fetch(binaryFile,{credentials:\"same-origin\"});var instantiationResult=await WebAssembly.instantiateStreaming(response,imports);return instantiationResult}catch(reason){err(`wasm streaming compile failed: ${reason}`);err(\"falling back to ArrayBuffer instantiation\")}}return instantiateArrayBuffer(binaryFile,imports)}function getWasmImports(){return{a:wasmImports}}async function createWasm(){function receiveInstance(instance,module){wasmExports=instance.exports;wasmMemory=wasmExports[\"u\"];updateMemoryViews();wasmTable=wasmExports[\"Ed\"];assignWasmExports(wasmExports);removeRunDependency(\"wasm-instantiate\");return wasmExports}addRunDependency(\"wasm-instantiate\");function receiveInstantiationResult(result){return receiveInstance(result[\"instance\"])}var info=getWasmImports();if(Module[\"instantiateWasm\"]){return new Promise((resolve,reject)=>{Module[\"instantiateWasm\"](info,(mod,inst)=>{resolve(receiveInstance(mod,inst))})})}wasmBinaryFile??=findWasmBinary();var result=await instantiateAsync(wasmBinary,wasmBinaryFile,info);var exports=receiveInstantiationResult(result);return exports}class ExitStatus{name=\"ExitStatus\";constructor(status){this.message=`Program terminated with exit(${status})`;this.status=status}}var callRuntimeCallbacks=callbacks=>{while(callbacks.length>0){callbacks.shift()(Module)}};var onPostRuns=[];var addOnPostRun=cb=>onPostRuns.push(cb);var onPreRuns=[];var addOnPreRun=cb=>onPreRuns.push(cb);var noExitRuntime=true;var ptrToString=ptr=>{ptr>>>=0;return\"0x\"+ptr.toString(16).padStart(8,\"0\")};var UTF8Decoder=typeof TextDecoder!=\"undefined\"?new TextDecoder:undefined;var UTF8ArrayToString=(heapOrArray,idx=0,maxBytesToRead=NaN)=>{var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr))}var str=\"\";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}return str};var UTF8ToString=(ptr,maxBytesToRead)=>ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):\"\";var ___assert_fail=(condition,filename,line,func)=>abort(`Assertion failed: ${UTF8ToString(condition)}, at: `+[filename?UTF8ToString(filename):\"unknown filename\",line,func?UTF8ToString(func):\"unknown function\"]);var INT53_MAX=9007199254740992;var INT53_MIN=-9007199254740992;var bigintToI53Checked=num=>num<INT53_MIN||num>INT53_MAX?NaN:Number(num);function ___syscall_ftruncate64(fd,length){length=bigintToI53Checked(length)}var __abort_js=()=>abort(\"\");var runtimeKeepaliveCounter=0;var __emscripten_runtime_keepalive_clear=()=>{noExitRuntime=false;runtimeKeepaliveCounter=0};var isLeapYear=year=>year%4===0&&(year%100!==0||year%400===0);var MONTH_DAYS_LEAP_CUMULATIVE=[0,31,60,91,121,152,182,213,244,274,305,335];var MONTH_DAYS_REGULAR_CUMULATIVE=[0,31,59,90,120,151,181,212,243,273,304,334];var ydayFromDate=date=>{var leap=isLeapYear(date.getFullYear());var monthDaysCumulative=leap?MONTH_DAYS_LEAP_CUMULATIVE:MONTH_DAYS_REGULAR_CUMULATIVE;var yday=monthDaysCumulative[date.getMonth()]+date.getDate()-1;return yday};function __localtime_js(time,tmPtr){time=bigintToI53Checked(time);var date=new Date(time*1e3);HEAP32[tmPtr>>2]=date.getSeconds();HEAP32[tmPtr+4>>2]=date.getMinutes();HEAP32[tmPtr+8>>2]=date.getHours();HEAP32[tmPtr+12>>2]=date.getDate();HEAP32[tmPtr+16>>2]=date.getMonth();HEAP32[tmPtr+20>>2]=date.getFullYear()-1900;HEAP32[tmPtr+24>>2]=date.getDay();var yday=ydayFromDate(date)|0;HEAP32[tmPtr+28>>2]=yday;HEAP32[tmPtr+36>>2]=-(date.getTimezoneOffset()*60);var start=new Date(date.getFullYear(),0,1);var summerOffset=new Date(date.getFullYear(),6,1).getTimezoneOffset();var winterOffset=start.getTimezoneOffset();var dst=(summerOffset!=winterOffset&&date.getTimezoneOffset()==Math.min(winterOffset,summerOffset))|0;HEAP32[tmPtr+32>>2]=dst}var __mktime_js=function(tmPtr){var ret=(()=>{var date=new Date(HEAP32[tmPtr+20>>2]+1900,HEAP32[tmPtr+16>>2],HEAP32[tmPtr+12>>2],HEAP32[tmPtr+8>>2],HEAP32[tmPtr+4>>2],HEAP32[tmPtr>>2],0);var dst=HEAP32[tmPtr+32>>2];var guessedOffset=date.getTimezoneOffset();var start=new Date(date.getFullYear(),0,1);var summerOffset=new Date(date.getFullYear(),6,1).getTimezoneOffset();var winterOffset=start.getTimezoneOffset();var dstOffset=Math.min(winterOffset,summerOffset);if(dst<0){HEAP32[tmPtr+32>>2]=Number(summerOffset!=winterOffset&&dstOffset==guessedOffset)}else if(dst>0!=(dstOffset==guessedOffset)){var nonDstOffset=Math.max(winterOffset,summerOffset);var trueOffset=dst>0?dstOffset:nonDstOffset;date.setTime(date.getTime()+(trueOffset-guessedOffset)*6e4)}HEAP32[tmPtr+24>>2]=date.getDay();var yday=ydayFromDate(date)|0;HEAP32[tmPtr+28>>2]=yday;HEAP32[tmPtr>>2]=date.getSeconds();HEAP32[tmPtr+4>>2]=date.getMinutes();HEAP32[tmPtr+8>>2]=date.getHours();HEAP32[tmPtr+12>>2]=date.getDate();HEAP32[tmPtr+16>>2]=date.getMonth();HEAP32[tmPtr+20>>2]=date.getYear();var timeMs=date.getTime();if(isNaN(timeMs)){return-1}return timeMs/1e3})();return BigInt(ret)};var timers={};var handleException=e=>{if(e instanceof ExitStatus||e==\"unwind\"){return EXITSTATUS}checkStackCookie();if(e instanceof WebAssembly.RuntimeError){if(_emscripten_stack_get_current()<=0){err(\"Stack overflow detected.  You can try increasing -sSTACK_SIZE (currently set to 1048576)\")}}quit_(1,e)};var keepRuntimeAlive=()=>noExitRuntime||runtimeKeepaliveCounter>0;var _proc_exit=code=>{EXITSTATUS=code;if(!keepRuntimeAlive()){Module[\"onExit\"]?.(code);ABORT=true}quit_(code,new ExitStatus(code))};var exitJS=(status,implicit)=>{EXITSTATUS=status;_proc_exit(status)};var _exit=exitJS;var maybeExit=()=>{if(!keepRuntimeAlive()){try{_exit(EXITSTATUS)}catch(e){handleException(e)}}};var callUserCallback=func=>{if(ABORT){return}try{func();maybeExit()}catch(e){handleException(e)}};var _emscripten_get_now=()=>performance.now();var __setitimer_js=(which,timeout_ms)=>{if(timers[which]){clearTimeout(timers[which].id);delete timers[which]}if(!timeout_ms)return 0;var id=setTimeout(()=>{delete timers[which];callUserCallback(()=>__emscripten_timeout(which,_emscripten_get_now()))},timeout_ms);timers[which]={id,timeout_ms};return 0};var stringToUTF8Array=(str,heap,outIdx,maxBytesToWrite)=>{if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.codePointAt(i);if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63;i++}}heap[outIdx]=0;return outIdx-startIdx};var stringToUTF8=(str,outPtr,maxBytesToWrite)=>stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite);var __tzset_js=(timezone,daylight,std_name,dst_name)=>{var currentYear=(new Date).getFullYear();var winter=new Date(currentYear,0,1);var summer=new Date(currentYear,6,1);var winterOffset=winter.getTimezoneOffset();var summerOffset=summer.getTimezoneOffset();var stdTimezoneOffset=Math.max(winterOffset,summerOffset);HEAPU32[timezone>>2]=stdTimezoneOffset*60;HEAP32[daylight>>2]=Number(winterOffset!=summerOffset);var extractZone=timezoneOffset=>{var sign=timezoneOffset>=0?\"-\":\"+\";var absOffset=Math.abs(timezoneOffset);var hours=String(Math.floor(absOffset/60)).padStart(2,\"0\");var minutes=String(absOffset%60).padStart(2,\"0\");return`UTC${sign}${hours}${minutes}`};var winterName=extractZone(winterOffset);var summerName=extractZone(summerOffset);if(summerOffset<winterOffset){stringToUTF8(winterName,std_name,17);stringToUTF8(summerName,dst_name,17)}else{stringToUTF8(winterName,dst_name,17);stringToUTF8(summerName,std_name,17)}};var _emscripten_date_now=()=>Date.now();var nowIsMonotonic=1;var checkWasiClock=clock_id=>clock_id>=0&&clock_id<=3;function _clock_time_get(clk_id,ignored_precision,ptime){ignored_precision=bigintToI53Checked(ignored_precision);if(!checkWasiClock(clk_id)){return 28}var now;if(clk_id===0){now=_emscripten_date_now()}else if(nowIsMonotonic){now=_emscripten_get_now()}else{return 52}var nsec=Math.round(now*1e3*1e3);HEAP64[ptime>>3]=BigInt(nsec);return 0}var readEmAsmArgsArray=[];var readEmAsmArgs=(sigPtr,buf)=>{readEmAsmArgsArray.length=0;var ch;while(ch=HEAPU8[sigPtr++]){var wide=ch!=105;wide&=ch!=112;buf+=wide&&buf%8?4:0;readEmAsmArgsArray.push(ch==112?HEAPU32[buf>>2]:ch==106?HEAP64[buf>>3]:ch==105?HEAP32[buf>>2]:HEAPF64[buf>>3]);buf+=wide?8:4}return readEmAsmArgsArray};var runEmAsmFunction=(code,sigPtr,argbuf)=>{var args=readEmAsmArgs(sigPtr,argbuf);return ASM_CONSTS[code](...args)};var _emscripten_asm_const_int=(code,sigPtr,argbuf)=>runEmAsmFunction(code,sigPtr,argbuf);var getHeapMax=()=>2147483648;var alignMemory=(size,alignment)=>Math.ceil(size/alignment)*alignment;var growMemory=size=>{var b=wasmMemory.buffer;var pages=(size-b.byteLength+65535)/65536|0;try{wasmMemory.grow(pages);updateMemoryViews();return 1}catch(e){}};var _emscripten_resize_heap=requestedSize=>{var oldSize=HEAPU8.length;requestedSize>>>=0;var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){return false}for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignMemory(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=growMemory(newSize);if(replacement){return true}}return false};var ENV={};var getExecutableName=()=>thisProgram||\"./this.program\";var getEnvStrings=()=>{if(!getEnvStrings.strings){var lang=(typeof navigator==\"object\"&&navigator.language||\"C\").replace(\"-\",\"_\")+\".UTF-8\";var env={USER:\"web_user\",LOGNAME:\"web_user\",PATH:\"/\",PWD:\"/\",HOME:\"/home/web_user\",LANG:lang,_:getExecutableName()};for(var x in ENV){if(ENV[x]===undefined)delete env[x];else env[x]=ENV[x]}var strings=[];for(var x in env){strings.push(`${x}=${env[x]}`)}getEnvStrings.strings=strings}return getEnvStrings.strings};var _environ_get=(__environ,environ_buf)=>{var bufSize=0;var envp=0;for(var string of getEnvStrings()){var ptr=environ_buf+bufSize;HEAPU32[__environ+envp>>2]=ptr;bufSize+=stringToUTF8(string,ptr,Infinity)+1;envp+=4}return 0};var lengthBytesUTF8=str=>{var len=0;for(var i=0;i<str.length;++i){var c=str.charCodeAt(i);if(c<=127){len++}else if(c<=2047){len+=2}else if(c>=55296&&c<=57343){len+=4;++i}else{len+=3}}return len};var _environ_sizes_get=(penviron_count,penviron_buf_size)=>{var strings=getEnvStrings();HEAPU32[penviron_count>>2]=strings.length;var bufSize=0;for(var string of strings){bufSize+=lengthBytesUTF8(string)+1}HEAPU32[penviron_buf_size>>2]=bufSize;return 0};var _fd_close=fd=>52;var _fd_read=(fd,iov,iovcnt,pnum)=>52;function _fd_seek(fd,offset,whence,newOffset){offset=bigintToI53Checked(offset);return 70}var printCharBuffers=[null,[],[]];var printChar=(stream,curr)=>{var buffer=printCharBuffers[stream];if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer));buffer.length=0}else{buffer.push(curr)}};var _fd_write=(fd,iov,iovcnt,pnum)=>{var num=0;for(var i=0;i<iovcnt;i++){var ptr=HEAPU32[iov>>2];var len=HEAPU32[iov+4>>2];iov+=8;for(var j=0;j<len;j++){printChar(fd,HEAPU8[ptr+j])}num+=len}HEAPU32[pnum>>2]=num;return 0};var intArrayFromString=(stringy,dontAddNull,length)=>{var len=length>0?length:lengthBytesUTF8(stringy)+1;var u8array=new Array(len);var numBytesWritten=stringToUTF8Array(stringy,u8array,0,u8array.length);if(dontAddNull)u8array.length=numBytesWritten;return u8array};var onInits=[];var uleb128Encode=(n,target)=>{if(n<128){target.push(n)}else{target.push(n%128|128,n>>7)}};var sigToWasmTypes=sig=>{var typeNames={i:\"i32\",j:\"i64\",f:\"f32\",d:\"f64\",e:\"externref\",p:\"i32\"};var type={parameters:[],results:sig[0]==\"v\"?[]:[typeNames[sig[0]]]};for(var i=1;i<sig.length;++i){type.parameters.push(typeNames[sig[i]])}return type};var generateFuncType=(sig,target)=>{var sigRet=sig.slice(0,1);var sigParam=sig.slice(1);var typeCodes={i:127,p:127,j:126,f:125,d:124,e:111};target.push(96);uleb128Encode(sigParam.length,target);for(var paramType of sigParam){target.push(typeCodes[paramType])}if(sigRet==\"v\"){target.push(0)}else{target.push(1,typeCodes[sigRet])}};var convertJsFunctionToWasm=(func,sig)=>{if(typeof WebAssembly.Function==\"function\"){return new WebAssembly.Function(sigToWasmTypes(sig),func)}var typeSectionBody=[1];generateFuncType(sig,typeSectionBody);var bytes=[0,97,115,109,1,0,0,0,1];uleb128Encode(typeSectionBody.length,bytes);bytes.push(...typeSectionBody);bytes.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var module=new WebAssembly.Module(new Uint8Array(bytes));var instance=new WebAssembly.Instance(module,{e:{f:func}});var wrappedFunc=instance.exports[\"f\"];return wrappedFunc};var wasmTableMirror=[];var wasmTable;var getWasmTableEntry=funcPtr=>{var func=wasmTableMirror[funcPtr];if(!func){wasmTableMirror[funcPtr]=func=wasmTable.get(funcPtr)}return func};var updateTableMap=(offset,count)=>{if(functionsInTableMap){for(var i=offset;i<offset+count;i++){var item=getWasmTableEntry(i);if(item){functionsInTableMap.set(item,i)}}}};var functionsInTableMap;var getFunctionAddress=func=>{if(!functionsInTableMap){functionsInTableMap=new WeakMap;updateTableMap(0,wasmTable.length)}return functionsInTableMap.get(func)||0};var freeTableIndexes=[];var getEmptyTableSlot=()=>{if(freeTableIndexes.length){return freeTableIndexes.pop()}try{wasmTable.grow(1)}catch(err){if(!(err instanceof RangeError)){throw err}throw\"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.\"}return wasmTable.length-1};var setWasmTableEntry=(idx,func)=>{wasmTable.set(idx,func);wasmTableMirror[idx]=wasmTable.get(idx)};var addFunction=(func,sig)=>{var rtn=getFunctionAddress(func);if(rtn){return rtn}var ret=getEmptyTableSlot();try{setWasmTableEntry(ret,func)}catch(err){if(!(err instanceof TypeError)){throw err}var wrapped=convertJsFunctionToWasm(func,sig);setWasmTableEntry(ret,wrapped)}functionsInTableMap.set(func,ret);return ret};{if(Module[\"noExitRuntime\"])noExitRuntime=Module[\"noExitRuntime\"];if(Module[\"print\"])out=Module[\"print\"];if(Module[\"printErr\"])err=Module[\"printErr\"];if(Module[\"wasmBinary\"])wasmBinary=Module[\"wasmBinary\"];if(Module[\"arguments\"])arguments_=Module[\"arguments\"];if(Module[\"thisProgram\"])thisProgram=Module[\"thisProgram\"]}Module[\"addFunction\"]=addFunction;Module[\"UTF8ToString\"]=UTF8ToString;var ASM_CONSTS={433568:$0=>{wasmTable.grow(65536);for(let i=0;i<=65535;i++)wasmTable.set(wasmTable.length-65535-1+i,wasmTable.get(HEAPU32[($0>>>2)+i]));return wasmTable.length-65535-1}};function __jsAssertThrow(msg){const err=new Error(UTF8ToString(msg));err.isAssert=true;throw err}var _main,_webidl_free,_webidl_malloc,_emscripten_bind_VoidPtr___destroy___0,_emscripten_bind_Cloudpilot_Cloudpilot_0,_emscripten_bind_Cloudpilot_Malloc_1,_emscripten_bind_Cloudpilot_Free_1,_emscripten_bind_Cloudpilot_Nullptr_0,_emscripten_bind_Cloudpilot_EnableLogging_1,_emscripten_bind_Cloudpilot_InitializeSession_3,_emscripten_bind_Cloudpilot_GetCyclesPerSecond_0,_emscripten_bind_Cloudpilot_RunEmulation_1,_emscripten_bind_Cloudpilot_SetClockFactor_1,_emscripten_bind_Cloudpilot_CopyFrame_0,_emscripten_bind_Cloudpilot_IsScreenDirty_0,_emscripten_bind_Cloudpilot_MarkScreenClean_0,_emscripten_bind_Cloudpilot_MinMemoryForDevice_1,_emscripten_bind_Cloudpilot_FramebufferSizeForDevice_1,_emscripten_bind_Cloudpilot_TotalMemoryForDevice_1,_emscripten_bind_Cloudpilot_QueuePenMove_2,_emscripten_bind_Cloudpilot_QueuePenUp_0,_emscripten_bind_Cloudpilot_QueueButtonDown_1,_emscripten_bind_Cloudpilot_QueueButtonUp_1,_emscripten_bind_Cloudpilot_QueueKeyboardEvent_1,_emscripten_bind_Cloudpilot_IsPowerOff_0,_emscripten_bind_Cloudpilot_IsUIInitialized_0,_emscripten_bind_Cloudpilot_GetOSVersion_0,_emscripten_bind_Cloudpilot_IsSetupComplete_0,_emscripten_bind_Cloudpilot_Reset_0,_emscripten_bind_Cloudpilot_ResetNoExtensions_0,_emscripten_bind_Cloudpilot_ResetHard_0,_emscripten_bind_Cloudpilot_InstallDb_2,_emscripten_bind_Cloudpilot_GetPalette2bitMapping_0,_emscripten_bind_Cloudpilot_GetMemoryPtr_0,_emscripten_bind_Cloudpilot_GetDirtyPagesPtr_0,_emscripten_bind_Cloudpilot_GetMemorySize_0,_emscripten_bind_Cloudpilot_ImportMemoryImage_2,_emscripten_bind_Cloudpilot_GetRomPtr_0,_emscripten_bind_Cloudpilot_GetRomSize_0,_emscripten_bind_Cloudpilot_GetSavestatePtr_0,_emscripten_bind_Cloudpilot_GetSavestateSize_0,_emscripten_bind_Cloudpilot_SaveState_0,_emscripten_bind_Cloudpilot_LoadState_2,_emscripten_bind_Cloudpilot_GetHotsyncName_0,_emscripten_bind_Cloudpilot_SetHotsyncName_1,_emscripten_bind_Cloudpilot_RegisterPwmHandler_1,_emscripten_bind_Cloudpilot_StartBackup_0,_emscripten_bind_Cloudpilot_SetClipboardIntegration_1,_emscripten_bind_Cloudpilot_GetClipboardIntegration_0,_emscripten_bind_Cloudpilot_IsSuspended_0,_emscripten_bind_Cloudpilot_GetSuspendContext_0,_emscripten_bind_Cloudpilot_SetNetworkRedirection_1,_emscripten_bind_Cloudpilot_GetNetworkRedirection_0,_emscripten_bind_Cloudpilot_RegisterProxyDisconnectHandler_1,_emscripten_bind_Cloudpilot_SetHotsyncNameManagement_1,_emscripten_bind_Cloudpilot_LaunchAppByName_1,_emscripten_bind_Cloudpilot_LaunchAppByDbHeader_2,_emscripten_bind_Cloudpilot_ClearExternalStorage_0,_emscripten_bind_Cloudpilot_AllocateCard_2,_emscripten_bind_Cloudpilot_AdoptCard_3,_emscripten_bind_Cloudpilot_MountCard_1,_emscripten_bind_Cloudpilot_RemoveCard_1,_emscripten_bind_Cloudpilot_GetCardData_1,_emscripten_bind_Cloudpilot_GetCardDirtyPages_1,_emscripten_bind_Cloudpilot_GetCardSize_1,_emscripten_bind_Cloudpilot_RemountCards_0,_emscripten_bind_Cloudpilot_GetSupportLevel_1,_emscripten_bind_Cloudpilot_GetMountedKey_0,_emscripten_bind_Cloudpilot_GetTransportIR_0,_emscripten_bind_Cloudpilot_GetTransportSerial_0,_emscripten_bind_Cloudpilot___destroy___0,_emscripten_bind_RomInfo_RomInfo_2,_emscripten_bind_RomInfo_IsValid_0,_emscripten_bind_RomInfo_CardVersion_0,_emscripten_bind_RomInfo_CardName_0,_emscripten_bind_RomInfo_RomVersion_0,_emscripten_bind_RomInfo_RomVersionString_0,_emscripten_bind_RomInfo_Supports_1,_emscripten_bind_RomInfo___destroy___0,_emscripten_bind_Frame_GetLineWidth_0,_emscripten_bind_Frame_GetBpp_0,_emscripten_bind_Frame_GetLines_0,_emscripten_bind_Frame_GetMargin_0,_emscripten_bind_Frame_GetBytesPerLine_0,_emscripten_bind_Frame_GetFirstDirtyLine_0,_emscripten_bind_Frame_GetLastDirtyLine_0,_emscripten_bind_Frame_GetHasChanges_0,_emscripten_bind_Frame_GetBuffer_0,_emscripten_bind_Frame_GetBufferSize_0,_emscripten_bind_Frame_GetScaleX_0,_emscripten_bind_Frame_GetScaleY_0,_emscripten_bind_Frame___destroy___0,_emscripten_bind_DbBackup_Init_1,_emscripten_bind_DbBackup_IsInProgress_0,_emscripten_bind_DbBackup_IsDone_0,_emscripten_bind_DbBackup_GetCurrentDatabase_0,_emscripten_bind_DbBackup_Save_0,_emscripten_bind_DbBackup_Skip_0,_emscripten_bind_DbBackup_GetArchivePtr_0,_emscripten_bind_DbBackup_GetArchiveSize_0,_emscripten_bind_DbBackup___destroy___0,_emscripten_bind_SuspendContextClipboardCopy_Cancel_0,_emscripten_bind_SuspendContextClipboardCopy_Resume_0,_emscripten_bind_SuspendContextClipboardCopy_GetClipboardContent_0,_emscripten_bind_SuspendContextClipboardCopy___destroy___0,_emscripten_bind_SuspendContextClipboardPaste_Cancel_0,_emscripten_bind_SuspendContextClipboardPaste_Resume_1,_emscripten_bind_SuspendContextClipboardPaste___destroy___0,_emscripten_bind_SuspendContextNetworkConnect_Cancel_0,_emscripten_bind_SuspendContextNetworkConnect_Resume_0,_emscripten_bind_SuspendContextNetworkConnect___destroy___0,_emscripten_bind_SuspendContextNetworkRpc_Cancel_0,_emscripten_bind_SuspendContextNetworkRpc_GetRequestSize_0,_emscripten_bind_SuspendContextNetworkRpc_GetRequestData_0,_emscripten_bind_SuspendContextNetworkRpc_ReceiveResponse_2,_emscripten_bind_SuspendContextNetworkRpc___destroy___0,_emscripten_bind_SuspendContextSerialSync_Cancel_0,_emscripten_bind_SuspendContextSerialSync_Resume_0,_emscripten_bind_SuspendContextSerialSync___destroy___0,_emscripten_bind_SuspendContext_GetKind_0,_emscripten_bind_SuspendContext_Cancel_0,_emscripten_bind_SuspendContext_AsContextClipboardCopy_0,_emscripten_bind_SuspendContext_AsContextClipboardPaste_0,_emscripten_bind_SuspendContext_AsContextNetworkConnect_0,_emscripten_bind_SuspendContext_AsContextNetworkRpc_0,_emscripten_bind_SuspendContext_AsContextSerialSync_0,_emscripten_bind_SuspendContext___destroy___0,_emscripten_bind_SessionImage_SessionImage_0,_emscripten_bind_SessionImage_GetDeviceId_0,_emscripten_bind_SessionImage_SetDeviceId_1,_emscripten_bind_SessionImage_GetRomImage_0,_emscripten_bind_SessionImage_GetRomImageSize_0,_emscripten_bind_SessionImage_SetRomImage_2,_emscripten_bind_SessionImage_GetMemoryImage_0,_emscripten_bind_SessionImage_GetMemoryImageSize_0,_emscripten_bind_SessionImage_SetMemoryImage_2,_emscripten_bind_SessionImage_GetMetadata_0,_emscripten_bind_SessionImage_GetMetadataSize_0,_emscripten_bind_SessionImage_SetMetadata_2,_emscripten_bind_SessionImage_GetSavestate_0,_emscripten_bind_SessionImage_GetSavestateSize_0,_emscripten_bind_SessionImage_SetSavestate_2,_emscripten_bind_SessionImage_GetVersion_0,_emscripten_bind_SessionImage_Serialize_0,_emscripten_bind_SessionImage_GetSerializedImage_0,_emscripten_bind_SessionImage_GetSerializedImageSize_0,_emscripten_bind_SessionImage_Deserialize_2,_emscripten_bind_SessionImage___destroy___0,_emscripten_bind_SkinLoader_SkinLoader_1,_emscripten_bind_SkinLoader_GetData_0,_emscripten_bind_SkinLoader_GetSize_0,_emscripten_bind_SkinLoader___destroy___0,_emscripten_bind_EmTransportSerialBuffer_RxBytesPending_0,_emscripten_bind_EmTransportSerialBuffer_Receive_0,_emscripten_bind_EmTransportSerialBuffer_Send_3,_emscripten_bind_EmTransportSerialBuffer_IsOpen_0,_emscripten_bind_EmTransportSerialBuffer_Rts_0,_emscripten_bind_EmTransportSerialBuffer_Dtr_0,_emscripten_bind_EmTransportSerialBuffer_IsBreak_0,_emscripten_bind_EmTransportSerialBuffer_BufferSize_0,_emscripten_bind_EmTransportSerialBuffer_GetBaud_0,_emscripten_bind_EmTransportSerialBuffer_GetParity_0,_emscripten_bind_EmTransportSerialBuffer_GetStopBits_0,_emscripten_bind_EmTransportSerialBuffer_GetDataBits_0,_emscripten_bind_EmTransportSerialBuffer_GetHwrHandshake_0,_emscripten_bind_EmTransportSerialBuffer_GetModeSync_0,_emscripten_bind_EmTransportSerialBuffer_SetModeSync_1,_emscripten_bind_EmTransportSerialBuffer_IsFrameComplete_0,_emscripten_bind_EmTransportSerialBuffer_SetRequestTransferCallback_1,_emscripten_bind_EmTransportSerialBuffer___destroy___0,_emscripten_bind_GunzipContext_GunzipContext_3,_emscripten_bind_GunzipContext_GetState_0,_emscripten_bind_GunzipContext_Continue_0,_emscripten_bind_GunzipContext_GetUncompressedData_0,_emscripten_bind_GunzipContext_ReleaseUncompressedData_0,_emscripten_bind_GunzipContext_GetUncompressedSize_0,_emscripten_bind_GunzipContext_GetError_0,_emscripten_bind_GunzipContext___destroy___0,_emscripten_bind_ZipfileWalker_ZipfileWalker_2,_emscripten_bind_ZipfileWalker_GetState_0,_emscripten_bind_ZipfileWalker_Next_0,_emscripten_bind_ZipfileWalker_GetTotalEntries_0,_emscripten_bind_ZipfileWalker_GetCurrentEntrySize_0,_emscripten_bind_ZipfileWalker_GetCurrentEntryName_0,_emscripten_bind_ZipfileWalker_GetCurrentEntryContent_0,_emscripten_bind_ZipfileWalker___destroy___0,_emscripten_bind_SessionFile5_SessionFile5_0,_emscripten_bind_SessionFile5_IsSessionFile_2,_emscripten_bind_SessionFile5_GetDeviceId_0,_emscripten_bind_SessionFile5_SetDeviceId_1,_emscripten_bind_SessionFile5_GetMetadata_0,_emscripten_bind_SessionFile5_GetMetadataSize_0,_emscripten_bind_SessionFile5_SetMetadata_2,_emscripten_bind_SessionFile5_GetNor_0,_emscripten_bind_SessionFile5_GetNorSize_0,_emscripten_bind_SessionFile5_SetNor_2,_emscripten_bind_SessionFile5_GetNand_0,_emscripten_bind_SessionFile5_GetNandSize_0,_emscripten_bind_SessionFile5_SetNand_2,_emscripten_bind_SessionFile5_GetMemory_0,_emscripten_bind_SessionFile5_GetMemorySize_0,_emscripten_bind_SessionFile5_SetMemory_2,_emscripten_bind_SessionFile5_GetSavestate_0,_emscripten_bind_SessionFile5_GetSavestateSize_0,_emscripten_bind_SessionFile5_SetSavestate_2,_emscripten_bind_SessionFile5_GetRamSize_0,_emscripten_bind_SessionFile5_SetRamSize_1,_emscripten_bind_SessionFile5_Serialize_0,_emscripten_bind_SessionFile5_GetSerializedSession_0,_emscripten_bind_SessionFile5_GetSerializedSessionSize_0,_emscripten_bind_SessionFile5_GetVersion_0,_emscripten_bind_SessionFile5_Deserialize_2,_emscripten_bind_SessionFile5___destroy___0,_emscripten_bind_RomInfo5_RomInfo5_2,_emscripten_bind_RomInfo5_IsValid_0,_emscripten_bind_RomInfo5_GetCardName_0,_emscripten_bind_RomInfo5_GetManufacturer_0,_emscripten_bind_RomInfo5_GetRomName_0,_emscripten_bind_RomInfo5_GetCompanyId_0,_emscripten_bind_RomInfo5_GetHalId_0,_emscripten_bind_RomInfo5_NeedsNand_0,_emscripten_bind_RomInfo5_GetDeviceType_0,_emscripten_bind_RomInfo5_GetRecommendedRamSize_0,_emscripten_bind_RomInfo5___destroy___0,_emscripten_stack_get_end,__emscripten_timeout,_emscripten_stack_init,_emscripten_stack_get_current,___original_main;function assignWasmExports(wasmExports){Module[\"_main\"]=_main=wasmExports[\"w\"];Module[\"_webidl_free\"]=_webidl_free=wasmExports[\"x\"];Module[\"_webidl_malloc\"]=_webidl_malloc=wasmExports[\"y\"];Module[\"_emscripten_bind_VoidPtr___destroy___0\"]=_emscripten_bind_VoidPtr___destroy___0=wasmExports[\"z\"];Module[\"_emscripten_bind_Cloudpilot_Cloudpilot_0\"]=_emscripten_bind_Cloudpilot_Cloudpilot_0=wasmExports[\"A\"];Module[\"_emscripten_bind_Cloudpilot_Malloc_1\"]=_emscripten_bind_Cloudpilot_Malloc_1=wasmExports[\"B\"];Module[\"_emscripten_bind_Cloudpilot_Free_1\"]=_emscripten_bind_Cloudpilot_Free_1=wasmExports[\"C\"];Module[\"_emscripten_bind_Cloudpilot_Nullptr_0\"]=_emscripten_bind_Cloudpilot_Nullptr_0=wasmExports[\"D\"];Module[\"_emscripten_bind_Cloudpilot_EnableLogging_1\"]=_emscripten_bind_Cloudpilot_EnableLogging_1=wasmExports[\"E\"];Module[\"_emscripten_bind_Cloudpilot_InitializeSession_3\"]=_emscripten_bind_Cloudpilot_InitializeSession_3=wasmExports[\"F\"];Module[\"_emscripten_bind_Cloudpilot_GetCyclesPerSecond_0\"]=_emscripten_bind_Cloudpilot_GetCyclesPerSecond_0=wasmExports[\"G\"];Module[\"_emscripten_bind_Cloudpilot_RunEmulation_1\"]=_emscripten_bind_Cloudpilot_RunEmulation_1=wasmExports[\"H\"];Module[\"_emscripten_bind_Cloudpilot_SetClockFactor_1\"]=_emscripten_bind_Cloudpilot_SetClockFactor_1=wasmExports[\"I\"];Module[\"_emscripten_bind_Cloudpilot_CopyFrame_0\"]=_emscripten_bind_Cloudpilot_CopyFrame_0=wasmExports[\"J\"];Module[\"_emscripten_bind_Cloudpilot_IsScreenDirty_0\"]=_emscripten_bind_Cloudpilot_IsScreenDirty_0=wasmExports[\"K\"];Module[\"_emscripten_bind_Cloudpilot_MarkScreenClean_0\"]=_emscripten_bind_Cloudpilot_MarkScreenClean_0=wasmExports[\"L\"];Module[\"_emscripten_bind_Cloudpilot_MinMemoryForDevice_1\"]=_emscripten_bind_Cloudpilot_MinMemoryForDevice_1=wasmExports[\"M\"];Module[\"_emscripten_bind_Cloudpilot_FramebufferSizeForDevice_1\"]=_emscripten_bind_Cloudpilot_FramebufferSizeForDevice_1=wasmExports[\"N\"];Module[\"_emscripten_bind_Cloudpilot_TotalMemoryForDevice_1\"]=_emscripten_bind_Cloudpilot_TotalMemoryForDevice_1=wasmExports[\"O\"];Module[\"_emscripten_bind_Cloudpilot_QueuePenMove_2\"]=_emscripten_bind_Cloudpilot_QueuePenMove_2=wasmExports[\"P\"];Module[\"_emscripten_bind_Cloudpilot_QueuePenUp_0\"]=_emscripten_bind_Cloudpilot_QueuePenUp_0=wasmExports[\"Q\"];Module[\"_emscripten_bind_Cloudpilot_QueueButtonDown_1\"]=_emscripten_bind_Cloudpilot_QueueButtonDown_1=wasmExports[\"R\"];Module[\"_emscripten_bind_Cloudpilot_QueueButtonUp_1\"]=_emscripten_bind_Cloudpilot_QueueButtonUp_1=wasmExports[\"S\"];Module[\"_emscripten_bind_Cloudpilot_QueueKeyboardEvent_1\"]=_emscripten_bind_Cloudpilot_QueueKeyboardEvent_1=wasmExports[\"T\"];Module[\"_emscripten_bind_Cloudpilot_IsPowerOff_0\"]=_emscripten_bind_Cloudpilot_IsPowerOff_0=wasmExports[\"U\"];Module[\"_emscripten_bind_Cloudpilot_IsUIInitialized_0\"]=_emscripten_bind_Cloudpilot_IsUIInitialized_0=wasmExports[\"V\"];Module[\"_emscripten_bind_Cloudpilot_GetOSVersion_0\"]=_emscripten_bind_Cloudpilot_GetOSVersion_0=wasmExports[\"W\"];Module[\"_emscripten_bind_Cloudpilot_IsSetupComplete_0\"]=_emscripten_bind_Cloudpilot_IsSetupComplete_0=wasmExports[\"X\"];Module[\"_emscripten_bind_Cloudpilot_Reset_0\"]=_emscripten_bind_Cloudpilot_Reset_0=wasmExports[\"Y\"];Module[\"_emscripten_bind_Cloudpilot_ResetNoExtensions_0\"]=_emscripten_bind_Cloudpilot_ResetNoExtensions_0=wasmExports[\"Z\"];Module[\"_emscripten_bind_Cloudpilot_ResetHard_0\"]=_emscripten_bind_Cloudpilot_ResetHard_0=wasmExports[\"_\"];Module[\"_emscripten_bind_Cloudpilot_InstallDb_2\"]=_emscripten_bind_Cloudpilot_InstallDb_2=wasmExports[\"$\"];Module[\"_emscripten_bind_Cloudpilot_GetPalette2bitMapping_0\"]=_emscripten_bind_Cloudpilot_GetPalette2bitMapping_0=wasmExports[\"aa\"];Module[\"_emscripten_bind_Cloudpilot_GetMemoryPtr_0\"]=_emscripten_bind_Cloudpilot_GetMemoryPtr_0=wasmExports[\"ba\"];Module[\"_emscripten_bind_Cloudpilot_GetDirtyPagesPtr_0\"]=_emscripten_bind_Cloudpilot_GetDirtyPagesPtr_0=wasmExports[\"ca\"];Module[\"_emscripten_bind_Cloudpilot_GetMemorySize_0\"]=_emscripten_bind_Cloudpilot_GetMemorySize_0=wasmExports[\"da\"];Module[\"_emscripten_bind_Cloudpilot_ImportMemoryImage_2\"]=_emscripten_bind_Cloudpilot_ImportMemoryImage_2=wasmExports[\"ea\"];Module[\"_emscripten_bind_Cloudpilot_GetRomPtr_0\"]=_emscripten_bind_Cloudpilot_GetRomPtr_0=wasmExports[\"fa\"];Module[\"_emscripten_bind_Cloudpilot_GetRomSize_0\"]=_emscripten_bind_Cloudpilot_GetRomSize_0=wasmExports[\"ga\"];Module[\"_emscripten_bind_Cloudpilot_GetSavestatePtr_0\"]=_emscripten_bind_Cloudpilot_GetSavestatePtr_0=wasmExports[\"ha\"];Module[\"_emscripten_bind_Cloudpilot_GetSavestateSize_0\"]=_emscripten_bind_Cloudpilot_GetSavestateSize_0=wasmExports[\"ia\"];Module[\"_emscripten_bind_Cloudpilot_SaveState_0\"]=_emscripten_bind_Cloudpilot_SaveState_0=wasmExports[\"ja\"];Module[\"_emscripten_bind_Cloudpilot_LoadState_2\"]=_emscripten_bind_Cloudpilot_LoadState_2=wasmExports[\"ka\"];Module[\"_emscripten_bind_Cloudpilot_GetHotsyncName_0\"]=_emscripten_bind_Cloudpilot_GetHotsyncName_0=wasmExports[\"la\"];Module[\"_emscripten_bind_Cloudpilot_SetHotsyncName_1\"]=_emscripten_bind_Cloudpilot_SetHotsyncName_1=wasmExports[\"ma\"];Module[\"_emscripten_bind_Cloudpilot_RegisterPwmHandler_1\"]=_emscripten_bind_Cloudpilot_RegisterPwmHandler_1=wasmExports[\"na\"];Module[\"_emscripten_bind_Cloudpilot_StartBackup_0\"]=_emscripten_bind_Cloudpilot_StartBackup_0=wasmExports[\"oa\"];Module[\"_emscripten_bind_Cloudpilot_SetClipboardIntegration_1\"]=_emscripten_bind_Cloudpilot_SetClipboardIntegration_1=wasmExports[\"pa\"];Module[\"_emscripten_bind_Cloudpilot_GetClipboardIntegration_0\"]=_emscripten_bind_Cloudpilot_GetClipboardIntegration_0=wasmExports[\"qa\"];Module[\"_emscripten_bind_Cloudpilot_IsSuspended_0\"]=_emscripten_bind_Cloudpilot_IsSuspended_0=wasmExports[\"ra\"];Module[\"_emscripten_bind_Cloudpilot_GetSuspendContext_0\"]=_emscripten_bind_Cloudpilot_GetSuspendContext_0=wasmExports[\"sa\"];Module[\"_emscripten_bind_Cloudpilot_SetNetworkRedirection_1\"]=_emscripten_bind_Cloudpilot_SetNetworkRedirection_1=wasmExports[\"ta\"];Module[\"_emscripten_bind_Cloudpilot_GetNetworkRedirection_0\"]=_emscripten_bind_Cloudpilot_GetNetworkRedirection_0=wasmExports[\"ua\"];Module[\"_emscripten_bind_Cloudpilot_RegisterProxyDisconnectHandler_1\"]=_emscripten_bind_Cloudpilot_RegisterProxyDisconnectHandler_1=wasmExports[\"va\"];Module[\"_emscripten_bind_Cloudpilot_SetHotsyncNameManagement_1\"]=_emscripten_bind_Cloudpilot_SetHotsyncNameManagement_1=wasmExports[\"wa\"];Module[\"_emscripten_bind_Cloudpilot_LaunchAppByName_1\"]=_emscripten_bind_Cloudpilot_LaunchAppByName_1=wasmExports[\"xa\"];Module[\"_emscripten_bind_Cloudpilot_LaunchAppByDbHeader_2\"]=_emscripten_bind_Cloudpilot_LaunchAppByDbHeader_2=wasmExports[\"ya\"];Module[\"_emscripten_bind_Cloudpilot_ClearExternalStorage_0\"]=_emscripten_bind_Cloudpilot_ClearExternalStorage_0=wasmExports[\"za\"];Module[\"_emscripten_bind_Cloudpilot_AllocateCard_2\"]=_emscripten_bind_Cloudpilot_AllocateCard_2=wasmExports[\"Aa\"];Module[\"_emscripten_bind_Cloudpilot_AdoptCard_3\"]=_emscripten_bind_Cloudpilot_AdoptCard_3=wasmExports[\"Ba\"];Module[\"_emscripten_bind_Cloudpilot_MountCard_1\"]=_emscripten_bind_Cloudpilot_MountCard_1=wasmExports[\"Ca\"];Module[\"_emscripten_bind_Cloudpilot_RemoveCard_1\"]=_emscripten_bind_Cloudpilot_RemoveCard_1=wasmExports[\"Da\"];Module[\"_emscripten_bind_Cloudpilot_GetCardData_1\"]=_emscripten_bind_Cloudpilot_GetCardData_1=wasmExports[\"Ea\"];Module[\"_emscripten_bind_Cloudpilot_GetCardDirtyPages_1\"]=_emscripten_bind_Cloudpilot_GetCardDirtyPages_1=wasmExports[\"Fa\"];Module[\"_emscripten_bind_Cloudpilot_GetCardSize_1\"]=_emscripten_bind_Cloudpilot_GetCardSize_1=wasmExports[\"Ga\"];Module[\"_emscripten_bind_Cloudpilot_RemountCards_0\"]=_emscripten_bind_Cloudpilot_RemountCards_0=wasmExports[\"Ha\"];Module[\"_emscripten_bind_Cloudpilot_GetSupportLevel_1\"]=_emscripten_bind_Cloudpilot_GetSupportLevel_1=wasmExports[\"Ia\"];Module[\"_emscripten_bind_Cloudpilot_GetMountedKey_0\"]=_emscripten_bind_Cloudpilot_GetMountedKey_0=wasmExports[\"Ja\"];Module[\"_emscripten_bind_Cloudpilot_GetTransportIR_0\"]=_emscripten_bind_Cloudpilot_GetTransportIR_0=wasmExports[\"Ka\"];Module[\"_emscripten_bind_Cloudpilot_GetTransportSerial_0\"]=_emscripten_bind_Cloudpilot_GetTransportSerial_0=wasmExports[\"La\"];Module[\"_emscripten_bind_Cloudpilot___destroy___0\"]=_emscripten_bind_Cloudpilot___destroy___0=wasmExports[\"Ma\"];Module[\"_emscripten_bind_RomInfo_RomInfo_2\"]=_emscripten_bind_RomInfo_RomInfo_2=wasmExports[\"Na\"];Module[\"_emscripten_bind_RomInfo_IsValid_0\"]=_emscripten_bind_RomInfo_IsValid_0=wasmExports[\"Oa\"];Module[\"_emscripten_bind_RomInfo_CardVersion_0\"]=_emscripten_bind_RomInfo_CardVersion_0=wasmExports[\"Pa\"];Module[\"_emscripten_bind_RomInfo_CardName_0\"]=_emscripten_bind_RomInfo_CardName_0=wasmExports[\"Qa\"];Module[\"_emscripten_bind_RomInfo_RomVersion_0\"]=_emscripten_bind_RomInfo_RomVersion_0=wasmExports[\"Ra\"];Module[\"_emscripten_bind_RomInfo_RomVersionString_0\"]=_emscripten_bind_RomInfo_RomVersionString_0=wasmExports[\"Sa\"];Module[\"_emscripten_bind_RomInfo_Supports_1\"]=_emscripten_bind_RomInfo_Supports_1=wasmExports[\"Ta\"];Module[\"_emscripten_bind_RomInfo___destroy___0\"]=_emscripten_bind_RomInfo___destroy___0=wasmExports[\"Ua\"];Module[\"_emscripten_bind_Frame_GetLineWidth_0\"]=_emscripten_bind_Frame_GetLineWidth_0=wasmExports[\"Va\"];Module[\"_emscripten_bind_Frame_GetBpp_0\"]=_emscripten_bind_Frame_GetBpp_0=wasmExports[\"Wa\"];Module[\"_emscripten_bind_Frame_GetLines_0\"]=_emscripten_bind_Frame_GetLines_0=wasmExports[\"Xa\"];Module[\"_emscripten_bind_Frame_GetMargin_0\"]=_emscripten_bind_Frame_GetMargin_0=wasmExports[\"Ya\"];Module[\"_emscripten_bind_Frame_GetBytesPerLine_0\"]=_emscripten_bind_Frame_GetBytesPerLine_0=wasmExports[\"Za\"];Module[\"_emscripten_bind_Frame_GetFirstDirtyLine_0\"]=_emscripten_bind_Frame_GetFirstDirtyLine_0=wasmExports[\"_a\"];Module[\"_emscripten_bind_Frame_GetLastDirtyLine_0\"]=_emscripten_bind_Frame_GetLastDirtyLine_0=wasmExports[\"$a\"];Module[\"_emscripten_bind_Frame_GetHasChanges_0\"]=_emscripten_bind_Frame_GetHasChanges_0=wasmExports[\"ab\"];Module[\"_emscripten_bind_Frame_GetBuffer_0\"]=_emscripten_bind_Frame_GetBuffer_0=wasmExports[\"bb\"];Module[\"_emscripten_bind_Frame_GetBufferSize_0\"]=_emscripten_bind_Frame_GetBufferSize_0=wasmExports[\"cb\"];Module[\"_emscripten_bind_Frame_GetScaleX_0\"]=_emscripten_bind_Frame_GetScaleX_0=wasmExports[\"db\"];Module[\"_emscripten_bind_Frame_GetScaleY_0\"]=_emscripten_bind_Frame_GetScaleY_0=wasmExports[\"eb\"];Module[\"_emscripten_bind_Frame___destroy___0\"]=_emscripten_bind_Frame___destroy___0=wasmExports[\"fb\"];Module[\"_emscripten_bind_DbBackup_Init_1\"]=_emscripten_bind_DbBackup_Init_1=wasmExports[\"gb\"];Module[\"_emscripten_bind_DbBackup_IsInProgress_0\"]=_emscripten_bind_DbBackup_IsInProgress_0=wasmExports[\"hb\"];Module[\"_emscripten_bind_DbBackup_IsDone_0\"]=_emscripten_bind_DbBackup_IsDone_0=wasmExports[\"ib\"];Module[\"_emscripten_bind_DbBackup_GetCurrentDatabase_0\"]=_emscripten_bind_DbBackup_GetCurrentDatabase_0=wasmExports[\"jb\"];Module[\"_emscripten_bind_DbBackup_Save_0\"]=_emscripten_bind_DbBackup_Save_0=wasmExports[\"kb\"];Module[\"_emscripten_bind_DbBackup_Skip_0\"]=_emscripten_bind_DbBackup_Skip_0=wasmExports[\"lb\"];Module[\"_emscripten_bind_DbBackup_GetArchivePtr_0\"]=_emscripten_bind_DbBackup_GetArchivePtr_0=wasmExports[\"mb\"];Module[\"_emscripten_bind_DbBackup_GetArchiveSize_0\"]=_emscripten_bind_DbBackup_GetArchiveSize_0=wasmExports[\"nb\"];Module[\"_emscripten_bind_DbBackup___destroy___0\"]=_emscripten_bind_DbBackup___destroy___0=wasmExports[\"ob\"];Module[\"_emscripten_bind_SuspendContextClipboardCopy_Cancel_0\"]=_emscripten_bind_SuspendContextClipboardCopy_Cancel_0=wasmExports[\"pb\"];Module[\"_emscripten_bind_SuspendContextClipboardCopy_Resume_0\"]=_emscripten_bind_SuspendContextClipboardCopy_Resume_0=wasmExports[\"qb\"];Module[\"_emscripten_bind_SuspendContextClipboardCopy_GetClipboardContent_0\"]=_emscripten_bind_SuspendContextClipboardCopy_GetClipboardContent_0=wasmExports[\"rb\"];Module[\"_emscripten_bind_SuspendContextClipboardCopy___destroy___0\"]=_emscripten_bind_SuspendContextClipboardCopy___destroy___0=wasmExports[\"sb\"];Module[\"_emscripten_bind_SuspendContextClipboardPaste_Cancel_0\"]=_emscripten_bind_SuspendContextClipboardPaste_Cancel_0=wasmExports[\"tb\"];Module[\"_emscripten_bind_SuspendContextClipboardPaste_Resume_1\"]=_emscripten_bind_SuspendContextClipboardPaste_Resume_1=wasmExports[\"ub\"];Module[\"_emscripten_bind_SuspendContextClipboardPaste___destroy___0\"]=_emscripten_bind_SuspendContextClipboardPaste___destroy___0=wasmExports[\"vb\"];Module[\"_emscripten_bind_SuspendContextNetworkConnect_Cancel_0\"]=_emscripten_bind_SuspendContextNetworkConnect_Cancel_0=wasmExports[\"wb\"];Module[\"_emscripten_bind_SuspendContextNetworkConnect_Resume_0\"]=_emscripten_bind_SuspendContextNetworkConnect_Resume_0=wasmExports[\"xb\"];Module[\"_emscripten_bind_SuspendContextNetworkConnect___destroy___0\"]=_emscripten_bind_SuspendContextNetworkConnect___destroy___0=wasmExports[\"yb\"];Module[\"_emscripten_bind_SuspendContextNetworkRpc_Cancel_0\"]=_emscripten_bind_SuspendContextNetworkRpc_Cancel_0=wasmExports[\"zb\"];Module[\"_emscripten_bind_SuspendContextNetworkRpc_GetRequestSize_0\"]=_emscripten_bind_SuspendContextNetworkRpc_GetRequestSize_0=wasmExports[\"Ab\"];Module[\"_emscripten_bind_SuspendContextNetworkRpc_GetRequestData_0\"]=_emscripten_bind_SuspendContextNetworkRpc_GetRequestData_0=wasmExports[\"Bb\"];Module[\"_emscripten_bind_SuspendContextNetworkRpc_ReceiveResponse_2\"]=_emscripten_bind_SuspendContextNetworkRpc_ReceiveResponse_2=wasmExports[\"Cb\"];Module[\"_emscripten_bind_SuspendContextNetworkRpc___destroy___0\"]=_emscripten_bind_SuspendContextNetworkRpc___destroy___0=wasmExports[\"Db\"];Module[\"_emscripten_bind_SuspendContextSerialSync_Cancel_0\"]=_emscripten_bind_SuspendContextSerialSync_Cancel_0=wasmExports[\"Eb\"];Module[\"_emscripten_bind_SuspendContextSerialSync_Resume_0\"]=_emscripten_bind_SuspendContextSerialSync_Resume_0=wasmExports[\"Fb\"];Module[\"_emscripten_bind_SuspendContextSerialSync___destroy___0\"]=_emscripten_bind_SuspendContextSerialSync___destroy___0=wasmExports[\"Gb\"];Module[\"_emscripten_bind_SuspendContext_GetKind_0\"]=_emscripten_bind_SuspendContext_GetKind_0=wasmExports[\"Hb\"];Module[\"_emscripten_bind_SuspendContext_Cancel_0\"]=_emscripten_bind_SuspendContext_Cancel_0=wasmExports[\"Ib\"];Module[\"_emscripten_bind_SuspendContext_AsContextClipboardCopy_0\"]=_emscripten_bind_SuspendContext_AsContextClipboardCopy_0=wasmExports[\"Jb\"];Module[\"_emscripten_bind_SuspendContext_AsContextClipboardPaste_0\"]=_emscripten_bind_SuspendContext_AsContextClipboardPaste_0=wasmExports[\"Kb\"];Module[\"_emscripten_bind_SuspendContext_AsContextNetworkConnect_0\"]=_emscripten_bind_SuspendContext_AsContextNetworkConnect_0=wasmExports[\"Lb\"];Module[\"_emscripten_bind_SuspendContext_AsContextNetworkRpc_0\"]=_emscripten_bind_SuspendContext_AsContextNetworkRpc_0=wasmExports[\"Mb\"];Module[\"_emscripten_bind_SuspendContext_AsContextSerialSync_0\"]=_emscripten_bind_SuspendContext_AsContextSerialSync_0=wasmExports[\"Nb\"];Module[\"_emscripten_bind_SuspendContext___destroy___0\"]=_emscripten_bind_SuspendContext___destroy___0=wasmExports[\"Ob\"];Module[\"_emscripten_bind_SessionImage_SessionImage_0\"]=_emscripten_bind_SessionImage_SessionImage_0=wasmExports[\"Pb\"];Module[\"_emscripten_bind_SessionImage_GetDeviceId_0\"]=_emscripten_bind_SessionImage_GetDeviceId_0=wasmExports[\"Qb\"];Module[\"_emscripten_bind_SessionImage_SetDeviceId_1\"]=_emscripten_bind_SessionImage_SetDeviceId_1=wasmExports[\"Rb\"];Module[\"_emscripten_bind_SessionImage_GetRomImage_0\"]=_emscripten_bind_SessionImage_GetRomImage_0=wasmExports[\"Sb\"];Module[\"_emscripten_bind_SessionImage_GetRomImageSize_0\"]=_emscripten_bind_SessionImage_GetRomImageSize_0=wasmExports[\"Tb\"];Module[\"_emscripten_bind_SessionImage_SetRomImage_2\"]=_emscripten_bind_SessionImage_SetRomImage_2=wasmExports[\"Ub\"];Module[\"_emscripten_bind_SessionImage_GetMemoryImage_0\"]=_emscripten_bind_SessionImage_GetMemoryImage_0=wasmExports[\"Vb\"];Module[\"_emscripten_bind_SessionImage_GetMemoryImageSize_0\"]=_emscripten_bind_SessionImage_GetMemoryImageSize_0=wasmExports[\"Wb\"];Module[\"_emscripten_bind_SessionImage_SetMemoryImage_2\"]=_emscripten_bind_SessionImage_SetMemoryImage_2=wasmExports[\"Xb\"];Module[\"_emscripten_bind_SessionImage_GetMetadata_0\"]=_emscripten_bind_SessionImage_GetMetadata_0=wasmExports[\"Yb\"];Module[\"_emscripten_bind_SessionImage_GetMetadataSize_0\"]=_emscripten_bind_SessionImage_GetMetadataSize_0=wasmExports[\"Zb\"];Module[\"_emscripten_bind_SessionImage_SetMetadata_2\"]=_emscripten_bind_SessionImage_SetMetadata_2=wasmExports[\"_b\"];Module[\"_emscripten_bind_SessionImage_GetSavestate_0\"]=_emscripten_bind_SessionImage_GetSavestate_0=wasmExports[\"$b\"];Module[\"_emscripten_bind_SessionImage_GetSavestateSize_0\"]=_emscripten_bind_SessionImage_GetSavestateSize_0=wasmExports[\"ac\"];Module[\"_emscripten_bind_SessionImage_SetSavestate_2\"]=_emscripten_bind_SessionImage_SetSavestate_2=wasmExports[\"bc\"];Module[\"_emscripten_bind_SessionImage_GetVersion_0\"]=_emscripten_bind_SessionImage_GetVersion_0=wasmExports[\"cc\"];Module[\"_emscripten_bind_SessionImage_Serialize_0\"]=_emscripten_bind_SessionImage_Serialize_0=wasmExports[\"dc\"];Module[\"_emscripten_bind_SessionImage_GetSerializedImage_0\"]=_emscripten_bind_SessionImage_GetSerializedImage_0=wasmExports[\"ec\"];Module[\"_emscripten_bind_SessionImage_GetSerializedImageSize_0\"]=_emscripten_bind_SessionImage_GetSerializedImageSize_0=wasmExports[\"fc\"];Module[\"_emscripten_bind_SessionImage_Deserialize_2\"]=_emscripten_bind_SessionImage_Deserialize_2=wasmExports[\"gc\"];Module[\"_emscripten_bind_SessionImage___destroy___0\"]=_emscripten_bind_SessionImage___destroy___0=wasmExports[\"hc\"];Module[\"_emscripten_bind_SkinLoader_SkinLoader_1\"]=_emscripten_bind_SkinLoader_SkinLoader_1=wasmExports[\"ic\"];Module[\"_emscripten_bind_SkinLoader_GetData_0\"]=_emscripten_bind_SkinLoader_GetData_0=wasmExports[\"jc\"];Module[\"_emscripten_bind_SkinLoader_GetSize_0\"]=_emscripten_bind_SkinLoader_GetSize_0=wasmExports[\"kc\"];Module[\"_emscripten_bind_SkinLoader___destroy___0\"]=_emscripten_bind_SkinLoader___destroy___0=wasmExports[\"lc\"];Module[\"_emscripten_bind_EmTransportSerialBuffer_RxBytesPending_0\"]=_emscripten_bind_EmTransportSerialBuffer_RxBytesPending_0=wasmExports[\"mc\"];Module[\"_emscripten_bind_EmTransportSerialBuffer_Receive_0\"]=_emscripten_bind_EmTransportSerialBuffer_Receive_0=wasmExports[\"nc\"];Module[\"_emscripten_bind_EmTransportSerialBuffer_Send_3\"]=_emscripten_bind_EmTransportSerialBuffer_Send_3=wasmExports[\"oc\"];Module[\"_emscripten_bind_EmTransportSerialBuffer_IsOpen_0\"]=_emscripten_bind_EmTransportSerialBuffer_IsOpen_0=wasmExports[\"pc\"];Module[\"_emscripten_bind_EmTransportSerialBuffer_Rts_0\"]=_emscripten_bind_EmTransportSerialBuffer_Rts_0=wasmExports[\"qc\"];Module[\"_emscripten_bind_EmTransportSerialBuffer_Dtr_0\"]=_emscripten_bind_EmTransportSerialBuffer_Dtr_0=wasmExports[\"rc\"];Module[\"_emscripten_bind_EmTransportSerialBuffer_IsBreak_0\"]=_emscripten_bind_EmTransportSerialBuffer_IsBreak_0=wasmExports[\"sc\"];Module[\"_emscripten_bind_EmTransportSerialBuffer_BufferSize_0\"]=_emscripten_bind_EmTransportSerialBuffer_BufferSize_0=wasmExports[\"tc\"];Module[\"_emscripten_bind_EmTransportSerialBuffer_GetBaud_0\"]=_emscripten_bind_EmTransportSerialBuffer_GetBaud_0=wasmExports[\"uc\"];Module[\"_emscripten_bind_EmTransportSerialBuffer_GetParity_0\"]=_emscripten_bind_EmTransportSerialBuffer_GetParity_0=wasmExports[\"vc\"];Module[\"_emscripten_bind_EmTransportSerialBuffer_GetStopBits_0\"]=_emscripten_bind_EmTransportSerialBuffer_GetStopBits_0=wasmExports[\"wc\"];Module[\"_emscripten_bind_EmTransportSerialBuffer_GetDataBits_0\"]=_emscripten_bind_EmTransportSerialBuffer_GetDataBits_0=wasmExports[\"xc\"];Module[\"_emscripten_bind_EmTransportSerialBuffer_GetHwrHandshake_0\"]=_emscripten_bind_EmTransportSerialBuffer_GetHwrHandshake_0=wasmExports[\"yc\"];Module[\"_emscripten_bind_EmTransportSerialBuffer_GetModeSync_0\"]=_emscripten_bind_EmTransportSerialBuffer_GetModeSync_0=wasmExports[\"zc\"];Module[\"_emscripten_bind_EmTransportSerialBuffer_SetModeSync_1\"]=_emscripten_bind_EmTransportSerialBuffer_SetModeSync_1=wasmExports[\"Ac\"];Module[\"_emscripten_bind_EmTransportSerialBuffer_IsFrameComplete_0\"]=_emscripten_bind_EmTransportSerialBuffer_IsFrameComplete_0=wasmExports[\"Bc\"];Module[\"_emscripten_bind_EmTransportSerialBuffer_SetRequestTransferCallback_1\"]=_emscripten_bind_EmTransportSerialBuffer_SetRequestTransferCallback_1=wasmExports[\"Cc\"];Module[\"_emscripten_bind_EmTransportSerialBuffer___destroy___0\"]=_emscripten_bind_EmTransportSerialBuffer___destroy___0=wasmExports[\"Dc\"];Module[\"_emscripten_bind_GunzipContext_GunzipContext_3\"]=_emscripten_bind_GunzipContext_GunzipContext_3=wasmExports[\"Ec\"];Module[\"_emscripten_bind_GunzipContext_GetState_0\"]=_emscripten_bind_GunzipContext_GetState_0=wasmExports[\"Fc\"];Module[\"_emscripten_bind_GunzipContext_Continue_0\"]=_emscripten_bind_GunzipContext_Continue_0=wasmExports[\"Gc\"];Module[\"_emscripten_bind_GunzipContext_GetUncompressedData_0\"]=_emscripten_bind_GunzipContext_GetUncompressedData_0=wasmExports[\"Hc\"];Module[\"_emscripten_bind_GunzipContext_ReleaseUncompressedData_0\"]=_emscripten_bind_GunzipContext_ReleaseUncompressedData_0=wasmExports[\"Ic\"];Module[\"_emscripten_bind_GunzipContext_GetUncompressedSize_0\"]=_emscripten_bind_GunzipContext_GetUncompressedSize_0=wasmExports[\"Jc\"];Module[\"_emscripten_bind_GunzipContext_GetError_0\"]=_emscripten_bind_GunzipContext_GetError_0=wasmExports[\"Kc\"];Module[\"_emscripten_bind_GunzipContext___destroy___0\"]=_emscripten_bind_GunzipContext___destroy___0=wasmExports[\"Lc\"];Module[\"_emscripten_bind_ZipfileWalker_ZipfileWalker_2\"]=_emscripten_bind_ZipfileWalker_ZipfileWalker_2=wasmExports[\"Mc\"];Module[\"_emscripten_bind_ZipfileWalker_GetState_0\"]=_emscripten_bind_ZipfileWalker_GetState_0=wasmExports[\"Nc\"];Module[\"_emscripten_bind_ZipfileWalker_Next_0\"]=_emscripten_bind_ZipfileWalker_Next_0=wasmExports[\"Oc\"];Module[\"_emscripten_bind_ZipfileWalker_GetTotalEntries_0\"]=_emscripten_bind_ZipfileWalker_GetTotalEntries_0=wasmExports[\"Pc\"];Module[\"_emscripten_bind_ZipfileWalker_GetCurrentEntrySize_0\"]=_emscripten_bind_ZipfileWalker_GetCurrentEntrySize_0=wasmExports[\"Qc\"];Module[\"_emscripten_bind_ZipfileWalker_GetCurrentEntryName_0\"]=_emscripten_bind_ZipfileWalker_GetCurrentEntryName_0=wasmExports[\"Rc\"];Module[\"_emscripten_bind_ZipfileWalker_GetCurrentEntryContent_0\"]=_emscripten_bind_ZipfileWalker_GetCurrentEntryContent_0=wasmExports[\"Sc\"];Module[\"_emscripten_bind_ZipfileWalker___destroy___0\"]=_emscripten_bind_ZipfileWalker___destroy___0=wasmExports[\"Tc\"];Module[\"_emscripten_bind_SessionFile5_SessionFile5_0\"]=_emscripten_bind_SessionFile5_SessionFile5_0=wasmExports[\"Uc\"];Module[\"_emscripten_bind_SessionFile5_IsSessionFile_2\"]=_emscripten_bind_SessionFile5_IsSessionFile_2=wasmExports[\"Vc\"];Module[\"_emscripten_bind_SessionFile5_GetDeviceId_0\"]=_emscripten_bind_SessionFile5_GetDeviceId_0=wasmExports[\"Wc\"];Module[\"_emscripten_bind_SessionFile5_SetDeviceId_1\"]=_emscripten_bind_SessionFile5_SetDeviceId_1=wasmExports[\"Xc\"];Module[\"_emscripten_bind_SessionFile5_GetMetadata_0\"]=_emscripten_bind_SessionFile5_GetMetadata_0=wasmExports[\"Yc\"];Module[\"_emscripten_bind_SessionFile5_GetMetadataSize_0\"]=_emscripten_bind_SessionFile5_GetMetadataSize_0=wasmExports[\"Zc\"];Module[\"_emscripten_bind_SessionFile5_SetMetadata_2\"]=_emscripten_bind_SessionFile5_SetMetadata_2=wasmExports[\"_c\"];Module[\"_emscripten_bind_SessionFile5_GetNor_0\"]=_emscripten_bind_SessionFile5_GetNor_0=wasmExports[\"$c\"];Module[\"_emscripten_bind_SessionFile5_GetNorSize_0\"]=_emscripten_bind_SessionFile5_GetNorSize_0=wasmExports[\"ad\"];Module[\"_emscripten_bind_SessionFile5_SetNor_2\"]=_emscripten_bind_SessionFile5_SetNor_2=wasmExports[\"bd\"];Module[\"_emscripten_bind_SessionFile5_GetNand_0\"]=_emscripten_bind_SessionFile5_GetNand_0=wasmExports[\"cd\"];Module[\"_emscripten_bind_SessionFile5_GetNandSize_0\"]=_emscripten_bind_SessionFile5_GetNandSize_0=wasmExports[\"dd\"];Module[\"_emscripten_bind_SessionFile5_SetNand_2\"]=_emscripten_bind_SessionFile5_SetNand_2=wasmExports[\"ed\"];Module[\"_emscripten_bind_SessionFile5_GetMemory_0\"]=_emscripten_bind_SessionFile5_GetMemory_0=wasmExports[\"fd\"];Module[\"_emscripten_bind_SessionFile5_GetMemorySize_0\"]=_emscripten_bind_SessionFile5_GetMemorySize_0=wasmExports[\"gd\"];Module[\"_emscripten_bind_SessionFile5_SetMemory_2\"]=_emscripten_bind_SessionFile5_SetMemory_2=wasmExports[\"hd\"];Module[\"_emscripten_bind_SessionFile5_GetSavestate_0\"]=_emscripten_bind_SessionFile5_GetSavestate_0=wasmExports[\"id\"];Module[\"_emscripten_bind_SessionFile5_GetSavestateSize_0\"]=_emscripten_bind_SessionFile5_GetSavestateSize_0=wasmExports[\"jd\"];Module[\"_emscripten_bind_SessionFile5_SetSavestate_2\"]=_emscripten_bind_SessionFile5_SetSavestate_2=wasmExports[\"kd\"];Module[\"_emscripten_bind_SessionFile5_GetRamSize_0\"]=_emscripten_bind_SessionFile5_GetRamSize_0=wasmExports[\"ld\"];Module[\"_emscripten_bind_SessionFile5_SetRamSize_1\"]=_emscripten_bind_SessionFile5_SetRamSize_1=wasmExports[\"md\"];Module[\"_emscripten_bind_SessionFile5_Serialize_0\"]=_emscripten_bind_SessionFile5_Serialize_0=wasmExports[\"nd\"];Module[\"_emscripten_bind_SessionFile5_GetSerializedSession_0\"]=_emscripten_bind_SessionFile5_GetSerializedSession_0=wasmExports[\"od\"];Module[\"_emscripten_bind_SessionFile5_GetSerializedSessionSize_0\"]=_emscripten_bind_SessionFile5_GetSerializedSessionSize_0=wasmExports[\"pd\"];Module[\"_emscripten_bind_SessionFile5_GetVersion_0\"]=_emscripten_bind_SessionFile5_GetVersion_0=wasmExports[\"qd\"];Module[\"_emscripten_bind_SessionFile5_Deserialize_2\"]=_emscripten_bind_SessionFile5_Deserialize_2=wasmExports[\"rd\"];Module[\"_emscripten_bind_SessionFile5___destroy___0\"]=_emscripten_bind_SessionFile5___destroy___0=wasmExports[\"sd\"];Module[\"_emscripten_bind_RomInfo5_RomInfo5_2\"]=_emscripten_bind_RomInfo5_RomInfo5_2=wasmExports[\"td\"];Module[\"_emscripten_bind_RomInfo5_IsValid_0\"]=_emscripten_bind_RomInfo5_IsValid_0=wasmExports[\"ud\"];Module[\"_emscripten_bind_RomInfo5_GetCardName_0\"]=_emscripten_bind_RomInfo5_GetCardName_0=wasmExports[\"vd\"];Module[\"_emscripten_bind_RomInfo5_GetManufacturer_0\"]=_emscripten_bind_RomInfo5_GetManufacturer_0=wasmExports[\"wd\"];Module[\"_emscripten_bind_RomInfo5_GetRomName_0\"]=_emscripten_bind_RomInfo5_GetRomName_0=wasmExports[\"xd\"];Module[\"_emscripten_bind_RomInfo5_GetCompanyId_0\"]=_emscripten_bind_RomInfo5_GetCompanyId_0=wasmExports[\"yd\"];Module[\"_emscripten_bind_RomInfo5_GetHalId_0\"]=_emscripten_bind_RomInfo5_GetHalId_0=wasmExports[\"zd\"];Module[\"_emscripten_bind_RomInfo5_NeedsNand_0\"]=_emscripten_bind_RomInfo5_NeedsNand_0=wasmExports[\"Ad\"];Module[\"_emscripten_bind_RomInfo5_GetDeviceType_0\"]=_emscripten_bind_RomInfo5_GetDeviceType_0=wasmExports[\"Bd\"];Module[\"_emscripten_bind_RomInfo5_GetRecommendedRamSize_0\"]=_emscripten_bind_RomInfo5_GetRecommendedRamSize_0=wasmExports[\"Cd\"];Module[\"_emscripten_bind_RomInfo5___destroy___0\"]=_emscripten_bind_RomInfo5___destroy___0=wasmExports[\"Dd\"];_emscripten_stack_get_end=wasmExports[\"Fd\"];__emscripten_timeout=wasmExports[\"Gd\"];_emscripten_stack_init=wasmExports[\"Hd\"];_emscripten_stack_get_current=wasmExports[\"Id\"];Module[\"___original_main\"]=___original_main=wasmExports[\"Jd\"]}var wasmImports={a:___assert_fail,s:__jsAssertThrow,c:___syscall_ftruncate64,h:__abort_js,j:__emscripten_runtime_keepalive_clear,p:__localtime_js,q:__mktime_js,k:__setitimer_js,r:__tzset_js,n:_clock_time_get,t:_emscripten_asm_const_int,g:_emscripten_date_now,o:_emscripten_resize_heap,l:_environ_get,m:_environ_sizes_get,d:_fd_close,f:_fd_read,b:_fd_seek,e:_fd_write,i:_proc_exit};var wasmExports=await createWasm();function callMain(){var entryFunction=_main;var argc=0;var argv=0;try{var ret=entryFunction(argc,argv);exitJS(ret,true);return ret}catch(e){return handleException(e)}}function stackCheckInit(){_emscripten_stack_init();writeStackCookie()}function run(){if(runDependencies>0){dependenciesFulfilled=run;return}stackCheckInit();preRun();if(runDependencies>0){dependenciesFulfilled=run;return}function doRun(){Module[\"calledRun\"]=true;if(ABORT)return;initRuntime();preMain();readyPromiseResolve?.(Module);Module[\"onRuntimeInitialized\"]?.();var noInitialRun=Module[\"noInitialRun\"]||false;if(!noInitialRun)callMain();postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout(()=>{setTimeout(()=>Module[\"setStatus\"](\"\"),1);doRun()},1)}else{doRun()}checkStackCookie()}function preInit(){if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].shift()()}}}preInit();run();function WrapperObject(){}WrapperObject.prototype=Object.create(WrapperObject.prototype);WrapperObject.prototype.constructor=WrapperObject;WrapperObject.prototype.__class__=WrapperObject;WrapperObject.__cache__={};Module[\"WrapperObject\"]=WrapperObject;function getCache(__class__){return(__class__||WrapperObject).__cache__}Module[\"getCache\"]=getCache;function wrapPointer(ptr,__class__){var cache=getCache(__class__);var ret=cache[ptr];if(ret)return ret;ret=Object.create((__class__||WrapperObject).prototype);ret.ptr=ptr;return cache[ptr]=ret}Module[\"wrapPointer\"]=wrapPointer;function castObject(obj,__class__){return wrapPointer(obj.ptr,__class__)}Module[\"castObject\"]=castObject;Module[\"NULL\"]=wrapPointer(0);function destroy(obj){if(!obj[\"__destroy__\"])throw\"Error: Cannot destroy object. (Did you create it yourself?)\";obj[\"__destroy__\"]();delete getCache(obj.__class__)[obj.ptr]}Module[\"destroy\"]=destroy;function compare(obj1,obj2){return obj1.ptr===obj2.ptr}Module[\"compare\"]=compare;function getPointer(obj){return obj.ptr}Module[\"getPointer\"]=getPointer;function getClass(obj){return obj.__class__}Module[\"getClass\"]=getClass;var ensureCache={buffer:0,size:0,pos:0,temps:[],needed:0,prepare(){if(ensureCache.needed){for(var i=0;i<ensureCache.temps.length;i++){Module[\"_webidl_free\"](ensureCache.temps[i])}ensureCache.temps.length=0;Module[\"_webidl_free\"](ensureCache.buffer);ensureCache.buffer=0;ensureCache.size+=ensureCache.needed;ensureCache.needed=0}if(!ensureCache.buffer){ensureCache.size+=128;ensureCache.buffer=Module[\"_webidl_malloc\"](ensureCache.size);assert(ensureCache.buffer)}ensureCache.pos=0},alloc(array,view){assert(ensureCache.buffer);var bytes=view.BYTES_PER_ELEMENT;var len=array.length*bytes;len=alignMemory(len,8);var ret;if(ensureCache.pos+len>=ensureCache.size){assert(len>0);ensureCache.needed+=len;ret=Module[\"_webidl_malloc\"](len);ensureCache.temps.push(ret)}else{ret=ensureCache.buffer+ensureCache.pos;ensureCache.pos+=len}return ret},copy(array,view,offset){offset/=view.BYTES_PER_ELEMENT;for(var i=0;i<array.length;i++){view[offset+i]=array[i]}}};function ensureString(value){if(typeof value===\"string\"){var intArray=intArrayFromString(value);var offset=ensureCache.alloc(intArray,HEAP8);ensureCache.copy(intArray,HEAP8,offset);return offset}return value}function VoidPtr(){throw\"cannot construct a VoidPtr, no constructor in IDL\"}VoidPtr.prototype=Object.create(WrapperObject.prototype);VoidPtr.prototype.constructor=VoidPtr;VoidPtr.prototype.__class__=VoidPtr;VoidPtr.__cache__={};Module[\"VoidPtr\"]=VoidPtr;VoidPtr.prototype[\"__destroy__\"]=VoidPtr.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_VoidPtr___destroy___0(self)};function Cloudpilot(){this.ptr=_emscripten_bind_Cloudpilot_Cloudpilot_0();getCache(Cloudpilot)[this.ptr]=this}Cloudpilot.prototype=Object.create(WrapperObject.prototype);Cloudpilot.prototype.constructor=Cloudpilot;Cloudpilot.prototype.__class__=Cloudpilot;Cloudpilot.__cache__={};Module[\"Cloudpilot\"]=Cloudpilot;Cloudpilot.prototype[\"Malloc\"]=Cloudpilot.prototype.Malloc=function(size){var self=this.ptr;if(size&&typeof size===\"object\")size=size.ptr;return wrapPointer(_emscripten_bind_Cloudpilot_Malloc_1(self,size),VoidPtr)};Cloudpilot.prototype[\"Free\"]=Cloudpilot.prototype.Free=function(buffer){var self=this.ptr;if(buffer&&typeof buffer===\"object\")buffer=buffer.ptr;_emscripten_bind_Cloudpilot_Free_1(self,buffer)};Cloudpilot.prototype[\"Nullptr\"]=Cloudpilot.prototype.Nullptr=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_Cloudpilot_Nullptr_0(self),VoidPtr)};Cloudpilot.prototype[\"EnableLogging\"]=Cloudpilot.prototype.EnableLogging=function(logging){var self=this.ptr;if(logging&&typeof logging===\"object\")logging=logging.ptr;_emscripten_bind_Cloudpilot_EnableLogging_1(self,logging)};Cloudpilot.prototype[\"InitializeSession\"]=Cloudpilot.prototype.InitializeSession=function(buffer,size,deviceType){var self=this.ptr;ensureCache.prepare();if(buffer&&typeof buffer===\"object\")buffer=buffer.ptr;if(size&&typeof size===\"object\")size=size.ptr;if(deviceType&&typeof deviceType===\"object\")deviceType=deviceType.ptr;else deviceType=ensureString(deviceType);return!!_emscripten_bind_Cloudpilot_InitializeSession_3(self,buffer,size,deviceType)};Cloudpilot.prototype[\"GetCyclesPerSecond\"]=Cloudpilot.prototype.GetCyclesPerSecond=function(){var self=this.ptr;return _emscripten_bind_Cloudpilot_GetCyclesPerSecond_0(self)};Cloudpilot.prototype[\"RunEmulation\"]=Cloudpilot.prototype.RunEmulation=function(cycles){var self=this.ptr;if(cycles&&typeof cycles===\"object\")cycles=cycles.ptr;return _emscripten_bind_Cloudpilot_RunEmulation_1(self,cycles)};Cloudpilot.prototype[\"SetClockFactor\"]=Cloudpilot.prototype.SetClockFactor=function(clockFactor){var self=this.ptr;if(clockFactor&&typeof clockFactor===\"object\")clockFactor=clockFactor.ptr;_emscripten_bind_Cloudpilot_SetClockFactor_1(self,clockFactor)};Cloudpilot.prototype[\"CopyFrame\"]=Cloudpilot.prototype.CopyFrame=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_Cloudpilot_CopyFrame_0(self),Frame)};Cloudpilot.prototype[\"IsScreenDirty\"]=Cloudpilot.prototype.IsScreenDirty=function(){var self=this.ptr;return!!_emscripten_bind_Cloudpilot_IsScreenDirty_0(self)};Cloudpilot.prototype[\"MarkScreenClean\"]=Cloudpilot.prototype.MarkScreenClean=function(){var self=this.ptr;_emscripten_bind_Cloudpilot_MarkScreenClean_0(self)};Cloudpilot.prototype[\"MinMemoryForDevice\"]=Cloudpilot.prototype.MinMemoryForDevice=function(deviceId){var self=this.ptr;ensureCache.prepare();if(deviceId&&typeof deviceId===\"object\")deviceId=deviceId.ptr;else deviceId=ensureString(deviceId);return _emscripten_bind_Cloudpilot_MinMemoryForDevice_1(self,deviceId)};Cloudpilot.prototype[\"FramebufferSizeForDevice\"]=Cloudpilot.prototype.FramebufferSizeForDevice=function(deviceId){var self=this.ptr;ensureCache.prepare();if(deviceId&&typeof deviceId===\"object\")deviceId=deviceId.ptr;else deviceId=ensureString(deviceId);return _emscripten_bind_Cloudpilot_FramebufferSizeForDevice_1(self,deviceId)};Cloudpilot.prototype[\"TotalMemoryForDevice\"]=Cloudpilot.prototype.TotalMemoryForDevice=function(deviceId){var self=this.ptr;ensureCache.prepare();if(deviceId&&typeof deviceId===\"object\")deviceId=deviceId.ptr;else deviceId=ensureString(deviceId);return _emscripten_bind_Cloudpilot_TotalMemoryForDevice_1(self,deviceId)};Cloudpilot.prototype[\"QueuePenMove\"]=Cloudpilot.prototype.QueuePenMove=function(x,y){var self=this.ptr;if(x&&typeof x===\"object\")x=x.ptr;if(y&&typeof y===\"object\")y=y.ptr;_emscripten_bind_Cloudpilot_QueuePenMove_2(self,x,y)};Cloudpilot.prototype[\"QueuePenUp\"]=Cloudpilot.prototype.QueuePenUp=function(){var self=this.ptr;_emscripten_bind_Cloudpilot_QueuePenUp_0(self)};Cloudpilot.prototype[\"QueueButtonDown\"]=Cloudpilot.prototype.QueueButtonDown=function(id){var self=this.ptr;if(id&&typeof id===\"object\")id=id.ptr;_emscripten_bind_Cloudpilot_QueueButtonDown_1(self,id)};Cloudpilot.prototype[\"QueueButtonUp\"]=Cloudpilot.prototype.QueueButtonUp=function(id){var self=this.ptr;if(id&&typeof id===\"object\")id=id.ptr;_emscripten_bind_Cloudpilot_QueueButtonUp_1(self,id)};Cloudpilot.prototype[\"QueueKeyboardEvent\"]=Cloudpilot.prototype.QueueKeyboardEvent=function(c){var self=this.ptr;if(c&&typeof c===\"object\")c=c.ptr;_emscripten_bind_Cloudpilot_QueueKeyboardEvent_1(self,c)};Cloudpilot.prototype[\"IsPowerOff\"]=Cloudpilot.prototype.IsPowerOff=function(){var self=this.ptr;return!!_emscripten_bind_Cloudpilot_IsPowerOff_0(self)};Cloudpilot.prototype[\"IsUIInitialized\"]=Cloudpilot.prototype.IsUIInitialized=function(){var self=this.ptr;return!!_emscripten_bind_Cloudpilot_IsUIInitialized_0(self)};Cloudpilot.prototype[\"GetOSVersion\"]=Cloudpilot.prototype.GetOSVersion=function(){var self=this.ptr;return _emscripten_bind_Cloudpilot_GetOSVersion_0(self)};Cloudpilot.prototype[\"IsSetupComplete\"]=Cloudpilot.prototype.IsSetupComplete=function(){var self=this.ptr;return!!_emscripten_bind_Cloudpilot_IsSetupComplete_0(self)};Cloudpilot.prototype[\"Reset\"]=Cloudpilot.prototype.Reset=function(){var self=this.ptr;_emscripten_bind_Cloudpilot_Reset_0(self)};Cloudpilot.prototype[\"ResetNoExtensions\"]=Cloudpilot.prototype.ResetNoExtensions=function(){var self=this.ptr;_emscripten_bind_Cloudpilot_ResetNoExtensions_0(self)};Cloudpilot.prototype[\"ResetHard\"]=Cloudpilot.prototype.ResetHard=function(){var self=this.ptr;_emscripten_bind_Cloudpilot_ResetHard_0(self)};Cloudpilot.prototype[\"InstallDb\"]=Cloudpilot.prototype.InstallDb=function(buffer,len){var self=this.ptr;if(buffer&&typeof buffer===\"object\")buffer=buffer.ptr;if(len&&typeof len===\"object\")len=len.ptr;return _emscripten_bind_Cloudpilot_InstallDb_2(self,buffer,len)};Cloudpilot.prototype[\"GetPalette2bitMapping\"]=Cloudpilot.prototype.GetPalette2bitMapping=function(){var self=this.ptr;return _emscripten_bind_Cloudpilot_GetPalette2bitMapping_0(self)};Cloudpilot.prototype[\"GetMemoryPtr\"]=Cloudpilot.prototype.GetMemoryPtr=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_Cloudpilot_GetMemoryPtr_0(self),VoidPtr)};Cloudpilot.prototype[\"GetDirtyPagesPtr\"]=Cloudpilot.prototype.GetDirtyPagesPtr=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_Cloudpilot_GetDirtyPagesPtr_0(self),VoidPtr)};Cloudpilot.prototype[\"GetMemorySize\"]=Cloudpilot.prototype.GetMemorySize=function(){var self=this.ptr;return _emscripten_bind_Cloudpilot_GetMemorySize_0(self)};Cloudpilot.prototype[\"ImportMemoryImage\"]=Cloudpilot.prototype.ImportMemoryImage=function(buffer,len){var self=this.ptr;if(buffer&&typeof buffer===\"object\")buffer=buffer.ptr;if(len&&typeof len===\"object\")len=len.ptr;return!!_emscripten_bind_Cloudpilot_ImportMemoryImage_2(self,buffer,len)};Cloudpilot.prototype[\"GetRomPtr\"]=Cloudpilot.prototype.GetRomPtr=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_Cloudpilot_GetRomPtr_0(self),VoidPtr)};Cloudpilot.prototype[\"GetRomSize\"]=Cloudpilot.prototype.GetRomSize=function(){var self=this.ptr;return _emscripten_bind_Cloudpilot_GetRomSize_0(self)};Cloudpilot.prototype[\"GetSavestatePtr\"]=Cloudpilot.prototype.GetSavestatePtr=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_Cloudpilot_GetSavestatePtr_0(self),VoidPtr)};Cloudpilot.prototype[\"GetSavestateSize\"]=Cloudpilot.prototype.GetSavestateSize=function(){var self=this.ptr;return _emscripten_bind_Cloudpilot_GetSavestateSize_0(self)};Cloudpilot.prototype[\"SaveState\"]=Cloudpilot.prototype.SaveState=function(){var self=this.ptr;return!!_emscripten_bind_Cloudpilot_SaveState_0(self)};Cloudpilot.prototype[\"LoadState\"]=Cloudpilot.prototype.LoadState=function(buffer,len){var self=this.ptr;if(buffer&&typeof buffer===\"object\")buffer=buffer.ptr;if(len&&typeof len===\"object\")len=len.ptr;return!!_emscripten_bind_Cloudpilot_LoadState_2(self,buffer,len)};Cloudpilot.prototype[\"GetHotsyncName\"]=Cloudpilot.prototype.GetHotsyncName=function(){var self=this.ptr;return UTF8ToString(_emscripten_bind_Cloudpilot_GetHotsyncName_0(self))};Cloudpilot.prototype[\"SetHotsyncName\"]=Cloudpilot.prototype.SetHotsyncName=function(name){var self=this.ptr;ensureCache.prepare();if(name&&typeof name===\"object\")name=name.ptr;else name=ensureString(name);_emscripten_bind_Cloudpilot_SetHotsyncName_1(self,name)};Cloudpilot.prototype[\"RegisterPwmHandler\"]=Cloudpilot.prototype.RegisterPwmHandler=function(handlerPtr){var self=this.ptr;if(handlerPtr&&typeof handlerPtr===\"object\")handlerPtr=handlerPtr.ptr;_emscripten_bind_Cloudpilot_RegisterPwmHandler_1(self,handlerPtr)};Cloudpilot.prototype[\"StartBackup\"]=Cloudpilot.prototype.StartBackup=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_Cloudpilot_StartBackup_0(self),DbBackup)};Cloudpilot.prototype[\"SetClipboardIntegration\"]=Cloudpilot.prototype.SetClipboardIntegration=function(toggle){var self=this.ptr;if(toggle&&typeof toggle===\"object\")toggle=toggle.ptr;_emscripten_bind_Cloudpilot_SetClipboardIntegration_1(self,toggle)};Cloudpilot.prototype[\"GetClipboardIntegration\"]=Cloudpilot.prototype.GetClipboardIntegration=function(){var self=this.ptr;return!!_emscripten_bind_Cloudpilot_GetClipboardIntegration_0(self)};Cloudpilot.prototype[\"IsSuspended\"]=Cloudpilot.prototype.IsSuspended=function(){var self=this.ptr;return!!_emscripten_bind_Cloudpilot_IsSuspended_0(self)};Cloudpilot.prototype[\"GetSuspendContext\"]=Cloudpilot.prototype.GetSuspendContext=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_Cloudpilot_GetSuspendContext_0(self),SuspendContext)};Cloudpilot.prototype[\"SetNetworkRedirection\"]=Cloudpilot.prototype.SetNetworkRedirection=function(toggle){var self=this.ptr;if(toggle&&typeof toggle===\"object\")toggle=toggle.ptr;_emscripten_bind_Cloudpilot_SetNetworkRedirection_1(self,toggle)};Cloudpilot.prototype[\"GetNetworkRedirection\"]=Cloudpilot.prototype.GetNetworkRedirection=function(){var self=this.ptr;return!!_emscripten_bind_Cloudpilot_GetNetworkRedirection_0(self)};Cloudpilot.prototype[\"RegisterProxyDisconnectHandler\"]=Cloudpilot.prototype.RegisterProxyDisconnectHandler=function(handlerPtr){var self=this.ptr;if(handlerPtr&&typeof handlerPtr===\"object\")handlerPtr=handlerPtr.ptr;_emscripten_bind_Cloudpilot_RegisterProxyDisconnectHandler_1(self,handlerPtr)};Cloudpilot.prototype[\"SetHotsyncNameManagement\"]=Cloudpilot.prototype.SetHotsyncNameManagement=function(toggle){var self=this.ptr;if(toggle&&typeof toggle===\"object\")toggle=toggle.ptr;_emscripten_bind_Cloudpilot_SetHotsyncNameManagement_1(self,toggle)};Cloudpilot.prototype[\"LaunchAppByName\"]=Cloudpilot.prototype.LaunchAppByName=function(name){var self=this.ptr;ensureCache.prepare();if(name&&typeof name===\"object\")name=name.ptr;else name=ensureString(name);return!!_emscripten_bind_Cloudpilot_LaunchAppByName_1(self,name)};Cloudpilot.prototype[\"LaunchAppByDbHeader\"]=Cloudpilot.prototype.LaunchAppByDbHeader=function(buffer,len){var self=this.ptr;if(buffer&&typeof buffer===\"object\")buffer=buffer.ptr;if(len&&typeof len===\"object\")len=len.ptr;return!!_emscripten_bind_Cloudpilot_LaunchAppByDbHeader_2(self,buffer,len)};Cloudpilot.prototype[\"ClearExternalStorage\"]=Cloudpilot.prototype.ClearExternalStorage=function(){var self=this.ptr;_emscripten_bind_Cloudpilot_ClearExternalStorage_0(self)};Cloudpilot.prototype[\"AllocateCard\"]=Cloudpilot.prototype.AllocateCard=function(key,blockCount){var self=this.ptr;ensureCache.prepare();if(key&&typeof key===\"object\")key=key.ptr;else key=ensureString(key);if(blockCount&&typeof blockCount===\"object\")blockCount=blockCount.ptr;return!!_emscripten_bind_Cloudpilot_AllocateCard_2(self,key,blockCount)};Cloudpilot.prototype[\"AdoptCard\"]=Cloudpilot.prototype.AdoptCard=function(key,data,blockCount){var self=this.ptr;ensureCache.prepare();if(key&&typeof key===\"object\")key=key.ptr;else key=ensureString(key);if(data&&typeof data===\"object\")data=data.ptr;if(blockCount&&typeof blockCount===\"object\")blockCount=blockCount.ptr;return!!_emscripten_bind_Cloudpilot_AdoptCard_3(self,key,data,blockCount)};Cloudpilot.prototype[\"MountCard\"]=Cloudpilot.prototype.MountCard=function(key){var self=this.ptr;ensureCache.prepare();if(key&&typeof key===\"object\")key=key.ptr;else key=ensureString(key);return!!_emscripten_bind_Cloudpilot_MountCard_1(self,key)};Cloudpilot.prototype[\"RemoveCard\"]=Cloudpilot.prototype.RemoveCard=function(key){var self=this.ptr;ensureCache.prepare();if(key&&typeof key===\"object\")key=key.ptr;else key=ensureString(key);return!!_emscripten_bind_Cloudpilot_RemoveCard_1(self,key)};Cloudpilot.prototype[\"GetCardData\"]=Cloudpilot.prototype.GetCardData=function(key){var self=this.ptr;ensureCache.prepare();if(key&&typeof key===\"object\")key=key.ptr;else key=ensureString(key);return wrapPointer(_emscripten_bind_Cloudpilot_GetCardData_1(self,key),VoidPtr)};Cloudpilot.prototype[\"GetCardDirtyPages\"]=Cloudpilot.prototype.GetCardDirtyPages=function(key){var self=this.ptr;ensureCache.prepare();if(key&&typeof key===\"object\")key=key.ptr;else key=ensureString(key);return wrapPointer(_emscripten_bind_Cloudpilot_GetCardDirtyPages_1(self,key),VoidPtr)};Cloudpilot.prototype[\"GetCardSize\"]=Cloudpilot.prototype.GetCardSize=function(key){var self=this.ptr;ensureCache.prepare();if(key&&typeof key===\"object\")key=key.ptr;else key=ensureString(key);return _emscripten_bind_Cloudpilot_GetCardSize_1(self,key)};Cloudpilot.prototype[\"RemountCards\"]=Cloudpilot.prototype.RemountCards=function(){var self=this.ptr;_emscripten_bind_Cloudpilot_RemountCards_0(self)};Cloudpilot.prototype[\"GetSupportLevel\"]=Cloudpilot.prototype.GetSupportLevel=function(size){var self=this.ptr;if(size&&typeof size===\"object\")size=size.ptr;return _emscripten_bind_Cloudpilot_GetSupportLevel_1(self,size)};Cloudpilot.prototype[\"GetMountedKey\"]=Cloudpilot.prototype.GetMountedKey=function(){var self=this.ptr;return UTF8ToString(_emscripten_bind_Cloudpilot_GetMountedKey_0(self))};Cloudpilot.prototype[\"GetTransportIR\"]=Cloudpilot.prototype.GetTransportIR=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_Cloudpilot_GetTransportIR_0(self),EmTransportSerialBuffer)};Cloudpilot.prototype[\"GetTransportSerial\"]=Cloudpilot.prototype.GetTransportSerial=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_Cloudpilot_GetTransportSerial_0(self),EmTransportSerialBuffer)};Cloudpilot.prototype[\"__destroy__\"]=Cloudpilot.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_Cloudpilot___destroy___0(self)};function RomInfo(buffer,size){if(buffer&&typeof buffer===\"object\")buffer=buffer.ptr;if(size&&typeof size===\"object\")size=size.ptr;this.ptr=_emscripten_bind_RomInfo_RomInfo_2(buffer,size);getCache(RomInfo)[this.ptr]=this}RomInfo.prototype=Object.create(WrapperObject.prototype);RomInfo.prototype.constructor=RomInfo;RomInfo.prototype.__class__=RomInfo;RomInfo.__cache__={};Module[\"RomInfo\"]=RomInfo;RomInfo.prototype[\"IsValid\"]=RomInfo.prototype.IsValid=function(){var self=this.ptr;return!!_emscripten_bind_RomInfo_IsValid_0(self)};RomInfo.prototype[\"CardVersion\"]=RomInfo.prototype.CardVersion=function(){var self=this.ptr;return _emscripten_bind_RomInfo_CardVersion_0(self)};RomInfo.prototype[\"CardName\"]=RomInfo.prototype.CardName=function(){var self=this.ptr;return UTF8ToString(_emscripten_bind_RomInfo_CardName_0(self))};RomInfo.prototype[\"RomVersion\"]=RomInfo.prototype.RomVersion=function(){var self=this.ptr;return _emscripten_bind_RomInfo_RomVersion_0(self)};RomInfo.prototype[\"RomVersionString\"]=RomInfo.prototype.RomVersionString=function(){var self=this.ptr;return UTF8ToString(_emscripten_bind_RomInfo_RomVersionString_0(self))};RomInfo.prototype[\"Supports\"]=RomInfo.prototype.Supports=function(deviceId){var self=this.ptr;ensureCache.prepare();if(deviceId&&typeof deviceId===\"object\")deviceId=deviceId.ptr;else deviceId=ensureString(deviceId);return!!_emscripten_bind_RomInfo_Supports_1(self,deviceId)};RomInfo.prototype[\"__destroy__\"]=RomInfo.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_RomInfo___destroy___0(self)};function Frame(){throw\"cannot construct a Frame, no constructor in IDL\"}Frame.prototype=Object.create(WrapperObject.prototype);Frame.prototype.constructor=Frame;Frame.prototype.__class__=Frame;Frame.__cache__={};Module[\"Frame\"]=Frame;Frame.prototype[\"GetLineWidth\"]=Frame.prototype.GetLineWidth=function(){var self=this.ptr;return _emscripten_bind_Frame_GetLineWidth_0(self)};Frame.prototype[\"GetBpp\"]=Frame.prototype.GetBpp=function(){var self=this.ptr;return _emscripten_bind_Frame_GetBpp_0(self)};Frame.prototype[\"GetLines\"]=Frame.prototype.GetLines=function(){var self=this.ptr;return _emscripten_bind_Frame_GetLines_0(self)};Frame.prototype[\"GetMargin\"]=Frame.prototype.GetMargin=function(){var self=this.ptr;return _emscripten_bind_Frame_GetMargin_0(self)};Frame.prototype[\"GetBytesPerLine\"]=Frame.prototype.GetBytesPerLine=function(){var self=this.ptr;return _emscripten_bind_Frame_GetBytesPerLine_0(self)};Frame.prototype[\"GetFirstDirtyLine\"]=Frame.prototype.GetFirstDirtyLine=function(){var self=this.ptr;return _emscripten_bind_Frame_GetFirstDirtyLine_0(self)};Frame.prototype[\"GetLastDirtyLine\"]=Frame.prototype.GetLastDirtyLine=function(){var self=this.ptr;return _emscripten_bind_Frame_GetLastDirtyLine_0(self)};Frame.prototype[\"GetHasChanges\"]=Frame.prototype.GetHasChanges=function(){var self=this.ptr;return!!_emscripten_bind_Frame_GetHasChanges_0(self)};Frame.prototype[\"GetBuffer\"]=Frame.prototype.GetBuffer=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_Frame_GetBuffer_0(self),VoidPtr)};Frame.prototype[\"GetBufferSize\"]=Frame.prototype.GetBufferSize=function(){var self=this.ptr;return _emscripten_bind_Frame_GetBufferSize_0(self)};Frame.prototype[\"GetScaleX\"]=Frame.prototype.GetScaleX=function(){var self=this.ptr;return _emscripten_bind_Frame_GetScaleX_0(self)};Frame.prototype[\"GetScaleY\"]=Frame.prototype.GetScaleY=function(){var self=this.ptr;return _emscripten_bind_Frame_GetScaleY_0(self)};Frame.prototype[\"__destroy__\"]=Frame.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_Frame___destroy___0(self)};function DbBackup(){throw\"cannot construct a DbBackup, no constructor in IDL\"}DbBackup.prototype=Object.create(WrapperObject.prototype);DbBackup.prototype.constructor=DbBackup;DbBackup.prototype.__class__=DbBackup;DbBackup.__cache__={};Module[\"DbBackup\"]=DbBackup;DbBackup.prototype[\"Init\"]=DbBackup.prototype.Init=function(includeRomDatabases){var self=this.ptr;if(includeRomDatabases&&typeof includeRomDatabases===\"object\")includeRomDatabases=includeRomDatabases.ptr;return!!_emscripten_bind_DbBackup_Init_1(self,includeRomDatabases)};DbBackup.prototype[\"IsInProgress\"]=DbBackup.prototype.IsInProgress=function(){var self=this.ptr;return!!_emscripten_bind_DbBackup_IsInProgress_0(self)};DbBackup.prototype[\"IsDone\"]=DbBackup.prototype.IsDone=function(){var self=this.ptr;return!!_emscripten_bind_DbBackup_IsDone_0(self)};DbBackup.prototype[\"GetCurrentDatabase\"]=DbBackup.prototype.GetCurrentDatabase=function(){var self=this.ptr;return UTF8ToString(_emscripten_bind_DbBackup_GetCurrentDatabase_0(self))};DbBackup.prototype[\"Save\"]=DbBackup.prototype.Save=function(){var self=this.ptr;return!!_emscripten_bind_DbBackup_Save_0(self)};DbBackup.prototype[\"Skip\"]=DbBackup.prototype.Skip=function(){var self=this.ptr;_emscripten_bind_DbBackup_Skip_0(self)};DbBackup.prototype[\"GetArchivePtr\"]=DbBackup.prototype.GetArchivePtr=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_DbBackup_GetArchivePtr_0(self),VoidPtr)};DbBackup.prototype[\"GetArchiveSize\"]=DbBackup.prototype.GetArchiveSize=function(){var self=this.ptr;return _emscripten_bind_DbBackup_GetArchiveSize_0(self)};DbBackup.prototype[\"__destroy__\"]=DbBackup.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_DbBackup___destroy___0(self)};function SuspendContextClipboardCopy(){throw\"cannot construct a SuspendContextClipboardCopy, no constructor in IDL\"}SuspendContextClipboardCopy.prototype=Object.create(WrapperObject.prototype);SuspendContextClipboardCopy.prototype.constructor=SuspendContextClipboardCopy;SuspendContextClipboardCopy.prototype.__class__=SuspendContextClipboardCopy;SuspendContextClipboardCopy.__cache__={};Module[\"SuspendContextClipboardCopy\"]=SuspendContextClipboardCopy;SuspendContextClipboardCopy.prototype[\"Cancel\"]=SuspendContextClipboardCopy.prototype.Cancel=function(){var self=this.ptr;_emscripten_bind_SuspendContextClipboardCopy_Cancel_0(self)};SuspendContextClipboardCopy.prototype[\"Resume\"]=SuspendContextClipboardCopy.prototype.Resume=function(){var self=this.ptr;_emscripten_bind_SuspendContextClipboardCopy_Resume_0(self)};SuspendContextClipboardCopy.prototype[\"GetClipboardContent\"]=SuspendContextClipboardCopy.prototype.GetClipboardContent=function(){var self=this.ptr;return UTF8ToString(_emscripten_bind_SuspendContextClipboardCopy_GetClipboardContent_0(self))};SuspendContextClipboardCopy.prototype[\"__destroy__\"]=SuspendContextClipboardCopy.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_SuspendContextClipboardCopy___destroy___0(self)};function SuspendContextClipboardPaste(){throw\"cannot construct a SuspendContextClipboardPaste, no constructor in IDL\"}SuspendContextClipboardPaste.prototype=Object.create(WrapperObject.prototype);SuspendContextClipboardPaste.prototype.constructor=SuspendContextClipboardPaste;SuspendContextClipboardPaste.prototype.__class__=SuspendContextClipboardPaste;SuspendContextClipboardPaste.__cache__={};Module[\"SuspendContextClipboardPaste\"]=SuspendContextClipboardPaste;SuspendContextClipboardPaste.prototype[\"Cancel\"]=SuspendContextClipboardPaste.prototype.Cancel=function(){var self=this.ptr;_emscripten_bind_SuspendContextClipboardPaste_Cancel_0(self)};SuspendContextClipboardPaste.prototype[\"Resume\"]=SuspendContextClipboardPaste.prototype.Resume=function(clipboardContent){var self=this.ptr;ensureCache.prepare();if(clipboardContent&&typeof clipboardContent===\"object\")clipboardContent=clipboardContent.ptr;else clipboardContent=ensureString(clipboardContent);_emscripten_bind_SuspendContextClipboardPaste_Resume_1(self,clipboardContent)};SuspendContextClipboardPaste.prototype[\"__destroy__\"]=SuspendContextClipboardPaste.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_SuspendContextClipboardPaste___destroy___0(self)};function SuspendContextNetworkConnect(){throw\"cannot construct a SuspendContextNetworkConnect, no constructor in IDL\"}SuspendContextNetworkConnect.prototype=Object.create(WrapperObject.prototype);SuspendContextNetworkConnect.prototype.constructor=SuspendContextNetworkConnect;SuspendContextNetworkConnect.prototype.__class__=SuspendContextNetworkConnect;SuspendContextNetworkConnect.__cache__={};Module[\"SuspendContextNetworkConnect\"]=SuspendContextNetworkConnect;SuspendContextNetworkConnect.prototype[\"Cancel\"]=SuspendContextNetworkConnect.prototype.Cancel=function(){var self=this.ptr;_emscripten_bind_SuspendContextNetworkConnect_Cancel_0(self)};SuspendContextNetworkConnect.prototype[\"Resume\"]=SuspendContextNetworkConnect.prototype.Resume=function(){var self=this.ptr;_emscripten_bind_SuspendContextNetworkConnect_Resume_0(self)};SuspendContextNetworkConnect.prototype[\"__destroy__\"]=SuspendContextNetworkConnect.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_SuspendContextNetworkConnect___destroy___0(self)};function SuspendContextNetworkRpc(){throw\"cannot construct a SuspendContextNetworkRpc, no constructor in IDL\"}SuspendContextNetworkRpc.prototype=Object.create(WrapperObject.prototype);SuspendContextNetworkRpc.prototype.constructor=SuspendContextNetworkRpc;SuspendContextNetworkRpc.prototype.__class__=SuspendContextNetworkRpc;SuspendContextNetworkRpc.__cache__={};Module[\"SuspendContextNetworkRpc\"]=SuspendContextNetworkRpc;SuspendContextNetworkRpc.prototype[\"Cancel\"]=SuspendContextNetworkRpc.prototype.Cancel=function(){var self=this.ptr;_emscripten_bind_SuspendContextNetworkRpc_Cancel_0(self)};SuspendContextNetworkRpc.prototype[\"GetRequestSize\"]=SuspendContextNetworkRpc.prototype.GetRequestSize=function(){var self=this.ptr;return _emscripten_bind_SuspendContextNetworkRpc_GetRequestSize_0(self)};SuspendContextNetworkRpc.prototype[\"GetRequestData\"]=SuspendContextNetworkRpc.prototype.GetRequestData=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SuspendContextNetworkRpc_GetRequestData_0(self),VoidPtr)};SuspendContextNetworkRpc.prototype[\"ReceiveResponse\"]=SuspendContextNetworkRpc.prototype.ReceiveResponse=function(data,size){var self=this.ptr;if(data&&typeof data===\"object\")data=data.ptr;if(size&&typeof size===\"object\")size=size.ptr;_emscripten_bind_SuspendContextNetworkRpc_ReceiveResponse_2(self,data,size)};SuspendContextNetworkRpc.prototype[\"__destroy__\"]=SuspendContextNetworkRpc.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_SuspendContextNetworkRpc___destroy___0(self)};function SuspendContextSerialSync(){throw\"cannot construct a SuspendContextSerialSync, no constructor in IDL\"}SuspendContextSerialSync.prototype=Object.create(WrapperObject.prototype);SuspendContextSerialSync.prototype.constructor=SuspendContextSerialSync;SuspendContextSerialSync.prototype.__class__=SuspendContextSerialSync;SuspendContextSerialSync.__cache__={};Module[\"SuspendContextSerialSync\"]=SuspendContextSerialSync;SuspendContextSerialSync.prototype[\"Cancel\"]=SuspendContextSerialSync.prototype.Cancel=function(){var self=this.ptr;_emscripten_bind_SuspendContextSerialSync_Cancel_0(self)};SuspendContextSerialSync.prototype[\"Resume\"]=SuspendContextSerialSync.prototype.Resume=function(){var self=this.ptr;_emscripten_bind_SuspendContextSerialSync_Resume_0(self)};SuspendContextSerialSync.prototype[\"__destroy__\"]=SuspendContextSerialSync.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_SuspendContextSerialSync___destroy___0(self)};function SuspendContext(){throw\"cannot construct a SuspendContext, no constructor in IDL\"}SuspendContext.prototype=Object.create(WrapperObject.prototype);SuspendContext.prototype.constructor=SuspendContext;SuspendContext.prototype.__class__=SuspendContext;SuspendContext.__cache__={};Module[\"SuspendContext\"]=SuspendContext;SuspendContext.prototype[\"GetKind\"]=SuspendContext.prototype.GetKind=function(){var self=this.ptr;return _emscripten_bind_SuspendContext_GetKind_0(self)};SuspendContext.prototype[\"Cancel\"]=SuspendContext.prototype.Cancel=function(){var self=this.ptr;_emscripten_bind_SuspendContext_Cancel_0(self)};SuspendContext.prototype[\"AsContextClipboardCopy\"]=SuspendContext.prototype.AsContextClipboardCopy=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SuspendContext_AsContextClipboardCopy_0(self),SuspendContextClipboardCopy)};SuspendContext.prototype[\"AsContextClipboardPaste\"]=SuspendContext.prototype.AsContextClipboardPaste=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SuspendContext_AsContextClipboardPaste_0(self),SuspendContextClipboardPaste)};SuspendContext.prototype[\"AsContextNetworkConnect\"]=SuspendContext.prototype.AsContextNetworkConnect=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SuspendContext_AsContextNetworkConnect_0(self),SuspendContextNetworkConnect)};SuspendContext.prototype[\"AsContextNetworkRpc\"]=SuspendContext.prototype.AsContextNetworkRpc=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SuspendContext_AsContextNetworkRpc_0(self),SuspendContextNetworkRpc)};SuspendContext.prototype[\"AsContextSerialSync\"]=SuspendContext.prototype.AsContextSerialSync=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SuspendContext_AsContextSerialSync_0(self),SuspendContextSerialSync)};SuspendContext.prototype[\"__destroy__\"]=SuspendContext.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_SuspendContext___destroy___0(self)};function SessionImage(){this.ptr=_emscripten_bind_SessionImage_SessionImage_0();getCache(SessionImage)[this.ptr]=this}SessionImage.prototype=Object.create(WrapperObject.prototype);SessionImage.prototype.constructor=SessionImage;SessionImage.prototype.__class__=SessionImage;SessionImage.__cache__={};Module[\"SessionImage\"]=SessionImage;SessionImage.prototype[\"GetDeviceId\"]=SessionImage.prototype.GetDeviceId=function(){var self=this.ptr;return UTF8ToString(_emscripten_bind_SessionImage_GetDeviceId_0(self))};SessionImage.prototype[\"SetDeviceId\"]=SessionImage.prototype.SetDeviceId=function(deviceId){var self=this.ptr;ensureCache.prepare();if(deviceId&&typeof deviceId===\"object\")deviceId=deviceId.ptr;else deviceId=ensureString(deviceId);return wrapPointer(_emscripten_bind_SessionImage_SetDeviceId_1(self,deviceId),SessionImage)};SessionImage.prototype[\"GetRomImage\"]=SessionImage.prototype.GetRomImage=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SessionImage_GetRomImage_0(self),VoidPtr)};SessionImage.prototype[\"GetRomImageSize\"]=SessionImage.prototype.GetRomImageSize=function(){var self=this.ptr;return _emscripten_bind_SessionImage_GetRomImageSize_0(self)};SessionImage.prototype[\"SetRomImage\"]=SessionImage.prototype.SetRomImage=function(image,size){var self=this.ptr;if(image&&typeof image===\"object\")image=image.ptr;if(size&&typeof size===\"object\")size=size.ptr;return wrapPointer(_emscripten_bind_SessionImage_SetRomImage_2(self,image,size),SessionImage)};SessionImage.prototype[\"GetMemoryImage\"]=SessionImage.prototype.GetMemoryImage=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SessionImage_GetMemoryImage_0(self),VoidPtr)};SessionImage.prototype[\"GetMemoryImageSize\"]=SessionImage.prototype.GetMemoryImageSize=function(){var self=this.ptr;return _emscripten_bind_SessionImage_GetMemoryImageSize_0(self)};SessionImage.prototype[\"SetMemoryImage\"]=SessionImage.prototype.SetMemoryImage=function(image,size){var self=this.ptr;if(image&&typeof image===\"object\")image=image.ptr;if(size&&typeof size===\"object\")size=size.ptr;return wrapPointer(_emscripten_bind_SessionImage_SetMemoryImage_2(self,image,size),SessionImage)};SessionImage.prototype[\"GetMetadata\"]=SessionImage.prototype.GetMetadata=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SessionImage_GetMetadata_0(self),VoidPtr)};SessionImage.prototype[\"GetMetadataSize\"]=SessionImage.prototype.GetMetadataSize=function(){var self=this.ptr;return _emscripten_bind_SessionImage_GetMetadataSize_0(self)};SessionImage.prototype[\"SetMetadata\"]=SessionImage.prototype.SetMetadata=function(metadata,size){var self=this.ptr;if(metadata&&typeof metadata===\"object\")metadata=metadata.ptr;if(size&&typeof size===\"object\")size=size.ptr;return wrapPointer(_emscripten_bind_SessionImage_SetMetadata_2(self,metadata,size),SessionImage)};SessionImage.prototype[\"GetSavestate\"]=SessionImage.prototype.GetSavestate=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SessionImage_GetSavestate_0(self),VoidPtr)};SessionImage.prototype[\"GetSavestateSize\"]=SessionImage.prototype.GetSavestateSize=function(){var self=this.ptr;return _emscripten_bind_SessionImage_GetSavestateSize_0(self)};SessionImage.prototype[\"SetSavestate\"]=SessionImage.prototype.SetSavestate=function(savestate,size){var self=this.ptr;if(savestate&&typeof savestate===\"object\")savestate=savestate.ptr;if(size&&typeof size===\"object\")size=size.ptr;return wrapPointer(_emscripten_bind_SessionImage_SetSavestate_2(self,savestate,size),SessionImage)};SessionImage.prototype[\"GetVersion\"]=SessionImage.prototype.GetVersion=function(){var self=this.ptr;return _emscripten_bind_SessionImage_GetVersion_0(self)};SessionImage.prototype[\"Serialize\"]=SessionImage.prototype.Serialize=function(){var self=this.ptr;return!!_emscripten_bind_SessionImage_Serialize_0(self)};SessionImage.prototype[\"GetSerializedImage\"]=SessionImage.prototype.GetSerializedImage=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SessionImage_GetSerializedImage_0(self),VoidPtr)};SessionImage.prototype[\"GetSerializedImageSize\"]=SessionImage.prototype.GetSerializedImageSize=function(){var self=this.ptr;return _emscripten_bind_SessionImage_GetSerializedImageSize_0(self)};SessionImage.prototype[\"Deserialize\"]=SessionImage.prototype.Deserialize=function(buffer,size){var self=this.ptr;if(buffer&&typeof buffer===\"object\")buffer=buffer.ptr;if(size&&typeof size===\"object\")size=size.ptr;return!!_emscripten_bind_SessionImage_Deserialize_2(self,buffer,size)};SessionImage.prototype[\"__destroy__\"]=SessionImage.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_SessionImage___destroy___0(self)};function SkinLoader(name){ensureCache.prepare();if(name&&typeof name===\"object\")name=name.ptr;else name=ensureString(name);this.ptr=_emscripten_bind_SkinLoader_SkinLoader_1(name);getCache(SkinLoader)[this.ptr]=this}SkinLoader.prototype=Object.create(WrapperObject.prototype);SkinLoader.prototype.constructor=SkinLoader;SkinLoader.prototype.__class__=SkinLoader;SkinLoader.__cache__={};Module[\"SkinLoader\"]=SkinLoader;SkinLoader.prototype[\"GetData\"]=SkinLoader.prototype.GetData=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SkinLoader_GetData_0(self),VoidPtr)};SkinLoader.prototype[\"GetSize\"]=SkinLoader.prototype.GetSize=function(){var self=this.ptr;return _emscripten_bind_SkinLoader_GetSize_0(self)};SkinLoader.prototype[\"__destroy__\"]=SkinLoader.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_SkinLoader___destroy___0(self)};function EmTransportSerialBuffer(){throw\"cannot construct a EmTransportSerialBuffer, no constructor in IDL\"}EmTransportSerialBuffer.prototype=Object.create(WrapperObject.prototype);EmTransportSerialBuffer.prototype.constructor=EmTransportSerialBuffer;EmTransportSerialBuffer.prototype.__class__=EmTransportSerialBuffer;EmTransportSerialBuffer.__cache__={};Module[\"EmTransportSerialBuffer\"]=EmTransportSerialBuffer;EmTransportSerialBuffer.prototype[\"RxBytesPending\"]=EmTransportSerialBuffer.prototype.RxBytesPending=function(){var self=this.ptr;return _emscripten_bind_EmTransportSerialBuffer_RxBytesPending_0(self)};EmTransportSerialBuffer.prototype[\"Receive\"]=EmTransportSerialBuffer.prototype.Receive=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_EmTransportSerialBuffer_Receive_0(self),VoidPtr)};EmTransportSerialBuffer.prototype[\"Send\"]=EmTransportSerialBuffer.prototype.Send=function(Count,data,frameComplete){var self=this.ptr;if(Count&&typeof Count===\"object\")Count=Count.ptr;if(data&&typeof data===\"object\")data=data.ptr;if(frameComplete&&typeof frameComplete===\"object\")frameComplete=frameComplete.ptr;return _emscripten_bind_EmTransportSerialBuffer_Send_3(self,Count,data,frameComplete)};EmTransportSerialBuffer.prototype[\"IsOpen\"]=EmTransportSerialBuffer.prototype.IsOpen=function(){var self=this.ptr;return!!_emscripten_bind_EmTransportSerialBuffer_IsOpen_0(self)};EmTransportSerialBuffer.prototype[\"Rts\"]=EmTransportSerialBuffer.prototype.Rts=function(){var self=this.ptr;return _emscripten_bind_EmTransportSerialBuffer_Rts_0(self)};EmTransportSerialBuffer.prototype[\"Dtr\"]=EmTransportSerialBuffer.prototype.Dtr=function(){var self=this.ptr;return!!_emscripten_bind_EmTransportSerialBuffer_Dtr_0(self)};EmTransportSerialBuffer.prototype[\"IsBreak\"]=EmTransportSerialBuffer.prototype.IsBreak=function(){var self=this.ptr;return!!_emscripten_bind_EmTransportSerialBuffer_IsBreak_0(self)};EmTransportSerialBuffer.prototype[\"BufferSize\"]=EmTransportSerialBuffer.prototype.BufferSize=function(){var self=this.ptr;return _emscripten_bind_EmTransportSerialBuffer_BufferSize_0(self)};EmTransportSerialBuffer.prototype[\"GetBaud\"]=EmTransportSerialBuffer.prototype.GetBaud=function(){var self=this.ptr;return _emscripten_bind_EmTransportSerialBuffer_GetBaud_0(self)};EmTransportSerialBuffer.prototype[\"GetParity\"]=EmTransportSerialBuffer.prototype.GetParity=function(){var self=this.ptr;return _emscripten_bind_EmTransportSerialBuffer_GetParity_0(self)};EmTransportSerialBuffer.prototype[\"GetStopBits\"]=EmTransportSerialBuffer.prototype.GetStopBits=function(){var self=this.ptr;return _emscripten_bind_EmTransportSerialBuffer_GetStopBits_0(self)};EmTransportSerialBuffer.prototype[\"GetDataBits\"]=EmTransportSerialBuffer.prototype.GetDataBits=function(){var self=this.ptr;return _emscripten_bind_EmTransportSerialBuffer_GetDataBits_0(self)};EmTransportSerialBuffer.prototype[\"GetHwrHandshake\"]=EmTransportSerialBuffer.prototype.GetHwrHandshake=function(){var self=this.ptr;return _emscripten_bind_EmTransportSerialBuffer_GetHwrHandshake_0(self)};EmTransportSerialBuffer.prototype[\"GetModeSync\"]=EmTransportSerialBuffer.prototype.GetModeSync=function(){var self=this.ptr;return!!_emscripten_bind_EmTransportSerialBuffer_GetModeSync_0(self)};EmTransportSerialBuffer.prototype[\"SetModeSync\"]=EmTransportSerialBuffer.prototype.SetModeSync=function(sync){var self=this.ptr;if(sync&&typeof sync===\"object\")sync=sync.ptr;_emscripten_bind_EmTransportSerialBuffer_SetModeSync_1(self,sync)};EmTransportSerialBuffer.prototype[\"IsFrameComplete\"]=EmTransportSerialBuffer.prototype.IsFrameComplete=function(){var self=this.ptr;return!!_emscripten_bind_EmTransportSerialBuffer_IsFrameComplete_0(self)};EmTransportSerialBuffer.prototype[\"SetRequestTransferCallback\"]=EmTransportSerialBuffer.prototype.SetRequestTransferCallback=function(cb){var self=this.ptr;if(cb&&typeof cb===\"object\")cb=cb.ptr;_emscripten_bind_EmTransportSerialBuffer_SetRequestTransferCallback_1(self,cb)};EmTransportSerialBuffer.prototype[\"__destroy__\"]=EmTransportSerialBuffer.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_EmTransportSerialBuffer___destroy___0(self)};function GunzipContext(data,size,slizeSize){if(data&&typeof data===\"object\")data=data.ptr;if(size&&typeof size===\"object\")size=size.ptr;if(slizeSize&&typeof slizeSize===\"object\")slizeSize=slizeSize.ptr;this.ptr=_emscripten_bind_GunzipContext_GunzipContext_3(data,size,slizeSize);getCache(GunzipContext)[this.ptr]=this}GunzipContext.prototype=Object.create(WrapperObject.prototype);GunzipContext.prototype.constructor=GunzipContext;GunzipContext.prototype.__class__=GunzipContext;GunzipContext.__cache__={};Module[\"GunzipContext\"]=GunzipContext;GunzipContext.prototype[\"GetState\"]=GunzipContext.prototype.GetState=function(){var self=this.ptr;return _emscripten_bind_GunzipContext_GetState_0(self)};GunzipContext.prototype[\"Continue\"]=GunzipContext.prototype.Continue=function(){var self=this.ptr;return _emscripten_bind_GunzipContext_Continue_0(self)};GunzipContext.prototype[\"GetUncompressedData\"]=GunzipContext.prototype.GetUncompressedData=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_GunzipContext_GetUncompressedData_0(self),VoidPtr)};GunzipContext.prototype[\"ReleaseUncompressedData\"]=GunzipContext.prototype.ReleaseUncompressedData=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_GunzipContext_ReleaseUncompressedData_0(self),VoidPtr)};GunzipContext.prototype[\"GetUncompressedSize\"]=GunzipContext.prototype.GetUncompressedSize=function(){var self=this.ptr;return _emscripten_bind_GunzipContext_GetUncompressedSize_0(self)};GunzipContext.prototype[\"GetError\"]=GunzipContext.prototype.GetError=function(){var self=this.ptr;return UTF8ToString(_emscripten_bind_GunzipContext_GetError_0(self))};GunzipContext.prototype[\"__destroy__\"]=GunzipContext.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_GunzipContext___destroy___0(self)};function ZipfileWalker(bufferSize,buffer){if(bufferSize&&typeof bufferSize===\"object\")bufferSize=bufferSize.ptr;if(buffer&&typeof buffer===\"object\")buffer=buffer.ptr;this.ptr=_emscripten_bind_ZipfileWalker_ZipfileWalker_2(bufferSize,buffer);getCache(ZipfileWalker)[this.ptr]=this}ZipfileWalker.prototype=Object.create(WrapperObject.prototype);ZipfileWalker.prototype.constructor=ZipfileWalker;ZipfileWalker.prototype.__class__=ZipfileWalker;ZipfileWalker.__cache__={};Module[\"ZipfileWalker\"]=ZipfileWalker;ZipfileWalker.prototype[\"GetState\"]=ZipfileWalker.prototype.GetState=function(){var self=this.ptr;return _emscripten_bind_ZipfileWalker_GetState_0(self)};ZipfileWalker.prototype[\"Next\"]=ZipfileWalker.prototype.Next=function(){var self=this.ptr;return _emscripten_bind_ZipfileWalker_Next_0(self)};ZipfileWalker.prototype[\"GetTotalEntries\"]=ZipfileWalker.prototype.GetTotalEntries=function(){var self=this.ptr;return _emscripten_bind_ZipfileWalker_GetTotalEntries_0(self)};ZipfileWalker.prototype[\"GetCurrentEntrySize\"]=ZipfileWalker.prototype.GetCurrentEntrySize=function(){var self=this.ptr;return _emscripten_bind_ZipfileWalker_GetCurrentEntrySize_0(self)};ZipfileWalker.prototype[\"GetCurrentEntryName\"]=ZipfileWalker.prototype.GetCurrentEntryName=function(){var self=this.ptr;return UTF8ToString(_emscripten_bind_ZipfileWalker_GetCurrentEntryName_0(self))};ZipfileWalker.prototype[\"GetCurrentEntryContent\"]=ZipfileWalker.prototype.GetCurrentEntryContent=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_ZipfileWalker_GetCurrentEntryContent_0(self),VoidPtr)};ZipfileWalker.prototype[\"__destroy__\"]=ZipfileWalker.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_ZipfileWalker___destroy___0(self)};function SessionFile5(){this.ptr=_emscripten_bind_SessionFile5_SessionFile5_0();getCache(SessionFile5)[this.ptr]=this}SessionFile5.prototype=Object.create(WrapperObject.prototype);SessionFile5.prototype.constructor=SessionFile5;SessionFile5.prototype.__class__=SessionFile5;SessionFile5.__cache__={};Module[\"SessionFile5\"]=SessionFile5;SessionFile5.prototype[\"IsSessionFile\"]=SessionFile5.prototype.IsSessionFile=function(size,data){var self=this.ptr;if(size&&typeof size===\"object\")size=size.ptr;if(data&&typeof data===\"object\")data=data.ptr;return!!_emscripten_bind_SessionFile5_IsSessionFile_2(self,size,data)};SessionFile5.prototype[\"GetDeviceId\"]=SessionFile5.prototype.GetDeviceId=function(){var self=this.ptr;return _emscripten_bind_SessionFile5_GetDeviceId_0(self)};SessionFile5.prototype[\"SetDeviceId\"]=SessionFile5.prototype.SetDeviceId=function(deviceId){var self=this.ptr;if(deviceId&&typeof deviceId===\"object\")deviceId=deviceId.ptr;return wrapPointer(_emscripten_bind_SessionFile5_SetDeviceId_1(self,deviceId),SessionFile5)};SessionFile5.prototype[\"GetMetadata\"]=SessionFile5.prototype.GetMetadata=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SessionFile5_GetMetadata_0(self),VoidPtr)};SessionFile5.prototype[\"GetMetadataSize\"]=SessionFile5.prototype.GetMetadataSize=function(){var self=this.ptr;return _emscripten_bind_SessionFile5_GetMetadataSize_0(self)};SessionFile5.prototype[\"SetMetadata\"]=SessionFile5.prototype.SetMetadata=function(size,data){var self=this.ptr;if(size&&typeof size===\"object\")size=size.ptr;if(data&&typeof data===\"object\")data=data.ptr;return wrapPointer(_emscripten_bind_SessionFile5_SetMetadata_2(self,size,data),SessionFile5)};SessionFile5.prototype[\"GetNor\"]=SessionFile5.prototype.GetNor=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SessionFile5_GetNor_0(self),VoidPtr)};SessionFile5.prototype[\"GetNorSize\"]=SessionFile5.prototype.GetNorSize=function(){var self=this.ptr;return _emscripten_bind_SessionFile5_GetNorSize_0(self)};SessionFile5.prototype[\"SetNor\"]=SessionFile5.prototype.SetNor=function(size,data){var self=this.ptr;if(size&&typeof size===\"object\")size=size.ptr;if(data&&typeof data===\"object\")data=data.ptr;return wrapPointer(_emscripten_bind_SessionFile5_SetNor_2(self,size,data),SessionFile5)};SessionFile5.prototype[\"GetNand\"]=SessionFile5.prototype.GetNand=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SessionFile5_GetNand_0(self),VoidPtr)};SessionFile5.prototype[\"GetNandSize\"]=SessionFile5.prototype.GetNandSize=function(){var self=this.ptr;return _emscripten_bind_SessionFile5_GetNandSize_0(self)};SessionFile5.prototype[\"SetNand\"]=SessionFile5.prototype.SetNand=function(size,data){var self=this.ptr;if(size&&typeof size===\"object\")size=size.ptr;if(data&&typeof data===\"object\")data=data.ptr;return wrapPointer(_emscripten_bind_SessionFile5_SetNand_2(self,size,data),SessionFile5)};SessionFile5.prototype[\"GetMemory\"]=SessionFile5.prototype.GetMemory=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SessionFile5_GetMemory_0(self),VoidPtr)};SessionFile5.prototype[\"GetMemorySize\"]=SessionFile5.prototype.GetMemorySize=function(){var self=this.ptr;return _emscripten_bind_SessionFile5_GetMemorySize_0(self)};SessionFile5.prototype[\"SetMemory\"]=SessionFile5.prototype.SetMemory=function(size,data){var self=this.ptr;if(size&&typeof size===\"object\")size=size.ptr;if(data&&typeof data===\"object\")data=data.ptr;return wrapPointer(_emscripten_bind_SessionFile5_SetMemory_2(self,size,data),SessionFile5)};SessionFile5.prototype[\"GetSavestate\"]=SessionFile5.prototype.GetSavestate=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SessionFile5_GetSavestate_0(self),VoidPtr)};SessionFile5.prototype[\"GetSavestateSize\"]=SessionFile5.prototype.GetSavestateSize=function(){var self=this.ptr;return _emscripten_bind_SessionFile5_GetSavestateSize_0(self)};SessionFile5.prototype[\"SetSavestate\"]=SessionFile5.prototype.SetSavestate=function(size,data){var self=this.ptr;if(size&&typeof size===\"object\")size=size.ptr;if(data&&typeof data===\"object\")data=data.ptr;return wrapPointer(_emscripten_bind_SessionFile5_SetSavestate_2(self,size,data),SessionFile5)};SessionFile5.prototype[\"GetRamSize\"]=SessionFile5.prototype.GetRamSize=function(){var self=this.ptr;return _emscripten_bind_SessionFile5_GetRamSize_0(self)};SessionFile5.prototype[\"SetRamSize\"]=SessionFile5.prototype.SetRamSize=function(size){var self=this.ptr;if(size&&typeof size===\"object\")size=size.ptr;return wrapPointer(_emscripten_bind_SessionFile5_SetRamSize_1(self,size),SessionFile5)};SessionFile5.prototype[\"Serialize\"]=SessionFile5.prototype.Serialize=function(){var self=this.ptr;return!!_emscripten_bind_SessionFile5_Serialize_0(self)};SessionFile5.prototype[\"GetSerializedSession\"]=SessionFile5.prototype.GetSerializedSession=function(){var self=this.ptr;return wrapPointer(_emscripten_bind_SessionFile5_GetSerializedSession_0(self),VoidPtr)};SessionFile5.prototype[\"GetSerializedSessionSize\"]=SessionFile5.prototype.GetSerializedSessionSize=function(){var self=this.ptr;return _emscripten_bind_SessionFile5_GetSerializedSessionSize_0(self)};SessionFile5.prototype[\"GetVersion\"]=SessionFile5.prototype.GetVersion=function(){var self=this.ptr;return _emscripten_bind_SessionFile5_GetVersion_0(self)};SessionFile5.prototype[\"Deserialize\"]=SessionFile5.prototype.Deserialize=function(Size,data){var self=this.ptr;if(Size&&typeof Size===\"object\")Size=Size.ptr;if(data&&typeof data===\"object\")data=data.ptr;return!!_emscripten_bind_SessionFile5_Deserialize_2(self,Size,data)};SessionFile5.prototype[\"__destroy__\"]=SessionFile5.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_SessionFile5___destroy___0(self)};function RomInfo5(data,size){if(data&&typeof data===\"object\")data=data.ptr;if(size&&typeof size===\"object\")size=size.ptr;this.ptr=_emscripten_bind_RomInfo5_RomInfo5_2(data,size);getCache(RomInfo5)[this.ptr]=this}RomInfo5.prototype=Object.create(WrapperObject.prototype);RomInfo5.prototype.constructor=RomInfo5;RomInfo5.prototype.__class__=RomInfo5;RomInfo5.__cache__={};Module[\"RomInfo5\"]=RomInfo5;RomInfo5.prototype[\"IsValid\"]=RomInfo5.prototype.IsValid=function(){var self=this.ptr;return!!_emscripten_bind_RomInfo5_IsValid_0(self)};RomInfo5.prototype[\"GetCardName\"]=RomInfo5.prototype.GetCardName=function(){var self=this.ptr;return UTF8ToString(_emscripten_bind_RomInfo5_GetCardName_0(self))};RomInfo5.prototype[\"GetManufacturer\"]=RomInfo5.prototype.GetManufacturer=function(){var self=this.ptr;return UTF8ToString(_emscripten_bind_RomInfo5_GetManufacturer_0(self))};RomInfo5.prototype[\"GetRomName\"]=RomInfo5.prototype.GetRomName=function(){var self=this.ptr;return UTF8ToString(_emscripten_bind_RomInfo5_GetRomName_0(self))};RomInfo5.prototype[\"GetCompanyId\"]=RomInfo5.prototype.GetCompanyId=function(){var self=this.ptr;return _emscripten_bind_RomInfo5_GetCompanyId_0(self)};RomInfo5.prototype[\"GetHalId\"]=RomInfo5.prototype.GetHalId=function(){var self=this.ptr;return _emscripten_bind_RomInfo5_GetHalId_0(self)};RomInfo5.prototype[\"NeedsNand\"]=RomInfo5.prototype.NeedsNand=function(){var self=this.ptr;return!!_emscripten_bind_RomInfo5_NeedsNand_0(self)};RomInfo5.prototype[\"GetDeviceType\"]=RomInfo5.prototype.GetDeviceType=function(){var self=this.ptr;return _emscripten_bind_RomInfo5_GetDeviceType_0(self)};RomInfo5.prototype[\"GetRecommendedRamSize\"]=RomInfo5.prototype.GetRecommendedRamSize=function(){var self=this.ptr;return _emscripten_bind_RomInfo5_GetRecommendedRamSize_0(self)};RomInfo5.prototype[\"__destroy__\"]=RomInfo5.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_RomInfo5___destroy___0(self)};if(runtimeInitialized){moduleRtn=Module}else{moduleRtn=new Promise((resolve,reject)=>{readyPromiseResolve=resolve;readyPromiseReject=reject})}\n\n\n  return moduleRtn;\n}\n);\n})();\nif (typeof exports === 'object' && typeof module === 'object') {\n  module.exports = createModule;\n  // This default export looks redundant, but it allows TS to import this\n  // commonjs style module.\n  module.exports.default = createModule;\n} else if (typeof define === 'function' && define['amd'])\n  define([], () => createModule);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + {\"744\":\"pcm-worklet\",\"893\":\"uarm-worker\"}[chunkId] + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","/**\n * This enumerates all supported devices.\n */\nexport enum DeviceId {\n    palmPilot = 'PalmPilot',\n    pilot = 'Pilot',\n    iii = 'PalmIII',\n    palmVx = 'PalmVx',\n    palmV = 'PalmV',\n    palmVII = 'PalmVII',\n    palmVIIEZ = 'PalmVIIEZ',\n    palmVIIx = 'PalmVIIx',\n    iiic = 'PalmIIIc',\n    iiix = 'PalmIIIx',\n    iiixe = 'PalmIIIxe',\n    iiie = 'PalmIIIe',\n    m500 = 'PalmM500',\n    m505 = 'PalmM505',\n    m515 = 'PalmM515',\n    m520 = 'PalmM520',\n    m100 = 'PalmM100',\n    m105 = 'PalmM105',\n    m125 = 'PalmM125',\n    m130 = 'PalmM130',\n    i705 = 'Palmi705',\n    i710 = 'PalmI710',\n    handera330 = 'HandEra330',\n    handera330c = 'HandEra330c',\n    pegS300 = 'PEG-S300',\n    pegS320 = 'PEG-S320',\n    pegS500c = 'PEG-S500C',\n    pegT400 = 'PEG-T400',\n    pegN600c = 'PEG-N600C/N610C',\n    pegT600c = 'PEG-T600',\n    pegN700c = 'PEG-N700C/N710C',\n    pegT650c = 'YSX1230',\n    pegNR70 = 'NR70',\n    acerS11 = 'Acer-S11',\n    lp168 = 'Legend-P168',\n    te2 = 'Tungsten-E2',\n    frankene2 = 'Franken-E2',\n}\n","// I am not sure why the ambient import is required here --- tsc does fine without it, but\n// the webpack build is unable to resolve emscripten with a simple ES6 style import.\n//\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path=\"../../node_modules/@types/emscripten/index.d.ts\"/>\nimport { identifySessionEngine } from '@common/helper/sessionfile';\nimport { EngineType } from '@common/model/EngineType';\nimport { DeviceType5 } from '@native-common/index';\nimport createModule, {\n    CardSupportLevel,\n    Cloudpilot as CloudpilotNative,\n    DbBackup,\n    DbInstallResult,\n    EmSerialTransport,\n    GunzipContext,\n    GunzipState,\n    Module,\n    PalmButton,\n    SuspendContextClipboardCopy,\n    SuspendContextClipboardPaste,\n    SuspendContextNetworkConnect,\n    SuspendContextNetworkRpc,\n    SuspendContextSerialSync,\n    SuspendKind,\n    VoidPtr,\n} from '@native/index';\nimport { Event, EventInterface } from 'microevent.ts';\n\nimport { DeviceId } from '../model/DeviceId';\nimport { ZipfileWalker, decorateZipfileWalker } from './ZipfileWalker';\nimport { dirtyPagesSize } from './util';\n\nlet nextId = 0;\n\nexport {\n    PalmButton,\n    DbBackup,\n    DbInstallResult,\n    SuspendKind,\n    SuspendContextClipboardCopy,\n    SuspendContextClipboardPaste,\n    VoidPtr,\n    CardSupportLevel,\n} from '@native/index';\n\nexport interface RomInfoCloudpilot {\n    engine: 'cloudpilot';\n    cardVersion: number;\n    cardName: string;\n    romVersion: number;\n    romVersionString: string;\n\n    supportedDevices: Array<DeviceId>;\n}\n\nexport interface RomInfoUarm {\n    engine: 'uarm';\n    cardName: string;\n    romName: string;\n    manufacturer: string;\n\n    companyId: number;\n    halId: number;\n    needsNand: boolean;\n\n    recommendedRamSize: number;\n    deviceType: DeviceType5;\n\n    supportedDevices: Array<DeviceId>;\n}\n\nexport type RomInfo = RomInfoCloudpilot | RomInfoUarm;\n\nexport interface Frame {\n    bpp: number;\n    lineWidth: number;\n    lines: number;\n    margin: number;\n    bytesPerLine: number;\n\n    firstDirtyLine: number;\n    lastDirtyLine: number;\n    hasChanges: boolean;\n\n    scaleX: number;\n    scaleY: number;\n\n    buffer: Uint8Array;\n}\n\nexport interface PwmUpdate {\n    frequency: number;\n    dutyCycle: number;\n}\n\nexport interface SessionImage<T> {\n    engine: EngineType;\n    metadata?: T;\n    deviceId: DeviceId;\n    rom: Uint8Array;\n    memory?: Uint8Array;\n    savestate?: Uint8Array;\n    nand?: Uint8Array;\n    version: number;\n}\n\nconst SUPPORTED_DEVICES_CLOUDPILOT = [\n    DeviceId.palmPilot,\n    DeviceId.pilot,\n    DeviceId.iii,\n    DeviceId.palmVx,\n    DeviceId.palmV,\n    DeviceId.palmVII,\n    DeviceId.palmVIIEZ,\n    DeviceId.palmVIIx,\n    DeviceId.iiixe,\n    DeviceId.iiix,\n    DeviceId.iiie,\n    DeviceId.m500,\n    DeviceId.m505,\n    DeviceId.m515,\n    DeviceId.m520,\n    DeviceId.iiic,\n    DeviceId.m100,\n    DeviceId.m105,\n    DeviceId.m125,\n    DeviceId.m130,\n    DeviceId.i705,\n    DeviceId.i710,\n    DeviceId.handera330,\n    DeviceId.handera330c,\n    DeviceId.pegS300,\n    DeviceId.pegS320,\n    DeviceId.pegS500c,\n    DeviceId.pegT400,\n    DeviceId.pegN600c,\n    DeviceId.pegT600c,\n    DeviceId.pegN700c,\n    DeviceId.pegT650c,\n    DeviceId.pegNR70,\n    DeviceId.acerS11,\n    DeviceId.lp168,\n];\n\nexport interface SerialTransport extends Omit<EmSerialTransport, 'Receive' | 'Send'> {\n    Receive(): Uint8Array;\n    Send(data: Uint8Array | undefined, isFrameComplete: boolean): void;\n\n    frameCompleteEvent: EventInterface<void>;\n}\n\nfunction guard(): MethodDecorator {\n    return (target: unknown, propertyKey: string | symbol, desc: PropertyDescriptor) => {\n        const oldMethod = desc.value;\n\n        desc.value = function (this: Cloudpilot, p1: unknown, p2: unknown) {\n            return this.guard(() => oldMethod.call(this, p1, p2));\n        };\n\n        return desc;\n    };\n}\n\nfunction deviceTypeUarmToDeviceId(deviceType: DeviceType5): DeviceId | undefined {\n    switch (deviceType) {\n        case DeviceType5.deviceTypeE2:\n            return DeviceId.te2;\n\n        case DeviceType5.deviceTypeFrankenE2:\n            return DeviceId.frankene2;\n\n        default:\n            return undefined;\n    }\n}\n\nfunction deviceTypeUarmFromDeviceId(deviceId: DeviceId): DeviceType5 {\n    switch (deviceId) {\n        case DeviceId.te2:\n            return DeviceType5.deviceTypeE2;\n\n        case DeviceId.frankene2:\n            return DeviceType5.deviceTypeFrankenE2;\n\n        default:\n            return DeviceType5.deviceTypeInvalid;\n    }\n}\nexport class Cloudpilot {\n    private constructor(private module: Module) {\n        this.cloudpilot = new module.Cloudpilot();\n\n        this.cloudpilot.RegisterPwmHandler(\n            module.addFunction(\n                (frequency: number, dutyCycle: number) => this.pwmUpdateEvent.dispatch({ frequency, dutyCycle }),\n                'vdd',\n            ),\n        );\n\n        this.cloudpilot.RegisterProxyDisconnectHandler(\n            module.addFunction(() => this.proxyDisconnectEvent.dispatch(), 'v'),\n        );\n\n        this.transportIR = this.wrapTransport(this.cloudpilot.GetTransportIR());\n        this.transportSerial = this.wrapTransport(this.cloudpilot.GetTransportSerial());\n    }\n\n    static async create(wasmModuleUrl?: string): Promise<Cloudpilot>;\n    static async create(instantiateWasm?: Module['instantiateWasm']): Promise<Cloudpilot>;\n    static async create(urlOrFunction?: string | Module['instantiateWasm']): Promise<Cloudpilot> {\n        const id = nextId++;\n\n        return new Cloudpilot(\n            await createModule({\n                print: (x: string) => console.log(`${id}: ${x}`),\n                printErr: (x: string) => console.warn(`${id}: ${x}`),\n                ...(typeof urlOrFunction === 'string' ? { locateFile: () => urlOrFunction } : {}),\n                ...(typeof urlOrFunction === 'function' ? { instantiateWasm: urlOrFunction } : {}),\n            }),\n        );\n    }\n\n    destroy(): void {\n        this.module.destroy(this.cloudpilot);\n    }\n\n    hasFatalError(): boolean {\n        return this.amIdead;\n    }\n\n    @guard()\n    enableLogging(logging: boolean): void {\n        this.cloudpilot.EnableLogging(logging);\n    }\n\n    @guard()\n    getRomInfo(rom: Uint8Array): RomInfo | undefined {\n        const buffer = this.copyIn(rom);\n\n        try {\n            const romInfoCloudpilot = this.getRomInfoCloudpilot(buffer, rom.length);\n            if (romInfoCloudpilot) return romInfoCloudpilot;\n\n            return this.getRomInfoUarm(buffer, rom.length);\n        } finally {\n            this.cloudpilot.Free(buffer);\n        }\n    }\n\n    @guard()\n    initializeSession(rom: Uint8Array, deviceType: string): boolean {\n        const buffer = this.copyIn(rom);\n\n        const result = this.cloudpilot.InitializeSession(buffer, rom.length, deviceType);\n\n        return result;\n    }\n\n    @guard()\n    cyclesPerSecond(): number {\n        return this.cloudpilot.GetCyclesPerSecond();\n    }\n\n    @guard()\n    runEmulation(cycles: number): number {\n        return this.cloudpilot.RunEmulation(cycles);\n    }\n\n    @guard()\n    getFrame(): Frame {\n        const nativeFrame = this.cloudpilot.CopyFrame();\n\n        const bufferPtr = this.module.getPointer(nativeFrame.GetBuffer());\n\n        return {\n            bpp: nativeFrame.GetBpp(),\n            bytesPerLine: nativeFrame.GetBytesPerLine(),\n            lines: nativeFrame.GetLines(),\n            lineWidth: nativeFrame.GetLineWidth(),\n            margin: nativeFrame.GetMargin(),\n            firstDirtyLine: nativeFrame.GetFirstDirtyLine(),\n            lastDirtyLine: nativeFrame.GetLastDirtyLine(),\n            hasChanges: nativeFrame.GetHasChanges(),\n            scaleX: nativeFrame.GetScaleX(),\n            scaleY: nativeFrame.GetScaleY(),\n            buffer: this.module.HEAPU8.subarray(bufferPtr, bufferPtr + nativeFrame.GetBufferSize()),\n        };\n    }\n\n    @guard()\n    isScreenDirty(): boolean {\n        return this.cloudpilot.IsScreenDirty();\n    }\n\n    @guard()\n    markScreenClean(): void {\n        this.cloudpilot.MarkScreenClean();\n    }\n\n    @guard()\n    minRamForDevice(id: DeviceId): number {\n        return this.cloudpilot.MinMemoryForDevice(id) * 1024;\n    }\n\n    @guard()\n    framebufferSizeForDevice(id: DeviceId): number {\n        return this.cloudpilot.FramebufferSizeForDevice(id) * 1024;\n    }\n\n    @guard()\n    totalMemorySizeForDevice(id: DeviceId): number {\n        return this.cloudpilot.TotalMemoryForDevice(id) * 1024;\n    }\n\n    @guard()\n    queuePenMove(x: number, y: number): void {\n        this.cloudpilot.QueuePenMove(x, y);\n    }\n\n    @guard()\n    queuePenUp(): void {\n        this.cloudpilot.QueuePenUp();\n    }\n\n    @guard()\n    queueButtonDown(button: PalmButton): void {\n        this.cloudpilot.QueueButtonDown(button);\n    }\n\n    @guard()\n    queueButtonUp(button: PalmButton): void {\n        this.cloudpilot.QueueButtonUp(button);\n    }\n\n    @guard()\n    queueKeyboardEvent(char: number): void {\n        this.cloudpilot.QueueKeyboardEvent(char);\n    }\n\n    @guard()\n    isPowerOff(): boolean {\n        return !!this.cloudpilot.IsPowerOff();\n    }\n\n    @guard()\n    isUiInitialized(): boolean {\n        return !!this.cloudpilot.IsUIInitialized();\n    }\n\n    @guard()\n    isSetupComplete(): boolean {\n        return !!this.cloudpilot.IsSetupComplete();\n    }\n\n    @guard()\n    getOSVersion(): number {\n        return this.cloudpilot.GetOSVersion();\n    }\n\n    @guard()\n    reset(): void {\n        this.cloudpilot.Reset();\n    }\n\n    @guard()\n    resetNoExtensions(): void {\n        this.cloudpilot.ResetNoExtensions();\n    }\n\n    @guard()\n    resetHard(): void {\n        this.cloudpilot.ResetHard();\n    }\n\n    @guard()\n    installDb(data: Uint8Array): DbInstallResult {\n        const buffer = this.copyIn(data);\n\n        const result = this.cloudpilot.InstallDb(buffer, data.length);\n\n        this.cloudpilot.Free(buffer);\n\n        return result;\n    }\n\n    @guard()\n    getPalette2bitMapping(): number {\n        return this.cloudpilot.GetPalette2bitMapping();\n    }\n\n    @guard()\n    getMemory(): Uint8Array {\n        const ptr = this.module.getPointer(this.cloudpilot.GetMemoryPtr());\n\n        return this.module.HEAPU8.subarray(ptr, ptr + this.cloudpilot.GetMemorySize());\n    }\n\n    @guard()\n    getMemory32(): Uint32Array {\n        let ptr = this.module.getPointer(this.cloudpilot.GetMemoryPtr());\n\n        if (ptr & 0x03) {\n            throw new Error('unaligned pointer');\n        }\n\n        ptr >>>= 2;\n\n        return this.module.HEAPU32.subarray(ptr, ptr + (this.cloudpilot.GetMemorySize() >>> 2));\n    }\n\n    @guard()\n    getDirtyPages(): Uint8Array {\n        const ptr = this.module.getPointer(this.cloudpilot.GetDirtyPagesPtr());\n        const memorySize = this.cloudpilot.GetMemorySize();\n\n        const size = (memorySize >>> 13) + (memorySize % 8192 === 0 ? 0 : 1);\n\n        return this.module.HEAPU8.subarray(ptr, ptr + size);\n    }\n\n    @guard()\n    loadMemory(memory: Uint32Array): boolean {\n        const memory32 = this.getMemory32();\n\n        const imagesMatch = (): boolean => {\n            if (memory.length !== memory32.length || memory.length < 256) return false;\n\n            for (let i = 256; i > 0; i--) {\n                if (memory[memory.length - i] !== memory32[memory32.length - i]) return false;\n                if (memory32[memory32.length - i] === 0xffffffff) break;\n            }\n\n            return true;\n        };\n\n        if (imagesMatch()) {\n            memory32.set(memory);\n            return true;\n        } else {\n            const ptr = this.copyIn32(memory);\n            const result = this.cloudpilot.ImportMemoryImage(ptr, memory.length << 2);\n            this.cloudpilot.Free(ptr);\n\n            return result;\n        }\n    }\n\n    @guard()\n    getRomImage(): Uint8Array {\n        const ptr = this.module.getPointer(this.cloudpilot.GetRomPtr());\n\n        return this.module.HEAPU8.subarray(ptr, ptr + this.cloudpilot.GetRomSize());\n    }\n\n    @guard()\n    getSavestate(): Uint8Array {\n        const ptr = this.module.getPointer(this.cloudpilot.GetSavestatePtr());\n\n        return this.module.HEAPU8.subarray(ptr, ptr + this.cloudpilot.GetSavestateSize());\n    }\n\n    @guard()\n    saveState(): boolean {\n        return !!this.cloudpilot.SaveState();\n    }\n\n    @guard()\n    loadState(state: Uint8Array): boolean {\n        const ptr = this.copyIn(state);\n\n        const result = this.cloudpilot.LoadState(ptr, state.length);\n\n        this.cloudpilot.Free(ptr);\n\n        return result;\n    }\n\n    @guard()\n    getHotsyncName(): string {\n        return this.cloudpilot.GetHotsyncName();\n    }\n\n    @guard()\n    setClockFactor(factor: number): void {\n        this.cloudpilot.SetClockFactor(factor);\n    }\n\n    @guard()\n    setHotsyncName(name: string): void {\n        this.cloudpilot.SetHotsyncName(name);\n    }\n\n    async backup<T>(worker: (dbBackup: DbBackup) => Promise<T>): Promise<T> {\n        const dbBackup = this.guard(() => this.cloudpilot.StartBackup());\n\n        try {\n            return await worker(this.wrap(dbBackup));\n        } finally {\n            this.module.destroy(dbBackup);\n        }\n    }\n\n    getArchive(dbBackup: DbBackup): Uint8Array | undefined {\n        const size = dbBackup.GetArchiveSize();\n\n        return this.copyOut(dbBackup.GetArchivePtr(), size);\n    }\n\n    @guard()\n    setClipboardIntegration(toggle: boolean): void {\n        this.cloudpilot.SetClipboardIntegration(toggle);\n    }\n\n    @guard()\n    getClipboardIntegration(): boolean {\n        return this.cloudpilot.GetClipboardIntegration();\n    }\n\n    @guard()\n    isSuspended(): boolean {\n        return this.cloudpilot.IsSuspended();\n    }\n\n    @guard()\n    getSuspendKind(): SuspendKind | undefined {\n        return this.cloudpilot.IsSuspended() ? this.cloudpilot.GetSuspendContext().GetKind() : undefined;\n    }\n\n    @guard()\n    cancelSuspend(): void {\n        this.cloudpilot.GetSuspendContext().Cancel();\n    }\n\n    @guard()\n    getSuspendContextClipboardCopy(): SuspendContextClipboardCopy {\n        return this.wrap(this.cloudpilot.GetSuspendContext().AsContextClipboardCopy());\n    }\n\n    @guard()\n    getSuspendContextClipboardPaste(): SuspendContextClipboardPaste {\n        return this.wrap(this.cloudpilot.GetSuspendContext().AsContextClipboardPaste());\n    }\n\n    @guard()\n    setNetworkRedirection(toggle: boolean) {\n        this.cloudpilot.SetNetworkRedirection(toggle);\n    }\n\n    @guard()\n    getNetworkRedirection(): boolean {\n        return this.cloudpilot.GetNetworkRedirection();\n    }\n\n    @guard()\n    getSuspendContextNetworkConnect(): SuspendContextNetworkConnect {\n        return this.wrap(this.cloudpilot.GetSuspendContext().AsContextNetworkConnect());\n    }\n\n    @guard()\n    getSuspendContextNetworkRpc(): SuspendContextNetworkRpc {\n        return this.wrap(this.cloudpilot.GetSuspendContext().AsContextNetworkRpc());\n    }\n\n    @guard()\n    getSuspendContextSerialSync(): SuspendContextSerialSync {\n        return this.wrap(this.cloudpilot.GetSuspendContext().AsContextSerialSync());\n    }\n\n    @guard()\n    copyBuffer(data: Uint8Array): VoidPtr {\n        return this.copyIn(data);\n    }\n\n    @guard()\n    freeBuffer(ptr?: VoidPtr): void {\n        if (ptr) this.cloudpilot.Free(ptr);\n    }\n\n    @guard()\n    setHotsyncNameManagement(toggle: boolean): void {\n        this.cloudpilot.SetHotsyncNameManagement(toggle);\n    }\n\n    @guard()\n    resolveBuffer(ptr: VoidPtr, size: number): Uint8Array {\n        const bufferPtr = this.module.getPointer(ptr);\n\n        return this.module.HEAPU8.subarray(bufferPtr, bufferPtr + size);\n    }\n\n    async withZipfileWalker<T>(buffer: Uint8Array, callback: (walker: ZipfileWalker) => Promise<T>): Promise<T> {\n        const walker = this.guard(() => {\n            const ptr = this.copyIn(buffer);\n            const newWalker = new this.module.ZipfileWalker(buffer.length, ptr);\n\n            this.cloudpilot.Free(ptr);\n\n            return newWalker;\n        });\n\n        try {\n            return await callback(decorateZipfileWalker(this.wrap(walker), this.module));\n        } finally {\n            this.module.destroy(walker);\n        }\n    }\n\n    @guard()\n    serializeSessionImage<T>(sessionImage: Omit<SessionImage<T>, 'version'>): Uint8Array | undefined {\n        if (sessionImage.engine === 'cloudpilot' && sessionImage.nand) {\n            throw new Error('cloudpilot image cannot have nand');\n        }\n\n        const rom = this.copyIn(sessionImage.rom);\n        const memory = sessionImage.memory && this.copyIn(sessionImage.memory);\n        const savestate = sessionImage.savestate && this.copyIn(sessionImage.savestate);\n        const nand = sessionImage.nand && this.copyIn(sessionImage.nand);\n\n        let metadata = undefined;\n        let metadataLength = undefined;\n        if (sessionImage.metadata !== undefined) {\n            const serializedMetadata = new TextEncoder().encode(JSON.stringify(sessionImage.metadata));\n\n            metadataLength = serializedMetadata.length;\n            metadata = this.copyIn(serializedMetadata);\n        }\n\n        try {\n            switch (sessionImage.engine) {\n                case 'cloudpilot':\n                    return this.serializeSessionImageCloudpilot(sessionImage.deviceId, {\n                        rom,\n                        romLength: sessionImage.rom.length,\n                        memory,\n                        memoryLength: sessionImage.memory?.length,\n                        savestate,\n                        savestateLength: sessionImage.savestate?.length,\n                        metadata,\n                        metadataLength,\n                    });\n\n                case 'uarm':\n                    return this.serializeSessionImageUarm(sessionImage.deviceId, {\n                        rom,\n                        romLength: sessionImage.rom.length,\n                        nand,\n                        nandLength: sessionImage.nand?.length,\n                        memory,\n                        memoryLength: sessionImage.memory?.length,\n                        savestate,\n                        savestateLength: sessionImage.savestate?.length,\n                        metadata,\n                        metadataLength,\n                    });\n\n                default:\n                    throw new Error('unreachable');\n            }\n        } finally {\n            [rom, nand, memory, savestate, metadata].forEach((buffer) => this.freeBuffer(buffer));\n        }\n    }\n\n    @guard()\n    deserializeSessionImage<T>(buffer: Uint8Array | undefined): SessionImage<T> | undefined {\n        if (!buffer) return undefined;\n\n        const engine = identifySessionEngine(buffer);\n        if (engine === undefined) return;\n\n        const bufferPtr = this.copyIn(buffer);\n        try {\n            switch (engine) {\n                case 'cloudpilot':\n                    return this.deserializeSessionImageCloudpilot(bufferPtr, buffer.length);\n\n                case 'uarm':\n                    return this.deserializeSessionImageUarm(bufferPtr, buffer.length);\n\n                default:\n                    return undefined;\n            }\n        } finally {\n            this.cloudpilot.Free(bufferPtr);\n        }\n    }\n\n    @guard()\n    launchAppByName(name: string): boolean {\n        return this.cloudpilot.LaunchAppByName(name);\n    }\n\n    @guard()\n    launchAppByDbHeader(header: Uint8Array): boolean {\n        if (header.length < 32) return false;\n\n        const headerPtr = this.copyIn(header.subarray(0, 32));\n        const result = this.cloudpilot.LaunchAppByDbHeader(headerPtr, 32);\n        this.cloudpilot.Free(headerPtr);\n\n        return result;\n    }\n\n    @guard()\n    clearExternalStorage(): void {\n        this.cloudpilot.ClearExternalStorage();\n    }\n\n    @guard()\n    allocateCard(key: string, size: number): boolean {\n        return this.cloudpilot.AllocateCard(key, size >>> 9);\n    }\n\n    @guard()\n    decompress(compressedData: Uint8Array): Uint8Array | undefined {\n        const buffer = this.copyIn(compressedData);\n        let gunzipContext: GunzipContext | undefined = undefined;\n\n        try {\n            gunzipContext = new this.module.GunzipContext(buffer, compressedData.length, 512 * 1024);\n\n            while (gunzipContext.GetState() === GunzipState.more) {\n                gunzipContext.Continue();\n            }\n\n            if (gunzipContext.GetState() === GunzipState.error) {\n                console.error(`gunzip failed: ${gunzipContext.GetError()}`);\n                return;\n            }\n\n            return this.copyOut(gunzipContext.ReleaseUncompressedData(), gunzipContext.GetUncompressedSize());\n        } finally {\n            this.cloudpilot.Free(buffer);\n            if (gunzipContext) this.module.destroy(gunzipContext);\n        }\n    }\n\n    @guard()\n    getCardData(key: string): Uint32Array | undefined {\n        const dataPtr = this.module.getPointer(this.cloudpilot.GetCardData(key));\n        if (dataPtr === 0) return undefined;\n\n        return this.module.HEAPU32.subarray(dataPtr >>> 2, (dataPtr + this.cloudpilot.GetCardSize(key)) >> 2);\n    }\n\n    @guard()\n    getCardDirtyPages(key: string): Uint8Array | undefined {\n        const dirtyPagesPtr = this.module.getPointer(this.cloudpilot.GetCardDirtyPages(key));\n        if (dirtyPagesPtr === 0) return undefined;\n\n        const bufferSize = dirtyPagesSize(this.cloudpilot.GetCardSize(key));\n        return this.module.HEAPU8.subarray(dirtyPagesPtr, dirtyPagesPtr + bufferSize);\n    }\n\n    @guard()\n    getMountedKey(): string | undefined {\n        return this.cloudpilot.GetMountedKey() || undefined;\n    }\n\n    @guard()\n    mountCard(key: string): boolean {\n        return this.cloudpilot.MountCard(key);\n    }\n\n    @guard()\n    removeCard(key: string): boolean {\n        return this.cloudpilot.RemoveCard(key);\n    }\n\n    @guard()\n    remountCards() {\n        this.cloudpilot.RemountCards();\n    }\n\n    @guard()\n    remountFailed() {\n        return this.cloudpilot.RemountFailed();\n    }\n\n    @guard()\n    getCardSupportLevel(size: number): CardSupportLevel {\n        return this.cloudpilot.GetSupportLevel(size);\n    }\n\n    @guard()\n    loadSkin(name: string): string | undefined {\n        const skinLoader = new this.module.SkinLoader(name);\n\n        try {\n            const dataPtr = this.module.getPointer(skinLoader.GetData());\n            if (dataPtr === 0) return undefined;\n\n            const decoder = new TextDecoder();\n            return decoder.decode(this.module.HEAPU8.subarray(dataPtr, dataPtr + skinLoader.GetSize()));\n        } finally {\n            this.module.destroy(skinLoader);\n        }\n    }\n\n    getTransportIR(): SerialTransport {\n        return this.transportIR;\n    }\n\n    getTransportSerial(): SerialTransport {\n        return this.transportSerial;\n    }\n\n    guard<T>(fn: () => T) {\n        if (this.amIdead) throw new Error('cloudpilot instance is dead');\n\n        try {\n            return fn();\n        } catch (e) {\n            this.amIdead = true;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.cloudpilot = undefined as any;\n\n            this.fatalErrorEvent.dispatch(e instanceof Error ? e : new Error('unknown error'));\n\n            throw e;\n        }\n    }\n\n    private getRomInfoCloudpilot(data: VoidPtr, length: number): RomInfoCloudpilot | undefined {\n        const romInfoNative = new this.module.RomInfo(data, length);\n\n        try {\n            return romInfoNative.IsValid()\n                ? {\n                      engine: 'cloudpilot',\n                      cardVersion: romInfoNative.CardVersion(),\n                      cardName: romInfoNative.CardName(),\n                      romVersion: romInfoNative.RomVersion(),\n                      romVersionString: romInfoNative.RomVersionString(),\n                      supportedDevices: SUPPORTED_DEVICES_CLOUDPILOT.filter(romInfoNative.Supports.bind(romInfoNative)),\n                  }\n                : undefined;\n        } finally {\n            this.module.destroy(romInfoNative);\n        }\n    }\n\n    private getRomInfoUarm(data: VoidPtr, length: number): RomInfoUarm | undefined {\n        const romInfoNative = new this.module.RomInfo5(data, length);\n\n        if (!romInfoNative.IsValid()) return undefined;\n\n        const deviceType = romInfoNative.GetDeviceType();\n        const deviceId = deviceTypeUarmToDeviceId(deviceType);\n        if (deviceId === undefined) return undefined;\n\n        try {\n            return romInfoNative.IsValid()\n                ? {\n                      engine: 'uarm',\n                      romName: romInfoNative.GetRomName(),\n                      cardName: romInfoNative.GetCardName(),\n                      manufacturer: romInfoNative.GetManufacturer(),\n                      companyId: romInfoNative.GetCompanyId(),\n                      halId: romInfoNative.GetHalId(),\n                      needsNand: romInfoNative.NeedsNand(),\n                      deviceType,\n                      recommendedRamSize: romInfoNative.GetRecommendedRamSize(),\n                      supportedDevices: [deviceId],\n                  }\n                : undefined;\n        } finally {\n            this.module.destroy(romInfoNative);\n        }\n    }\n\n    private deserializeSessionImageCloudpilot<T>(data: VoidPtr, length: number): SessionImage<T> | undefined {\n        const nativeImage = new this.module.SessionImage();\n\n        try {\n            if (!nativeImage.Deserialize(data, length)) return undefined;\n\n            const deviceId = nativeImage.GetDeviceId() as DeviceId;\n            if (!SUPPORTED_DEVICES_CLOUDPILOT.includes(deviceId)) throw new Error(`unsupported device ${deviceId}`);\n\n            const rom = this.copyOut(nativeImage.GetRomImage(), nativeImage.GetRomImageSize());\n            const memory = this.copyOut(nativeImage.GetMemoryImage(), nativeImage.GetMemoryImageSize());\n            const savestate = this.copyOut(nativeImage.GetSavestate(), nativeImage.GetSavestateSize());\n\n            if (!rom) throw new Error(`invalid session image: no ROM or memory`);\n\n            let metadata: T | undefined;\n            const serializedMetadata = this.copyOut(nativeImage.GetMetadata(), nativeImage.GetMetadataSize());\n\n            if (serializedMetadata) {\n                try {\n                    metadata = {\n                        engine: 'cloudpilot',\n                        ...JSON.parse(new TextDecoder().decode(serializedMetadata)),\n                    };\n                } catch (e) {\n                    console.warn('ignoring invalid metadata', e);\n                }\n            }\n\n            return {\n                engine: 'cloudpilot',\n                deviceId,\n                rom,\n                memory,\n                savestate,\n                metadata,\n                version: nativeImage.GetVersion(),\n            };\n        } catch (e) {\n            console.error(e);\n        } finally {\n            this.module.destroy(nativeImage);\n        }\n    }\n\n    private deserializeSessionImageUarm<T>(data: VoidPtr, length: number): SessionImage<T> | undefined {\n        const nativeSession = new this.module.SessionFile5();\n\n        try {\n            if (!nativeSession.Deserialize(length, data)) return undefined;\n\n            const deviceId = deviceTypeUarmToDeviceId(nativeSession.GetDeviceId());\n            if (deviceId === undefined) throw new Error(`unsupported uARM device ${deviceId}`);\n\n            const rom = this.copyOut(nativeSession.GetNor(), nativeSession.GetNorSize());\n            const memory = this.copyOut(nativeSession.GetMemory(), nativeSession.GetMemorySize());\n            const nand = this.copyOut(nativeSession.GetNand(), nativeSession.GetNandSize());\n            const savestate = this.copyOut(nativeSession.GetSavestate(), nativeSession.GetSavestateSize());\n\n            if (!rom) throw new Error(`invalid session image: no ROM or memory`);\n\n            const serializedMetadata = this.copyOut(nativeSession.GetMetadata(), nativeSession.GetMetadataSize());\n\n            let metadata: T | undefined;\n            if (serializedMetadata) {\n                try {\n                    metadata = { engine: 'uarm', ...JSON.parse(new TextDecoder().decode(serializedMetadata)) };\n                } catch (e) {\n                    console.warn('invalid metadata', e);\n                }\n            }\n\n            return {\n                engine: 'uarm',\n                deviceId,\n                rom,\n                memory,\n                nand,\n                savestate,\n                metadata,\n                version: nativeSession.GetVersion(),\n            };\n        } finally {\n            this.module.destroy(nativeSession);\n        }\n    }\n\n    private serializeSessionImageCloudpilot(\n        deviceId: DeviceId,\n        {\n            rom,\n            romLength,\n            memory,\n            memoryLength,\n            savestate,\n            savestateLength,\n            metadata,\n            metadataLength,\n        }: {\n            rom: VoidPtr;\n            romLength: number;\n            memory?: VoidPtr;\n            memoryLength?: number;\n            savestate?: VoidPtr;\n            savestateLength?: number;\n            metadata?: VoidPtr;\n            metadataLength?: number;\n        },\n    ) {\n        const nativeImage = new this.module.SessionImage();\n\n        try {\n            nativeImage.SetDeviceId(deviceId);\n            nativeImage.SetRomImage(rom, romLength);\n            if (memory) nativeImage.SetMemoryImage(memory, memoryLength ?? 0);\n            if (savestate) nativeImage.SetSavestate(savestate, savestateLength ?? 0);\n            if (metadata) nativeImage.SetMetadata(metadata, metadataLength ?? 0);\n\n            return nativeImage.Serialize()\n                ? this.copyOut(nativeImage.GetSerializedImage(), nativeImage.GetSerializedImageSize())\n                : undefined;\n        } finally {\n            this.module.destroy(nativeImage);\n        }\n    }\n\n    private serializeSessionImageUarm(\n        deviceId: DeviceId,\n        {\n            rom,\n            romLength,\n            memory,\n            memoryLength,\n            nand,\n            nandLength,\n            savestate,\n            savestateLength,\n            metadata,\n            metadataLength,\n        }: {\n            rom: VoidPtr;\n            romLength: number;\n            memory?: VoidPtr;\n            memoryLength?: number;\n            nand?: VoidPtr;\n            nandLength?: number;\n            savestate?: VoidPtr;\n            savestateLength?: number;\n            metadata?: VoidPtr;\n            metadataLength?: number;\n        },\n    ) {\n        const nativeImage = new this.module.SessionFile5();\n\n        try {\n            nativeImage.SetDeviceId(deviceTypeUarmFromDeviceId(deviceId));\n            nativeImage.SetNor(romLength, rom);\n            if (memory) nativeImage.SetMemory(memoryLength ?? 0, memory);\n            if (nand) nativeImage.SetNand(nandLength ?? 0, nand);\n            if (savestate) nativeImage.SetSavestate(savestateLength ?? 0, savestate);\n            if (metadata) nativeImage.SetMetadata(metadataLength ?? 0, metadata);\n\n            return nativeImage.Serialize()\n                ? this.copyOut(nativeImage.GetSerializedSession(), nativeImage.GetSerializedSessionSize())\n                : undefined;\n        } finally {\n            this.module.destroy(nativeImage);\n        }\n    }\n\n    private copyIn(data: Uint8Array): VoidPtr {\n        const buffer = this.cloudpilot.Malloc(data.length);\n        const bufferPtr = this.module.getPointer(buffer);\n\n        this.module.HEAPU8.subarray(bufferPtr, bufferPtr + data.length).set(data);\n\n        return buffer;\n    }\n\n    private copyIn32(data: Uint32Array): VoidPtr {\n        const buffer = this.cloudpilot.Malloc(data.length << 2);\n        const bufferPtr = this.module.getPointer(buffer);\n\n        this.module.HEAPU32.subarray(bufferPtr >>> 2, (bufferPtr >>> 2) + data.length).set(data);\n\n        return buffer;\n    }\n\n    private copyOut(ptr: VoidPtr, size: number): Uint8Array | undefined {\n        const p = this.module.getPointer(ptr);\n\n        return p > 0 && size > 0 ? this.module.HEAPU8.subarray(p, p + size).slice() : undefined;\n    }\n\n    private wrap<T extends object>(unguarded: T): T {\n        return new Proxy<T>(unguarded, {\n            get: (target: T, p: string) => {\n                const val = target[p as keyof T];\n\n                if (typeof val !== 'function') {\n                    return val;\n                }\n\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-function-type\n                return (...args: Array<unknown>) => this.guard(() => (val as Function).apply(target, args));\n            },\n        });\n    }\n\n    private wrapTransport(transport: EmSerialTransport): SerialTransport {\n        const frameCompleteEvent = new Event<void>();\n        transport.SetRequestTransferCallback(this.module.addFunction(() => frameCompleteEvent.dispatch(), 'v'));\n\n        return this.wrap(\n            Object.setPrototypeOf(\n                {\n                    Receive: (): Uint8Array | undefined => {\n                        const count = transport.RxBytesPending();\n\n                        return this.copyOut(transport.Receive(), count);\n                    },\n\n                    Send: (data: Uint8Array | undefined, frameComplete: boolean): void => {\n                        const buffer = data && this.copyIn(data);\n\n                        transport.Send(data?.length ?? 0, buffer ?? this.cloudpilot.Nullptr(), frameComplete);\n\n                        if (buffer) this.cloudpilot.Free(buffer);\n                    },\n\n                    frameCompleteEvent,\n                },\n                transport,\n            ),\n        );\n    }\n\n    fatalErrorEvent = new Event<Error>();\n    pwmUpdateEvent = new Event<PwmUpdate>();\n    proxyDisconnectEvent = new Event<void>();\n\n    private cloudpilot: CloudpilotNative;\n\n    private transportIR: SerialTransport;\n    private transportSerial: SerialTransport;\n\n    private amIdead = false;\n}\n","import { ZipfileWalker as ZipfileWalkerNative } from '@native-common/index';\n\nexport { ZipfileWalkerState } from '@native-common/index';\n\nexport interface ZipfileWalker extends Omit<ZipfileWalkerNative<unknown>, 'GetCurrentEntryContent'> {\n    GetCurrentEntryContent(): Uint8Array | undefined;\n}\n\nexport interface Module<VoidPtr> {\n    getPointer(ptr: VoidPtr): number;\n\n    HEAPU8: Uint8Array;\n}\n\nexport function decorateZipfileWalker<VoidPtr>(\n    nativeWalker: ZipfileWalkerNative<VoidPtr>,\n    module: Module<VoidPtr>,\n): ZipfileWalker {\n    return Object.setPrototypeOf(\n        {\n            GetCurrentEntryContent: () => {\n                const ptr = module.getPointer(nativeWalker.GetCurrentEntryContent());\n                const size = nativeWalker.GetCurrentEntrySize();\n\n                return ptr > 0 && size > 0 ? module.HEAPU8.subarray(ptr, ptr + size) : undefined;\n            },\n        },\n        nativeWalker,\n    );\n}\n","import { EngineType } from '@common/model/EngineType';\n\nconst MAGIC_CLOUDPILOT = 0x20150103;\nconst MAGIC_UARM = 0x19800819;\n\nexport function identifySessionEngine(data: Uint8Array): EngineType | undefined {\n    if (data.length < 4) return undefined;\n\n    const view = new DataView(data.buffer, data.byteOffset);\n    const magic = view.getUint32(0, true);\n\n    switch (magic) {\n        case MAGIC_CLOUDPILOT:\n            return 'cloudpilot';\n\n        case MAGIC_UARM:\n            return 'uarm';\n\n        default:\n            return undefined;\n    }\n}\n","export function dirtyPagesSize(imageSize: number): number {\n    const pages = (imageSize >>> 13) + (imageSize % 8192 > 0 ? 1 : 0);\n    return (pages >>> 3) + (pages % 8 > 0 ? 1 : 0);\n}\n","// I am not sure why the ambient import is required here --- tsc does fine without it, but\n// the webpack build is unable to resolve emscripten with a simple ES6 style import.\n//\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path=\"../../node_modules/@types/emscripten/index.d.ts\"/>\n\nconst MIME_TYPE_WASM = 'application/wasm';\n\nexport async function loadAndCompileModule(binaryUrl: string): Promise<WebAssembly.Module> {\n    const response = await fetch(binaryUrl);\n    if (!response.ok) {\n        throw new Error(`request for ${binaryUrl} failed with ${response.status}: ${response.statusText}`);\n    }\n\n    const mimeType = response.headers.get('Content-Type') ?? 'no mime type';\n\n    if (mimeType !== MIME_TYPE_WASM) {\n        console.warn(`response for ${binaryUrl} has wrong mime type: expected ${MIME_TYPE_WASM}, got ${mimeType}`);\n    }\n\n    if (mimeType === MIME_TYPE_WASM && WebAssembly.compileStreaming) {\n        return WebAssembly.compileStreaming(response);\n    }\n\n    const moduleData = await response.arrayBuffer();\n    return WebAssembly.compile(moduleData);\n}\n\nexport function cachedInstantiate(binaryUrl: string): EmscriptenModule['instantiateWasm'] {\n    const wasmModule = loadAndCompileModule(binaryUrl);\n\n    return (imports, callback) =>\n        void wasmModule\n            .then((module) => WebAssembly.instantiate(module, imports))\n            .then((instance) => callback(instance));\n}\n","import { DeviceId } from '@common/model/DeviceId';\nimport { Dimensions, ScreenSize } from '@common/model/Dimensions';\nimport { EngineType } from '@common/model/EngineType';\n\nimport { SlotType } from '../model/SlotType';\n\nexport function deviceDimensions(deviceId: DeviceId): Dimensions {\n    switch (deviceId) {\n        case DeviceId.i710:\n        case DeviceId.m520:\n        case DeviceId.te2:\n            return {\n                screenSize: ScreenSize.screen320x320,\n                width: 320,\n                height: 320,\n                silkscreenHeight: 120,\n            };\n\n        case DeviceId.handera330:\n        case DeviceId.handera330c:\n        case DeviceId.lp168:\n            return {\n                screenSize: ScreenSize.screen240x320,\n                width: 240,\n                height: 320,\n                silkscreenHeight: 0,\n            };\n\n        case DeviceId.pegS300:\n        case DeviceId.pegS320:\n        case DeviceId.pegS500c:\n            return {\n                screenSize: ScreenSize.screen160x160,\n                width: 160,\n                height: 160,\n                silkscreenHeight: 76,\n            };\n\n        case DeviceId.pegT600c:\n        case DeviceId.pegT400:\n        case DeviceId.pegT650c:\n            return {\n                screenSize: ScreenSize.screen320x320,\n                width: 320,\n                height: 320,\n                silkscreenHeight: 140,\n                silkscreenOvershoot: 10,\n            };\n\n        case DeviceId.pegN600c:\n        case DeviceId.pegN700c:\n            return {\n                screenSize: ScreenSize.screen320x320,\n                width: 320,\n                height: 320,\n                silkscreenHeight: 120,\n            };\n\n        case DeviceId.pegNR70:\n        case DeviceId.frankene2:\n            return {\n                screenSize: ScreenSize.screen320x480,\n                width: 320,\n                height: 480,\n                silkscreenHeight: 0,\n            };\n\n        case DeviceId.acerS11:\n            return {\n                screenSize: ScreenSize.screen160x160,\n                width: 160,\n                height: 160,\n                silkscreenHeight: 60,\n                siklscreenShift: 8,\n            };\n\n        default:\n            return {\n                screenSize: ScreenSize.screen160x160,\n                width: 160,\n                height: 160,\n                silkscreenHeight: 60,\n            };\n    }\n}\n\nexport function isColor(deviceId: DeviceId | undefined): boolean {\n    switch (deviceId) {\n        case DeviceId.pilot:\n        case DeviceId.palmPilot:\n        case DeviceId.iii:\n        case DeviceId.palmV:\n        case DeviceId.palmVx:\n        case DeviceId.iiix:\n        case DeviceId.iiixe:\n        case DeviceId.iiie:\n        case DeviceId.m100:\n        case DeviceId.m105:\n        case DeviceId.m125:\n        case DeviceId.m500:\n        case DeviceId.palmVII:\n        case DeviceId.palmVIIEZ:\n        case DeviceId.palmVIIx:\n        case DeviceId.i705:\n        case DeviceId.handera330:\n        case DeviceId.pegS300:\n        case DeviceId.pegS320:\n        case DeviceId.pegT400:\n        case DeviceId.acerS11:\n            return false;\n\n        default:\n            return true;\n    }\n}\n\nexport function cpuClock(deviceId: DeviceId): number {\n    switch (deviceId) {\n        case DeviceId.palmPilot:\n        case DeviceId.pilot:\n        case DeviceId.iii:\n        case DeviceId.palmVII:\n            return 16;\n\n        case DeviceId.palmVx:\n        case DeviceId.palmV:\n        case DeviceId.palmVIIEZ:\n        case DeviceId.palmVIIx:\n        case DeviceId.iiic:\n        case DeviceId.iiix:\n        case DeviceId.iiixe:\n        case DeviceId.iiie:\n        case DeviceId.m100:\n        case DeviceId.m105:\n        case DeviceId.pegS300:\n        case DeviceId.pegS500c:\n            return 16;\n\n        case DeviceId.m500:\n        case DeviceId.m505:\n        case DeviceId.m515:\n        case DeviceId.m520:\n        case DeviceId.m125:\n        case DeviceId.m130:\n        case DeviceId.i705:\n        case DeviceId.i710:\n        case DeviceId.handera330:\n        case DeviceId.handera330c:\n        case DeviceId.pegS320:\n        case DeviceId.pegT400:\n        case DeviceId.pegN600c:\n        case DeviceId.pegT600c:\n        case DeviceId.pegN700c:\n        case DeviceId.acerS11:\n            return 33;\n\n        case DeviceId.pegT650c:\n        case DeviceId.pegNR70:\n        case DeviceId.lp168:\n            return 66;\n\n        case DeviceId.te2:\n        case DeviceId.frankene2:\n            return 100;\n    }\n}\n\nexport function deviceName(deviceId: DeviceId): string {\n    switch (deviceId) {\n        case DeviceId.pilot:\n            return 'Pilot';\n\n        case DeviceId.palmPilot:\n            return 'Palm Pilot';\n\n        case DeviceId.iii:\n            return 'Palm III';\n\n        case DeviceId.m500:\n            return 'Palm m500';\n\n        case DeviceId.m505:\n            return 'Palm m505';\n\n        case DeviceId.m515:\n            return 'Palm m515';\n\n        case DeviceId.m520:\n            return 'Palm m520';\n\n        case DeviceId.palmVx:\n            return 'Palm Vx';\n\n        case DeviceId.iiix:\n            return 'Palm IIIx';\n\n        case DeviceId.iiixe:\n            return 'Palm IIIxe';\n\n        case DeviceId.iiie:\n            return 'Palm IIIe';\n\n        case DeviceId.palmV:\n            return 'Palm V';\n\n        case DeviceId.palmVII:\n            return 'Palm VII';\n\n        case DeviceId.palmVIIEZ:\n            return 'Palm VII EZ';\n\n        case DeviceId.palmVIIx:\n            return 'Palm VIIx';\n\n        case DeviceId.iiic:\n            return 'Palm IIIc';\n\n        case DeviceId.m100:\n            return 'Palm m100';\n\n        case DeviceId.m105:\n            return 'Palm m105';\n\n        case DeviceId.m125:\n            return 'Palm m125';\n\n        case DeviceId.m130:\n            return 'Palm m130';\n\n        case DeviceId.i705:\n            return 'Palm i705';\n\n        case DeviceId.i710:\n            return 'Tungsten W';\n\n        case DeviceId.handera330:\n            return 'Handera 330';\n\n        case DeviceId.handera330c:\n            return 'Handera 330c';\n\n        case DeviceId.pegS300:\n            return 'Sony PEG-S300';\n\n        case DeviceId.pegS320:\n            return 'Sony PEG-S320';\n\n        case DeviceId.pegT400:\n            return 'Sony PEG-T400 series';\n\n        case DeviceId.pegN600c:\n            return 'Sony PEG-N600C series';\n\n        case DeviceId.pegT600c:\n            return 'Sony PEG-T600C series';\n\n        case DeviceId.pegN700c:\n            return 'Sony PEG-N700C series';\n\n        case DeviceId.pegT650c:\n            return 'Sony PEG-T650C series';\n\n        case DeviceId.pegNR70:\n            return 'Sony PEG-NR70 series';\n\n        case DeviceId.pegS500c:\n            return 'Sony PEG-S500C series';\n\n        case DeviceId.acerS11:\n            return 'Acer S1x series';\n\n        case DeviceId.lp168:\n            return 'Legend P168';\n\n        case DeviceId.te2:\n            return 'Tungsten E2';\n\n        case DeviceId.frankene2:\n            return 'Tungsten E3';\n\n        default:\n            throw new Error('bad device ID');\n    }\n}\n\nexport function quirkNoPoweroff(deviceId: DeviceId) {\n    switch (deviceId) {\n        case DeviceId.i705:\n        case DeviceId.i710:\n        case DeviceId.pegNR70:\n        case DeviceId.pegT650c:\n        case DeviceId.lp168:\n        case DeviceId.frankene2:\n        case DeviceId.te2:\n            return true;\n\n        default:\n            return false;\n    }\n}\n\nexport function quirkNoHotsync(deviceId: DeviceId) {\n    switch (deviceId) {\n        case DeviceId.frankene2:\n        case DeviceId.te2:\n            return true;\n\n        default:\n            return false;\n    }\n}\n\nexport function slotType(deviceId: DeviceId) {\n    switch (deviceId) {\n        case DeviceId.m500:\n        case DeviceId.m505:\n        case DeviceId.m515:\n        case DeviceId.m520:\n        case DeviceId.m125:\n        case DeviceId.m130:\n        case DeviceId.i705:\n        case DeviceId.i710:\n        case DeviceId.handera330:\n        case DeviceId.handera330c:\n        case DeviceId.te2:\n        case DeviceId.frankene2:\n            return SlotType.sdcard;\n\n        case DeviceId.pegS300:\n        case DeviceId.pegS500c:\n        case DeviceId.pegS320:\n        case DeviceId.pegT400:\n        case DeviceId.pegN600c:\n        case DeviceId.pegT600c:\n        case DeviceId.pegN700c:\n        case DeviceId.pegT650c:\n        case DeviceId.pegNR70:\n        case DeviceId.acerS11:\n            return SlotType.memorystick;\n\n        default:\n            return SlotType.none;\n    }\n}\n\nexport function engineType(deviceId: DeviceId): EngineType {\n    switch (deviceId) {\n        case DeviceId.te2:\n        case DeviceId.frankene2:\n            return 'uarm';\n\n        default:\n            return 'cloudpilot';\n    }\n}\n\nexport function nandSize(deviceId: DeviceId): number | undefined {\n    // blocks * [pages / block] + [bytes / page]\n    return engineType(deviceId) === 'uarm' ? 2048 * (2 << 4) * 528 : undefined;\n}\n\nexport function hasDPad(deviceId: DeviceId): boolean {\n    switch (deviceId) {\n        case DeviceId.te2:\n        case DeviceId.frankene2:\n            return true;\n\n        default:\n            return false;\n    }\n}\n","/**\n * The four different orientation settings.\n */\nexport enum DeviceOrientation {\n    portrait = 'portrait',\n    landscape90 = 'landscape90',\n    landscape270 = 'landscape270',\n    portrait180 = 'portrait180',\n}\n","export const isMacOSSafari = 'safari' in window;\nexport const isIOS =\n    !!navigator.platform.match(/iPhone|iPad|iPod/) ||\n    (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);\nexport const isIOSSafari = isIOS && !navigator.userAgent.match(/(crios)|(fxios)/i);\nexport const isIOSNative = !!navigator.userAgent.match(/pwashell/i);\nexport const isWebkit =\n    isMacOSSafari || isIOS || (!!navigator.userAgent.match(/Safari/) && !navigator.userAgent.match(/Chrome/));\n\nexport const isAndroid = !!navigator.userAgent.match(/android/i);\n\nexport const isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') >= 0;\n","import { isIOS, isMacOSSafari } from './browser';\n\nexport type LazyLoadingImage = () => Promise<HTMLImageElement>;\nexport type PrerenderedImage = (width: number, height: number) => Promise<HTMLCanvasElement>;\n\nexport function prerender(image: Promise<HTMLImageElement>, source: string | Promise<string>): PrerenderedImage {\n    let cachedWidth: number;\n    let cachedHeight: number;\n    const canvas = document.createElement('canvas');\n\n    return async (width: number, height: number) => {\n        if (cachedWidth === width && cachedHeight === height) {\n            return canvas;\n        }\n\n        canvas.width = width;\n        canvas.height = height;\n\n        const ctx = canvas.getContext('2d');\n        if (!ctx) throw new Error('get a new browser');\n\n        ctx.drawImage(await image, 0, 0, canvas.width, canvas.height);\n\n        if ((isMacOSSafari || isIOS) && (await source).indexOf('data:image') >= 0) {\n            // Safari has a bug that renders embedded PNGs only on second draw.\n            await new Promise((resolve) => setTimeout(resolve, 0));\n            ctx.drawImage(await image, 0, 0, canvas.width, canvas.height);\n        }\n\n        cachedWidth = width;\n        cachedHeight = height;\n\n        return canvas;\n    };\n}\n\nexport function loadImage(url: string): Promise<HTMLImageElement> {\n    return new Promise<HTMLImageElement>((resolve, reject) => {\n        const image = new Image();\n\n        image.onload = () => resolve(image);\n        image.onerror = () => reject();\n\n        image.src = url;\n    });\n}\n\nexport const svgToUrl = (svg: string): string => `data:image/svg+xml;base64,${btoa(svg)}`;\n","import { Cloudpilot } from '@common/bridge/Cloudpilot';\nimport { PrerenderedImage, loadImage, prerender } from '@common/helper/image';\n\nimport { svgToUrl } from './../helper/image';\n\nexport const enum SkinElement {\n    HARD_BUTTONS_IIIC = 'hard-buttons/iiic.svg',\n    HARD_BUTTONS_IIIE = 'hard-buttons/iiie.svg',\n    HARD_BUTTONS_IIIX = 'hard-buttons/iiix.svg',\n    HARD_BUTTONS_M100 = 'hard-buttons/m100.svg',\n    HARD_BUTTONS_M125 = 'hard-buttons/m125.svg',\n    HARD_BUTTONS_M130 = 'hard-buttons/m130.svg',\n    HARD_BUTTONS_M500 = 'hard-buttons/m500.svg',\n    HARD_BUTTONS_M515 = 'hard-buttons/m515.svg',\n    HARD_BUTTONS_PILOT = 'hard-buttons/pilot.svg',\n    HARD_BUTTONS_TUNGSTEN_W = 'hard-buttons/tungstenw.svg',\n    HARD_BUTTONS_PALM_V = 'hard-buttons/v.svg',\n    HARD_BUTTONS_I705 = 'hard-buttons/i705.svg',\n    HARD_BUTTONS_HANDERA330 = 'hard-buttons/handera330.svg',\n    HARD_BUTTONS_HANDERA330C = 'hard-buttons/handera330c.svg',\n    HARD_BUTTONS_PEG_S300 = 'hard-buttons/clie-s300.svg',\n    HARD_BUTTONS_PEG_S500 = 'hard-buttons/clie-s500.svg',\n    HARD_BUTTONS_PEG_S320 = 'hard-buttons/clie-s320.svg',\n    HARD_BUTTONS_PEG_T415 = 'hard-buttons/clie-t415.svg',\n    HARD_BUTTONS_PEG_N610 = 'hard-buttons/clie-n610.svg',\n    HARD_BUTTONS_PEG_N700 = 'hard-buttons/clie-n700.svg',\n    HARD_BUTTONS_PEG_NR70 = 'hard-buttons/clie-nr70.svg',\n    HARD_BUTTONS_ACER_S10 = 'hard-buttons/acer-s10.svg',\n    HARD_BUTTONS_LEGEND_P168 = 'hard-buttons/lp168.svg',\n    HARD_BUTTONS_TUNGSTEN_E2 = 'hard-buttons/te2.svg',\n    SILKSCREEN_IIIC = 'silkscreen/iiic.svg',\n    SILKSCREEN_M100 = 'silkscreen/m100.svg',\n    SILKSCREEN_M130 = 'silkscreen/m130.svg',\n    SILKSCREEN_M500 = 'silkscreen/m500.svg',\n    SILKSCREEN_M515 = 'silkscreen/m515.svg',\n    SILKSCREEN_PILOT = 'silkscreen/pilot.svg',\n    SILKSCREEN_TUNGSTEN_W = 'silkscreen/tungstenw.svg',\n    SILKSCREEN_V = 'silkscreen/v.svg',\n    SILKSCREEN_I705 = 'silkscreen/i705.svg',\n    SILKSCREEN_PEG_S300 = 'silkscreen/clie-s300.svg',\n    SILKSCREEN_PEG_S500 = 'silkscreen/clie-s500.svg',\n    SILKSCREEN_PEG_T415 = 'silkscreen/clie-t415.svg',\n    SILKSCREEN_PEG_N610 = 'silkscreen/clie-n610.svg',\n    SILKSCREEN_PEG_T600 = 'silkscreen/clie-t600.svg',\n    SILKSCREEN_ACER_S10 = 'silkscreen/acer-s10.svg',\n}\n\nexport class SkinLoader {\n    constructor(private cloudpilot: Promise<Cloudpilot>) {}\n\n    loadSkinElement(elt: SkinElement): PrerenderedImage {\n        if (this.images.has(elt)) return this.images.get(elt)!;\n\n        const skin: Promise<[string, HTMLImageElement]> = this.cloudpilot\n            .then((cloudpilot) => cloudpilot.loadSkin(elt))\n            .then((svg) =>\n                svg\n                    ? Promise.all([svg, loadImage(svgToUrl(svg))])\n                    : Promise.reject(new Error(`failed to load skin ${elt}`)),\n            );\n\n        const prerenderedImage = prerender(\n            skin.then(([, image]) => image),\n            skin.then(([svg]) => svg),\n        );\n\n        this.images.set(elt, prerenderedImage);\n\n        return prerenderedImage;\n    }\n\n    private images = new Map<SkinElement, PrerenderedImage>();\n}\n","const E_TIMEOUT = new Error('timeout while waiting for mutex to become available');\nconst E_ALREADY_LOCKED = new Error('mutex already locked');\nconst E_CANCELED = new Error('request for lock canceled');\n\nvar __awaiter$2 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass Semaphore {\n    constructor(_value, _cancelError = E_CANCELED) {\n        this._value = _value;\n        this._cancelError = _cancelError;\n        this._queue = [];\n        this._weightedWaiters = [];\n    }\n    acquire(weight = 1, priority = 0) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        return new Promise((resolve, reject) => {\n            const task = { resolve, reject, weight, priority };\n            const i = findIndexFromEnd(this._queue, (other) => priority <= other.priority);\n            if (i === -1 && weight <= this._value) {\n                // Needs immediate dispatch, skip the queue\n                this._dispatchItem(task);\n            }\n            else {\n                this._queue.splice(i + 1, 0, task);\n            }\n        });\n    }\n    runExclusive(callback_1) {\n        return __awaiter$2(this, arguments, void 0, function* (callback, weight = 1, priority = 0) {\n            const [value, release] = yield this.acquire(weight, priority);\n            try {\n                return yield callback(value);\n            }\n            finally {\n                release();\n            }\n        });\n    }\n    waitForUnlock(weight = 1, priority = 0) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        if (this._couldLockImmediately(weight, priority)) {\n            return Promise.resolve();\n        }\n        else {\n            return new Promise((resolve) => {\n                if (!this._weightedWaiters[weight - 1])\n                    this._weightedWaiters[weight - 1] = [];\n                insertSorted(this._weightedWaiters[weight - 1], { resolve, priority });\n            });\n        }\n    }\n    isLocked() {\n        return this._value <= 0;\n    }\n    getValue() {\n        return this._value;\n    }\n    setValue(value) {\n        this._value = value;\n        this._dispatchQueue();\n    }\n    release(weight = 1) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        this._value += weight;\n        this._dispatchQueue();\n    }\n    cancel() {\n        this._queue.forEach((entry) => entry.reject(this._cancelError));\n        this._queue = [];\n    }\n    _dispatchQueue() {\n        this._drainUnlockWaiters();\n        while (this._queue.length > 0 && this._queue[0].weight <= this._value) {\n            this._dispatchItem(this._queue.shift());\n            this._drainUnlockWaiters();\n        }\n    }\n    _dispatchItem(item) {\n        const previousValue = this._value;\n        this._value -= item.weight;\n        item.resolve([previousValue, this._newReleaser(item.weight)]);\n    }\n    _newReleaser(weight) {\n        let called = false;\n        return () => {\n            if (called)\n                return;\n            called = true;\n            this.release(weight);\n        };\n    }\n    _drainUnlockWaiters() {\n        if (this._queue.length === 0) {\n            for (let weight = this._value; weight > 0; weight--) {\n                const waiters = this._weightedWaiters[weight - 1];\n                if (!waiters)\n                    continue;\n                waiters.forEach((waiter) => waiter.resolve());\n                this._weightedWaiters[weight - 1] = [];\n            }\n        }\n        else {\n            const queuedPriority = this._queue[0].priority;\n            for (let weight = this._value; weight > 0; weight--) {\n                const waiters = this._weightedWaiters[weight - 1];\n                if (!waiters)\n                    continue;\n                const i = waiters.findIndex((waiter) => waiter.priority <= queuedPriority);\n                (i === -1 ? waiters : waiters.splice(0, i))\n                    .forEach((waiter => waiter.resolve()));\n            }\n        }\n    }\n    _couldLockImmediately(weight, priority) {\n        return (this._queue.length === 0 || this._queue[0].priority < priority) &&\n            weight <= this._value;\n    }\n}\nfunction insertSorted(a, v) {\n    const i = findIndexFromEnd(a, (other) => v.priority <= other.priority);\n    a.splice(i + 1, 0, v);\n}\nfunction findIndexFromEnd(a, predicate) {\n    for (let i = a.length - 1; i >= 0; i--) {\n        if (predicate(a[i])) {\n            return i;\n        }\n    }\n    return -1;\n}\n\nvar __awaiter$1 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass Mutex {\n    constructor(cancelError) {\n        this._semaphore = new Semaphore(1, cancelError);\n    }\n    acquire() {\n        return __awaiter$1(this, arguments, void 0, function* (priority = 0) {\n            const [, releaser] = yield this._semaphore.acquire(1, priority);\n            return releaser;\n        });\n    }\n    runExclusive(callback, priority = 0) {\n        return this._semaphore.runExclusive(() => callback(), 1, priority);\n    }\n    isLocked() {\n        return this._semaphore.isLocked();\n    }\n    waitForUnlock(priority = 0) {\n        return this._semaphore.waitForUnlock(1, priority);\n    }\n    release() {\n        if (this._semaphore.isLocked())\n            this._semaphore.release();\n    }\n    cancel() {\n        return this._semaphore.cancel();\n    }\n}\n\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nfunction withTimeout(sync, timeout, timeoutError = E_TIMEOUT) {\n    return {\n        acquire: (weightOrPriority, priority) => {\n            let weight;\n            if (isSemaphore(sync)) {\n                weight = weightOrPriority;\n            }\n            else {\n                weight = undefined;\n                priority = weightOrPriority;\n            }\n            if (weight !== undefined && weight <= 0) {\n                throw new Error(`invalid weight ${weight}: must be positive`);\n            }\n            return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n                let isTimeout = false;\n                const handle = setTimeout(() => {\n                    isTimeout = true;\n                    reject(timeoutError);\n                }, timeout);\n                try {\n                    const ticket = yield (isSemaphore(sync)\n                        ? sync.acquire(weight, priority)\n                        : sync.acquire(priority));\n                    if (isTimeout) {\n                        const release = Array.isArray(ticket) ? ticket[1] : ticket;\n                        release();\n                    }\n                    else {\n                        clearTimeout(handle);\n                        resolve(ticket);\n                    }\n                }\n                catch (e) {\n                    if (!isTimeout) {\n                        clearTimeout(handle);\n                        reject(e);\n                    }\n                }\n            }));\n        },\n        runExclusive(callback, weight, priority) {\n            return __awaiter(this, void 0, void 0, function* () {\n                let release = () => undefined;\n                try {\n                    const ticket = yield this.acquire(weight, priority);\n                    if (Array.isArray(ticket)) {\n                        release = ticket[1];\n                        return yield callback(ticket[0]);\n                    }\n                    else {\n                        release = ticket;\n                        return yield callback();\n                    }\n                }\n                finally {\n                    release();\n                }\n            });\n        },\n        release(weight) {\n            sync.release(weight);\n        },\n        cancel() {\n            return sync.cancel();\n        },\n        waitForUnlock: (weightOrPriority, priority) => {\n            let weight;\n            if (isSemaphore(sync)) {\n                weight = weightOrPriority;\n            }\n            else {\n                weight = undefined;\n                priority = weightOrPriority;\n            }\n            if (weight !== undefined && weight <= 0) {\n                throw new Error(`invalid weight ${weight}: must be positive`);\n            }\n            return new Promise((resolve, reject) => {\n                const handle = setTimeout(() => reject(timeoutError), timeout);\n                (isSemaphore(sync)\n                    ? sync.waitForUnlock(weight, priority)\n                    : sync.waitForUnlock(priority)).then(() => {\n                    clearTimeout(handle);\n                    resolve();\n                });\n            });\n        },\n        isLocked: () => sync.isLocked(),\n        getValue: () => sync.getValue(),\n        setValue: (value) => sync.setValue(value),\n    };\n}\nfunction isSemaphore(sync) {\n    return sync.getValue !== undefined;\n}\n\n// eslint-disable-next-lisne @typescript-eslint/explicit-module-boundary-types\nfunction tryAcquire(sync, alreadyAcquiredError = E_ALREADY_LOCKED) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return withTimeout(sync, 0, alreadyAcquiredError);\n}\n\nexport { E_ALREADY_LOCKED, E_CANCELED, E_TIMEOUT, Mutex, Semaphore, tryAcquire, withTimeout };\n","import { Event } from 'microevent.ts';\n\nexport class Watcher<T> {\n    constructor(private query: () => T) {\n        this.last = query();\n    }\n\n    update(): void {\n        const current = this.query();\n\n        if (current !== this.last) {\n            this.changeEvent.dispatch(current);\n            this.last = current;\n        }\n    }\n\n    readonly changeEvent = new Event<T>();\n\n    private last: T;\n}\n","import { PwmUpdate } from '@common/bridge/Cloudpilot';\nimport { isIOS } from '@common/helper/browser';\nimport { AbstractEmulationService } from '@common/service/AbstractEmulationService';\nimport { Mutex } from 'async-mutex';\nimport { EventInterface } from 'microevent.ts';\n\nimport { ControlMessageHost, ControlMessageHostType } from './audioworklet/messages';\n\ntype AudioContextType = typeof AudioContext;\n\ndeclare global {\n    interface Window {\n        webkitAudioContext: AudioContextType;\n        AudioContext: AudioContextType;\n    }\n}\n\ninterface Audio {\n    context: AudioContext;\n    gainNode: GainNode;\n    workletNode: AudioWorkletNode | undefined;\n}\n\nconst audioContextCtor = window.AudioContext || window.webkitAudioContext;\n\nfunction withTimeout<T>(v: Promise<T>, timeout = 500): Promise<T> {\n    return new Promise((resolve, reject) => {\n        setTimeout(() => reject(new Error('timeout')), timeout);\n\n        v.then(resolve, reject);\n    });\n}\n\nexport abstract class AbstractAudioService {\n    constructor(\n        private emulationService: AbstractEmulationService,\n        private pcmWorkletUrl?: string,\n    ) {\n        this.bind();\n\n        this.emulationService.openSessionEvent.addHandler(() => this.bind());\n\n        this.emulationService.emulationStateChangeEvent.addHandler(() => this.updateState());\n        this.emulationService.palmosStateChangeEvent.addHandler(() => this.updateState());\n        document.addEventListener('visibilitychange', () => {\n            if (isIOS && document.visibilityState === 'visible') setTimeout(() => this.updateState(), 500);\n            else this.updateState();\n        });\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (window as any).__cpeAudioDriver = this;\n    }\n\n    initialize = (): Promise<boolean> => this.mutex.runExclusive(async () => this.initializeAudioUnguarded());\n\n    isInitialized(): boolean {\n        return this.audio !== undefined;\n    }\n\n    mute(muted: boolean): void {\n        this.muted = muted;\n        this.updateState();\n    }\n\n    isMuted(): boolean {\n        return this.muted;\n    }\n\n    reactivateRequired(): boolean {\n        return (\n            (this.audio ?? false) &&\n            (this.audio?.context.state === 'suspended' ||\n                this.audio?.context.state === ('interrupted' as AudioContextState)) &&\n            this.shouldRun()\n        );\n    }\n\n    reactivate(): void {\n        this.mute(false);\n        this.updateState();\n    }\n\n    protected abstract getVolume(): number;\n\n    protected abstract runHidden(): boolean;\n\n    protected shouldRun(): boolean {\n        return this.gain() > 0 && (document.visibilityState !== 'hidden' || this.runHidden());\n    }\n\n    protected shouldMute(): boolean {\n        return !this.emulationService.isRunning() || this.emulationService.isPowerOff() || this.muted;\n    }\n\n    protected updateState = () =>\n        void this.mutex.runExclusive(async () => {\n            if (!this.audio) return;\n\n            this.updateGain();\n\n            if (this.shouldRun()) this.emulationService.enablePcmStreaming();\n            else this.emulationService.disablePcmStreaming();\n\n            if (this.isRunning() === this.shouldRun()) return;\n\n            const oldState = this.audio.context.state;\n            switch (oldState) {\n                case 'interrupted' as AudioContextState:\n                    break;\n\n                case 'closed':\n                    console.warn('audio context closed unexpectedly, no more audio will be played');\n                    return;\n            }\n\n            if (this.shouldRun()) {\n                try {\n                    await withTimeout(this.audio.context.resume());\n                    console.log('resume audio context');\n                } catch (e) {\n                    console.error(`failed to resume audio from state ${oldState}`, e);\n                }\n            } else {\n                try {\n                    await withTimeout(this.audio.context.suspend());\n                    console.log('suspend audio context');\n                } catch (e) {\n                    console.error(`failed to suspend audio from state ${oldState}`, e);\n                }\n            }\n        });\n\n    protected updateGain(): void {\n        if (!this.audio) return;\n        this.audio.gainNode.gain.value = this.shouldMute() ? 0 : this.gain();\n    }\n\n    private bind(): void {\n        this.unbind();\n\n        this.pwmUpdateEvent = this.emulationService.pwmUpdateEvent();\n        this.pwmUpdateEvent?.addHandler(this.onPwmUpdate);\n\n        const pcmPort = this.emulationService.pcmPort();\n        if (!pcmPort) return;\n\n        this.bindWorkletNode();\n    }\n\n    private unbind(): void {\n        this.pwmUpdateEvent?.removeHandler(this.onPwmUpdate);\n        this.disconnectPwmSource();\n        this.pwmUpdateEvent = undefined;\n\n        this.unbindWorkletNode();\n    }\n\n    private async registerWorklet(context: AudioContext): Promise<void> {\n        // Trick webpack into bundling the worklet as a worker. Abomination.\n        const savedWorker = window.Worker;\n        window.Worker = class {\n            constructor(url: URL) {\n                this.ready = context.audioWorklet.addModule(url);\n            }\n\n            ready: Promise<void>;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        } as any;\n\n        const loader =\n            this.pcmWorkletUrl === undefined\n                ? new Worker(\n                      /* webpackChunkName: \"pcm-worklet\" */ new URL(\n                          './audioworklet/pcm-worklet.worker.ts',\n                          import.meta.url,\n                      ),\n                  )\n                : new Worker(this.pcmWorkletUrl);\n        window.Worker = savedWorker;\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        await (loader as any).ready;\n    }\n\n    private async initializeAudioUnguarded(): Promise<boolean> {\n        if (this.audio) return true;\n        let context: AudioContext | undefined;\n\n        try {\n            context = this.createAudioContext();\n        } catch (e) {\n            console.error('web audio not available', e);\n            return false;\n        }\n\n        try {\n            context.destination.channelCount = 2;\n        } catch (e) {\n            console.warn('audio driver: failed to set channel count', e);\n        }\n\n        let workletNode: AudioWorkletNode | undefined;\n\n        try {\n            await this.registerWorklet(context);\n\n            workletNode = new AudioWorkletNode(context, 'pcm-processor', {\n                channelCount: 2,\n                numberOfOutputs: 1,\n                outputChannelCount: [2],\n                processorOptions: {\n                    sampleRateTo: context.sampleRate,\n                },\n            });\n        } catch (e) {\n            console.error('failed to load audio worklet, PCM audio not available', e);\n        }\n\n        const gainNode = context.createGain();\n        gainNode.channelInterpretation = 'speakers';\n        gainNode.gain.value = this.gain();\n\n        gainNode.connect(context.destination);\n\n        this.audio = { context, gainNode, workletNode };\n\n        context.addEventListener('statechange', this.onContextStateChange);\n        this.updateState();\n\n        this.applyPwmUpdate();\n        this.bindWorkletNode();\n\n        console.log(`audio initialised at ${context.sampleRate}Hz`);\n\n        return true;\n    }\n\n    private createAudioContext(): AudioContext {\n        try {\n            return new audioContextCtor({ sampleRate: 44100, latencyHint: 'interactive' });\n        } catch (e: unknown) {\n            console.warn('failed to request context at 44100Hz , latency interactive', e);\n        }\n\n        try {\n            return new audioContextCtor({ latencyHint: 'interactive' });\n        } catch (e: unknown) {\n            console.warn('failed to request context at arbitrary rate, latency interactive', e);\n        }\n\n        try {\n            return new audioContextCtor();\n        } catch (e: unknown) {\n            console.error('failed to request context at arbitrary rate and latency', e);\n\n            throw e;\n        }\n    }\n\n    private isRunning(): boolean {\n        return this.audio?.context.state === 'running';\n    }\n\n    private onPwmUpdate = async (pwmUpdate: PwmUpdate): Promise<void> => {\n        this.pendingPwmUpdate = pwmUpdate;\n\n        this.applyPwmUpdate();\n    };\n\n    private applyPwmUpdate(): void {\n        if (!this.audio || !this.pendingPwmUpdate) return;\n\n        const { frequency, dutyCycle } = this.pendingPwmUpdate;\n        const sampleRate = this.audio.context.sampleRate;\n\n        this.pendingPwmUpdate = undefined;\n\n        if (frequency <= 0 || dutyCycle <= 0 || frequency >= sampleRate) {\n            this.disconnectPwmSource();\n\n            return;\n        }\n\n        const buffer = this.audio.context.createBuffer(1, Math.round(sampleRate / frequency), sampleRate);\n        const data = buffer.getChannelData(0);\n\n        for (let i = 0; i < data.length; i++) {\n            data[i] = i / data.length < dutyCycle ? 0.5 : 0;\n        }\n\n        const bufferSourceNode = this.audio.context.createBufferSource();\n        bufferSourceNode.channelCount = 1;\n        bufferSourceNode.channelInterpretation = 'speakers';\n        bufferSourceNode.loop = true;\n        bufferSourceNode.buffer = buffer;\n\n        this.disconnectPwmSource();\n\n        bufferSourceNode.connect(this.audio.gainNode);\n        bufferSourceNode.start();\n        this.bufferSourceNode = bufferSourceNode;\n\n        this.pendingPwmUpdate = undefined;\n    }\n\n    private disconnectPwmSource(): void {\n        if (this.bufferSourceNode) {\n            this.bufferSourceNode.stop();\n            this.bufferSourceNode.disconnect();\n            this.bufferSourceNode = undefined;\n        }\n    }\n\n    private gain(): number {\n        return this.getVolume() / 2;\n    }\n\n    private dispatchPcmControlMessage(message: ControlMessageHost, transferables?: Array<Transferable>): void {\n        this.audio?.workletNode?.port.postMessage(message, transferables as Array<Transferable>);\n    }\n\n    private bindWorkletNode(): void {\n        if (this.workletBound || !this.audio?.workletNode) return;\n\n        const pcmPort = this.emulationService.pcmPort();\n        if (!pcmPort) return;\n\n        this.audio.workletNode.connect(this.audio.gainNode);\n        this.dispatchPcmControlMessage({ type: ControlMessageHostType.setStreamMessagePort, port: pcmPort }, [pcmPort]);\n\n        if (this.shouldRun()) this.emulationService.enablePcmStreaming();\n        else this.emulationService.disablePcmStreaming();\n\n        this.workletBound = true;\n        console.log('bound worklet');\n    }\n\n    private unbindWorkletNode(): void {\n        if (!this.workletBound) return;\n        this.audio?.workletNode?.disconnect();\n\n        this.dispatchPcmControlMessage({ type: ControlMessageHostType.reset });\n        this.emulationService.disablePcmStreaming();\n\n        this.workletBound = false;\n        console.log('unbound worklet');\n    }\n\n    private onContextStateChange = () => {\n        if (!this.audio) return;\n\n        console.log(`audio context state change ${this.oldAudioState} -> ${this.audio.context.state}`);\n        this.oldAudioState = this.audio.context.state;\n\n        switch (this.audio.context.state) {\n            case 'suspended':\n                if (this.oldAudioState === ('interrupted' as AudioContextState) && this.shouldRun()) {\n                    this.updateState();\n                }\n\n                this.emulationService.disablePcmStreaming();\n                break;\n\n            case 'running':\n                this.emulationService.enablePcmStreaming();\n                this.audio.gainNode.gain.value = this.shouldMute() ? 0 : this.gain();\n\n                break;\n        }\n    };\n\n    private mutex = new Mutex();\n\n    private bufferSourceNode: AudioBufferSourceNode | undefined;\n    private audio: Audio | undefined;\n\n    private muted = false;\n    private workletBound = false;\n\n    private pwmUpdateEvent: EventInterface<PwmUpdate> | undefined;\n    private pendingPwmUpdate: PwmUpdate | undefined;\n\n    private oldAudioState = '[new]';\n}\n","import { AbstractAudioService } from '@common/service/AbstractAudioService';\nimport { AbstractEmulationService } from '@common/service/AbstractEmulationService';\nimport { Session } from '@embedded/model/Session';\n\nexport class EmbeddedAudioService extends AbstractAudioService {\n    constructor(\n        private session: Session,\n        emulationService: AbstractEmulationService,\n        pcmWorkletUrl?: string,\n    ) {\n        super(emulationService, pcmWorkletUrl);\n    }\n\n    public setVolume(volume: number): void {\n        this.volume = Math.max(Math.min(volume, 1), 0);\n\n        this.updateGain();\n    }\n\n    public getVolume(): number {\n        return this.volume;\n    }\n\n    public setSession(session: Session): void {\n        this.session = session;\n        this.updateState();\n    }\n\n    protected runHidden(): boolean {\n        return this.session.runInBackground;\n    }\n\n    private volume = 0.5;\n}\n","const BACKGROUND = [135, 135, 105];\nconst FOREGROUND = [0x0, 0x0, 0x0];\n\nexport const GRAYSCALE_PALETTE_RGBA = new Array(16)\n    .fill(0)\n    .map((_, i) => FOREGROUND.map((fg, j) => Math.floor((i * fg + (15 - i) * BACKGROUND[j]) / 15)))\n    .map(([r, g, b]) => 0xff000000 | (b << 16) | (g << 8) | r);\n\nexport const GRAYSCALE_PALETTE_HEX = GRAYSCALE_PALETTE_RGBA.map(\n    (x) => '#' + (x & 0xffffff).toString(16).padStart(6, '0').match(/(..?)/g)?.reverse().join(''),\n);\n","import { PalmButton } from '@common/bridge/Cloudpilot';\nimport { deviceDimensions, isColor } from '@common/helper/deviceProperties';\nimport { PrerenderedImage } from '@common/helper/image';\nimport { GRAYSCALE_PALETTE_HEX } from '@common/helper/palette';\nimport { DeviceId } from '@common/model/DeviceId';\nimport { DeviceOrientation } from '@common/model/DeviceOrientation';\nimport { ScreenSize } from '@common/model/Dimensions';\nimport { Event } from 'microevent.ts';\n\nimport { SkinElement, SkinLoader } from './SkinLoader';\n\nexport const DEFAULT_DEVICE = DeviceId.m515;\nconst BACKGROUND_COLOR_SILKSCREEN = GRAYSCALE_PALETTE_HEX[2];\nconst BACKGROUND_COLOR_GRAYSCALE_DEVICE = GRAYSCALE_PALETTE_HEX[0];\nconst BACKGROUND_COLOR_COLOR_DEVICE = 'white';\nconst FRAME_COLOR_COLOR_DEVICE = 'white';\nconst FRAME_COLOR_GRAYSCALE_DEVICE = '#ccc';\nconst BACKGROUND_ACTIVE_BUTTON = 'rgba(0,0,0,0.2)';\n\ninterface FrameDependent {\n    frameDevice: number;\n    frameCanvas: number;\n}\n\ninterface Layout {\n    scale: number;\n    borderWidth: FrameDependent;\n    width: FrameDependent;\n    height: FrameDependent;\n    screenHeight: FrameDependent;\n    screenWidth: FrameDependent;\n    screenLeft: FrameDependent;\n    screenTop: FrameDependent;\n    screenBottom: FrameDependent;\n    separatorHeight: FrameDependent;\n    silkscreenHeight: FrameDependent;\n    silkscreenTop: FrameDependent;\n    silkscreenBottom: FrameDependent;\n    softSilkscreenHeight: FrameDependent;\n    buttonHeight: FrameDependent;\n    buttonWidth: FrameDependent;\n    buttonTop: FrameDependent;\n    buttonBottom: FrameDependent;\n    radiusDpadSelect: FrameDependent;\n    angleDpad: number;\n}\n\nfunction buttonHeightForScreenSize(screenSize: ScreenSize) {\n    switch (screenSize) {\n        case ScreenSize.screen320x480:\n        case ScreenSize.screen320x320:\n            return 60;\n\n        case ScreenSize.screen240x320:\n            return 45;\n\n        default:\n            return 30;\n    }\n}\n\nfunction calculateLayout(device: DeviceId, pixelRatio: number): Layout {\n    const dimensions = deviceDimensions(device);\n    const scale = (dimensions.screenSize === ScreenSize.screen160x160 ? 3 : 2) * pixelRatio;\n    const borderWidth: FrameDependent = { frameDevice: 1, frameCanvas: scale };\n\n    const dist = (x: number): FrameDependent => ({ frameDevice: x, frameCanvas: x * scale });\n    const coord = (x: number): FrameDependent => ({ frameDevice: x, frameCanvas: borderWidth.frameCanvas + x * scale });\n\n    const separatorHeight = dimensions.silkscreenHeight > 0 ? dist(1) : dist(0);\n    const buttonHeight = dist(buttonHeightForScreenSize(dimensions.screenSize));\n\n    return {\n        scale,\n        borderWidth,\n        height: dist(\n            2 * borderWidth.frameDevice +\n                dimensions.height +\n                separatorHeight.frameDevice +\n                dimensions.silkscreenHeight +\n                buttonHeight.frameDevice,\n        ),\n        width: dist(2 * borderWidth.frameDevice + dimensions.width),\n        screenHeight: dist(dimensions.height),\n        screenWidth: dist(dimensions.width),\n        screenLeft: coord(0),\n        screenTop: coord(0),\n        screenBottom: coord(dimensions.height),\n        separatorHeight,\n        silkscreenHeight: dist(dimensions.silkscreenHeight),\n        silkscreenTop: coord(dimensions.height + separatorHeight.frameDevice),\n        silkscreenBottom: coord(dimensions.height + separatorHeight.frameDevice + dimensions.silkscreenHeight),\n        softSilkscreenHeight: dist(dimensions.silkscreenHeight > 0 ? 0 : dimensions.height - dimensions.width),\n        buttonHeight,\n        buttonWidth: buttonHeight,\n        buttonTop: coord(dimensions.height + separatorHeight.frameDevice + dimensions.silkscreenHeight),\n        buttonBottom: coord(\n            dimensions.height + separatorHeight.frameDevice + dimensions.silkscreenHeight + buttonHeight.frameDevice,\n        ),\n        radiusDpadSelect: { frameCanvas: buttonHeight.frameCanvas / 5, frameDevice: buttonHeight.frameDevice / 5 },\n        angleDpad:\n            Math.PI / 2 - Math.atan((dimensions.width - 4 * buttonHeight.frameDevice) / buttonHeight.frameDevice),\n    };\n}\n\nexport abstract class AbstractCanvasDisplayService {\n    constructor(protected skinLoader: SkinLoader) {}\n\n    get width(): number {\n        switch (this.getOrientation()) {\n            case DeviceOrientation.portrait:\n            case DeviceOrientation.portrait180:\n            case undefined:\n                return this.layout.width.frameCanvas;\n\n            default:\n                return this.layout.height.frameCanvas;\n        }\n    }\n\n    get height(): number {\n        switch (this.getOrientation()) {\n            case DeviceOrientation.portrait:\n            case DeviceOrientation.portrait180:\n            case undefined:\n                return this.layout.height.frameCanvas;\n\n            default:\n                return this.layout.width.frameCanvas;\n        }\n    }\n\n    updateEmulationCanvas(canvas?: HTMLCanvasElement) {\n        this.setupTransformation();\n        this.drawEmulationCanvas(canvas);\n\n        this.onAfterUpdateCanvas();\n    }\n\n    eventToPalmCoordinates(e: MouseEvent | Touch, clip = false): [number, number] | undefined {\n        if (!this.ctx) return;\n\n        const bb = this.ctx.canvas.getBoundingClientRect();\n\n        let contentX: number;\n        let contentY: number;\n        let contentWidth: number;\n        let contentHeight: number;\n\n        // CSS object-fit keeps the aspect ratio of the canvas content, but the canvas itself\n        // looses aspect and fills the container -> manually calculate the metrics for the content\n        if (bb.width / bb.height > this.width / this.height) {\n            contentHeight = bb.height;\n            contentWidth = (this.width / this.height) * bb.height;\n            contentY = bb.top;\n            contentX = bb.left + (bb.width - contentWidth) / 2;\n        } else {\n            contentWidth = bb.width;\n            contentHeight = (this.height / this.width) * bb.width;\n            contentX = bb.left;\n            contentY = bb.top + (bb.height - contentHeight) / 2;\n        }\n\n        // Transform coordinate to device frame\n        let x = (((e.clientX - contentX) / contentWidth) * this.width) / this.layout.scale;\n        let y = (((e.clientY - contentY) / contentHeight) * this.height) / this.layout.scale;\n\n        // Rotate if applicable\n        switch (this.getOrientation()) {\n            case DeviceOrientation.landscape90: {\n                const tmp = y;\n                y = this.layout.height.frameDevice - x;\n                x = tmp;\n\n                break;\n            }\n\n            case DeviceOrientation.landscape270: {\n                const tmp = y;\n                y = x;\n                x = this.layout.width.frameDevice - tmp;\n                break;\n            }\n\n            case DeviceOrientation.portrait180: {\n                x = this.layout.width.frameDevice - x;\n                y = this.layout.height.frameDevice - y;\n                break;\n            }\n        }\n\n        // Compensate for the border\n        x -= this.layout.borderWidth.frameDevice;\n        y -= this.layout.borderWidth.frameDevice;\n\n        // The canvas layout inside the border is as follows:\n        //\n        // * 0 .. 159   : LCD\n        // * 160        : separator\n        // * 161 .. 220 : silkscreen\n        // * 221 .. 250 : buttons\n        //\n        // we map this to 160x250 lines by mapping the separator to the silkscreen\n\n        if (y >= this.layout.screenHeight.frameDevice) {\n            if (y <= this.layout.screenHeight.frameDevice + this.layout.separatorHeight.frameDevice) {\n                y = this.layout.screenHeight.frameDevice;\n            } else {\n                y -= this.layout.separatorHeight.frameDevice;\n            }\n        }\n\n        const totalHeight =\n            this.layout.screenHeight.frameDevice +\n            this.layout.silkscreenHeight.frameDevice +\n            this.layout.buttonHeight.frameDevice;\n\n        if (clip) {\n            if (x < 0) x = 0;\n            if (x >= this.layout.screenWidth.frameDevice) x = this.layout.screenWidth.frameDevice - 1;\n            if (y < 0) y = 0;\n            if (y >= totalHeight) y = totalHeight - 1;\n        } else {\n            if (x < 0 || x >= this.layout.screenWidth.frameDevice || y < 0 || y >= totalHeight) {\n                return undefined;\n            }\n        }\n\n        return [x, y];\n    }\n\n    isSilkscreen(coords: [number, number]): boolean {\n        const [, y] = coords;\n\n        return !this.isButtons(coords) && y >= this.layout.screenHeight.frameDevice;\n    }\n\n    isButtons([, y]: [number, number]): boolean {\n        return y >= this.layout.screenHeight.frameDevice + this.layout.silkscreenHeight.frameDevice;\n    }\n\n    determineButton([x, y]: [number, number]): PalmButton {\n        if (x >= this.layout.screenWidth.frameDevice - this.layout.buttonWidth.frameDevice) return PalmButton.notes;\n\n        if (x >= this.layout.screenWidth.frameDevice - 2 * this.layout.buttonWidth.frameDevice) return PalmButton.todo;\n\n        if (x >= 2 * this.layout.buttonWidth.frameDevice) {\n            if (this.dpad) {\n                const center = {\n                    x: this.layout.screenWidth.frameDevice / 2,\n                    y: this.layout.buttonTop.frameDevice + this.layout.buttonHeight.frameDevice / 2,\n                };\n\n                const rel = { x: Math.abs(x - center.x), y: Math.abs(y - center.y) };\n\n                const tanPhi = Math.tan(this.layout.angleDpad);\n\n                if (rel.x ** 2 + rel.y ** 2 <= this.layout.radiusDpadSelect.frameDevice ** 2) {\n                    return PalmButton.rockerEnter;\n                }\n\n                if (y < center.y && rel.y / rel.x >= tanPhi) return PalmButton.up;\n\n                if (y > center.y && rel.y / rel.x >= tanPhi) return PalmButton.down;\n\n                if (x < center.x && rel.y / rel.x < tanPhi) return PalmButton.rockerLeft;\n\n                return PalmButton.rockerRight;\n            } else {\n                return y >=\n                    this.layout.screenHeight.frameDevice +\n                        this.layout.silkscreenHeight.frameDevice +\n                        this.layout.buttonHeight.frameDevice / 2\n                    ? PalmButton.down\n                    : PalmButton.up;\n            }\n        }\n\n        if (x >= this.layout.buttonWidth.frameDevice) return PalmButton.phone;\n\n        return PalmButton.cal;\n    }\n\n    protected async initWithCanvas(\n        dpad: boolean,\n        canvas: HTMLCanvasElement | undefined = this.ctx?.canvas,\n    ): Promise<void> {\n        if (!canvas) return;\n\n        this.dpad = dpad;\n        this.layout = calculateLayout(this.getDeviceId(), this.pixelRatio());\n\n        this.onResize.dispatch();\n\n        canvas.width = this.width;\n        canvas.height = this.height;\n\n        const ctx = canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('canvas not supported - get a new browser');\n        }\n\n        this.ctx = ctx;\n\n        this.setupTransformation();\n        this.fillCanvasRect(0, 0, this.layout.width.frameCanvas, this.layout.height.frameCanvas, this.frameColor());\n        this.fillRect(\n            0,\n            0,\n            this.layout.screenWidth.frameDevice,\n            this.layout.screenHeight.frameDevice +\n                this.layout.silkscreenHeight.frameDevice +\n                this.layout.separatorHeight.frameDevice +\n                this.layout.buttonHeight.frameDevice,\n            this.backgroundColor(),\n        );\n\n        this.drawEmulationCanvas();\n        await Promise.all([this.drawSilkscreen(), this.drawButtons()]);\n    }\n\n    async drawButtons(activeButtons: Array<PalmButton> = []): Promise<void> {\n        if (!this.ctx) return;\n        this.setupTransformation();\n\n        this.ctx.imageSmoothingEnabled = true;\n        this.ctx.imageSmoothingQuality = 'high';\n\n        this.ctx.drawImage(\n            await this.buttonsImage()(this.layout.screenWidth.frameCanvas, this.layout.buttonHeight.frameCanvas),\n            this.layout.screenLeft.frameCanvas,\n            this.layout.buttonTop.frameCanvas,\n            this.layout.screenWidth.frameCanvas,\n            this.layout.buttonHeight.frameCanvas,\n        );\n\n        if (activeButtons.includes(PalmButton.cal)) {\n            this.fillRect(\n                0,\n                this.layout.buttonTop.frameDevice,\n                this.layout.buttonWidth.frameDevice,\n                this.layout.buttonHeight.frameDevice,\n                BACKGROUND_ACTIVE_BUTTON,\n            );\n        }\n        if (activeButtons.includes(PalmButton.phone)) {\n            this.fillRect(\n                this.layout.buttonWidth.frameDevice,\n                this.layout.buttonTop.frameDevice,\n                this.layout.buttonWidth.frameDevice,\n                this.layout.buttonHeight.frameDevice,\n                BACKGROUND_ACTIVE_BUTTON,\n            );\n        }\n        if (activeButtons.includes(PalmButton.todo)) {\n            this.fillRect(\n                this.layout.screenWidth.frameDevice - 2 * this.layout.buttonWidth.frameDevice,\n                this.layout.buttonTop.frameDevice,\n                this.layout.buttonWidth.frameDevice,\n                this.layout.buttonHeight.frameDevice,\n                BACKGROUND_ACTIVE_BUTTON,\n            );\n        }\n        if (activeButtons.includes(PalmButton.notes)) {\n            this.fillRect(\n                this.layout.screenWidth.frameDevice - this.layout.buttonWidth.frameDevice,\n                this.layout.buttonTop.frameDevice,\n                this.layout.buttonWidth.frameDevice,\n                this.layout.buttonHeight.frameDevice,\n                BACKGROUND_ACTIVE_BUTTON,\n            );\n        }\n        if (!this.dpad) {\n            if (activeButtons.includes(PalmButton.up)) {\n                this.fillRect(\n                    2 * this.layout.buttonWidth.frameDevice,\n                    this.layout.buttonTop.frameDevice,\n                    this.layout.screenWidth.frameDevice - 4 * this.layout.buttonWidth.frameDevice,\n                    this.layout.buttonHeight.frameDevice / 2,\n                    BACKGROUND_ACTIVE_BUTTON,\n                );\n            }\n            if (activeButtons.includes(PalmButton.down)) {\n                this.fillRect(\n                    2 * this.layout.buttonWidth.frameDevice,\n                    this.layout.buttonTop.frameDevice + this.layout.buttonHeight.frameDevice / 2,\n                    this.layout.screenWidth.frameDevice - 4 * this.layout.buttonWidth.frameDevice,\n                    this.layout.buttonHeight.frameDevice / 2,\n                    BACKGROUND_ACTIVE_BUTTON,\n                );\n            }\n        } else {\n            const center = {\n                x: this.layout.borderWidth.frameCanvas + this.layout.screenWidth.frameCanvas / 2,\n                y: this.layout.buttonTop.frameCanvas + this.layout.buttonHeight.frameCanvas / 2,\n            };\n\n            const topLeft = {\n                x: this.layout.borderWidth.frameCanvas + 2 * this.layout.buttonWidth.frameCanvas,\n                y: this.layout.buttonTop.frameCanvas,\n            };\n\n            const topRight = {\n                x:\n                    this.layout.borderWidth.frameCanvas +\n                    this.layout.screenWidth.frameCanvas -\n                    2 * this.layout.buttonWidth.frameCanvas,\n                y: this.layout.buttonTop.frameCanvas,\n            };\n\n            const bottomLeft = {\n                x: topLeft.x,\n                y: this.layout.buttonTop.frameCanvas + this.layout.buttonHeight.frameCanvas,\n            };\n\n            const bottomRight = {\n                x: topRight.x,\n                y: this.layout.buttonTop.frameCanvas + this.layout.buttonHeight.frameCanvas,\n            };\n\n            const r = this.layout.radiusDpadSelect.frameCanvas;\n            const phi = this.layout.angleDpad;\n\n            if (activeButtons.includes(PalmButton.up)) {\n                this.ctx.beginPath();\n\n                this.ctx.moveTo(topLeft.x, topLeft.y);\n                this.ctx.lineTo(topRight.x, topRight.y);\n                this.ctx.lineTo(center.x + r * Math.cos(phi), center.y - r * Math.sin(phi));\n                this.ctx.arc(center.x, center.y, r, -phi, phi - Math.PI, true);\n                this.ctx.lineTo(topLeft.x, topLeft.y);\n\n                this.ctx.fillStyle = BACKGROUND_ACTIVE_BUTTON;\n                this.ctx.fill();\n            }\n\n            if (activeButtons.includes(PalmButton.down)) {\n                this.ctx.beginPath();\n\n                this.ctx.moveTo(bottomLeft.x, bottomLeft.y);\n                this.ctx.lineTo(bottomRight.x, bottomRight.y);\n                this.ctx.lineTo(center.x + r * Math.cos(phi), center.y + r * Math.sin(phi));\n                this.ctx.arc(center.x, center.y, r, phi, Math.PI - phi, false);\n                this.ctx.lineTo(bottomLeft.x, bottomLeft.y);\n\n                this.ctx.fillStyle = BACKGROUND_ACTIVE_BUTTON;\n                this.ctx.fill();\n            }\n\n            if (activeButtons.includes(PalmButton.rockerLeft)) {\n                this.ctx.beginPath();\n\n                this.ctx.moveTo(topLeft.x, topLeft.y);\n                this.ctx.lineTo(bottomLeft.x, bottomLeft.y);\n                this.ctx.lineTo(center.x - r * Math.cos(phi), center.y + r * Math.sin(phi));\n                this.ctx.arc(center.x, center.y, r, Math.PI - phi, Math.PI + phi, false);\n                this.ctx.lineTo(topLeft.x, topLeft.y);\n\n                this.ctx.fillStyle = BACKGROUND_ACTIVE_BUTTON;\n                this.ctx.fill();\n            }\n\n            if (activeButtons.includes(PalmButton.rockerRight)) {\n                this.ctx.beginPath();\n\n                this.ctx.moveTo(topRight.x, topRight.y);\n                this.ctx.lineTo(bottomRight.x, bottomRight.y);\n                this.ctx.lineTo(center.x + r * Math.cos(phi), center.y + r * Math.sin(phi));\n                this.ctx.arc(center.x, center.y, r, phi, -phi, true);\n                this.ctx.lineTo(topRight.x, topRight.y);\n\n                this.ctx.fillStyle = BACKGROUND_ACTIVE_BUTTON;\n                this.ctx.fill();\n            }\n\n            if (activeButtons.includes(PalmButton.rockerEnter)) {\n                this.ctx.beginPath();\n\n                this.ctx.arc(center.x, center.y, r, 0, Math.PI * 2);\n\n                this.ctx.fillStyle = BACKGROUND_ACTIVE_BUTTON;\n                this.ctx.fill();\n            }\n        }\n    }\n\n    protected abstract getDeviceId(): DeviceId;\n\n    protected abstract getOrientation(): DeviceOrientation;\n\n    protected onAfterUpdateCanvas(): void {}\n\n    protected pixelRatio(): number {\n        return devicePixelRatio;\n    }\n\n    protected setupTransformation(): void {\n        if (!this.ctx) return;\n\n        this.ctx.resetTransform();\n\n        switch (this.getOrientation()) {\n            case DeviceOrientation.portrait:\n            case undefined:\n                break;\n\n            case DeviceOrientation.landscape90:\n                this.ctx.translate(this.layout.height.frameCanvas, 0);\n                this.ctx.rotate(Math.PI / 2);\n                break;\n\n            case DeviceOrientation.landscape270:\n                this.ctx.translate(0, this.layout.width.frameCanvas);\n                this.ctx.rotate((3 * Math.PI) / 2);\n                break;\n\n            case DeviceOrientation.portrait180:\n                this.ctx.translate(this.layout.width.frameCanvas, this.layout.height.frameCanvas);\n                this.ctx.rotate(Math.PI);\n                break;\n        }\n    }\n\n    protected async drawSilkscreen(): Promise<void> {\n        if (this.layout.silkscreenHeight.frameCanvas === 0 || !this.ctx) return;\n        this.setupTransformation();\n\n        this.fillRect(\n            this.layout.screenLeft.frameDevice,\n            this.layout.silkscreenTop.frameDevice,\n            this.layout.screenWidth.frameDevice,\n            this.layout.silkscreenHeight.frameDevice,\n            BACKGROUND_COLOR_SILKSCREEN,\n        );\n\n        this.ctx.imageSmoothingEnabled = true;\n        this.ctx.imageSmoothingQuality = 'high';\n\n        this.ctx.drawImage(\n            await this.silkscreenImage()(this.layout.screenWidth.frameCanvas, this.layout.silkscreenHeight.frameCanvas),\n            this.layout.borderWidth.frameCanvas,\n            this.layout.silkscreenTop.frameCanvas,\n            this.layout.screenWidth.frameCanvas,\n            this.layout.silkscreenHeight.frameCanvas,\n        );\n    }\n\n    protected drawEmulationCanvas(canvas = this.lastEmulationCanvas): void {\n        if (!canvas || !this.ctx) return;\n        this.lastEmulationCanvas = canvas;\n\n        this.ctx.imageSmoothingEnabled = false;\n        this.ctx.drawImage(\n            canvas,\n            this.layout.screenLeft.frameCanvas,\n            this.layout.screenTop.frameCanvas,\n            this.layout.screenWidth.frameCanvas,\n            this.layout.screenHeight.frameCanvas,\n        );\n    }\n\n    protected fillRect(x: number, y: number, width: number, height: number, style: string): void {\n        if (!this.ctx) return;\n\n        this.ctx.beginPath();\n        this.ctx.rect(\n            this.layout.borderWidth.frameCanvas + this.layout.scale * x,\n            this.layout.borderWidth.frameCanvas + this.layout.scale * y,\n            this.layout.scale * width,\n            this.layout.scale * height,\n        );\n        this.ctx.fillStyle = style;\n        this.ctx.fill();\n    }\n\n    protected fillCanvasRect(x: number, y: number, width: number, height: number, style: string): void {\n        if (!this.ctx) return;\n\n        this.ctx.beginPath();\n        this.ctx.rect(x, y, width, height);\n        this.ctx.fillStyle = style;\n        this.ctx.fill();\n    }\n\n    protected silkscreenImage(): PrerenderedImage {\n        return this.skinLoader.loadSkinElement(this.silkscreenSkinElement());\n    }\n\n    protected silkscreenSkinElement(): SkinElement {\n        switch (this.getDeviceId()) {\n            case DeviceId.pegT600c:\n            case DeviceId.pegT650c:\n                return SkinElement.SILKSCREEN_PEG_T600;\n\n            case DeviceId.pegN700c:\n            case DeviceId.pegN600c:\n                return SkinElement.SILKSCREEN_PEG_N610;\n\n            case DeviceId.pegS320:\n            case DeviceId.pegS300:\n                return SkinElement.SILKSCREEN_PEG_S300;\n\n            case DeviceId.pegS500c:\n                return SkinElement.SILKSCREEN_PEG_S500;\n\n            case DeviceId.pegT400:\n                return SkinElement.SILKSCREEN_PEG_T415;\n\n            case DeviceId.acerS11:\n                return SkinElement.SILKSCREEN_ACER_S10;\n\n            case DeviceId.palmPilot:\n            case DeviceId.pilot:\n            case DeviceId.iii:\n            case DeviceId.palmVII:\n                return SkinElement.SILKSCREEN_PILOT;\n\n            case DeviceId.m500:\n                return SkinElement.SILKSCREEN_M500;\n\n            case DeviceId.m505:\n            case DeviceId.m515:\n            case DeviceId.m520:\n                return SkinElement.SILKSCREEN_M515;\n\n            case DeviceId.iiic:\n                return SkinElement.SILKSCREEN_IIIC;\n\n            case DeviceId.m100:\n            case DeviceId.m105:\n            case DeviceId.m125:\n                return SkinElement.SILKSCREEN_M100;\n\n            case DeviceId.m130:\n                return SkinElement.SILKSCREEN_M130;\n\n            case DeviceId.i710:\n            case DeviceId.te2:\n                return SkinElement.SILKSCREEN_TUNGSTEN_W;\n\n            case DeviceId.i705:\n                return SkinElement.SILKSCREEN_I705;\n\n            case DeviceId.iiix:\n            case DeviceId.iiixe:\n            case DeviceId.palmVx:\n            case DeviceId.palmV:\n            case DeviceId.palmVIIEZ:\n            case DeviceId.palmVIIx:\n            default:\n                return SkinElement.SILKSCREEN_V;\n        }\n    }\n\n    protected buttonsImage(): PrerenderedImage {\n        return this.skinLoader.loadSkinElement(this.buttonsSkinElement());\n    }\n\n    protected buttonsSkinElement(): SkinElement {\n        switch (this.getDeviceId()) {\n            case DeviceId.acerS11:\n                return SkinElement.HARD_BUTTONS_ACER_S10;\n\n            case DeviceId.pegNR70:\n                return SkinElement.HARD_BUTTONS_PEG_NR70;\n\n            case DeviceId.pegN700c:\n                return SkinElement.HARD_BUTTONS_PEG_N700;\n\n            case DeviceId.pegN600c:\n                return SkinElement.HARD_BUTTONS_PEG_N610;\n\n            case DeviceId.pegS300:\n                return SkinElement.HARD_BUTTONS_PEG_S300;\n\n            case DeviceId.pegS500c:\n                return SkinElement.HARD_BUTTONS_PEG_S500;\n\n            case DeviceId.pegS320:\n                return SkinElement.HARD_BUTTONS_PEG_S320;\n\n            case DeviceId.pegT400:\n            case DeviceId.pegT600c:\n            case DeviceId.pegT650c:\n                return SkinElement.HARD_BUTTONS_PEG_T415;\n\n            case DeviceId.pilot:\n            case DeviceId.palmPilot:\n                return SkinElement.HARD_BUTTONS_PILOT;\n\n            case DeviceId.m500:\n                return SkinElement.HARD_BUTTONS_M500;\n\n            case DeviceId.m505:\n            case DeviceId.m515:\n            case DeviceId.m520:\n                return SkinElement.HARD_BUTTONS_M515;\n\n            case DeviceId.iiic:\n                return SkinElement.HARD_BUTTONS_IIIC;\n\n            case DeviceId.m100:\n            case DeviceId.m105:\n                return SkinElement.HARD_BUTTONS_M100;\n\n            case DeviceId.m125:\n                return SkinElement.HARD_BUTTONS_M125;\n\n            case DeviceId.m130:\n                return SkinElement.HARD_BUTTONS_M130;\n\n            case DeviceId.i710:\n                return SkinElement.HARD_BUTTONS_TUNGSTEN_W;\n\n            case DeviceId.te2:\n            case DeviceId.frankene2:\n                return SkinElement.HARD_BUTTONS_TUNGSTEN_E2;\n\n            case DeviceId.iii:\n            case DeviceId.iiix:\n            case DeviceId.iiixe:\n            case DeviceId.palmVII:\n            case DeviceId.palmVIIEZ:\n            case DeviceId.palmVIIx:\n                return SkinElement.HARD_BUTTONS_IIIX;\n\n            case DeviceId.iiie:\n                return SkinElement.HARD_BUTTONS_IIIE;\n\n            case DeviceId.i705:\n                return SkinElement.HARD_BUTTONS_I705;\n\n            case DeviceId.handera330:\n                return SkinElement.HARD_BUTTONS_HANDERA330;\n\n            case DeviceId.handera330c:\n                return SkinElement.HARD_BUTTONS_HANDERA330C;\n\n            case DeviceId.lp168:\n                return SkinElement.HARD_BUTTONS_LEGEND_P168;\n\n            case DeviceId.palmVx:\n            case DeviceId.palmV:\n            default:\n                return SkinElement.HARD_BUTTONS_PALM_V;\n        }\n    }\n\n    protected backgroundColor(): string {\n        return isColor(this.getDeviceId()) ? BACKGROUND_COLOR_COLOR_DEVICE : BACKGROUND_COLOR_GRAYSCALE_DEVICE;\n    }\n\n    protected frameColor(): string {\n        return isColor(this.getDeviceId()) ? FRAME_COLOR_COLOR_DEVICE : FRAME_COLOR_GRAYSCALE_DEVICE;\n    }\n\n    protected ctx: CanvasRenderingContext2D | undefined;\n    protected layout = calculateLayout(DEFAULT_DEVICE, this.pixelRatio());\n    protected lastEmulationCanvas: HTMLCanvasElement | undefined;\n    protected dpad = false;\n\n    readonly onResize = new Event<void>();\n\n    // protected dimensions = DEFAULT_DIMENSIONS;\n}\n","import { engineType } from '@common/helper/deviceProperties';\nimport { loadImage, prerender } from '@common/helper/image';\nimport { DeviceId } from '@common/model/DeviceId';\nimport { DeviceOrientation } from '@common/model/DeviceOrientation';\nimport { AbstractCanvasDisplayService } from '@common/service/AbstractCanvasDisplayService';\nimport { PalmButton } from '@native/cloudpilot_web';\nimport { Mutex } from 'async-mutex';\n\nimport { svgToUrl } from './../../../common/helper/image';\n\nconst GAME_ICON_SVG =\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"ionicon\" viewBox=\"0 0 512 512\"><title>Game Controller</title><path d=\"M467.51 248.83c-18.4-83.18-45.69-136.24-89.43-149.17A91.5 91.5 0 00352 96c-26.89 0-48.11 16-96 16s-69.15-16-96-16a99.09 99.09 0 00-27.2 3.66C89 112.59 61.94 165.7 43.33 248.83c-19 84.91-15.56 152 21.58 164.88 26 9 49.25-9.61 71.27-37 25-31.2 55.79-40.8 119.82-40.8s93.62 9.6 118.66 40.8c22 27.41 46.11 45.79 71.42 37.16 41.02-14.01 40.44-79.13 21.43-165.04z\" fill=\"none\" stroke=\"currentColor\" stroke-miterlimit=\"10\" stroke-width=\"32\"/><circle cx=\"292\" cy=\"224\" r=\"20\"/><path d=\"M336 288a20 20 0 1120-19.95A20 20 0 01336 288z\"/><circle cx=\"336\" cy=\"180\" r=\"20\"/><circle cx=\"380\" cy=\"224\" r=\"20\"/><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"32\" d=\"M160 176v96M208 224h-96\"/></svg>';\n\nconst GAME_ICON_PRERENDERED = prerender(loadImage(svgToUrl(GAME_ICON_SVG)), GAME_ICON_SVG);\n\nexport class EmbeddedCanvasDisplayService extends AbstractCanvasDisplayService {\n    setDpadEnabled(dpad: boolean): void {\n        this.dpadEnabled = dpad;\n    }\n\n    initialize = (canvas?: HTMLCanvasElement, deviceId?: DeviceId, orientation?: DeviceOrientation) =>\n        this.mutex.runExclusive(() => this.initializeUnguarded(canvas, deviceId, orientation));\n\n    updateOrientation(orientation: DeviceOrientation) {\n        this.orientation = orientation;\n        void this.initialize();\n    }\n\n    toggleGameModeIndicator(gameModeActive: boolean): void {\n        this.gameModeActive = gameModeActive;\n\n        void this.drawButtons(this.lastActiveButtons);\n    }\n\n    setGameModeIndicatorEnabled(gameModeIndicatorEnabled: boolean) {\n        this.gameModeIndicatorEnabled = gameModeIndicatorEnabled;\n\n        void this.drawButtons(this.lastActiveButtons);\n    }\n\n    isGameModeIndicatorEnabled(): boolean {\n        return this.gameModeIndicatorEnabled;\n    }\n\n    getCanvas(): HTMLCanvasElement | undefined {\n        return this.ctx?.canvas;\n    }\n\n    override async drawButtons(activeButtons: Array<PalmButton> = []): Promise<void> {\n        this.lastActiveButtons = activeButtons;\n\n        await super.drawButtons(activeButtons);\n\n        if (this.gameModeActive && this.gameModeIndicatorEnabled && engineType(this.deviceId) === 'cloudpilot') {\n            await this.drawGameModeIndicator();\n        }\n    }\n\n    protected getDeviceId(): DeviceId {\n        return this.deviceId;\n    }\n\n    protected getOrientation(): DeviceOrientation {\n        return this.orientation;\n    }\n\n    private async drawGameModeIndicator(): Promise<void> {\n        if (!this.ctx) return;\n\n        const indicatorSize = Math.floor(this.layout.screenWidth.frameCanvas * 0.1);\n        const iconSize = Math.floor(indicatorSize * 0.8);\n        const padding = Math.floor(indicatorSize * 0.1);\n        const iconPadding = Math.floor(indicatorSize * 0.11);\n\n        this.fillCanvasRect(\n            this.layout.screenLeft.frameCanvas - padding + this.layout.screenWidth.frameCanvas - indicatorSize,\n            this.layout.buttonTop.frameCanvas + this.layout.buttonHeight.frameCanvas - indicatorSize - padding,\n            indicatorSize,\n            indicatorSize,\n            'rgba(200, 200, 200, 0.7)',\n        );\n\n        this.ctx.drawImage(\n            await GAME_ICON_PRERENDERED(indicatorSize, indicatorSize),\n            this.layout.screenLeft.frameCanvas +\n                this.layout.screenWidth.frameCanvas -\n                padding -\n                indicatorSize +\n                iconPadding,\n            this.layout.buttonTop.frameCanvas +\n                this.layout.buttonHeight.frameCanvas -\n                indicatorSize -\n                padding +\n                iconPadding,\n            iconSize,\n            iconSize,\n        );\n    }\n\n    private async initializeUnguarded(\n        canvas?: HTMLCanvasElement,\n        deviceId = this.deviceId,\n        orientation = this.orientation,\n    ) {\n        this.deviceId = deviceId;\n        this.orientation = orientation;\n\n        const theCanvas = canvas || this.ctx?.canvas;\n        if (theCanvas) {\n            theCanvas.width = this.width;\n            theCanvas.height = this.height;\n\n            theCanvas.style.objectFit = 'contain';\n        }\n\n        await this.initWithCanvas(this.dpadEnabled, canvas);\n    }\n\n    private deviceId: DeviceId = DeviceId.m515;\n    private orientation: DeviceOrientation = DeviceOrientation.portrait;\n    private dpadEnabled = false;\n\n    private gameModeIndicatorEnabled = true;\n    private gameModeActive = false;\n    private lastActiveButtons: Array<PalmButton> | undefined = undefined;\n\n    private mutex = new Mutex();\n}\n","export class Average {\n    constructor(capacity: number, initialValue?: number) {\n        this.queue = new Array(capacity).fill(0);\n\n        this.reset(initialValue);\n    }\n\n    reset(initialValue = 0) {\n        this.next = 1;\n        this.size = 1;\n\n        this.queue[0] = initialValue;\n    }\n\n    push(value: number): this {\n        this.queue[this.next] = value;\n        this.next = (this.next + 1) % this.queue.length;\n\n        if (this.size < this.queue.length) this.size++;\n\n        return this;\n    }\n\n    calculateAverage(): number {\n        let acc = 0;\n\n        for (let i = 0; i < this.size; i++) acc += this.queue[i];\n\n        return acc / this.size;\n    }\n\n    private queue: Array<number>;\n    private next!: number;\n    private size!: number;\n}\n","export class Fifo<T> {\n    constructor(size: number) {\n        this.buffer = new Array(size);\n    }\n\n    push(value: T): this {\n        if (this.size < this.buffer.length) {\n            this.buffer[(this.start + this.size++) % this.buffer.length] = value;\n        } else {\n            this.start = (this.start + 1) % this.buffer.length;\n\n            this.buffer[(this.start + this.size - 1) % this.buffer.length] = value;\n        }\n\n        return this;\n    }\n\n    pop(): T | undefined {\n        if (this.size === 0) return undefined;\n\n        const elt = this.buffer[this.start];\n\n        this.start = (this.start + 1) % this.buffer.length;\n        this.size--;\n\n        return elt;\n    }\n\n    peekLast(): T | undefined {\n        if (this.size === 0) return undefined;\n\n        return this.buffer[(this.start + this.size - 1) % this.buffer.length];\n    }\n\n    replaceLast(value: T): this {\n        if (this.size > 0) {\n            this.buffer[(this.start + this.size - 1) % this.buffer.length] = value;\n        }\n\n        return this;\n    }\n\n    count(): number {\n        return this.size;\n    }\n\n    flush(): this {\n        this.start = 0;\n        this.size = 0;\n\n        return this;\n    }\n\n    private buffer: Array<T>;\n\n    private start = 0;\n    private size = 0;\n}\n","export const isMessagePort = (sender) => {\n    return typeof sender.start === 'function';\n};\n//# sourceMappingURL=message-port.js.map","export const PORT_MAP = new WeakMap();\n//# sourceMappingURL=port-map.js.map","import { generateUniqueNumber } from 'fast-unique-numbers';\nimport { isMessagePort } from './guards/message-port';\nimport { extendBrokerImplementation } from './helpers/extend-broker-implementation';\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\nconst ONGOING_REQUESTS = new WeakMap();\nconst createOrGetOngoingRequests = (sender) => {\n    if (ONGOING_REQUESTS.has(sender)) {\n        // @todo TypeScript needs to be convinced that has() works as expected.\n        return ONGOING_REQUESTS.get(sender);\n    }\n    const ongoingRequests = new Map();\n    ONGOING_REQUESTS.set(sender, ongoingRequests);\n    return ongoingRequests;\n};\nexport const createBroker = (brokerImplementation) => {\n    const fullBrokerImplementation = extendBrokerImplementation(brokerImplementation);\n    return (sender) => {\n        const ongoingRequests = createOrGetOngoingRequests(sender);\n        sender.addEventListener('message', (({ data: message }) => {\n            const { id } = message;\n            if (id !== null && ongoingRequests.has(id)) {\n                const { reject, resolve } = ongoingRequests.get(id);\n                ongoingRequests.delete(id);\n                if (message.error === undefined) {\n                    resolve(message.result);\n                }\n                else {\n                    reject(new Error(message.error.message));\n                }\n            }\n        }));\n        if (isMessagePort(sender)) {\n            sender.start();\n        }\n        const call = (method, params = null, transferables = []) => {\n            return new Promise((resolve, reject) => {\n                const id = generateUniqueNumber(ongoingRequests);\n                ongoingRequests.set(id, { reject, resolve });\n                if (params === null) {\n                    sender.postMessage({ id, method }, transferables);\n                }\n                else {\n                    sender.postMessage({ id, method, params }, transferables);\n                }\n            });\n        };\n        const notify = (method, params, transferables = []) => {\n            sender.postMessage({ id: null, method, params }, transferables);\n        };\n        let functions = {};\n        for (const [key, handler] of Object.entries(fullBrokerImplementation)) {\n            functions = { ...functions, [key]: handler({ call, notify }) };\n        }\n        return { ...functions };\n    };\n};\n//# sourceMappingURL=module.js.map","import { createBroker } from 'broker-factory';\nimport { generateUniqueNumber } from 'fast-unique-numbers';\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n// Prefilling the Maps with a function indexed by zero is necessary to be compliant with the specification.\nconst scheduledIntervalsState = new Map([[0, null]]); // tslint:disable-line no-empty\nconst scheduledTimeoutsState = new Map([[0, null]]); // tslint:disable-line no-empty\nexport const wrap = createBroker({\n    clearInterval: ({ call }) => {\n        return (timerId) => {\n            if (typeof scheduledIntervalsState.get(timerId) === 'symbol') {\n                scheduledIntervalsState.set(timerId, null);\n                call('clear', { timerId, timerType: 'interval' }).then(() => {\n                    scheduledIntervalsState.delete(timerId);\n                });\n            }\n        };\n    },\n    clearTimeout: ({ call }) => {\n        return (timerId) => {\n            if (typeof scheduledTimeoutsState.get(timerId) === 'symbol') {\n                scheduledTimeoutsState.set(timerId, null);\n                call('clear', { timerId, timerType: 'timeout' }).then(() => {\n                    scheduledTimeoutsState.delete(timerId);\n                });\n            }\n        };\n    },\n    setInterval: ({ call }) => {\n        return (func, delay = 0, ...args) => {\n            const symbol = Symbol();\n            const timerId = generateUniqueNumber(scheduledIntervalsState);\n            scheduledIntervalsState.set(timerId, symbol);\n            const schedule = () => call('set', {\n                delay,\n                now: performance.timeOrigin + performance.now(),\n                timerId,\n                timerType: 'interval'\n            }).then(() => {\n                const state = scheduledIntervalsState.get(timerId);\n                if (state === undefined) {\n                    throw new Error('The timer is in an undefined state.');\n                }\n                if (state === symbol) {\n                    func(...args);\n                    // Doublecheck if the interval should still be rescheduled because it could have been cleared inside of func().\n                    if (scheduledIntervalsState.get(timerId) === symbol) {\n                        schedule();\n                    }\n                }\n            });\n            schedule();\n            return timerId;\n        };\n    },\n    setTimeout: ({ call }) => {\n        return (func, delay = 0, ...args) => {\n            const symbol = Symbol();\n            const timerId = generateUniqueNumber(scheduledTimeoutsState);\n            scheduledTimeoutsState.set(timerId, symbol);\n            call('set', {\n                delay,\n                now: performance.timeOrigin + performance.now(),\n                timerId,\n                timerType: 'timeout'\n            }).then(() => {\n                const state = scheduledTimeoutsState.get(timerId);\n                if (state === undefined) {\n                    throw new Error('The timer is in an undefined state.');\n                }\n                if (state === symbol) {\n                    // A timeout can be savely deleted because it is only called once.\n                    scheduledTimeoutsState.delete(timerId);\n                    func(...args);\n                }\n            });\n            return timerId;\n        };\n    }\n});\nexport const load = (url) => {\n    const worker = new Worker(url);\n    return wrap(worker);\n};\n//# sourceMappingURL=module.js.map","import { PORT_MAP } from './port-map';\nexport const extendBrokerImplementation = (partialBrokerImplementation) => ({\n    ...partialBrokerImplementation,\n    connect: ({ call }) => {\n        return async () => {\n            const { port1, port2 } = new MessageChannel();\n            const portId = await call('connect', { port: port1 }, [port1]);\n            PORT_MAP.set(port2, portId);\n            return port2;\n        };\n    },\n    disconnect: ({ call }) => {\n        return async (port) => {\n            const portId = PORT_MAP.get(port);\n            if (portId === undefined) {\n                throw new Error('The given port is not connected.');\n            }\n            await call('disconnect', { portId });\n        };\n    },\n    isSupported: ({ call }) => {\n        return () => call('isSupported');\n    }\n});\n//# sourceMappingURL=extend-broker-implementation.js.map","import { load } from 'worker-timers-broker';\nimport { createLoadOrReturnBroker } from './factories/load-or-return-broker';\nimport { worker } from './worker/worker';\nconst loadOrReturnBroker = createLoadOrReturnBroker(load, worker);\nexport const clearInterval = (timerId) => loadOrReturnBroker().clearInterval(timerId);\nexport const clearTimeout = (timerId) => loadOrReturnBroker().clearTimeout(timerId);\nexport const setInterval = (...args) => loadOrReturnBroker().setInterval(...args);\nexport const setTimeout = (...args) => loadOrReturnBroker().setTimeout(...args);\n//# sourceMappingURL=module.js.map","export const createLoadOrReturnBroker = (loadBroker, worker) => {\n    let broker = null;\n    return () => {\n        if (broker !== null) {\n            return broker;\n        }\n        const blob = new Blob([worker], { type: 'application/javascript; charset=utf-8' });\n        const url = URL.createObjectURL(blob);\n        broker = loadBroker(url);\n        // Bug #1: Edge up until v18 didn't like the URL to be revoked directly.\n        setTimeout(() => URL.revokeObjectURL(url));\n        return broker;\n    };\n};\n//# sourceMappingURL=load-or-return-broker.js.map","// This is the minified and stringified code of the worker-timers-worker package.\nexport const worker = `(()=>{var e={455:function(e,t){!function(e){\"use strict\";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,s=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<s?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*s);return e(r,i)}if(r.size>n)throw new Error(\"Congratulations, you created a collection of unique numbers which uses all available integers!\");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,u=r(i),c=a(u,i),l=t(c);e.addUniqueNumber=l,e.generateUniqueNumber=c}(t)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{\"use strict\";const e=-32603,t=-32602,n=-32601,o=(e,t)=>Object.assign(new Error(e),{status:t}),s=t=>o('The handler of the method called \"'.concat(t,'\" returned an unexpected result.'),e),a=(t,r)=>async({data:{id:a,method:i,params:u}})=>{const c=r[i];try{if(void 0===c)throw(e=>o('The requested method called \"'.concat(e,'\" is not supported.'),n))(i);const r=void 0===u?c():c(u);if(void 0===r)throw(t=>o('The handler of the method called \"'.concat(t,'\" returned no required result.'),e))(i);const l=r instanceof Promise?await r:r;if(null===a){if(void 0!==l.result)throw s(i)}else{if(void 0===l.result)throw s(i);const{result:e,transferables:r=[]}=l;t.postMessage({id:a,result:e},r)}}catch(e){const{message:r,status:n=-32603}=e;t.postMessage({error:{code:n,message:r},id:a})}};var i=r(455);const u=new Map,c=(e,r,n)=>({...r,connect:({port:t})=>{t.start();const n=e(t,r),o=(0,i.generateUniqueNumber)(u);return u.set(o,()=>{n(),t.close(),u.delete(o)}),{result:o}},disconnect:({portId:e})=>{const r=u.get(e);if(void 0===r)throw(e=>o('The specified parameter called \"portId\" with the given value \"'.concat(e,'\" does not identify a port connected to this worker.'),t))(e);return r(),{result:null}},isSupported:async()=>{if(await new Promise(e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=({data:t})=>e(null!==t),n.postMessage(t,[t])})){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),l=(e,t,r=()=>!0)=>{const n=c(l,t,r),o=a(e,n);return e.addEventListener(\"message\",o),()=>e.removeEventListener(\"message\",o)},d=(e,t)=>r=>{const n=t.get(r);if(void 0===n)return Promise.resolve(!1);const[o,s]=n;return e(o),t.delete(r),s(!1),Promise.resolve(!0)},f=(e,t,r,n)=>(o,s,a)=>{const i=o+s-t.timeOrigin,u=i-t.now();return new Promise(t=>{e.set(a,[r(n,u,i,e,t,a),t])})},m=new Map,h=d(globalThis.clearTimeout,m),p=new Map,v=d(globalThis.clearTimeout,p),w=((e,t)=>{const r=(n,o,s,a)=>{const i=n-e.now();i>0?o.set(a,[t(r,i,n,o,s,a),s]):(o.delete(a),s(!0))};return r})(performance,globalThis.setTimeout),g=f(m,performance,globalThis.setTimeout,w),T=f(p,performance,globalThis.setTimeout,w);l(self,{clear:async({timerId:e,timerType:t})=>({result:await(\"interval\"===t?h(e):v(e))}),set:async({delay:e,now:t,timerId:r,timerType:n})=>({result:await(\"interval\"===n?g:T)(e,t,r)})})})()})();`; // tslint:disable-line:max-line-length\n//# sourceMappingURL=worker.js.map","import { clearTimeout, setTimeout } from 'worker-timers';\n\nexport const enum SchedulerKind {\n    animationFrame,\n    timeout,\n}\n\nexport interface Scheduler {\n    schedule(): void;\n    cancel(): void;\n\n    isScheduled(): boolean;\n    getKind(): SchedulerKind;\n}\n\nexport class AnimationFrameScheduler implements Scheduler {\n    constructor(private callback: (timestamp: number) => void) {}\n\n    schedule(): void {\n        if (this.handle !== undefined) return;\n\n        this.handle = requestAnimationFrame((timestamp) => {\n            this.handle = undefined;\n            this.callback(timestamp);\n        });\n    }\n\n    cancel(): void {\n        if (this.handle === undefined) return;\n\n        cancelAnimationFrame(this.handle);\n        this.handle = undefined;\n    }\n\n    isScheduled(): boolean {\n        return this.handle !== undefined;\n    }\n\n    getKind(): SchedulerKind {\n        return SchedulerKind.animationFrame;\n    }\n\n    private handle: number | undefined;\n}\n\nexport class TimeoutScheduler implements Scheduler {\n    constructor(\n        private callback: (timestamp: number) => void,\n        private fps = 60,\n    ) {}\n\n    schedule(): void {\n        if (this.handle !== undefined) return;\n\n        const now = performance.now();\n        const nextTick = (Math.ceil((now / 1000) * this.fps) * 1000) / this.fps;\n\n        this.handle = setTimeout(\n            () => {\n                this.handle = undefined;\n                this.callback(performance.now());\n            },\n            Math.max(nextTick - now, 0),\n        );\n    }\n\n    cancel(): void {\n        if (this.handle === undefined) return;\n\n        clearTimeout(this.handle);\n        this.handle = undefined;\n    }\n\n    isScheduled(): boolean {\n        return this.handle !== undefined;\n    }\n\n    getKind(): SchedulerKind {\n        return SchedulerKind.timeout;\n    }\n\n    private handle: number | undefined;\n}\n","import { SerialTransport } from '@common/bridge/Cloudpilot';\nimport { ReceivePayload, SerialPort } from '@common/serial/SerialPort';\nimport { Event } from 'microevent.ts';\n\nconst MAX_IRDA_FRAME_BUFFER = 1024;\n\nexport class SerialPortImpl implements SerialPort {\n    bind(transport: SerialTransport): void {\n        if (this.transport === transport) return;\n\n        this.unbind();\n\n        transport.frameCompleteEvent.addHandler(this.onFrameComplete);\n        transport.SetModeSync(this.isSync);\n\n        this.transport = transport;\n    }\n\n    unbind(): void {\n        if (!this.transport) return;\n\n        this.transport.frameCompleteEvent.removeHandler(this.onFrameComplete);\n        this.transport = undefined;\n    }\n\n    send(data: Uint8Array | undefined, isFrameComplete: boolean): void {\n        if (!this.transport) return;\n\n        if (!this.transport.IsOpen() && this.transport.GetModeSync()) {\n            this.receiveEvent.dispatch({ data: undefined, isFrameComplete: true });\n            return;\n        }\n\n        this.transport.Send(data, isFrameComplete);\n        setTimeout(() => this.dispatchEvent.dispatch(), 0);\n    }\n\n    setModeSync(modeSync: boolean): void {\n        this.isSync = modeSync;\n        this.transport?.SetModeSync(modeSync);\n    }\n\n    getModeSync(): boolean {\n        return this.transport?.GetModeSync() ?? false;\n    }\n\n    dispatch(): void {\n        if (!this.transport) return;\n\n        const bytesPending = this.transport.RxBytesPending();\n        if (bytesPending === 0) return;\n        if (this.transport.GetModeSync() && bytesPending < MAX_IRDA_FRAME_BUFFER) return;\n\n        this.receiveEvent.dispatch({\n            data: this.transport.Receive(),\n            isFrameComplete: this.transport.IsFrameComplete(),\n        });\n    }\n\n    private onFrameComplete = () => {\n        if (!this.transport) return;\n\n        this.receiveEvent.dispatch({\n            data: this.transport.Receive(),\n            isFrameComplete: this.transport.IsFrameComplete(),\n        });\n    };\n\n    receiveEvent = new Event<ReceivePayload>();\n    dispatchEvent = new Event<void>();\n\n    private transport: SerialTransport | undefined;\n    private isSync = false;\n}\n","const crc32Table = new Uint32Array([\n    0x00000000, 0x77073096, 0xee0e612c, 0x990951ba, 0x076dc419, 0x706af48f, 0xe963a535, 0x9e6495a3, 0x0edb8832,\n    0x79dcb8a4, 0xe0d5e91e, 0x97d2d988, 0x09b64c2b, 0x7eb17cbd, 0xe7b82d07, 0x90bf1d91, 0x1db71064, 0x6ab020f2,\n    0xf3b97148, 0x84be41de, 0x1adad47d, 0x6ddde4eb, 0xf4d4b551, 0x83d385c7, 0x136c9856, 0x646ba8c0, 0xfd62f97a,\n    0x8a65c9ec, 0x14015c4f, 0x63066cd9, 0xfa0f3d63, 0x8d080df5, 0x3b6e20c8, 0x4c69105e, 0xd56041e4, 0xa2677172,\n    0x3c03e4d1, 0x4b04d447, 0xd20d85fd, 0xa50ab56b, 0x35b5a8fa, 0x42b2986c, 0xdbbbc9d6, 0xacbcf940, 0x32d86ce3,\n    0x45df5c75, 0xdcd60dcf, 0xabd13d59, 0x26d930ac, 0x51de003a, 0xc8d75180, 0xbfd06116, 0x21b4f4b5, 0x56b3c423,\n    0xcfba9599, 0xb8bda50f, 0x2802b89e, 0x5f058808, 0xc60cd9b2, 0xb10be924, 0x2f6f7c87, 0x58684c11, 0xc1611dab,\n    0xb6662d3d, 0x76dc4190, 0x01db7106, 0x98d220bc, 0xefd5102a, 0x71b18589, 0x06b6b51f, 0x9fbfe4a5, 0xe8b8d433,\n    0x7807c9a2, 0x0f00f934, 0x9609a88e, 0xe10e9818, 0x7f6a0dbb, 0x086d3d2d, 0x91646c97, 0xe6635c01, 0x6b6b51f4,\n    0x1c6c6162, 0x856530d8, 0xf262004e, 0x6c0695ed, 0x1b01a57b, 0x8208f4c1, 0xf50fc457, 0x65b0d9c6, 0x12b7e950,\n    0x8bbeb8ea, 0xfcb9887c, 0x62dd1ddf, 0x15da2d49, 0x8cd37cf3, 0xfbd44c65, 0x4db26158, 0x3ab551ce, 0xa3bc0074,\n    0xd4bb30e2, 0x4adfa541, 0x3dd895d7, 0xa4d1c46d, 0xd3d6f4fb, 0x4369e96a, 0x346ed9fc, 0xad678846, 0xda60b8d0,\n    0x44042d73, 0x33031de5, 0xaa0a4c5f, 0xdd0d7cc9, 0x5005713c, 0x270241aa, 0xbe0b1010, 0xc90c2086, 0x5768b525,\n    0x206f85b3, 0xb966d409, 0xce61e49f, 0x5edef90e, 0x29d9c998, 0xb0d09822, 0xc7d7a8b4, 0x59b33d17, 0x2eb40d81,\n    0xb7bd5c3b, 0xc0ba6cad, 0xedb88320, 0x9abfb3b6, 0x03b6e20c, 0x74b1d29a, 0xead54739, 0x9dd277af, 0x04db2615,\n    0x73dc1683, 0xe3630b12, 0x94643b84, 0x0d6d6a3e, 0x7a6a5aa8, 0xe40ecf0b, 0x9309ff9d, 0x0a00ae27, 0x7d079eb1,\n    0xf00f9344, 0x8708a3d2, 0x1e01f268, 0x6906c2fe, 0xf762575d, 0x806567cb, 0x196c3671, 0x6e6b06e7, 0xfed41b76,\n    0x89d32be0, 0x10da7a5a, 0x67dd4acc, 0xf9b9df6f, 0x8ebeeff9, 0x17b7be43, 0x60b08ed5, 0xd6d6a3e8, 0xa1d1937e,\n    0x38d8c2c4, 0x4fdff252, 0xd1bb67f1, 0xa6bc5767, 0x3fb506dd, 0x48b2364b, 0xd80d2bda, 0xaf0a1b4c, 0x36034af6,\n    0x41047a60, 0xdf60efc3, 0xa867df55, 0x316e8eef, 0x4669be79, 0xcb61b38c, 0xbc66831a, 0x256fd2a0, 0x5268e236,\n    0xcc0c7795, 0xbb0b4703, 0x220216b9, 0x5505262f, 0xc5ba3bbe, 0xb2bd0b28, 0x2bb45a92, 0x5cb36a04, 0xc2d7ffa7,\n    0xb5d0cf31, 0x2cd99e8b, 0x5bdeae1d, 0x9b64c2b0, 0xec63f226, 0x756aa39c, 0x026d930a, 0x9c0906a9, 0xeb0e363f,\n    0x72076785, 0x05005713, 0x95bf4a82, 0xe2b87a14, 0x7bb12bae, 0x0cb61b38, 0x92d28e9b, 0xe5d5be0d, 0x7cdcefb7,\n    0x0bdbdf21, 0x86d3d2d4, 0xf1d4e242, 0x68ddb3f8, 0x1fda836e, 0x81be16cd, 0xf6b9265b, 0x6fb077e1, 0x18b74777,\n    0x88085ae6, 0xff0f6a70, 0x66063bca, 0x11010b5c, 0x8f659eff, 0xf862ae69, 0x616bffd3, 0x166ccf45, 0xa00ae278,\n    0xd70dd2ee, 0x4e048354, 0x3903b3c2, 0xa7672661, 0xd06016f7, 0x4969474d, 0x3e6e77db, 0xaed16a4a, 0xd9d65adc,\n    0x40df0b66, 0x37d83bf0, 0xa9bcae53, 0xdebb9ec5, 0x47b2cf7f, 0x30b5ffe9, 0xbdbdf21c, 0xcabac28a, 0x53b39330,\n    0x24b4a3a6, 0xbad03605, 0xcdd70693, 0x54de5729, 0x23d967bf, 0xb3667a2e, 0xc4614ab8, 0x5d681b02, 0x2a6f2b94,\n    0xb40bbe37, 0xc30c8ea1, 0x5a05df1b, 0x2d02ef8d,\n]);\n\nexport function crc32(data: ArrayLike<number>): number {\n    let crc = ~0;\n\n    for (let i = 0; i < data.length; i++) {\n        crc = crc32Table[(crc ^ data[i]) & 0xff] ^ (crc >>> 8);\n    }\n\n    return ~crc;\n}\n","export class Timed {\n    reset() {\n        this.timer = 0;\n    }\n\n    exec<T>(fn: () => T): T {\n        const start = performance.now();\n\n        try {\n            return fn();\n        } finally {\n            this.timer += performance.now() - start;\n        }\n    }\n\n    get(): number {\n        return this.timer;\n    }\n\n    private timer = 0;\n}\n","import { Cloudpilot } from '@common/bridge/Cloudpilot';\nimport { crc32 } from '@common/helper/crc';\nimport { Timed } from '@common/helper/timed';\nimport { SnapshotStatistics } from '@common/model/SnapshotStatistics';\nimport { Event } from 'microevent.ts';\n\nimport { Snapshot, SnapshotContainer } from '../Snapshot';\n\ntype Writeable<T> = { -readonly [P in keyof T]: T[P] };\n\nconst enum SnapshotState {\n    idle = 'idle',\n    scheduled = 'scheduled',\n    materialized = 'materialized',\n}\n\nexport class SnapshotContainerImpl implements SnapshotContainer {\n    constructor(private cloudpilotInstance: Cloudpilot) {}\n\n    initializeMemory(): void {\n        const memory = this.cloudpilotInstance.getMemory32();\n        const pageCountTotal = memory.length >>> 8;\n\n        this.snapshotMemory = {\n            pageSize: 1024 >>> 2,\n            pageCount: 0,\n            pageCountTotal,\n            pages: new Uint32Array(pageCountTotal),\n            offsets: new Uint32Array(pageCountTotal),\n            pageData: memory,\n        };\n    }\n\n    schedule(withCrc: boolean): this {\n        if (this.state !== SnapshotState.idle) throw new Error('snapshot already in progress');\n\n        this.state = SnapshotState.scheduled;\n        this.memoryCrcCheck = withCrc;\n\n        this.timed.reset();\n\n        this.timestampStart = Date.now();\n\n        return this;\n    }\n\n    isIdle(): boolean {\n        return this.state === SnapshotState.idle;\n    }\n\n    getStorageKey(): string | undefined {\n        return this.storageKey;\n    }\n\n    materialize = (): boolean =>\n        this.timed.exec(() => {\n            if (this.cloudpilotInstance.isSuspended()) {\n                this.state = SnapshotState.idle;\n                return false;\n            }\n\n            switch (this.state) {\n                case SnapshotState.scheduled:\n                    break;\n\n                case SnapshotState.materialized:\n                    this.mergeBack();\n                    break;\n\n                default:\n                    throw new Error(`bad snapshot state in materialize: ${this.state}`);\n            }\n\n            if (!this.snapshotMemory) throw new Error('snapshot not initialized');\n            this.materializeSnapshot(\n                this.snapshotMemory,\n                this.cloudpilotInstance.getDirtyPages(),\n                this.cloudpilotInstance.getMemory32(),\n            );\n            this.updateMemoryCrc();\n\n            this.size = this.snapshotMemory.pageCount * this.snapshotMemory.pageSize * 4;\n\n            const storageKey = this.cloudpilotInstance.getMountedKey() || undefined;\n            this.updateSnapshotStorage(storageKey);\n\n            if (this.snapshotStorage) {\n                if (this.storageKey === undefined) throw new Error('unreachable');\n\n                const dirtyPages = this.cloudpilotInstance.getCardDirtyPages(this.storageKey);\n                const data = this.cloudpilotInstance.getCardData(this.storageKey);\n                if (dirtyPages === undefined || data === undefined) {\n                    throw new Error(`storage key ${this.storageKey} not registered`);\n                }\n\n                this.materializeSnapshot(this.snapshotStorage, dirtyPages, data);\n\n                this.size += this.snapshotStorage.pageCount * this.snapshotStorage.pageSize * 4;\n            }\n\n            this.savestate = this.cloudpilotInstance.saveState() ? this.cloudpilotInstance.getSavestate() : undefined;\n            this.size += this.savestate?.length ?? 0;\n\n            this.state = SnapshotState.materialized;\n            return true;\n        });\n\n    async refresh(): Promise<void> {}\n\n    release(persistenceSuccess: boolean, timeBlocking: number, timeBackground: number): void {\n        try {\n            this.timed.exec(() => {\n                const oldState = this.state;\n                this.state = SnapshotState.idle;\n\n                if (oldState !== SnapshotState.materialized) return;\n\n                if (!persistenceSuccess) this.mergeBack();\n            });\n\n            this.snapshotDoneEvent.dispatch({\n                success: persistenceSuccess,\n                size: this.size,\n                timeBlocking: timeBlocking + this.timed.get(),\n                timeTotal: timeBlocking + timeBackground + this.timed.get(),\n                timestamp: this.timestampStart,\n            });\n        } finally {\n            this.snapshotReleaseEvent.dispatch();\n        }\n    }\n\n    getSnapshotMemory(): Snapshot {\n        if (!this.snapshotMemory) throw new Error('snapshot not initialized');\n        if (this.state !== SnapshotState.materialized) throw new Error('snapshot not materialized');\n\n        return this.snapshotMemory;\n    }\n\n    getSnapshotNand(): Snapshot | undefined {\n        return undefined;\n    }\n\n    getSnapshotStorage(): Snapshot | undefined {\n        if (this.state !== SnapshotState.materialized) throw new Error('snapshot not materialized');\n\n        return this.snapshotStorage;\n    }\n\n    getSavestate(): Uint8Array {\n        if (this.state !== SnapshotState.materialized || !this.savestate) throw new Error('snapshot not materialized');\n\n        return this.savestate;\n    }\n\n    getMemoryCrc(): number | undefined {\n        return this.memoryCrc;\n    }\n\n    private mergeBackSnapshot(snapshot: Snapshot, dirtyPages: Uint8Array): void {\n        for (let i = 0; i < snapshot.pageCount; i++) {\n            const pageIndex = snapshot.pages[i];\n\n            dirtyPages[pageIndex >>> 3] |= 1 << (pageIndex & 0x07);\n        }\n    }\n\n    private mergeBack(): void {\n        if (!this.snapshotMemory) throw new Error('snapshot not materialized');\n        this.mergeBackSnapshot(this.snapshotMemory, this.cloudpilotInstance.getDirtyPages());\n\n        if (this.snapshotStorage) {\n            if (this.storageKey === undefined) throw new Error('unreachable');\n\n            const dirtyPages = this.cloudpilotInstance.getCardDirtyPages(this.storageKey);\n            if (dirtyPages === undefined) {\n                console.warn(\n                    `seems like storage ${this.storageKey} was ejected; nothing to merge back, changes are lost`,\n                );\n            } else {\n                this.mergeBackSnapshot(this.snapshotStorage, dirtyPages);\n            }\n        }\n    }\n\n    private materializeSnapshot(snapshot: Writeable<Snapshot>, dirtyPages: Uint8Array, data: Uint32Array): void {\n        const { pageCountTotal, pageSize, pages, offsets } = snapshot;\n\n        let pageCount = 0;\n        let iPage = 0;\n\n        for (let i = 0; i < dirtyPages.length; i++) {\n            const bitfield = dirtyPages[i];\n            dirtyPages[i] = 0;\n\n            if (bitfield === 0) {\n                iPage += 8;\n                continue;\n            }\n\n            for (let mask = 1; mask < 0x0100; mask <<= 1) {\n                if (iPage >= pageCountTotal) break;\n\n                if (bitfield & mask) {\n                    pages[pageCount] = iPage;\n                    offsets[pageCount] = iPage * pageSize;\n\n                    pageCount++;\n                }\n\n                iPage++;\n            }\n        }\n\n        snapshot.pageCount = pageCount;\n        snapshot.pageData = data;\n    }\n\n    private updateMemoryCrc(): void {\n        if (this.memoryCrcCheck) {\n            const memory = this.cloudpilotInstance.getMemory32();\n\n            this.memoryCrc = crc32(new Uint8Array(memory.buffer, memory.byteOffset, memory.byteLength));\n        } else {\n            this.memoryCrc = undefined;\n        }\n    }\n\n    private updateSnapshotStorage(storageKey: string | undefined): void {\n        if (this.storageKey === storageKey) return;\n\n        this.storageKey = storageKey;\n        this.snapshotStorage = undefined;\n\n        if (storageKey === undefined) return;\n\n        const data = this.cloudpilotInstance.getCardData(storageKey);\n        if (!data) throw new Error(`storage key ${storageKey} not registered`);\n\n        const pageCountTotal = data.length >>> 11;\n\n        this.snapshotStorage = {\n            pageSize: 8192 >>> 2,\n            pageCount: 0,\n            pageCountTotal,\n            pages: new Uint32Array(pageCountTotal),\n            offsets: new Uint32Array(pageCountTotal),\n            pageData: data,\n        };\n    }\n\n    snapshotDoneEvent = new Event<SnapshotStatistics>();\n    snapshotReleaseEvent = new Event<void>();\n\n    private state = SnapshotState.idle;\n    private memoryCrcCheck = false;\n    private memoryCrc: number | undefined;\n\n    private snapshotMemory: Writeable<Snapshot> | undefined;\n    private snapshotStorage: Writeable<Snapshot> | undefined;\n    private savestate: Uint8Array | undefined;\n    private storageKey: string | undefined;\n\n    private timed = new Timed();\n    private timestampStart = 0;\n    private size = 0;\n}\n","// The embedded build needs this for some incomprehensible reason.\n/// <reference lib=\"dom\" />\nimport { Cloudpilot, DbInstallResult, PalmButton, PwmUpdate, SuspendKind } from '@common/bridge/Cloudpilot';\nimport { Average } from '@common/helper/Average';\nimport { Fifo } from '@common/helper/Fifo';\nimport { deviceDimensions } from '@common/helper/deviceProperties';\nimport { GRAYSCALE_PALETTE_RGBA } from '@common/helper/palette';\nimport { AnimationFrameScheduler, Scheduler, SchedulerKind, TimeoutScheduler } from '@common/helper/scheduler';\nimport { DeviceId } from '@common/model/DeviceId';\nimport { EmulationStatisticsCloudpilot } from '@common/model/EmulationStatistics';\nimport { SnapshotStatistics } from '@common/model/SnapshotStatistics';\nimport { SerialPort } from '@common/serial/SerialPort';\nimport { Executor } from '@common/service/AbstractEmulationService';\nimport { Event, EventInterface } from 'microevent.ts';\n\nimport { BackupResult, EngineCloudpilot, FullState, StorageCardProvider } from '../Engine';\nimport { EngineSettings } from '../EngineSettings';\nimport { SnapshotContainer } from '../Snapshot';\nimport { SerialPortImpl } from './SerialPort';\nimport { SnapshotContainerImpl } from './Snapshot';\n\nconst PWM_FIFO_SIZE = 10;\nconst SPEED_AVERAGE_N = 20;\nconst TIME_PER_FRAME_AVERAGE_N = 60;\nconst SERIAL_SYNC_TIMEOUT_MSEC = 250;\nconst MIN_FPS = 30;\nconst DUMMY_SPEED = 1000;\nconst MIN_MILLISECONDS_PER_PWM_UPDATE = 10;\n\nexport class EngineCloudpilotImpl implements EngineCloudpilot {\n    readonly type = 'cloudpilot';\n\n    constructor(\n        private cloudpilotInstance: Cloudpilot,\n        private clandestineExecute: Executor,\n        private settings: EngineSettings,\n    ) {\n        this.snapshotContainer = new SnapshotContainerImpl(cloudpilotInstance);\n        this.snapshotContainer.snapshotReleaseEvent.addHandler(this.onSnapshotRelease);\n\n        cloudpilotInstance.clearExternalStorage();\n\n        this.serialPortIR.bind(cloudpilotInstance.getTransportIR());\n        this.serialPortSerial.bind(cloudpilotInstance.getTransportSerial());\n\n        this.serialPortIR.dispatchEvent.addHandler(this.onSerialPortDispatch);\n        this.serialPortSerial.dispatchEvent.addHandler(this.onSerialPortDispatch);\n\n        cloudpilotInstance.pwmUpdateEvent.addHandler(this.onPwmUpdate);\n    }\n\n    supportsKeyboardIO(): boolean {\n        return true;\n    }\n\n    shutdown(): void {\n        this.serialPortIR.unbind();\n        this.serialPortSerial.unbind();\n\n        this.serialPortIR.dispatchEvent.removeHandler(this.onSerialPortDispatch);\n        this.serialPortSerial.dispatchEvent.removeHandler(this.onSerialPortDispatch);\n\n        this.cloudpilotInstance.pwmUpdateEvent.removeHandler(this.onPwmUpdate);\n    }\n\n    get fatalError(): EventInterface<Error> {\n        return this.cloudpilotInstance.fatalErrorEvent;\n    }\n\n    get snapshotDoneEvent(): EventInterface<SnapshotStatistics> {\n        return this.snapshotContainer.snapshotDoneEvent;\n    }\n\n    penDown(x: number, y: number): void {\n        this.cloudpilotInstance.queuePenMove(x, y);\n    }\n\n    penUp(): void {\n        this.cloudpilotInstance.queuePenUp();\n    }\n\n    buttonDown(button: PalmButton): void {\n        this.cloudpilotInstance.queueButtonDown(button);\n    }\n\n    buttonUp(button: PalmButton): void {\n        this.cloudpilotInstance.queueButtonUp(button);\n    }\n\n    keyStroke(key: number): void {\n        this.cloudpilotInstance.queueKeyboardEvent(key);\n    }\n\n    async reset(): Promise<void> {\n        this.cloudpilotInstance.reset();\n    }\n\n    async resetNoExtensions(): Promise<void> {\n        this.cloudpilotInstance.resetNoExtensions();\n    }\n\n    async resetHard(): Promise<void> {\n        this.cloudpilotInstance.resetHard();\n    }\n\n    isRunning(): boolean {\n        return this.running;\n    }\n\n    isPowerOff(): boolean {\n        return this.powerOff;\n    }\n\n    isLcdEnabled(): boolean {\n        return !this.isPowerOff();\n    }\n\n    isUIInitialized(): boolean {\n        return this.uiInitialized;\n    }\n\n    isSuspended(): boolean {\n        return this.suspended;\n    }\n\n    isSlowdown(): boolean {\n        return this.emulationSpeed < 1;\n    }\n\n    getDeviceId(): DeviceId {\n        return this.deviceId ?? DeviceId.m515;\n    }\n\n    async openSession(\n        rom: Uint8Array,\n        device: DeviceId,\n        nand?: Uint8Array,\n        memory?: Uint8Array,\n        state?: Uint8Array,\n        card?: StorageCardProvider,\n    ): Promise<boolean> {\n        if (nand) throw new Error('Cloudpilot devices do not support NAND');\n\n        let memoryLoaded = false;\n\n        this.cloudpilotInstance.clearExternalStorage();\n        if (card) await card.load(this);\n\n        if (!this.cloudpilotInstance.initializeSession(rom, device)) return false;\n\n        if (memory) {\n            if (memory.length % 4 !== 0) {\n                console.warn(`memory size is not a multiple of 4; ignoring image`);\n            } else {\n                memoryLoaded = this.cloudpilotInstance.loadMemory(\n                    new Uint32Array(memory.buffer, memory.byteOffset, memory.length >>> 2),\n                );\n\n                if (!memoryLoaded) {\n                    console.warn('failed to load memory');\n                }\n            }\n        }\n\n        if (memoryLoaded && state) {\n            this.cloudpilotInstance.loadState(state);\n        }\n\n        this.cloudpilotInstance.remountCards();\n        if (this.cloudpilotInstance.getMountedKey() === undefined && card && !this.cloudpilotInstance.remountFailed()) {\n            // Card was not remounted, and there was no error? -> card was not mounted in the last saved state of the\n            // emulator, so mount it now.\n            this.cloudpilotInstance.mountCard(card.storageKey);\n        }\n\n        this.deviceId = device;\n\n        this.speedAverage.reset(1);\n        this.powerOff = this.cloudpilotInstance.isPowerOff();\n        this.uiInitialized = this.cloudpilotInstance.isUiInitialized();\n\n        const dimensions = deviceDimensions(device);\n        this.canvasTmp.width = dimensions.width;\n        this.canvasTmp.height = dimensions.height;\n\n        this.snapshotContainer.initializeMemory();\n\n        return true;\n    }\n\n    async resume(): Promise<void> {\n        if (this.running) return;\n\n        this.clockEmulator = performance.now();\n\n        this.schedule();\n\n        this.running = true;\n        this.resetFPS();\n    }\n\n    async stop(): Promise<void> {\n        if (!this.running) return;\n\n        this.scheduler.cancel();\n\n        if (this.advanceEmulationHandle !== undefined) {\n            window.clearTimeout(this.advanceEmulationHandle);\n\n            this.advanceEmulationHandle = undefined;\n        }\n\n        this.running = false;\n    }\n\n    processTimesliceNow(): void {\n        this.advanceEmulation(performance.now());\n    }\n\n    async requestSnapshot(): Promise<SnapshotContainer> {\n        return this.snapshotContainer.schedule(this.settings.memoryCrc);\n    }\n\n    async waitForPendingSnapshot(): Promise<void> {\n        if (this.snapshotContainer.isIdle()) return;\n\n        return new Promise((resolve) => this.snapshotReleaseCallbacks.push(resolve));\n    }\n\n    blitFrame(canvas: HTMLCanvasElement): void {\n        if (!this.cloudpilotInstance.isScreenDirty() || this.cloudpilotInstance.isPowerOff()) return;\n\n        const frame = this.cloudpilotInstance.getFrame();\n\n        if (!frame.hasChanges) {\n            return;\n        }\n\n        if (frame.lines * frame.scaleY === canvas.height && frame.lineWidth * frame.scaleX === canvas.width) {\n            if (!this.imageData || this.imageData.width !== frame.lineWidth || this.imageData.height !== frame.lines) {\n                this.imageData = new ImageData(frame.lineWidth, frame.lines);\n            }\n\n            const imageData32 = new Uint32Array(this.imageData.data.buffer);\n\n            switch (frame.bpp) {\n                case 1: {\n                    const fg = GRAYSCALE_PALETTE_RGBA[15];\n                    const bg = GRAYSCALE_PALETTE_RGBA[0];\n                    let iDest = 0;\n\n                    for (let y = frame.firstDirtyLine; y <= frame.lastDirtyLine; y++) {\n                        const offsetSrc = y * frame.bytesPerLine;\n\n                        for (let i = frame.margin; i < frame.lineWidth + frame.margin; i++) {\n                            imageData32[iDest++] =\n                                frame.buffer[offsetSrc + (i >>> 3)] & (0x80 >>> (i & 0x07)) ? fg : bg;\n                        }\n                    }\n\n                    break;\n                }\n\n                case 2: {\n                    const mapping = this.cloudpilotInstance.getPalette2bitMapping();\n                    const palette = [\n                        GRAYSCALE_PALETTE_RGBA[mapping & 0x000f],\n                        GRAYSCALE_PALETTE_RGBA[(mapping >>> 4) & 0x000f],\n                        GRAYSCALE_PALETTE_RGBA[(mapping >>> 8) & 0x000f],\n                        GRAYSCALE_PALETTE_RGBA[(mapping >>> 12) & 0x000f],\n                    ];\n                    let iDest = 0;\n\n                    for (let y = frame.firstDirtyLine; y <= frame.lastDirtyLine; y++) {\n                        const offsetSrc = y * frame.bytesPerLine;\n\n                        for (let i = frame.margin; i < frame.lineWidth + frame.margin; i++) {\n                            imageData32[iDest++] =\n                                palette[(frame.buffer[offsetSrc + (i >>> 2)] >> (6 - 2 * (i & 0x03))) & 0x03];\n                        }\n                    }\n\n                    break;\n                }\n\n                case 4: {\n                    let iDest = 0;\n\n                    for (let y = frame.firstDirtyLine; y <= frame.lastDirtyLine; y++) {\n                        const offsetSrc = y * frame.bytesPerLine;\n\n                        for (let i = frame.margin; i < frame.lineWidth + frame.margin; i++) {\n                            imageData32[iDest++] =\n                                GRAYSCALE_PALETTE_RGBA[\n                                    (frame.buffer[offsetSrc + (i >>> 1)] >>> (4 - 4 * (i & 0x01))) & 0x0f\n                                ];\n                        }\n                    }\n\n                    break;\n                }\n\n                case 24:\n                    {\n                        const buffer32 = new Uint32Array(\n                            frame.buffer.buffer,\n                            frame.buffer.byteOffset,\n                            frame.buffer.byteLength >>> 2,\n                        );\n\n                        if (frame.margin === 0) {\n                            imageData32\n                                .subarray(0, frame.lineWidth * (frame.lastDirtyLine - frame.firstDirtyLine + 1))\n                                .set(\n                                    buffer32.subarray(\n                                        frame.firstDirtyLine * frame.lineWidth,\n                                        frame.lineWidth * (frame.lastDirtyLine + 1),\n                                    ),\n                                );\n                        } else {\n                            let iDest = 0;\n\n                            for (let y = frame.firstDirtyLine; y <= frame.lastDirtyLine; y++) {\n                                let j = y * (frame.bytesPerLine >>> 2) + frame.margin;\n\n                                for (let x = 0; x < frame.lineWidth; x++) {\n                                    imageData32[iDest++] = buffer32[j++];\n                                }\n                            }\n                        }\n                    }\n\n                    break;\n            }\n        }\n\n        if (!this.imageData) return;\n\n        const scaling = frame.scaleX !== 1 || frame.scaleY !== 1;\n\n        const context = canvas.getContext('2d');\n        const contextTmp = scaling ? this.canvasTmp.getContext('2d') : undefined;\n\n        if (!context || (scaling && !contextTmp)) throw new Error('unable to retrieve rendering context');\n\n        (scaling ? contextTmp! : context).putImageData(\n            this.imageData,\n            0,\n            frame.firstDirtyLine,\n            0,\n            0,\n            frame.lineWidth,\n            frame.lastDirtyLine - frame.firstDirtyLine + 1,\n        );\n\n        if (scaling) {\n            context.imageSmoothingEnabled = false;\n            context.drawImage(\n                this.canvasTmp,\n                0,\n                frame.firstDirtyLine,\n                frame.lineWidth,\n                frame.lastDirtyLine - frame.firstDirtyLine + 1,\n                0,\n                frame.firstDirtyLine * frame.scaleY,\n                frame.lineWidth * frame.scaleX,\n                (frame.lastDirtyLine - frame.firstDirtyLine + 1) * frame.scaleY,\n            );\n        }\n\n        this.cloudpilotInstance.markScreenClean();\n        this.frameCounter++;\n    }\n\n    updateSettings(settings: EngineSettings): void {\n        if (this.cloudpilotInstance.getClipboardIntegration() !== settings.clipboardIntegration) {\n            this.cloudpilotInstance.setClipboardIntegration(settings.clipboardIntegration);\n        }\n\n        if (this.cloudpilotInstance.getNetworkRedirection() !== settings.networkIntegration) {\n            this.cloudpilotInstance.setNetworkRedirection(this.settings.networkIntegration);\n        }\n\n        this.cloudpilotInstance.setHotsyncNameManagement(settings.manageHotsyncName);\n\n        this.settings = settings;\n    }\n\n    allocateCard(key: string, size: number): Uint32Array {\n        if (!this.cloudpilotInstance.allocateCard(key, size)) {\n            throw new Error(`failed to allocate card \"${key}\" @ ${size} bytes`);\n        }\n\n        const data = this.cloudpilotInstance.getCardData(key);\n        if (!data) throw new Error(`failed to get card data for key ${key}`);\n\n        return data;\n    }\n\n    async releaseCard(key: string): Promise<void> {\n        if (!this.cloudpilotInstance.removeCard(key)) {\n            console.warn(`failed to release card for key ${key}`);\n        }\n    }\n\n    async getMountedKey(): Promise<string | undefined> {\n        return this.cloudpilotInstance.getMountedKey();\n    }\n\n    async getCardData(key: string): Promise<Uint32Array | undefined> {\n        return this.cloudpilotInstance.getCardData(key);\n    }\n\n    async mountCard(key: string): Promise<boolean> {\n        return this.cloudpilotInstance.mountCard(key);\n    }\n\n    async getFullState(): Promise<FullState | undefined> {\n        if (this.deviceId === undefined) return undefined;\n\n        this.cloudpilotInstance.saveState();\n\n        return {\n            rom: this.cloudpilotInstance.getRomImage().slice(),\n            memory: this.cloudpilotInstance.getMemory().slice(),\n            savestate: this.cloudpilotInstance.getSavestate().slice(),\n        };\n    }\n\n    getSerialPortSerial(): SerialPort {\n        return this.serialPortSerial;\n    }\n\n    getSerialPortIR(): SerialPort {\n        return this.serialPortIR;\n    }\n\n    getStatistics(): EmulationStatisticsCloudpilot {\n        return {\n            type: 'cloudpilot',\n            hostSpeed: this.speedAverage.calculateAverage(),\n            emulationSpeed: this.emulationSpeed,\n            averageFps: this.calculateFPS(),\n        };\n    }\n\n    getOSVersion(): number {\n        return this.cloudpilotInstance.getOSVersion();\n    }\n\n    async installDb(data: Uint8Array): Promise<DbInstallResult> {\n        return this.cloudpilotInstance.installDb(data);\n    }\n\n    async backup(includeRomDatabases: boolean): Promise<BackupResult | undefined> {\n        return this.cloudpilotInstance.backup(async (dbBackup) => {\n            const failedDatabases: Array<string> = [];\n            dbBackup.Init(includeRomDatabases);\n\n            while (dbBackup.IsInProgress()) {\n                const db = dbBackup.GetCurrentDatabase();\n\n                if (!dbBackup.Save()) failedDatabases.push(db);\n\n                await new Promise((r) => setTimeout(r, 0));\n            }\n\n            const archive = this.cloudpilotInstance.getArchive(dbBackup);\n\n            return archive ? { archive, failedDatabases } : undefined;\n        });\n    }\n\n    async launchAppByName(name: string): Promise<boolean> {\n        return this.cloudpilotInstance.launchAppByName(name);\n    }\n\n    async launchAppByHeader(header: Uint8Array): Promise<boolean> {\n        return this.cloudpilotInstance.launchAppByDbHeader(header);\n    }\n\n    private schedule() {\n        this.scheduler.cancel();\n\n        if (this.settings.schedulerKind !== this.scheduler.getKind()) {\n            this.scheduler =\n                this.settings.schedulerKind === SchedulerKind.animationFrame\n                    ? new AnimationFrameScheduler((timestamp) => this.onSchedule(timestamp))\n                    : new TimeoutScheduler((timestamp) => this.onSchedule(timestamp));\n        }\n\n        this.clandestineExecute(() => this.scheduler.schedule());\n    }\n\n    private resetFPS(): void {\n        this.timePerFrameAverage.reset();\n        this.timestampLastFrame = performance.now();\n    }\n\n    private calculateFPS(): number {\n        const timePerFrame = this.timePerFrameAverage.calculateAverage();\n\n        return timePerFrame && 1000 / timePerFrame;\n    }\n\n    private onPwmUpdate = (pwmUpdate: PwmUpdate) => {\n        if (this.pendingPwmUpdates.count() > 0 && this.pendingPwmUpdates.peekLast()!.frequency < 0) {\n            this.pendingPwmUpdates.replaceLast(pwmUpdate);\n        } else {\n            this.pendingPwmUpdates.push(pwmUpdate);\n        }\n    };\n\n    private onSerialPortDispatch = (): void => {\n        this.processTimesliceNow();\n    };\n\n    private updateEmulationSpeed(currentSpeed: number) {\n        if (currentSpeed >= 1 && this.emulationSpeed >= 1) return;\n\n        // Speed < 1 ? -> bin it in 0.1 .. 0.9\n        const normalizedSpeed = Math.min(Math.max(Math.floor(currentSpeed * 10) / 10, 0.1), 1);\n\n        if (normalizedSpeed <= this.emulationSpeed) {\n            // speed decline is accepted directly\n            this.emulationSpeed = normalizedSpeed;\n        } else {\n            // speed increase is subject to 5% hysteresis\n            this.emulationSpeed = currentSpeed - normalizedSpeed >= 0.05 ? normalizedSpeed : this.emulationSpeed;\n        }\n    }\n\n    private checkAndUpdateHotsyncName(): void {\n        if (!this.cloudpilotInstance) return;\n\n        if (this.deviceHotsyncName === undefined) {\n            this.deviceHotsyncName = this.cloudpilotInstance.getHotsyncName();\n        }\n\n        const configuredHotsyncName = this.settings.hotsyncName;\n\n        if (configuredHotsyncName === undefined) {\n            this.configuredHotsyncNameUpdateEvent.dispatch(this.deviceHotsyncName);\n        } else if (\n            configuredHotsyncName !== this.deviceHotsyncName &&\n            configuredHotsyncName.length <= 40 &&\n            this.cloudpilotInstance.isSetupComplete()\n        ) {\n            this.cloudpilotInstance.setHotsyncName(configuredHotsyncName);\n            this.deviceHotsyncName = configuredHotsyncName;\n        }\n    }\n\n    private advanceEmulation(timestamp: number): void {\n        if (!this.isRunning) return;\n\n        if (timestamp < this.clockEmulator) return;\n\n        if (\n            this.cloudpilotInstance.isSuspended() &&\n            this.cloudpilotInstance.getSuspendKind() === SuspendKind.serialSync &&\n            timestamp - this.serialSyncStartedAt > SERIAL_SYNC_TIMEOUT_MSEC\n        ) {\n            console.log('serial sync timeout, waking emulator');\n            this.cloudpilotInstance.getSuspendContextSerialSync().Cancel();\n        }\n\n        const wasSuspended = this.cloudpilotInstance.isSuspended();\n        let isSuspended = false;\n\n        // Scale the clock by the calculated emulation speed\n        this.cloudpilotInstance.setClockFactor(this.emulationSpeed * this.settings.speed);\n\n        // Limit the time that we try to catch up. This will avoid that we lock onto a low\n        // FPS if the emulation cannot run at full speed\n        if (timestamp - this.clockEmulator > 1000 / MIN_FPS) this.clockEmulator = timestamp - 1000 / MIN_FPS;\n\n        const cyclesToRun = ((timestamp - this.clockEmulator) / 1000) * this.cloudpilotInstance.cyclesPerSecond();\n\n        const timestampBeforeCycle = performance.now();\n\n        let cycles = 0;\n        while (cycles < cyclesToRun) {\n            cycles += this.cloudpilotInstance.runEmulation(Math.ceil(cyclesToRun - cycles));\n\n            if (this.cloudpilotInstance.isSuspended()) {\n                isSuspended = true;\n\n                break;\n            }\n        }\n\n        const virtualTimePassed = (cycles / this.cloudpilotInstance.cyclesPerSecond()) * 1000;\n        const realTimePassed = performance.now() - timestampBeforeCycle;\n\n        // If the emulation runs too slowly the amount of real time that passed will exceed the\n        // emulated time difference. In this case we compensate by advancing the emulated clock\n        // by the actual time difference; otherwise, the differences will pile up,\n        // resulting in jerky emulation. Our dynamic speed correction will make sure that\n        // this does not happen too often.\n        const slizeSizeSeconds = Math.max(virtualTimePassed, realTimePassed);\n        this.clockEmulator += slizeSizeSeconds;\n\n        // Update the speed average. Note that we need to compensate this for the factor\n        // by which we scaled the clock --- the factor represents the ratio for a device\n        // running at ful speed\n        this.speedAverage.push(\n            (virtualTimePassed / (realTimePassed > 0 ? realTimePassed : virtualTimePassed / DUMMY_SPEED)) *\n                this.emulationSpeed,\n        );\n\n        // Normalize the speed and apply hysteresis\n        this.updateEmulationSpeed(this.speedAverage.calculateAverage());\n\n        if (isSuspended && !wasSuspended) {\n            switch (this.cloudpilotInstance.getSuspendKind()) {\n                case SuspendKind.serialSync:\n                    this.serialSyncStartedAt = performance.now();\n                    break;\n\n                default:\n                    this.suspendEvent.dispatch();\n                    break;\n            }\n        }\n\n        const powerOff = this.cloudpilotInstance.isPowerOff();\n        const uiInitialized = this.cloudpilotInstance.isUiInitialized();\n\n        if (powerOff !== this.powerOff || uiInitialized !== this.uiInitialized) {\n            this.powerOff = powerOff;\n            this.uiInitialized = uiInitialized;\n\n            this.palmosStateChangeEvent.dispatch();\n        }\n\n        if (uiInitialized && !powerOff && this.settings.manageHotsyncName && !isSuspended) {\n            this.checkAndUpdateHotsyncName();\n        }\n\n        this.serialPortIR!.dispatch();\n        this.serialPortSerial!.dispatch();\n\n        if (\n            this.settings.automaticSnapshotInterval > 0 &&\n            timestamp - this.lastSnapshotAt > this.settings.automaticSnapshotInterval &&\n            !this.cloudpilotInstance.isSuspended()\n        ) {\n            if (this.snapshotContainer.isIdle()) {\n                this.snapshotEvent.dispatch(this.snapshotContainer.schedule(this.settings.memoryCrc));\n            }\n            this.lastSnapshotAt = timestamp;\n        }\n\n        this.timesliceEvent.dispatch(slizeSizeSeconds);\n    }\n\n    private onSchedule = (timestamp: number) => {\n        if (this.cloudpilotInstance.isScreenDirty()) this.newFrameEvent.dispatch();\n\n        if (\n            this.pendingPwmUpdates.count() > 0 &&\n            timestamp - this.lastPwmUpdateEvent > MIN_MILLISECONDS_PER_PWM_UPDATE\n        ) {\n            this.pwmUpdateEvent.dispatch(this.pendingPwmUpdates.pop()!);\n            this.lastPwmUpdateEvent = timestamp;\n        }\n\n        if (this.advanceEmulationHandle === undefined) {\n            this.advanceEmulationHandle = window.setTimeout(() => {\n                this.advanceEmulationHandle = undefined;\n                this.advanceEmulation(timestamp);\n            }, 0);\n        }\n\n        this.timePerFrameAverage.push(Math.max(0, timestamp - this.timestampLastFrame));\n        this.timestampLastFrame = timestamp;\n\n        this.schedule();\n    };\n\n    private onSnapshotRelease = () => {\n        if (this.snapshotReleaseCallbacks.length === 0) return;\n\n        this.snapshotReleaseCallbacks.forEach((cb) => cb());\n        this.snapshotReleaseCallbacks = [];\n    };\n\n    readonly pwmUpdateEvent = new Event<PwmUpdate>();\n    readonly configuredHotsyncNameUpdateEvent = new Event<string>();\n    readonly newFrameEvent = new Event<void>();\n    readonly timesliceEvent = new Event<number>();\n    readonly suspendEvent = new Event<void>();\n    readonly snapshotEvent = new Event<SnapshotContainer>();\n    readonly palmosStateChangeEvent = new Event<void>();\n\n    private running = false;\n    private powerOff = false;\n    private uiInitialized = false;\n    private suspended = false;\n\n    private emulationSpeed = 1;\n    private speedAverage = new Average(SPEED_AVERAGE_N);\n\n    private timePerFrameAverage = new Average(TIME_PER_FRAME_AVERAGE_N);\n    private timestampLastFrame = 0;\n\n    private frameCounter = 0;\n    private clockEmulator = 0;\n\n    private deviceId: DeviceId | undefined;\n    private deviceHotsyncName: string | undefined;\n\n    private scheduler: Scheduler = new AnimationFrameScheduler((timestamp) => this.onSchedule(timestamp));\n    private advanceEmulationHandle: number | undefined;\n\n    private serialPortIR = new SerialPortImpl();\n    private serialPortSerial = new SerialPortImpl();\n\n    private pendingPwmUpdates = new Fifo<PwmUpdate>(PWM_FIFO_SIZE);\n    private lastPwmUpdateEvent = 0;\n\n    private imageData: ImageData | undefined;\n    private canvasTmp: HTMLCanvasElement = document.createElement('canvas');\n\n    private serialSyncStartedAt = 0;\n\n    private snapshotContainer: SnapshotContainerImpl;\n    private lastSnapshotAt = 0;\n\n    private snapshotReleaseCallbacks: Array<() => void> = [];\n}\n","import { ClientMessageRpcError, ClientMessageRpcSuccess } from './worker/ClientMessage';\nimport { HostMessage, HostMessageRpcCall, HostMessageType } from './worker/HostMessage';\nimport { RpcArgsForMethod, RpcMethod, RpcResultForMethod } from './worker/rpc';\n\ninterface RpcContext<T, E> {\n    resolve(result: T): void;\n    reject(e: E): void;\n}\n\nexport class RpcHost {\n    constructor(private dispatchMessage: (message: HostMessage, transferables?: Array<Transferable>) => void) {}\n\n    call<M extends RpcMethod>(\n        method: M,\n        args: RpcArgsForMethod<M>,\n        transferables?: Array<Transferable>,\n    ): Promise<RpcResultForMethod<M>> {\n        return new Promise((resolve, reject) => {\n            const id = this.nextRpcId++;\n\n            this.pendingCalls.set(id, { resolve, reject });\n\n            this.dispatchMessage(\n                { type: HostMessageType.rpcCall, id, method, args } as HostMessageRpcCall,\n                transferables,\n            );\n        });\n    }\n\n    dispatchRpcMessage(message: ClientMessageRpcError | ClientMessageRpcSuccess): void {\n        switch (message.type) {\n            case 'rpcSuccess':\n                this.getContext(message.id).resolve(message.result);\n                break;\n\n            case 'rpcError':\n                this.getContext(message.id).reject(message.error);\n                break;\n\n            default:\n                break;\n        }\n    }\n\n    private getContext(id: number): RpcContext<unknown, unknown> {\n        const ctx = this.pendingCalls.get(id);\n        if (!ctx) throw new Error(`RPC failed: no context with ID ${id}`);\n\n        this.pendingCalls.delete(id);\n        return ctx;\n    }\n\n    private nextRpcId = 0;\n    private pendingCalls = new Map<number, RpcContext<unknown, unknown>>();\n}\n","import { SnapshotStatistics } from '@common/model/SnapshotStatistics';\nimport { Event } from 'microevent.ts';\n\nimport { Snapshot, SnapshotContainer } from '../Snapshot';\nimport { RpcHost } from './RpcHost';\nimport { HostMessage, HostMessageType } from './worker/HostMessage';\nimport { Snapshot as RemoteSnapshot, UarmSnapshot } from './worker/Snapshot';\n\nfunction getTransferables(snapshot: RemoteSnapshot | undefined): Array<Transferable> {\n    return snapshot ? [snapshot.pagePool, snapshot.scheduledPages] : [];\n}\n\ntype Writeable<T> = { -readonly [P in keyof T]: T[P] };\n\nexport class SnapshotContainerImpl implements SnapshotContainer {\n    constructor(\n        memorySize: number,\n        nandSize: number,\n        private rpcHost: RpcHost,\n        private dispatch: (message: HostMessage, transferrables?: Array<Transferable>) => void,\n    ) {\n        if (memorySize % 1024 !== 0) throw new Error('invalid memory size');\n        if (nandSize % 4224 !== 0) throw new Error('invalid NAND size');\n\n        const memoryPages = memorySize >>> 10;\n        const offsetsMemory = new Uint32Array(memoryPages);\n        for (let i = 0; i < memoryPages; i++) offsetsMemory[i] = i * (1024 >>> 2);\n\n        this.snapshotMemory = {\n            pageCount: 0,\n            pageCountTotal: memoryPages,\n            offsets: offsetsMemory,\n            pages: new Uint32Array(),\n            pageData: new Uint32Array(),\n            pageSize: 1024 >>> 2,\n        };\n\n        const nandPages = (nandSize / 4224) | 0;\n        const offsetsNand = new Uint32Array(nandPages);\n        for (let i = 0; i < nandPages; i++) offsetsNand[i] = i * (4224 >>> 2);\n\n        this.snapshotNand = {\n            pageCount: 0,\n            pageCountTotal: nandPages,\n            offsets: offsetsNand,\n            pages: new Uint32Array(),\n            pageData: new Uint32Array(),\n            pageSize: 4224 >>> 2,\n        };\n    }\n\n    schedule(uarmSnapshot: UarmSnapshot): this {\n        if (this.uarmSnapshot) throw new Error('snapshot already pending');\n\n        if (uarmSnapshot.memory) this.updateSnapshot(this.snapshotMemory, uarmSnapshot.memory);\n        if (uarmSnapshot.nand) this.updateSnapshot(this.snapshotNand, uarmSnapshot.nand);\n        this.updateSnapshotSd(uarmSnapshot);\n\n        this.savestate = new Uint8Array(uarmSnapshot.savestate);\n\n        this.uarmSnapshot = uarmSnapshot;\n\n        return this;\n    }\n\n    materialize(): boolean {\n        if (!this.uarmSnapshot) throw new Error('no pending snapshot');\n\n        return true;\n    }\n\n    async refresh(): Promise<void> {\n        if (!this.uarmSnapshot) throw new Error('no pending snapshot');\n\n        const oldSnapshot = this.uarmSnapshot;\n        this.uarmSnapshot = undefined;\n\n        this.schedule(await this.rpcHost.call('refreshSnapshot', oldSnapshot));\n    }\n\n    release(persistenceSuccess: boolean, timeStorageBlocking: number, timeStorageBackground: number): void {\n        if (!this.uarmSnapshot) throw new Error('no pending snapshot');\n\n        let size =\n            (this.uarmSnapshot.memory?.scheduledPageCount ?? 0) * 1024 +\n            (this.uarmSnapshot.nand?.scheduledPageCount ?? 0) * 4224 +\n            this.uarmSnapshot.savestate.byteLength;\n\n        if (this.uarmSnapshot.sd) size += this.uarmSnapshot.sd.snapshot.scheduledPageCount * 8192;\n\n        this.dispatch(\n            { type: HostMessageType.returnSnapshot, snapshot: this.uarmSnapshot, success: persistenceSuccess },\n            [\n                ...getTransferables(this.uarmSnapshot.memory),\n                ...getTransferables(this.uarmSnapshot.nand),\n                ...getTransferables(this.uarmSnapshot.sd?.snapshot),\n                this.uarmSnapshot.savestate,\n            ],\n        );\n\n        const timeBlocking = this.uarmSnapshot.time;\n        const timeTotal = timeBlocking + timeStorageBackground + timeStorageBlocking;\n        const timestamp = this.uarmSnapshot.timestamp;\n\n        this.uarmSnapshot = undefined;\n        this.snapshotDoneEvent.dispatch({ success: persistenceSuccess, size, timeBlocking, timeTotal, timestamp });\n    }\n\n    getStorageKey(): string | undefined {\n        if (!this.uarmSnapshot) throw new Error('no pending snapshot');\n\n        return this.uarmSnapshot.sd?.key;\n    }\n\n    getSnapshotMemory(): Snapshot | undefined {\n        if (!this.uarmSnapshot) throw new Error('no pending snapshot');\n\n        return this.uarmSnapshot.memory ? this.snapshotMemory : undefined;\n    }\n\n    getSnapshotNand(): Snapshot | undefined {\n        if (!this.uarmSnapshot) throw new Error('no pending snapshot');\n\n        return this.uarmSnapshot.nand ? this.snapshotNand : undefined;\n    }\n\n    getSnapshotStorage(): Snapshot | undefined {\n        if (!this.uarmSnapshot) throw new Error('no pending snapshot');\n\n        return this.uarmSnapshot.sd ? this.snapshotSd : undefined;\n    }\n\n    getMemoryCrc(): number | undefined {\n        if (!this.uarmSnapshot) throw new Error('no pending snapshot');\n\n        return this.uarmSnapshot.memory?.crc;\n    }\n\n    getSavestate(): Uint8Array | undefined {\n        if (!this.uarmSnapshot) throw new Error('no pending snapshot');\n\n        return this.savestate;\n    }\n\n    private updateSnapshot(snapshot: Writeable<Snapshot>, remoteSnapshot: RemoteSnapshot): void {\n        snapshot.pageCount = remoteSnapshot.scheduledPageCount;\n        snapshot.pages = new Uint32Array(remoteSnapshot.scheduledPages);\n        snapshot.pageData = new Uint32Array(remoteSnapshot.pagePool);\n    }\n\n    private updateSnapshotSd(uarmSnapshot: UarmSnapshot): void {\n        if (!uarmSnapshot.sd) return;\n\n        if (!this.snapshotSd) {\n            this.snapshotSd = {\n                pageCount: 0,\n                pageCountTotal: 0,\n                offsets: new Uint32Array(),\n                pages: new Uint32Array(),\n                pageData: new Uint32Array(),\n                pageSize: 8192 >>> 2,\n            };\n        }\n\n        if (this.sdSize !== uarmSnapshot.sd.size) {\n            this.snapshotSd.pageCountTotal = uarmSnapshot.sd.size >>> 13;\n            if (uarmSnapshot.sd.size > this.snapshotSd.pageCountTotal << 13) this.snapshotSd.pageCountTotal++;\n\n            this.snapshotSd.offsets = new Uint32Array(this.snapshotSd.pageCountTotal);\n            for (let i = 0; i < this.snapshotSd.pageCountTotal; i++) this.snapshotSd.offsets[i] = i * (8192 >>> 2);\n\n            this.sdSize = uarmSnapshot.sd.size;\n        }\n\n        this.updateSnapshot(this.snapshotSd, uarmSnapshot.sd.snapshot);\n    }\n\n    snapshotDoneEvent = new Event<SnapshotStatistics>();\n\n    private snapshotMemory: Writeable<Snapshot>;\n    private snapshotNand: Writeable<Snapshot>;\n    private snapshotSd: Writeable<Snapshot> | undefined;\n    private savestate: Uint8Array<ArrayBufferLike> = new Uint8Array();\n    private sdSize = 0;\n\n    private uarmSnapshot: UarmSnapshot | undefined;\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { DeviceId } from '@common/model/DeviceId';\nimport { EmulationStatisticsUarm } from '@common/model/EmulationStatistics';\nimport { SnapshotStatistics } from '@common/model/SnapshotStatistics';\nimport { Executor } from '@common/service/AbstractEmulationService';\nimport { DbInstallResult, PalmButton } from '@native/cloudpilot_web';\nimport { Event } from 'microevent.ts';\n\nimport { BackupResult, EngineUarm, FullState, StorageCardProvider } from '../Engine';\nimport { EngineSettings } from '../EngineSettings';\nimport { SnapshotContainer } from '../Snapshot';\nimport { RpcHost } from './RpcHost';\nimport { SnapshotContainerImpl } from './Snapshot';\nimport { ClientMessage, ClientMessageType } from './worker/ClientMessage';\nimport { HostMessage, HostMessageType } from './worker/HostMessage';\nimport { ResetType } from './worker/ResetType';\n\nconst enum CardState {\n    none,\n    allocated,\n    mounted,\n}\n\ninterface CardNone {\n    state: CardState.none;\n}\n\ninterface CardAllocated {\n    state: CardState.allocated;\n    key: string;\n    data: Uint32Array;\n}\n\ninterface CardMounted {\n    state: CardState.mounted;\n    key: string;\n}\n\ntype Card = CardNone | CardAllocated | CardMounted;\n\nexport class EngineUarmImpl implements EngineUarm {\n    readonly type = 'uarm';\n\n    private constructor(\n        private worker: Worker,\n        private settings: EngineSettings,\n        clandestineExecute: Executor,\n    ) {\n        this.rpcHost = new RpcHost(this.dispatchMessage);\n\n        clandestineExecute(() => worker.addEventListener('message', this.onMessage));\n    }\n\n    static async create(\n        uarmModule: WebAssembly.Module,\n        settings: EngineSettings,\n        clandestineExecute: Executor,\n        workerUrl?: string,\n    ): Promise<EngineUarmImpl> {\n        const worker =\n            workerUrl === undefined\n                ? new Worker(/* webpackChunkName: \"uarm-worker\" */ new URL('./worker/main.worker', import.meta.url))\n                : new Worker(workerUrl);\n\n        const engine = await new Promise<EngineUarmImpl>((resolve, reject) => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const handlers: Array<[string, any]> = [];\n            const cleanupHandlers = () =>\n                handlers.forEach(([evt, handler]) => worker.removeEventListener(evt, handler));\n\n            const onError = (e: ErrorEvent) => {\n                cleanupHandlers();\n                reject(e.error);\n            };\n\n            const onMessage = (e: MessageEvent) => {\n                cleanupHandlers();\n\n                if ((e.data as ClientMessage).type === ClientMessageType.ready) {\n                    resolve(new EngineUarmImpl(worker, settings, clandestineExecute));\n                } else {\n                    reject(new Error('invalid message from worker'));\n                }\n            };\n\n            worker.addEventListener('error', onError);\n            worker.addEventListener('message', onMessage, { once: true });\n\n            handlers.push(['error', onError], ['message', onMessage]);\n        });\n\n        return engine.initialize(uarmModule);\n    }\n\n    supportsKeyboardIO(): boolean {\n        return false;\n    }\n\n    shutdown(): void {\n        this.worker.removeEventListener('message', this.onMessage);\n        this.worker.terminate();\n\n        document.removeEventListener('visibilitychange', this.onVisibilityChange);\n    }\n\n    getStatistics(): EmulationStatisticsUarm {\n        return {\n            type: 'uarm',\n            currentSpeedMips: (this.currentIps / 1000000) | 0,\n            currentMaxSpeedMips: (this.currentIpsMax / 1000000) | 0,\n        };\n    }\n\n    getPcmPort(): MessagePort {\n        return this.pcmChannel.port1;\n    }\n\n    enablePcmStreaming(): void {\n        console.log('streaming enabled');\n        this.dispatchMessage({ type: HostMessageType.setPcmStreaming, pcmStreaming: true });\n    }\n\n    disablePcmStreaming(): void {\n        console.log('streaming disabled');\n        this.dispatchMessage({ type: HostMessageType.setPcmStreaming, pcmStreaming: false });\n    }\n\n    penDown(x: number, y: number): void {\n        this.dispatchMessage({ type: HostMessageType.penDown, x, y });\n    }\n\n    penUp(): void {\n        this.dispatchMessage({ type: HostMessageType.penUp });\n    }\n\n    buttonDown(button: PalmButton): void {\n        this.dispatchMessage({ type: HostMessageType.buttonDown, button });\n    }\n\n    buttonUp(button: PalmButton): void {\n        this.dispatchMessage({ type: HostMessageType.buttonUp, button });\n    }\n\n    keyStroke(key: number, ctrl?: boolean): void {}\n\n    reset(): Promise<void> {\n        return this.rpcHost.call('reset', ResetType.normal);\n    }\n\n    resetNoExtensions(): Promise<void> {\n        return this.rpcHost.call('reset', ResetType.noExtensions);\n    }\n\n    resetHard(): Promise<void> {\n        return this.rpcHost.call('reset', ResetType.hard);\n    }\n\n    isRunning(): boolean {\n        return this.running;\n    }\n\n    isPowerOff(): boolean {\n        return false;\n    }\n\n    isLcdEnabled(): boolean {\n        return this.lcdEnabled ?? false;\n    }\n\n    isUIInitialized(): boolean {\n        return this.uiInitialized;\n    }\n\n    isSlowdown(): boolean {\n        return this.currentIps / 1000000 < this.settings.targetMips * this.settings.warnSlowdownThreshold;\n    }\n\n    getOSVersion(): number {\n        return this.osVersion ?? 0;\n    }\n\n    getDeviceId(): DeviceId {\n        if (this.deviceId === undefined) throw new Error('not initialized');\n\n        return this.deviceId;\n    }\n\n    async openSession(\n        rom: Uint8Array,\n        device: DeviceId,\n        nand?: Uint8Array,\n        memory?: Uint8Array,\n        state?: Uint8Array,\n        cardProvider?: StorageCardProvider,\n    ): Promise<boolean> {\n        if (this.deviceId !== undefined) throw new Error('already initialized');\n        this.deviceId = device;\n\n        if (cardProvider) await cardProvider.load(this);\n\n        const card: [Uint8Array, string] | undefined =\n            this.card.state === CardState.allocated\n                ? [new Uint8Array(this.card.data.buffer), this.card.key]\n                : undefined;\n\n        if (\n            !(await this.rpcHost.call(\n                'openSession',\n                { rom, nand, memory, state, card },\n                [\n                    rom.buffer,\n                    nand?.buffer,\n                    memory?.buffer,\n                    state?.buffer,\n                    this.card.state === CardState.allocated ? this.card.data.buffer : undefined,\n                ].filter((x) => x !== undefined),\n            ))\n        ) {\n            return false;\n        }\n\n        const sizes = await this.rpcHost.call('getMemorySize', undefined);\n\n        this.snapshotContainer = new SnapshotContainerImpl(\n            sizes.memory,\n            sizes.nand,\n            this.rpcHost,\n            this.dispatchMessage,\n        );\n        this.snapshotContainer.snapshotDoneEvent.addHandler((statistics) =>\n            this.snapshotDoneEvent.dispatch(statistics),\n        );\n\n        const cardState = await this.rpcHost.call('getSdCardState', undefined);\n        this.card = cardState.inserted ? { state: CardState.mounted, key: cardState.key } : { state: CardState.none };\n\n        return true;\n    }\n\n    async resume(): Promise<void> {\n        await this.rpcHost.call('start', undefined);\n        this.running = true;\n    }\n\n    async stop(): Promise<void> {\n        await this.rpcHost.call('stop', undefined);\n        this.running = false;\n\n        this.returnPendingFrame();\n    }\n\n    processTimesliceNow(): void {\n        // We currently need this only for network I/O which is not implemented\n        // for uARM anyway.\n        console.log('processTimesliceNow not implemented for uARM');\n    }\n\n    async requestSnapshot(): Promise<SnapshotContainer> {\n        if (!this.snapshotContainer) throw new Error('emulator not initialized');\n\n        return this.snapshotContainer.schedule(await this.rpcHost.call('takeSnapshot', undefined));\n    }\n\n    waitForPendingSnapshot(): Promise<void> {\n        return this.rpcHost.call('waitForPendingSnapshot', undefined);\n    }\n\n    blitFrame(canvas: HTMLCanvasElement): void {\n        if (!this.pendingFrame) return;\n\n        const imageData = new ImageData(new Uint8ClampedArray(this.pendingFrame), 320);\n\n        canvas.getContext('2d')?.putImageData(imageData, 0, 0);\n\n        this.returnPendingFrame();\n    }\n\n    updateSettings(settings: EngineSettings): void {\n        this.settings = settings;\n        this.dispatchMessage({ type: HostMessageType.updateSettings, settings });\n    }\n\n    allocateCard(key: string, size: number): Uint32Array {\n        if (this.card.state !== CardState.none) throw new Error(`bad card state ${this.card.state}`);\n        if (size & 0x03) throw new Error(`invalid card size ${size}`);\n\n        this.card = {\n            state: CardState.allocated,\n            key,\n            data: new Uint32Array(size >>> 2),\n        };\n\n        return this.card.data;\n    }\n\n    async releaseCard(key: string): Promise<void> {\n        if (this.card.state === CardState.none) return;\n\n        await this.rpcHost.call('sdCardEject', undefined);\n\n        this.card = { state: CardState.none };\n    }\n\n    async mountCard(key: string): Promise<boolean> {\n        if (this.card.state !== CardState.allocated) throw new Error('no card allocated');\n        if (this.card.key !== key) throw new Error(`wrong key: got ${key}, expected ${this.card.key}`);\n\n        if (\n            await this.rpcHost.call('sdCardInsert', { data: this.card.data, key: this.card.key }, [\n                this.card.data.buffer,\n            ])\n        ) {\n            this.card = { state: CardState.mounted, key };\n            return true;\n        } else {\n            this.card = { state: CardState.none };\n            return false;\n        }\n    }\n\n    async getMountedKey(): Promise<string | undefined> {\n        return this.card.state === CardState.mounted ? this.card.key : undefined;\n    }\n\n    getCardData(key: string): Promise<Uint32Array | undefined> {\n        if (this.card.state !== CardState.mounted) throw new Error('no card mounted');\n        if (this.card.key !== key) throw new Error(`invalid key: expected ${this.card.key}, got ${key}`);\n\n        return this.rpcHost.call('getSdCardData', undefined);\n    }\n\n    async getFullState(): Promise<FullState | undefined> {\n        return this.deviceId === undefined ? undefined : this.rpcHost.call('getFullState', undefined);\n    }\n\n    installDb(data: Uint8Array): Promise<DbInstallResult> {\n        // We copy rather than transfer data on purpose --- our code operates on the buffer\n        // after installation.\n        return this.rpcHost.call('installDb', data);\n    }\n\n    backup(includeRom: boolean): Promise<BackupResult | undefined> {\n        return this.rpcHost.call('backup', { includeRom });\n    }\n\n    launchAppByName(name: string): Promise<boolean> {\n        return this.rpcHost.call('launchAppByName', name);\n    }\n\n    launchAppByHeader(header: Uint8Array): Promise<boolean> {\n        return this.rpcHost.call('launchAppByHeader', header.subarray(0, 32).slice());\n    }\n\n    private dispatchMessage = (mesage: HostMessage, transferables?: Array<Transferable>) => {\n        this.worker.postMessage(mesage, transferables as Array<Transferable>);\n    };\n\n    private async initialize(module: WebAssembly.Module): Promise<this> {\n        await this.rpcHost.call('initialize', { module, settings: this.settings, pcmPort: this.pcmChannel.port2 }, [\n            this.pcmChannel.port2,\n        ]);\n        document.addEventListener('visibilitychange', this.onVisibilityChange);\n\n        return this;\n    }\n\n    private fatal(error: Error | string): void {\n        this.fatalError.dispatch(error instanceof Error ? error : new Error(error));\n    }\n\n    private returnPendingFrame(): void {\n        if (this.pendingFrame) {\n            this.dispatchMessage({ type: HostMessageType.returnFrame, frame: this.pendingFrame }, [this.pendingFrame]);\n        }\n\n        this.pendingFrame = undefined;\n    }\n\n    private onVisibilityChange = (): void => {\n        if (document.visibilityState === 'hidden') {\n            this.dispatchMessage({ type: HostMessageType.setBackgrounded, backgrounded: true });\n        } else {\n            this.dispatchMessage({ type: HostMessageType.setBackgrounded, backgrounded: false });\n        }\n    };\n\n    private onMessage = (e: MessageEvent): void => {\n        const message = e.data as ClientMessage;\n\n        switch (message.type) {\n            case ClientMessageType.ready:\n                return this.fatal('duplicate ready event');\n\n            case ClientMessageType.rpcError:\n            case ClientMessageType.rpcSuccess:\n                return this.rpcHost.dispatchRpcMessage(message);\n\n            case ClientMessageType.fatalError:\n                return this.fatal(message.error);\n\n            case ClientMessageType.timeslice: {\n                this.timesliceEvent.dispatch(message.sizeSeconds);\n                this.currentIps = message.currentIps;\n                this.currentIpsMax = message.currentIpsMax;\n\n                const lcdWasEnabled = this.lcdEnabled;\n                this.lcdEnabled = message.lcdEnabled;\n\n                if (message.frame && message.lcdEnabled) {\n                    this.returnPendingFrame();\n                    this.pendingFrame = message.frame;\n\n                    this.newFrameEvent.dispatch();\n                } else if (!message.lcdEnabled && (lcdWasEnabled ?? true)) {\n                    this.newFrameEvent.dispatch();\n                }\n\n                this.lcdEnabled = message.lcdEnabled;\n\n                break;\n            }\n\n            case ClientMessageType.snapshot:\n                try {\n                    if (!this.snapshotContainer) {\n                        throw new Error('Unreachable: emulator runs, but snapshots are not initialized');\n                    }\n\n                    this.snapshotEvent.dispatch(this.snapshotContainer.schedule(message.snapshot));\n                } catch (e) {\n                    this.fatal(`${e}`);\n\n                    throw e;\n                }\n\n                break;\n\n            case ClientMessageType.systemStateChanged:\n                this.uiInitialized = message.uiInitialized;\n                this.osVersion = message.osVersion;\n\n                this.palmosStateChangeEvent.dispatch();\n\n                break;\n\n            default:\n                message satisfies never;\n        }\n    };\n\n    newFrameEvent = new Event<void>();\n    timesliceEvent = new Event<number>();\n    suspendEvent = new Event<void>();\n    snapshotEvent = new Event<SnapshotContainer>();\n    palmosStateChangeEvent = new Event<void>();\n    fatalError = new Event<Error>();\n    snapshotDoneEvent = new Event<SnapshotStatistics>();\n\n    private deviceId: DeviceId | undefined;\n    private running = false;\n\n    private currentIps = 0;\n    private currentIpsMax = 0;\n\n    private pendingFrame: ArrayBuffer | undefined;\n\n    private card: Card = { state: CardState.none };\n\n    private snapshotContainer: SnapshotContainerImpl | undefined;\n\n    private rpcHost: RpcHost;\n\n    private pcmChannel = new MessageChannel();\n\n    private uiInitialized = false;\n    private lcdEnabled: boolean | undefined;\n    private osVersion: number | undefined;\n}\n","import { Cloudpilot, PwmUpdate } from '@common/bridge/Cloudpilot';\nimport { Engine, StorageCardProvider } from '@common/engine/Engine';\nimport { EngineSettings } from '@common/engine/EngineSettings';\nimport { SnapshotContainer } from '@common/engine/Snapshot';\nimport { EngineCloudpilotImpl } from '@common/engine/cloudpilot/EngineCloudpilot';\nimport { EngineUarmImpl } from '@common/engine/uarm/EngineUarm';\nimport { deviceDimensions, engineType, isColor } from '@common/helper/deviceProperties';\nimport { GRAYSCALE_PALETTE_HEX } from '@common/helper/palette';\nimport { SchedulerKind } from '@common/helper/scheduler';\nimport { DeviceId } from '@common/model/DeviceId';\nimport { Dimensions } from '@common/model/Dimensions';\nimport { EmulationStatistics } from '@common/model/EmulationStatistics';\nimport { EngineType } from '@common/model/EngineType';\nimport { SnapshotStatistics } from '@common/model/SnapshotStatistics';\nimport { SerialPort } from '@common/serial/SerialPort';\nimport { PalmButton } from '@native/cloudpilot_web';\nimport { Event, EventInterface } from 'microevent.ts';\n\nconst PEN_MOVE_THROTTLE = 25;\n\nconst DEFAULT_ENGINE_SETTINGS: EngineSettings = {\n    automaticSnapshotInterval: 0,\n    memoryCrc: false,\n    speed: 1,\n    hotsyncName: '',\n    manageHotsyncName: false,\n    schedulerKind: SchedulerKind.animationFrame,\n    networkIntegration: false,\n    clipboardIntegration: false,\n    disableAudio: false,\n    maxHostLoad: 1,\n    targetMips: 100,\n    warnSlowdownThreshold: 0.5,\n    runInBackground: false,\n};\n\nexport type Executor = <T>(fn: () => T) => T;\n\nexport abstract class AbstractEmulationService {\n    constructor(protected cloudpilotPromise: Promise<Cloudpilot>) {\n        void cloudpilotPromise.then((instance) => instance.fatalErrorEvent.addHandler(this.onFatalError));\n    }\n\n    handlePointerMove(x: number, y: number, isSilkscreen: boolean): void {\n        if (!this.engine?.isRunning()) return;\n\n        const ts = performance.now();\n        this.penDown = true;\n\n        if (ts - this.lastPenUpdate < PEN_MOVE_THROTTLE) return;\n\n        if (isSilkscreen) {\n            const dimensions = deviceDimensions(this.deviceId());\n\n            x = this.transformSilkscreenX(x, dimensions);\n            y = this.transformSilkscreenY(y, dimensions);\n        }\n\n        this.engine.penDown(Math.floor(x), Math.floor(y));\n        this.lastPenUpdate = ts;\n    }\n\n    handlePointerUp(): void {\n        if (!this.engine?.isRunning()) return;\n\n        if (this.engine && this.penDown) this.engine.penUp();\n\n        this.lastPenUpdate = 0;\n        this.penDown = false;\n    }\n\n    handleButtonDown(button: PalmButton): void {\n        if (!this.engine?.isRunning()) return;\n\n        this.engine?.buttonDown(button);\n    }\n\n    handleButtonUp(button: PalmButton): void {\n        if (!this.engine?.isRunning()) return;\n\n        this.engine?.buttonUp(button);\n    }\n\n    handleKeyDown(key: number) {\n        if (!this.engine?.isRunning()) return;\n\n        this.engine?.keyStroke(key);\n    }\n\n    async reset(): Promise<void> {\n        await this.engine?.reset();\n    }\n\n    async resetNoExtensions(): Promise<void> {\n        await this.engine?.resetNoExtensions();\n    }\n\n    async resetHard(): Promise<void> {\n        await this.engine?.resetHard();\n    }\n\n    isRunning(): boolean {\n        return this.engine?.isRunning() ?? false;\n    }\n\n    isPowerOff(): boolean {\n        return this.engine?.isPowerOff() ?? false;\n    }\n\n    isUiInitialized(): boolean {\n        return this.engine?.isUIInitialized() ?? false;\n    }\n\n    getCanvas(): HTMLCanvasElement {\n        return this.canvas;\n    }\n\n    getStatistics(): EmulationStatistics | undefined {\n        return this.engine?.getStatistics();\n    }\n\n    isSlowdown(): boolean {\n        return this.engine?.isSlowdown() ?? false;\n    }\n\n    isSuspended(): boolean {\n        return this.engine?.type === 'cloudpilot' ? this.engine.isSuspended() : false;\n    }\n\n    isBlocked(): boolean {\n        return this.blocked;\n    }\n\n    getSerialPortSerial(): SerialPort | undefined {\n        return this.engine?.type === 'cloudpilot' ? this.engine.getSerialPortSerial() : undefined;\n    }\n\n    getSerialPortIR(): SerialPort | undefined {\n        return this.engine?.type === 'cloudpilot' ? this.engine.getSerialPortIR() : undefined;\n    }\n\n    updateEngineSettings(settings: Partial<EngineSettings>): void {\n        this.engineSettings = { ...this.engineSettings, ...settings };\n        this.engine?.updateSettings(this.engineSettings);\n    }\n\n    deviceId(): DeviceId {\n        return this.engine?.getDeviceId() ?? DeviceId.m515;\n    }\n\n    pwmUpdateEvent(): EventInterface<PwmUpdate> | undefined {\n        return this.engine?.type === 'cloudpilot' ? this.engine.pwmUpdateEvent : undefined;\n    }\n\n    pcmPort(): MessagePort | undefined {\n        return this.engine?.type === 'uarm' ? this.engine.getPcmPort() : undefined;\n    }\n\n    enablePcmStreaming(): void {\n        if (this.engine?.type === 'uarm') this.engine.enablePcmStreaming();\n    }\n\n    disablePcmStreaming(): void {\n        if (this.engine?.type === 'uarm') this.engine.disablePcmStreaming();\n    }\n\n    supportsKeyboardIO(): boolean {\n        return this.engine?.supportsKeyboardIO() ?? false;\n    }\n\n    protected abstract updateConfiguredHotsyncName(hotsyncName: string): void;\n\n    protected abstract onAfterAdvanceEmulation(sliceSizeSeconds: number): void;\n\n    protected abstract handleSuspend(): void;\n\n    protected abstract handleSnapshot(snapshot: SnapshotContainer): void;\n\n    protected abstract getUarmModule(): Promise<WebAssembly.Module>;\n\n    protected abstract handleFatalInNativeCode(error: Error): void;\n\n    protected abstract handlePalmosStateChange(): void;\n\n    protected processTimesliceNow(): void {\n        this.engine?.processTimesliceNow();\n    }\n\n    protected async openSession(\n        rom: Uint8Array,\n        deviceId: DeviceId,\n        nand?: Uint8Array,\n        memory?: Uint8Array,\n        state?: Uint8Array,\n        card?: StorageCardProvider,\n    ): Promise<boolean> {\n        this.unbindEngineHandlers(this.engine);\n        this.engine?.shutdown();\n        this.engine = undefined;\n        this.shouldRun = false;\n\n        const engine = await this.createEngine(engineType(deviceId));\n\n        engine.updateSettings(this.engineSettings);\n\n        if (!(await engine.openSession(rom, deviceId, nand, memory, state, card))) {\n            return false;\n        }\n\n        this.bindEngineHandlers(engine);\n        this.engine = engine;\n\n        this.resetCanvas();\n\n        this.openSessionEvent.dispatch();\n\n        return true;\n    }\n\n    protected resetCanvas(): void {\n        const dimensions = deviceDimensions(this.deviceId());\n\n        this.canvas.width = dimensions.width;\n        this.canvas.height = dimensions.height;\n\n        this.clearCanvas();\n    }\n\n    protected async doResume(): Promise<void> {\n        this.shouldRun = true;\n        await this.enforceRunState();\n    }\n\n    protected async doStop(): Promise<void> {\n        this.shouldRun = false;\n        await this.enforceRunState();\n    }\n\n    protected async doBlock() {\n        this.blocked = true;\n        await this.enforceRunState();\n    }\n\n    protected async doUnblock() {\n        this.blocked = false;\n        await this.enforceRunState();\n    }\n\n    protected clearCanvas(): void {\n        const deviceId = this.deviceId();\n\n        const context = this.canvas.getContext('2d');\n        if (!context) throw new Error('Unable to get rendering context. Get a new browser.');\n\n        context.beginPath();\n        context.rect(0, 0, this.canvas.width, this.canvas.height);\n        context.fillStyle = isColor(deviceId) ? 'white' : GRAYSCALE_PALETTE_HEX[0];\n        context.fill();\n    }\n\n    protected transformSilkscreenX(x: number, dimensions: Dimensions): number {\n        if (dimensions.silkscreenOvershoot === undefined) {\n            return x;\n        }\n\n        const factor = dimensions.width / (dimensions.width + 2 * dimensions.silkscreenOvershoot);\n        return (x - dimensions.width / 2) / factor + dimensions.width / 2;\n    }\n\n    protected transformSilkscreenY(y: number, dimensions: Dimensions): number {\n        if (dimensions.siklscreenShift === undefined) {\n            return y;\n        }\n\n        return y + dimensions.siklscreenShift;\n    }\n\n    protected async requestSnapshot(): Promise<SnapshotContainer | undefined> {\n        return await this.engine?.requestSnapshot();\n    }\n\n    protected getOSVersion(): number {\n        return this.engine?.getOSVersion() ?? 0;\n    }\n\n    protected getUarmWorkerUrl(): string | undefined {\n        return undefined;\n    }\n\n    private async enforceRunState(): Promise<void> {\n        if (!this.engine) return;\n\n        if (this.shouldRun && !this.blocked) {\n            await this.engine.resume();\n        } else {\n            await this.engine.stop();\n        }\n\n        this.emulationStateChangeEvent.dispatch(this.engine.isRunning());\n    }\n\n    private async createEngine(engineType: EngineType): Promise<Engine> {\n        switch (engineType) {\n            case 'cloudpilot':\n                return new EngineCloudpilotImpl(\n                    await this.cloudpilotPromise,\n                    this.clandestineExecute,\n                    this.engineSettings,\n                );\n\n            case 'uarm':\n                return EngineUarmImpl.create(\n                    await this.getUarmModule(),\n                    this.engineSettings,\n                    this.clandestineExecute,\n                    this.getUarmWorkerUrl(),\n                );\n\n            default:\n                throw new Error('unreachable');\n        }\n    }\n\n    private onEngineNewFrameEvent = () => {\n        if (!this.engine) throw new Error('invalid state');\n\n        if (!this.engine.isLcdEnabled()) {\n            this.clearCanvas();\n        } else {\n            this.engine.blitFrame(this.canvas);\n        }\n\n        this.newFrameEvent.dispatch(this.canvas);\n    };\n\n    private onEngineTimesliceEvent = (sliceSizeSeconds: number) => this.onAfterAdvanceEmulation(sliceSizeSeconds);\n\n    private onEngineSuspendEvent = () => this.handleSuspend();\n\n    private onEngineConfigureHotsyncNameEvent = (hotsyncName: string) => this.updateConfiguredHotsyncName(hotsyncName);\n\n    private onSnapshotEvent = (snapshot: SnapshotContainer) => this.handleSnapshot(snapshot);\n\n    private onSnapshotDoneEvent = (statistics: SnapshotStatistics) => this.snapshotDoneEvent.dispatch(statistics);\n\n    private onPalmosStateChangeEvent = () => {\n        this.handlePalmosStateChange();\n        this.palmosStateChangeEvent.dispatch();\n    };\n\n    private onFatalError = (error: Error) => this.handleFatalInNativeCode(error);\n\n    private bindEngineHandlers(engine?: Engine) {\n        if (!engine) return;\n\n        engine.newFrameEvent.addHandler(this.onEngineNewFrameEvent);\n        engine.suspendEvent.addHandler(this.onEngineSuspendEvent);\n        engine.timesliceEvent.addHandler(this.onEngineTimesliceEvent);\n        engine.snapshotEvent.addHandler(this.onSnapshotEvent);\n        engine.palmosStateChangeEvent.addHandler(this.onPalmosStateChangeEvent);\n        engine.snapshotDoneEvent.addHandler(this.onSnapshotDoneEvent);\n\n        switch (engine.type) {\n            case 'cloudpilot':\n                engine.configuredHotsyncNameUpdateEvent.addHandler(this.onEngineConfigureHotsyncNameEvent);\n                break;\n\n            case 'uarm':\n                engine.fatalError.addHandler(this.onFatalError);\n                break;\n\n            default:\n                engine satisfies never;\n        }\n    }\n\n    private unbindEngineHandlers(engine?: Engine) {\n        if (!engine) return;\n\n        engine.newFrameEvent.removeHandler(this.onEngineNewFrameEvent);\n        engine.suspendEvent.removeHandler(this.onEngineSuspendEvent);\n        engine.timesliceEvent.removeHandler(this.onEngineTimesliceEvent);\n        engine.snapshotEvent.removeHandler(this.onSnapshotEvent);\n        engine.palmosStateChangeEvent.removeHandler(this.onPalmosStateChangeEvent);\n        engine.snapshotDoneEvent.removeHandler(this.onSnapshotDoneEvent);\n\n        switch (engine.type) {\n            case 'cloudpilot':\n                engine.configuredHotsyncNameUpdateEvent.removeHandler(this.onEngineConfigureHotsyncNameEvent);\n                break;\n\n            case 'uarm':\n                engine.fatalError.removeHandler(this.onFatalError);\n                break;\n\n            default:\n                engine satisfies never;\n        }\n    }\n\n    newFrameEvent = new Event<HTMLCanvasElement>();\n    newSessionEvent = new Event<void>();\n    emulationStateChangeEvent = new Event<boolean>();\n    palmosStateChangeEvent = new Event<void>();\n    openSessionEvent = new Event<void>();\n    snapshotDoneEvent = new Event<SnapshotStatistics>();\n\n    protected abstract readonly clandestineExecute: Executor;\n\n    protected canvas: HTMLCanvasElement = document.createElement('canvas');\n\n    protected lastPenUpdate = 0;\n    protected penDown = false;\n\n    protected engine?: Engine;\n    protected engineSettings: EngineSettings = { ...DEFAULT_ENGINE_SETTINGS };\n\n    private shouldRun = false;\n    private blocked = false;\n}\n","import { Cloudpilot, SessionImage } from '@common/bridge/Cloudpilot';\nimport { Engine } from '@common/engine/Engine';\nimport { SnapshotContainer } from '@common/engine/Snapshot';\nimport { SchedulerKind } from '@common/helper/scheduler';\nimport { DeviceId } from '@common/model/DeviceId';\nimport { AbstractEmulationService, Executor } from '@common/service/AbstractEmulationService';\nimport { Session } from '@embedded/model/Session';\nimport { Mutex } from 'async-mutex';\nimport { Event } from 'microevent.ts';\n\nexport class EmbeddedEmulationService extends AbstractEmulationService {\n    constructor(\n        cloudpilot: Cloudpilot,\n        private uarmModuleFactory: () => Promise<WebAssembly.Module>,\n        private uarmWorkerUrl?: string,\n    ) {\n        super(Promise.resolve(cloudpilot));\n\n        this.syncSettings();\n    }\n\n    pause = (): Promise<void> => this.mutex.runExclusive(() => this.doStop());\n\n    resume = (): Promise<void> => this.mutex.runExclusive(() => this.doResume());\n\n    initWithRom = (\n        rom: Uint8Array,\n        nand: Uint8Array | undefined,\n        device: DeviceId,\n        session: Session,\n    ): Promise<boolean> =>\n        this.mutex.runExclusive(async () => {\n            if (this.isRunning()) {\n                await this.doStop();\n                this.session = undefined;\n            }\n\n            if (await this.openSession(rom, device, nand)) {\n                this.setSession(session);\n                return true;\n            }\n\n            return false;\n        });\n\n    initWithSessionImage = (sessionImage: SessionImage<unknown>, session: Session): Promise<boolean> =>\n        this.mutex.runExclusive(async () => {\n            if (this.isRunning()) {\n                await this.doStop();\n                this.session = undefined;\n            }\n\n            if (\n                await this.openSession(\n                    sessionImage.rom,\n                    sessionImage.deviceId,\n                    sessionImage.nand,\n                    sessionImage.memory,\n                    sessionImage.savestate,\n                )\n            ) {\n                this.setSession(session);\n                return true;\n            }\n\n            return false;\n        });\n\n    getSession(): Session | undefined {\n        return this.session;\n    }\n\n    syncSettings(): void {\n        this.updateEngineSettings({\n            manageHotsyncName: true,\n            hotsyncName: this.session?.hotsyncName,\n            speed: this.session?.speed ?? 1,\n            targetMips: 100 * (this.session?.speed ?? 1),\n            schedulerKind: this.session?.runInBackground ? SchedulerKind.timeout : SchedulerKind.animationFrame,\n            runInBackground: this.session?.runInBackground ?? false,\n            disableAudio: this.session?.disablePcmAudio ?? false,\n            maxHostLoad: this.session?.maxHostLoad ?? 1,\n        });\n    }\n\n    getEngine(): Engine | undefined {\n        return this.engine;\n    }\n\n    protected override updateConfiguredHotsyncName(hotsyncName: string): void {\n        if (this.session) {\n            this.session.hotsyncName = hotsyncName;\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    protected override onAfterAdvanceEmulation(sliceSizeSeconds: number): void {\n        this.timesliceEvent.dispatch();\n    }\n\n    protected override handleSuspend(): void {}\n\n    protected override handleSnapshot(snapshot: SnapshotContainer): void {\n        snapshot.release(false, 0, 0);\n    }\n\n    protected override getUarmModule(): Promise<WebAssembly.Module> {\n        return this.uarmModuleFactory();\n    }\n\n    protected override handleFatalInNativeCode(error: Error): void {\n        console.error(error);\n    }\n\n    protected override handlePalmosStateChange(): void {}\n\n    protected override clandestineExecute: Executor = (fn) => fn();\n\n    protected override getUarmWorkerUrl(): string | undefined {\n        return this.uarmWorkerUrl;\n    }\n\n    private setSession(session: Session) {\n        this.session = session;\n        this.syncSettings();\n    }\n\n    private session: Session | undefined;\n    private mutex = new Mutex();\n\n    readonly timesliceEvent = new Event<void>();\n}\n","import { PalmButton } from '@common/bridge/Cloudpilot';\nimport { AbstractCanvasDisplayService } from '@common/service/AbstractCanvasDisplayService';\nimport { AbstractEmulationService } from '@common/service/AbstractEmulationService';\n\nconst enum Area {\n    screen,\n    silkscreen,\n    buttons,\n}\n\ninterface InteractionScreen {\n    area: Area.screen | Area.silkscreen;\n}\n\ninterface InteractionButton {\n    area: Area.buttons;\n    buttonPrimary: PalmButton;\n    buttonSecondary?: PalmButton;\n}\n\ntype Interaction = InteractionScreen | InteractionButton;\n\n/**\n * DOM event handler callback.\n */\nexport type EventHandler<K extends keyof HTMLElementEventMap> = (ev: HTMLElementEventMap[K]) => void;\n\n/**\n * A DOM event target.\n */\nexport interface EmulatorEventTarget {\n    addEventListener<K extends keyof HTMLElementEventMap>(\n        type: K,\n        handler: EventHandler<K>,\n        options?: boolean | AddEventListenerOptions,\n    ): void;\n    removeEventListener<K extends keyof HTMLElementEventMap>(\n        type: K,\n        listener: EventHandler<K>,\n        options?: boolean | EventListenerOptions,\n    ): void;\n}\n\nexport class GenericEventHandlingService {\n    constructor(\n        protected emulationService: AbstractEmulationService,\n        protected canvasDisplayService: AbstractCanvasDisplayService,\n    ) {}\n\n    bind(pointerEventTarget: EmulatorEventTarget, dpad: boolean, keyEventTarget: EmulatorEventTarget = window): void {\n        this.dpad = dpad;\n\n        if (this.pointerEventTarget) {\n            this.release();\n        }\n\n        this.pointerEventTarget = pointerEventTarget;\n        this.keyEventTarget = keyEventTarget || window;\n\n        this.addEventListener(pointerEventTarget, 'mousedown', this.handleMouseDown);\n        this.addEventListener(window, 'mouseup', this.handeMouseUp);\n        this.addEventListener(window, 'mousemove', this.handleMouseMove);\n\n        this.addEventListener(pointerEventTarget, 'touchstart', this.handleTouchStart);\n        this.addEventListener(pointerEventTarget, 'touchmove', this.handleTouchMove);\n        this.addEventListener(pointerEventTarget, 'touchend', this.handleTouchEnd);\n        this.addEventListener(pointerEventTarget, 'touchcancel', this.handleTouchEnd);\n\n        this.addEventListener(this.keyEventTarget, 'keydown', this.handleKeyDown);\n        this.addEventListener(this.keyEventTarget, 'keyup', this.handleKeyUp);\n    }\n\n    release(): void {\n        if (!this.pointerEventTarget) return;\n\n        this.removeEventListener(this.pointerEventTarget, 'mousedown', this.handleMouseDown);\n        this.removeEventListener(window, 'mouseup', this.handeMouseUp);\n        this.removeEventListener(window, 'mousemove', this.handleMouseMove);\n\n        this.removeEventListener(this.pointerEventTarget, 'touchstart', this.handleTouchStart);\n        this.removeEventListener(this.pointerEventTarget, 'touchmove', this.handleTouchMove);\n        this.removeEventListener(this.pointerEventTarget, 'touchend', this.handleTouchEnd);\n        this.removeEventListener(this.pointerEventTarget, 'touchcancel', this.handleTouchEnd);\n\n        this.removeEventListener(this.keyEventTarget, 'keydown', this.handleKeyDown);\n        this.removeEventListener(this.keyEventTarget, 'keyup', this.handleKeyUp);\n\n        for (const button of this.activeButtons) {\n            this.handleButtonUp(button);\n        }\n\n        this.activeButtons.clear();\n        this.interactionsTouch.clear();\n        this.interactionMouse = undefined;\n\n        this.pointerEventTarget = undefined;\n    }\n\n    isGameMode(): boolean {\n        return this.gameMode;\n    }\n\n    setGameMode(enableGameMode: boolean): void {\n        this.gameMode = enableGameMode;\n\n        this.onToggleGameMode();\n    }\n\n    setGameModeHotkeyEnabled(enableGamemodeHotkey: boolean): void {\n        this.enableGamemodeHotkey = enableGamemodeHotkey;\n    }\n\n    isGameModeHotkeyEnabled(): boolean {\n        return this.enableGamemodeHotkey;\n    }\n\n    protected enableKeyboardEvents(): boolean {\n        return true;\n    }\n\n    protected onToggleGameMode(): void {}\n\n    protected addEventListener<K extends keyof HTMLElementEventMap, E extends EmulatorEventTarget>(\n        elt: E,\n        type: K,\n        handler: EventHandler<K>,\n        caputure?: boolean,\n    ) {\n        elt.addEventListener(type, handler, caputure);\n    }\n\n    protected removeEventListener<K extends keyof HTMLElementEventMap, E extends EmulatorEventTarget>(\n        elt: E,\n        type: K,\n        handler: EventHandler<K>,\n        caputure?: boolean,\n    ) {\n        elt.removeEventListener(type, handler, caputure);\n    }\n\n    private handleMouseDown = (e: MouseEvent): void => {\n        if (e.button !== 0) return;\n\n        const coords = this.canvasDisplayService.eventToPalmCoordinates(e);\n        if (!coords) return;\n\n        const area = this.determineArea(coords);\n\n        if (area === Area.buttons) {\n            const button = this.canvasDisplayService.determineButton(coords);\n            this.interactionMouse = { area, buttonPrimary: button };\n\n            this.handleButtonDown(button);\n        } else {\n            this.interactionMouse = { area };\n            this.emulationService.handlePointerMove(...coords, area === Area.silkscreen);\n        }\n    };\n\n    private handleMouseMove = (e: MouseEvent): void => {\n        // tslint:disable-next-line: no-bitwise\n        if (!(e.buttons & 0x01) || !this.interactionMouse || this.interactionMouse?.area === Area.buttons) {\n            return;\n        }\n\n        const coords = this.canvasDisplayService.eventToPalmCoordinates(e, true);\n        if (!coords) return;\n\n        this.emulationService.handlePointerMove(...coords, this.interactionMouse?.area === Area.silkscreen);\n    };\n\n    private handeMouseUp = (e: MouseEvent): void => {\n        if (e.button !== 0) return;\n\n        const interaction = this.interactionMouse;\n        this.interactionMouse = undefined;\n\n        switch (interaction?.area) {\n            case Area.buttons:\n                this.handleButtonUp(interaction.buttonPrimary);\n\n                break;\n\n            case Area.screen:\n            case Area.silkscreen:\n                this.emulationService.handlePointerUp();\n\n                break;\n        }\n    };\n\n    private handleTouchStart = (e: TouchEvent): void => {\n        let handled = false;\n\n        for (let i = 0; i < e.changedTouches.length; i++) {\n            const touch = e.changedTouches.item(i);\n            if (!touch) continue;\n\n            const coords = this.canvasDisplayService.eventToPalmCoordinates(touch);\n            if (!coords) continue;\n\n            handled = true;\n\n            const area = this.determineArea(coords);\n            if (area === Area.buttons) {\n                const button = this.canvasDisplayService.determineButton(coords);\n                this.interactionsTouch.set(touch.identifier, { area, buttonPrimary: button });\n\n                this.handleButtonDown(button);\n            } else {\n                this.interactionsTouch.set(touch.identifier, { area });\n                this.emulationService.handlePointerMove(...coords, area === Area.silkscreen);\n            }\n        }\n\n        if (handled && e.cancelable !== false) e.preventDefault();\n    };\n\n    private handleTouchMove = (e: TouchEvent): void => {\n        let handled = false;\n\n        for (let i = 0; i < e.changedTouches.length; i++) {\n            const touch = e.changedTouches.item(i);\n            if (!touch) continue;\n\n            const interaction = this.interactionsTouch.get(touch.identifier);\n            if (!interaction) continue;\n\n            handled = true;\n\n            const area = interaction.area;\n            switch (area) {\n                case Area.buttons: {\n                    const coords = this.canvasDisplayService.eventToPalmCoordinates(touch);\n\n                    if (!coords || this.determineArea(coords) !== Area.buttons) {\n                        this.handleButtonUp(interaction.buttonSecondary);\n                        interaction.buttonSecondary = undefined;\n\n                        break;\n                    }\n\n                    const button = this.canvasDisplayService.determineButton(coords);\n\n                    if (button === interaction.buttonPrimary) {\n                        this.handleButtonUp(interaction.buttonSecondary);\n                        interaction.buttonSecondary = undefined;\n                    } else if (button !== interaction.buttonSecondary) {\n                        this.handleButtonUp(interaction.buttonSecondary);\n                        interaction.buttonSecondary = button;\n\n                        this.handleButtonDown(button);\n                    }\n\n                    break;\n                }\n\n                case Area.screen:\n                case Area.silkscreen: {\n                    const coords = this.canvasDisplayService.eventToPalmCoordinates(touch, true);\n                    if (!coords) continue;\n\n                    this.emulationService.handlePointerMove(...coords, area === Area.silkscreen);\n\n                    break;\n                }\n\n                default:\n                    continue;\n            }\n        }\n\n        if (handled && e.cancelable !== false) e.preventDefault();\n    };\n\n    private handleTouchEnd = (e: TouchEvent): void => {\n        let handled = false;\n\n        for (let i = 0; i < e.changedTouches.length; i++) {\n            const touch = e.changedTouches.item(i);\n            if (!touch) continue;\n\n            const interaction = this.interactionsTouch.get(touch.identifier);\n            if (interaction) handled = true;\n\n            this.interactionsTouch.delete(touch.identifier);\n\n            switch (interaction?.area) {\n                case Area.buttons:\n                    this.handleButtonUp(interaction.buttonPrimary);\n                    this.handleButtonUp(interaction.buttonSecondary);\n\n                    break;\n\n                case Area.screen:\n                case Area.silkscreen:\n                    this.emulationService.handlePointerUp();\n\n                    break;\n            }\n        }\n\n        if (handled && e.cancelable !== false) e.preventDefault();\n    };\n\n    private handleKeyDown = (e: KeyboardEvent): void => {\n        if (this.emulationService.isSuspended() || !this.enableKeyboardEvents()) return;\n\n        if (this.isToggleGameMode(e)) {\n            e.preventDefault();\n\n            this.gameMode = !this.gameMode;\n            this.onToggleGameMode();\n\n            return;\n        }\n\n        const button = this.buttonFromEvent(e);\n        if (button !== undefined) {\n            this.handleButtonDown(button);\n            e.preventDefault();\n\n            return;\n        }\n\n        const keyCode = this.keyCodeFromEvent(e);\n        if (keyCode !== undefined && !e.ctrlKey && !e.metaKey) {\n            this.emulationService.handleKeyDown(keyCode);\n            e.preventDefault();\n        }\n    };\n\n    private handleKeyUp = (e: KeyboardEvent): void => {\n        if (this.emulationService.isSuspended() || !this.enableKeyboardEvents()) return;\n\n        const button = this.buttonFromEvent(e);\n        if (button !== undefined) {\n            this.handleButtonUp(button);\n            e.preventDefault();\n\n            return;\n        }\n\n        if (e.key === 'Control') {\n            for (const btn of this.activeButtons) {\n                this.emulationService.handleButtonUp(btn);\n            }\n\n            this.activeButtons.clear();\n            void this.canvasDisplayService.drawButtons([]);\n        }\n    };\n\n    private determineArea(coords: [number, number]): Area {\n        if (this.canvasDisplayService.isButtons(coords)) {\n            return Area.buttons;\n        }\n\n        if (this.canvasDisplayService.isSilkscreen(coords)) {\n            return Area.silkscreen;\n        }\n\n        return Area.screen;\n    }\n\n    private handleButtonDown(button: PalmButton): void {\n        if (this.activeButtons.has(button)) return;\n\n        this.activeButtons.add(button);\n        this.emulationService.handleButtonDown(button);\n        void this.canvasDisplayService.drawButtons(Array.from(this.activeButtons.values()));\n    }\n\n    private handleButtonUp(button: PalmButton | undefined): void {\n        if (button === undefined || !this.activeButtons.has(button)) return;\n\n        this.activeButtons.delete(button);\n        this.emulationService.handleButtonUp(button);\n        void this.canvasDisplayService.drawButtons(Array.from(this.activeButtons.values()));\n    }\n\n    private isToggleGameMode(e: KeyboardEvent): boolean {\n        return (\n            this.isGameModeHotkeyEnabled() && ((e.key === 'Shift' && e.ctrlKey) || (e.key === 'Control' && e.shiftKey))\n        );\n    }\n\n    private isGameModeActive(e: KeyboardEvent): boolean {\n        return (\n            (!this.gameMode && e.ctrlKey) ||\n            (this.gameMode && !e.ctrlKey) ||\n            !this.emulationService.supportsKeyboardIO()\n        );\n    }\n\n    private buttonFromEvent(e: KeyboardEvent): PalmButton | undefined {\n        switch (e.key) {\n            case 'PageUp':\n                return PalmButton.up;\n\n            case 'PageDown':\n                return PalmButton.down;\n        }\n\n        if (!this.isGameModeActive(e)) return;\n\n        switch (e.key) {\n            case 'w':\n            case 'i':\n            case 'ArrowUp':\n                return PalmButton.up;\n\n            case 's':\n            case 'k':\n            case 'ArrowDown':\n                return PalmButton.down;\n\n            case 'a':\n            case 'j':\n            case 'y':\n            case 'z':\n                return PalmButton.cal;\n\n            case 'ArrowLeft':\n                return this.dpad ? PalmButton.rockerLeft : PalmButton.cal;\n\n            case 'q':\n            case 'u':\n            case 'x':\n                return PalmButton.phone;\n\n            case 'e':\n            case 'o':\n            case 'c':\n                return PalmButton.todo;\n\n            case 'd':\n            case 'l':\n            case 'v':\n                return PalmButton.notes;\n\n            case 'ArrowRight':\n                return this.dpad ? PalmButton.rockerRight : PalmButton.notes;\n        }\n\n        if (this.dpad) {\n            switch (e.key) {\n                case 'Enter':\n                case ' ':\n                    return PalmButton.rockerEnter;\n            }\n        }\n\n        return undefined;\n    }\n\n    private keyCodeFromEvent(e: KeyboardEvent): number | undefined {\n        if (this.isGameModeActive(e)) return;\n\n        if (e.key.length === 1 && e.key.charCodeAt(0) <= 255) return e.key.charCodeAt(0);\n\n        switch (e.key) {\n            case 'ArrowLeft':\n                return 0x1c;\n\n            case 'ArrowRight':\n                return 0x1d;\n\n            case 'ArrowUp':\n                return 0x1e;\n\n            case 'ArrowDown':\n                return 0x1f;\n\n            case 'Backspace':\n                return 0x08;\n\n            case 'Tab':\n                return 0x09;\n\n            case 'Enter':\n                return 0x0a;\n\n            default:\n                return undefined;\n        }\n    }\n\n    private pointerEventTarget: EmulatorEventTarget | undefined;\n    private keyEventTarget: EmulatorEventTarget = window;\n\n    private interactionMouse: Interaction | undefined;\n    private interactionsTouch = new Map<number, Interaction>();\n    private activeButtons = new Set<PalmButton>();\n    private gameMode = false;\n    private enableGamemodeHotkey = true;\n\n    private dpad = false;\n}\n","import { AbstractEmulationService } from '@common/service/AbstractEmulationService';\nimport { GenericEventHandlingService } from '@common/service/GenericEventHandlingService';\nimport { Event } from 'microevent.ts';\n\nimport { EmbeddedCanvasDisplayService } from './EmbeddedCanvasDisplayService';\n\nexport class EmbeddedEventHandlingService extends GenericEventHandlingService {\n    constructor(emulationService: AbstractEmulationService, canvasDisplayService: EmbeddedCanvasDisplayService) {\n        super(emulationService, canvasDisplayService);\n\n        this.canvasDisplayService = canvasDisplayService;\n    }\n\n    protected override onToggleGameMode(): void {\n        this.canvasDisplayService.toggleGameModeIndicator(this.isGameMode());\n        this.gameModeChangeEvent.dispatch(this.isGameMode());\n    }\n\n    gameModeChangeEvent = new Event<boolean>();\n\n    protected override canvasDisplayService: EmbeddedCanvasDisplayService;\n}\n","import { Cloudpilot } from '@common/bridge/Cloudpilot';\nimport { ZipfileWalkerState } from '@common/bridge/ZipfileWalker';\nimport { Engine } from '@common/engine/Engine';\nimport { hasDPad } from '@common/helper/deviceProperties';\nimport { DeviceId } from '@common/model/DeviceId';\nimport { DeviceOrientation } from '@common/model/DeviceOrientation';\nimport { EmulationStatistics } from '@common/model/EmulationStatistics';\nimport { SessionMetadata } from '@common/model/SessionMetadata';\nimport { EmulatorEventTarget } from '@common/service/GenericEventHandlingService';\nimport { SkinLoader } from '@common/service/SkinLoader';\nimport { Mutex } from 'async-mutex';\nimport { Event as EventImpl } from 'microevent.ts';\n\nimport { CloudpilotEvent } from './Event';\nimport { SerialPort } from './SerialPort';\nimport { Watcher } from './Watcher';\nimport { Button } from './index';\nimport { Session } from './model/Session';\nimport { EmbeddedAudioService } from './service/EmbeddedAudioService';\nimport { EmbeddedCanvasDisplayService } from './service/EmbeddedCanvasDisplayService';\nimport { EmbeddedEmulationService } from './service/EmbeddedEmulationService';\nimport { EmbeddedEventHandlingService } from './service/EmbeddedEventHandlingService';\n\nconst DEFAULT_SESSION: Session = {\n    hotsyncName: undefined,\n    orientation: DeviceOrientation.portrait,\n    runInBackground: false,\n    speed: 1,\n    deviceId: DeviceId.m515,\n    maxHostLoad: 1,\n    disablePcmAudio: false,\n    disableDpad: false,\n};\n\nconst CARD_KEY = 'MEMORY_CARD';\n\nfunction assertEngineInitialized(engine: Engine | undefined): asserts engine is Engine {\n    if (!engine) throw new Error('session not initialized');\n}\n\n// TODO: D-Pad\n// TODO: uARM\n\n/**\n * The main emulator interface. Most methods that interact with the emulator are async and\n * should be awaited.\n */\nexport interface Emulator {\n    /**\n     * Load a ROM and put the emulator in paused state.\n     *\n     * @param rom Device ROM\n     * @param nand Device NAND. OS5 devices only.\n     * @param deviceId Optional: device ID, autodetected if not specified\n     */\n    loadRom(rom: Uint8Array, nand?: Uint8Array, deviceId?: DeviceId): Promise<void>;\n\n    /**\n     * Load a Cloudpilot session and put the emulator in paused state.\n     *\n     * @param session Session image\n     */\n    loadSession(session: Uint8Array): Promise<void>;\n\n    /**\n     * Attach and mount a gzip compressed card image.\n     *\n     * @param cardImage Gzip compressed image data\n     */\n    insertCompressedCardImage(cardImage: Uint8Array): Promise<void>;\n\n    /**\n     * Attach and mount a plain card image.\n     *\n     * @param cardImage Image data\n     */\n    insertCardImage(cardImage: Uint8Array): Promise<void>;\n\n    /**\n     * Eject a previously inserted card image:\n     */\n    ejectCard(): Promise<void>;\n\n    /**\n     * Check whether a card is currently mounted.\n     */\n    isCardMounted(): Promise<boolean>;\n\n    /**\n     * Configure the canvas element used for displaying the emulator.\n     *\n     * @param canvas Canvas for displaying the emulator\n     */\n    setCanvas(canvas: HTMLCanvasElement): void;\n\n    /**\n     * Release the canvas element.\n     */\n    releaseCanvas(): void;\n\n    /**\n     * Receive input events from the specified sources. If this method is called\n     * multiple times the previous sources will be unbound.\n     *\n     * @param keyboardTarget Optional: target for keyboard events, default: `window`\n     */\n    bindInput(keyboardTarget?: EmulatorEventTarget): void;\n\n    /**\n     * Unbind the handlers previous bound with `bindInput`.\n     */\n    releaseInput(): void;\n\n    /**\n     * Install a prc or pdb database to the device.\n     *\n     * @param file The database data.\n     */\n    installDatabase(file: Uint8Array): Promise<void>;\n\n    /**\n     * Install a prc database to the device and attempt to launch it.\n     *\n     * @param file The database data.\n     */\n    installAndLaunchDatabase(file: Uint8Array): Promise<void>;\n\n    /**\n     * Extract all databases from a zip archive and install them.\n     *\n     * @param file The zip archive data.\n     */\n    installFromZipfile(file: Uint8Array): Promise<void>;\n\n    /**\n     * Extract all databases from a zip archive and install them, then attempt to\n     * launch the specified file.\n     *\n     * @param file The zip archive data.\n     * @param launchFile The file name of the database that Cloudpilot will try to launch.\n     */\n    installFromZipfileAndLaunch(file: Uint8Array, launchFile: string): Promise<void>;\n\n    /**\n     * Attempt to launch the database with the specified name.\n     *\n     * @param name Database name\n     */\n    launchByName(name: string): Promise<void>;\n\n    /**\n     * Attempt to extract the name from a database and launch it.\n     *\n     * @param database Database data (only the first 32 bytes are required)\n     */\n    launchDatabase(database: Uint8Array): Promise<void>;\n\n    /**\n     * Perform a soft reset (equivalent of pushing the reset button).\n     */\n    reset(): Promise<void>;\n\n    /**\n     * Reset w/o system extensions (equivalent to holding \"down\" while pushing the\n     * reset button).\n     */\n    resetNoExtensions(): Promise<void>;\n\n    /**\n     * Hard reset (equivalent to holding \"power\" while pushing the\n     * reset button).\n     */\n    resetHard(): Promise<void>;\n\n    /**\n     * Is the emulator running?\n     */\n    isRunning(): Promise<boolean>;\n\n    /**\n     * Is the device powered off?\n     */\n    isPowerOff(): Promise<boolean>;\n\n    /**\n     * Has the emulated device passed UI initialization (during boot)? This\n     * is required before software can be installed.\n     */\n    isUiInitialized(): Promise<boolean>;\n\n    /**\n     * Resume a paused device.\n     */\n    resume(): Promise<void>;\n\n    /**\n     * Pause a running device.\n     */\n    pause(): Promise<void>;\n\n    /**\n     * Push a hardware button.\n     *\n     * @param button The desired button\n     */\n    buttonDown(button: Button): void;\n\n    /**\n     * Release a hardware button.\n     *\n     * @param button The desired button\n     */\n\n    buttonUp(button: Button): void;\n\n    /**\n     * Adjust speed of the emulated device.\n     *\n     * @param speed Speed factor\n     */\n    setSpeed(speed: number): void;\n\n    /**\n     * Query configured speed factor.\n     */\n    getSpeed(): number;\n\n    /**\n     * Set audio volume.\n     *\n     * @param volume Volume (1 = 100%, 0 = silent)\n     */\n    setVolume(volume: number): void;\n\n    /**\n     * Query audio volume\n     */\n    getVolume(): number;\n\n    /**\n     * Disable PCM audio on OS5. This will improve emulation speed (by freeing cycles\n     * that would be used to generate audio) but may lead to * compatibility issues with\n     * some apps.\n     *\n     * @param disablePcmAudio Disable / enable PCM audio\n     */\n    setDisablePcmAudio(disablePcmAudio: boolean): void;\n\n    /**\n     * Query whether PCM audio is disabled.\n     */\n    getDisablePcmAudio(): boolean;\n\n    /**\n     * Set the maximum host load. This applies to OS5 emulation only.\n     *\n     * @param maxHostLoad Maximum host load (1 = full core)\n     */\n    setMaxHostLoad(maxHostLoad: number): void;\n\n    /**\n     * Get the maximum host load.\n     */\n    getMaxHostLoad(): number;\n\n    /**\n     * Disable the full d-pad on devices that support it.\n     *\n     * @param disableDpad  Disable / enable d-pad\n     */\n    setDisableDpad(disableDpad: boolean): void;\n\n    /**\n     * Query whether the d-pad has been disabled.\n     */\n    getDisableDpad(): boolean;\n\n    /**\n     * Initialize audio. This must be called from an event handler that was triggered\n     * by a user interaction, i.e. a click or a key press.\n     */\n    initializeAudio(): Promise<boolean>;\n\n    /**\n     * Was audio initialized succesfully?\n     */\n    isAudioInitialized(): boolean;\n\n    /**\n     * Enable or disable game mode (direct key mapping to hardware buttons).\n     *\n     * @param gameModeActive Desired state\n     */\n    setGameMode(gameModeActive: boolean): void;\n\n    /**\n     * Is game mode enabled?\n     */\n    isGameMode(): boolean;\n\n    /**\n     * Enable or disable shift-ctrl for toggling game mode (enabled by default).\n     *\n     * @param enableGamemodeHotkey Desired state\n     */\n    setGameModeHotkeyEnabled(enableGamemodeHotkey: boolean): void;\n\n    /**\n     * Can game mode be toggled via shift-ctrl?\n     */\n    isGameModeHotkeyEnabled(): boolean;\n\n    /**\n     * Enable or disable game mode indicator (overlays hard buttons if game mode is active)? Enabled\n     * by default.\n     *\n     * @param gameModeIndicatorEnabled Desired state\n     */\n    setGameModeIndicatorEnabled(gameModeIndicatorEnabled: boolean): void;\n\n    /**\n     * Is game mode overlay enabled?\n     */\n    isGameModeIndicatorEnabled(): boolean;\n\n    /**\n     * Change device orientation.\n     *\n     * @param orientation Desired orientation\n     */\n    setOrientation(orientation: DeviceOrientation): void;\n\n    /**\n     * Query device orientation\n     */\n    getOrientation(): DeviceOrientation;\n\n    /**\n     * Set hotsync name.\n     *\n     * @param hotsyncName Desired hotsync name\n     */\n    setHotsyncName(hotsyncName: string | undefined): Promise<void>;\n\n    /**\n     * Get hotsync name.\n     */\n    getHotsyncName(): Promise<string | undefined>;\n\n    /**\n     * Keep running if the emulator tab is not visible?\n     *\n     * @param toggle Desired state\n     */\n    setRunHidden(toggle: boolean): void;\n\n    /**\n     * Keep running if the emulator tab is not visible?\n     */\n    getRunHidden(): boolean;\n\n    /**\n     * Get performance statistics\n     */\n    getStatistics(): EmulationStatistics | undefined;\n\n    /**\n     * Get serial transport for IR transceiver.\n     */\n    getSerialPortIR(): SerialPort | undefined;\n\n    /**\n     * Get serial transport for serial port.\n     */\n    getSerialPortSerial(): SerialPort | undefined;\n\n    /**\n     * Fires when the device turns on or off.\n     */\n    readonly powerOffChangeEvent: CloudpilotEvent<boolean>;\n\n    /**\n     * Fires when PalmOS resets or passed UI initialization during boot.\n     */\n    readonly isUiInitializedChangeEvent: CloudpilotEvent<boolean>;\n\n    /**\n     * Fires when audio is initializd successfully.\n     */\n    readonly audioInitializedEvent: CloudpilotEvent<void>;\n\n    /**\n     * Fires after each emulated timeslice (typically 60 times per second)\n     */\n    readonly timesliceEvent: CloudpilotEvent<void>;\n\n    /**\n     * Fires when the hotsync name changes. This does not happen immediatelly when\n     * `setHotsyncName` is called, but only when the OS is notified of the new name.\n     */\n    readonly hotsyncNameChangeEvent: CloudpilotEvent<string>;\n\n    /**\n     * Fires if game mode is enabled or disabled.\n     */\n    readonly gameModeChangeEvent: CloudpilotEvent<boolean>;\n}\n\nexport class EmulatorImpl implements Emulator {\n    constructor(\n        private cloudpilot: Cloudpilot,\n        uarmModuleFactory: () => Promise<WebAssembly.Module>,\n        uarmWorkerUrl?: string,\n        pcmWorkletUrl?: string,\n    ) {\n        this.emulationService = new EmbeddedEmulationService(cloudpilot, uarmModuleFactory, uarmWorkerUrl);\n        this.canvasDisplayService = new EmbeddedCanvasDisplayService(new SkinLoader(Promise.resolve(cloudpilot)));\n        this.eventHandlingService = new EmbeddedEventHandlingService(this.emulationService, this.canvasDisplayService);\n        this.audioService = new EmbeddedAudioService(this.session, this.emulationService, pcmWorkletUrl);\n\n        this.emulationService.newFrameEvent.addHandler((canvas) =>\n            this.canvasDisplayService.updateEmulationCanvas(canvas),\n        );\n\n        this.timesliceEvent.addHandler(this.onTimeslice);\n\n        this.powerOffWatcher = new Watcher(() => this.emulationService.isPowerOff());\n        this.uiInitializedWatcher = new Watcher(() => this.emulationService.isUiInitialized());\n        this.hotsyncNameWatcher = new Watcher(() => this.session.hotsyncName ?? '');\n    }\n\n    getStatistics(): EmulationStatistics | undefined {\n        return this.emulationService.getStatistics();\n    }\n\n    async loadRom(rom: Uint8Array, nand?: Uint8Array, deviceId?: DeviceId): Promise<void> {\n        await this.mutex.runExclusive(async () => {\n            if (deviceId === undefined) {\n                const rominfo = this.cloudpilot.getRomInfo(rom);\n                if (!rominfo || rominfo.supportedDevices.length === 0) {\n                    throw new Error('unsupported device');\n                }\n\n                deviceId = rominfo.supportedDevices[0];\n            }\n            this.session = { ...DEFAULT_SESSION, deviceId };\n            this.audioService.setSession(this.session);\n\n            if (!(await this.emulationService.initWithRom(rom.slice(), nand?.slice(), deviceId, this.session))) {\n                throw new Error('failed to initialize session');\n            }\n\n            this.canvasDisplayService.setDpadEnabled(this.enableDpad());\n            await this.canvasDisplayService.initialize(undefined, deviceId, this.session.orientation);\n        });\n    }\n\n    async loadSession(session: Uint8Array): Promise<void> {\n        await this.mutex.runExclusive(async () => {\n            const sessionImage = this.cloudpilot.deserializeSessionImage<SessionMetadata>(session);\n            if (!sessionImage) throw new Error('bad session image');\n\n            this.session = {\n                hotsyncName: sessionImage.metadata?.hotsyncName,\n                speed: sessionImage.metadata?.speed ?? 1,\n                orientation: sessionImage.metadata?.deviceOrientation ?? DeviceOrientation.portrait,\n                runInBackground: false,\n                deviceId: sessionImage.deviceId,\n                maxHostLoad: sessionImage.metadata?.maxHostLoad ?? 1,\n                disablePcmAudio: sessionImage.metadata?.disableAudio ?? false,\n                disableDpad: false,\n            };\n            this.audioService.setSession(this.session);\n\n            if (!(await this.emulationService.initWithSessionImage(sessionImage, this.session))) {\n                throw new Error('failed to initialize session');\n            }\n\n            this.canvasDisplayService.setDpadEnabled(this.enableDpad());\n            await this.canvasDisplayService.initialize(undefined, sessionImage.deviceId, this.session.orientation);\n        });\n    }\n\n    async insertCompressedCardImage(cardImage: Uint8Array): Promise<void> {\n        const decompressedImage = this.cloudpilot.decompress(cardImage);\n        if (!decompressedImage) {\n            throw new Error('failed to decompress and mount card image');\n        }\n\n        await this.insertCardImage(decompressedImage);\n    }\n\n    async insertCardImage(cardImage: Uint8Array): Promise<void> {\n        await this.mutex.runExclusive(async () => {\n            const engine = this.getEngine();\n\n            if (cardImage.length % 512 !== 0) throw new Error('card image size must be a multiple of 512');\n\n            if (await this.isCardMountedUnguarded()) throw new Error('card already mounted');\n\n            const allocatedImage = engine.allocateCard(CARD_KEY, cardImage.length);\n            allocatedImage.set(new Uint32Array(cardImage.buffer, cardImage.byteOffset, cardImage.byteLength >>> 2));\n\n            if (!(await engine.mountCard(CARD_KEY))) throw new Error('failed to mount card image');\n        });\n    }\n\n    async ejectCard(): Promise<void> {\n        await this.mutex.runExclusive(async () => {\n            const engine = this.getEngine();\n\n            if (!(await this.isCardMountedUnguarded())) return;\n\n            await engine.releaseCard(CARD_KEY);\n        });\n    }\n\n    async isCardMounted(): Promise<boolean> {\n        return await this.mutex.runExclusive(() => this.isCardMountedUnguarded());\n    }\n\n    setCanvas(canvas: HTMLCanvasElement): void {\n        this.canvas = canvas;\n        void this.canvasDisplayService.initialize(canvas, this.session.deviceId, this.session.orientation);\n    }\n\n    releaseCanvas(): void {\n        this.canvas = undefined;\n        void this.canvasDisplayService.initialize(undefined, this.session.deviceId, this.session.orientation);\n    }\n\n    bindInput(keyEventTarget?: EmulatorEventTarget): void {\n        if (!this.canvas) {\n            throw new Error('you must set up the canvas setCanvas before calling bindInput');\n        }\n        this.eventHandlingService.bind(this.canvas, false, keyEventTarget);\n    }\n\n    releaseInput(): void {\n        this.eventHandlingService.release();\n    }\n\n    async installDatabase(file: Uint8Array): Promise<void> {\n        await this.mutex.runExclusive(() => this.installDatabaseUnguarded(file));\n    }\n\n    async installAndLaunchDatabase(file: Uint8Array): Promise<void> {\n        await this.installDatabase(file);\n        await this.launchDatabase(file);\n    }\n\n    async installFromZipfile(file: Uint8Array): Promise<void> {\n        await this.installFromZipfileAndLaunch(file);\n    }\n\n    async installFromZipfileAndLaunch(file: Uint8Array, launchFile?: string): Promise<void> {\n        await this.mutex.runExclusive(async () => {\n            let launch: Uint8Array | undefined;\n\n            await this.cloudpilot.withZipfileWalker(file, async (walker) => {\n                while (walker.GetState() === ZipfileWalkerState.open) {\n                    const content = walker.GetCurrentEntryContent();\n                    const name = walker.GetCurrentEntryName();\n\n                    if (!content) {\n                        throw new Error(`unable to read ${name} from zipfile`);\n                    }\n\n                    await this.installDatabaseUnguarded(content);\n\n                    if (name.toLowerCase() === launchFile?.toLowerCase()) launch = content.subarray(0, 32).slice();\n\n                    walker.Next();\n                }\n\n                if (walker.GetState() === ZipfileWalkerState.error) {\n                    throw new Error('error reading zipfile');\n                }\n            });\n\n            if (launchFile !== undefined && !launch) throw new Error(`database ${launchFile} not found `);\n            if (launch) await this.launchDatabaseUnguarded(launch);\n        });\n    }\n\n    async launchByName(name: string): Promise<void> {\n        await this.mutex.runExclusive(async () => {\n            const engine = this.getEngine();\n\n            if (!(await engine.launchAppByName(name))) throw new Error(`failed to launch ${name}`);\n        });\n    }\n\n    async launchDatabase(database: Uint8Array): Promise<void> {\n        await this.mutex.runExclusive(() => this.launchDatabaseUnguarded(database));\n    }\n\n    async reset(): Promise<void> {\n        await this.mutex.runExclusive(() => this.emulationService.reset());\n    }\n\n    async resetNoExtensions(): Promise<void> {\n        await this.mutex.runExclusive(() => this.emulationService.resetNoExtensions());\n    }\n\n    async resetHard(): Promise<void> {\n        await this.mutex.runExclusive(() => this.emulationService.resetHard());\n    }\n\n    async isRunning(): Promise<boolean> {\n        return await this.mutex.runExclusive(() => this.emulationService.isRunning());\n    }\n\n    async isPowerOff(): Promise<boolean> {\n        return await this.mutex.runExclusive(() => this.emulationService.isPowerOff());\n    }\n\n    async isUiInitialized(): Promise<boolean> {\n        return await this.mutex.runExclusive(() => this.emulationService.isUiInitialized());\n    }\n\n    async resume(): Promise<void> {\n        await this.mutex.runExclusive(() => this.emulationService.resume());\n    }\n\n    async pause(): Promise<void> {\n        await this.mutex.runExclusive(() => this.emulationService.pause());\n    }\n\n    buttonDown(button: Button): void {\n        this.emulationService.handleButtonDown(button as number);\n    }\n\n    buttonUp(button: Button): void {\n        this.emulationService.handleButtonUp(button as number);\n    }\n\n    setSpeed(speed: number): void {\n        this.session.speed = speed;\n        this.emulationService.syncSettings();\n    }\n\n    getSpeed(): number {\n        return this.session.speed;\n    }\n\n    setVolume(volume: number): void {\n        this.audioService.setVolume(volume);\n    }\n\n    getVolume(): number {\n        return this.audioService.getVolume();\n    }\n\n    setDisablePcmAudio(disablePcmAudio: boolean): void {\n        this.session.disablePcmAudio = disablePcmAudio;\n        this.emulationService.syncSettings();\n    }\n\n    getDisablePcmAudio(): boolean {\n        return this.session.disablePcmAudio;\n    }\n\n    setMaxHostLoad(maxHostLoad: number): void {\n        this.session.maxHostLoad = maxHostLoad;\n        this.emulationService.syncSettings();\n    }\n\n    getMaxHostLoad(): number {\n        return this.session.maxHostLoad;\n    }\n\n    setDisableDpad(disableDpad: boolean): void {\n        this.session.disableDpad = disableDpad;\n\n        this.canvasDisplayService.setDpadEnabled(this.enableDpad());\n        void this.canvasDisplayService.initialize();\n    }\n\n    getDisableDpad(): boolean {\n        return this.session.disableDpad;\n    }\n\n    async initializeAudio(): Promise<boolean> {\n        await this.audioService.initialize();\n        return this.audioService.isInitialized();\n    }\n\n    isAudioInitialized(): boolean {\n        return this.audioService.isInitialized();\n    }\n\n    setOrientation(orientation: DeviceOrientation): void {\n        this.session.orientation = orientation;\n        this.canvasDisplayService.updateOrientation(this.session.orientation);\n    }\n\n    getOrientation(): DeviceOrientation {\n        return this.session.orientation;\n    }\n\n    async setHotsyncName(hotsyncName: string | undefined): Promise<void> {\n        await this.mutex.runExclusive(() => {\n            this.session.hotsyncName = hotsyncName;\n            this.emulationService.syncSettings();\n        });\n    }\n\n    async getHotsyncName(): Promise<string | undefined> {\n        return this.mutex.runExclusive(() => this.session.hotsyncName);\n    }\n\n    setRunHidden(toggle: boolean): void {\n        this.session.runInBackground = toggle;\n        this.emulationService.syncSettings();\n    }\n\n    getRunHidden(): boolean {\n        return this.session.runInBackground;\n    }\n\n    isGameMode(): boolean {\n        return this.eventHandlingService.isGameMode();\n    }\n\n    setGameMode(gameModeActive: boolean): void {\n        this.eventHandlingService.setGameMode(gameModeActive);\n    }\n\n    isGameModeHotkeyEnabled(): boolean {\n        return this.eventHandlingService.isGameModeHotkeyEnabled();\n    }\n\n    setGameModeHotkeyEnabled(enableGamemodeHotkey: boolean): void {\n        this.eventHandlingService.setGameModeHotkeyEnabled(enableGamemodeHotkey);\n    }\n\n    isGameModeIndicatorEnabled(): boolean {\n        return this.canvasDisplayService.isGameModeIndicatorEnabled();\n    }\n\n    setGameModeIndicatorEnabled(gameModeIndicatorEnabled: boolean): void {\n        this.canvasDisplayService.setGameModeIndicatorEnabled(gameModeIndicatorEnabled);\n    }\n\n    getSerialPortIR(): SerialPort | undefined {\n        return this.emulationService.getSerialPortIR();\n    }\n\n    getSerialPortSerial(): SerialPort | undefined {\n        return this.emulationService.getSerialPortSerial();\n    }\n\n    get powerOffChangeEvent(): CloudpilotEvent<boolean> {\n        return this.powerOffWatcher.changeEvent;\n    }\n\n    get isUiInitializedChangeEvent(): CloudpilotEvent<boolean> {\n        return this.uiInitializedWatcher.changeEvent;\n    }\n\n    get hotsyncNameChangeEvent(): CloudpilotEvent<string> {\n        return this.hotsyncNameWatcher.changeEvent;\n    }\n\n    get gameModeChangeEvent(): CloudpilotEvent<boolean> {\n        return this.eventHandlingService.gameModeChangeEvent;\n    }\n\n    get timesliceEvent(): CloudpilotEvent<void> {\n        return this.emulationService.timesliceEvent;\n    }\n\n    private onTimeslice = (): void => {\n        this.powerOffWatcher.update();\n        this.uiInitializedWatcher.update();\n        this.hotsyncNameWatcher.update();\n    };\n\n    private async isCardMountedUnguarded(): Promise<boolean> {\n        const engine = this.emulationService.getEngine();\n        if (!engine) return false;\n\n        return (await engine.getMountedKey()) === CARD_KEY;\n    }\n\n    private async installDatabaseUnguarded(file: Uint8Array) {\n        const engine = this.getEngine();\n\n        if ((await engine.installDb(file)) < 0) throw new Error('failed to install database');\n    }\n\n    private async launchDatabaseUnguarded(database: Uint8Array) {\n        const engine = this.getEngine();\n\n        if (!(await engine.launchAppByHeader(database))) throw new Error(`failed to launch ${name}`);\n    }\n\n    private getEngine(): Engine {\n        const engine = this.emulationService.getEngine();\n        assertEngineInitialized(engine);\n\n        return engine;\n    }\n\n    private enableDpad(): boolean {\n        return !this.session.disableDpad && hasDPad(this.session.deviceId);\n    }\n\n    readonly audioInitializedEvent = new EventImpl<void>();\n\n    private mutex = new Mutex();\n\n    private emulationService: EmbeddedEmulationService;\n    private canvasDisplayService: EmbeddedCanvasDisplayService;\n    private eventHandlingService: EmbeddedEventHandlingService;\n    private audioService: EmbeddedAudioService;\n\n    private powerOffWatcher: Watcher<boolean>;\n    private uiInitializedWatcher: Watcher<boolean>;\n    private hotsyncNameWatcher: Watcher<string>;\n\n    private session: Session = { ...DEFAULT_SESSION };\n\n    private canvas: HTMLCanvasElement | undefined;\n}\n","import { PalmButton } from '@native/cloudpilot_web';\n\n/**\n * The various supported hard buttons.\n */\nexport enum Button {\n    cal = PalmButton.cal,\n    phone = PalmButton.phone,\n    todo = PalmButton.todo,\n    notes = PalmButton.notes,\n    up = PalmButton.up,\n    down = PalmButton.down,\n    power = PalmButton.power,\n    cradle = PalmButton.cradle,\n}\n","import { Cloudpilot } from '@common/bridge/Cloudpilot';\nimport { cachedInstantiate, loadAndCompileModule } from '@common/helper/wasm';\n\nimport { Emulator, EmulatorImpl } from './Emulator';\n\nexport { DeviceId } from '@common/model/DeviceId';\nexport { Button } from './button';\nexport { DeviceOrientation } from '@common/model/DeviceOrientation';\nexport { Emulator } from './Emulator';\nexport {\n    EmulationStatistics,\n    EmulationStatisticsCloudpilot,\n    EmulationStatisticsUarm,\n} from '@common/model/EmulationStatistics';\nexport { EmulatorEventTarget as EventTarget, EventHandler } from '@common/service/GenericEventHandlingService';\nexport { CloudpilotEvent as Event, Handler } from './Event';\nexport { SerialPort, ReceivePayload } from './SerialPort';\n\nexport const VERSION = process.env.VERSION;\n\n/**\n * Options for loading the emulator.\n */\nexport interface LoadOptions {\n    /**\n     * URL for loading the cloudpilot WASM binary.\n     */\n    cloudpilotModuleUrl?: string;\n\n    /**\n     * URL for loading the uARM WASM binary (for OS5 emulation).\n     */\n    uarmModuleUrl?: string;\n\n    /**\n     * URL for loading the uARM worker (for OS5 emulator).\n     */\n    uarmWorkerUrl?: string;\n\n    /**\n     * URL for loading the PCM worklet (for OS5 PCM audio).\n     */\n    pcmWorkletUrl?: string;\n\n    /**\n     * By default, the uARM WASM binary is loaded on demand when an OS5 session is\n     * launched. This option causes the binary to be preloaded on initialization.\n     */\n    preloadUarm?: boolean;\n}\n\nconst creaeteUarmModuleFactory = (preload: boolean, url: string): (() => Promise<WebAssembly.Module>) => {\n    let module: Promise<WebAssembly.Module> | undefined;\n\n    const factory = () => {\n        if (!module) module = loadAndCompileModule(url);\n        return module;\n    };\n\n    if (preload) void factory();\n\n    return factory;\n};\n\n/**\n * Create a new instance of the emulator.\n *\n * @param options Optional: options for loading the emulator\n *\n * @returns Emulator instance\n */\nexport async function createEmulator(options: LoadOptions = {}): Promise<Emulator> {\n    return createEmulatorFactory(options)();\n}\n\n/**\n * Create a factory function that creates new Emulator instances without redownloading\n * and recompiling the WASM module.\n *\n * @param options Optional: options for loading the emulator\n * @returns\n */\nexport function createEmulatorFactory(options: LoadOptions = {}): () => Promise<Emulator> {\n    const instantiate = cachedInstantiate(options.cloudpilotModuleUrl ?? 'cloudpilot_web.wasm');\n    const factory = creaeteUarmModuleFactory(options.preloadUarm ?? false, options.uarmModuleUrl ?? 'uarm_web.wasm');\n\n    return () =>\n        Cloudpilot.create(instantiate).then(\n            (cloudpilot) => new EmulatorImpl(cloudpilot, factory, options.uarmWorkerUrl, options.pcmWorkletUrl),\n        );\n}\n"],"names":["root","factory","exports","module","define","amd","self","Event_1","default","Object","defineProperty","value","factories","callback","context","payload","Event","this","hasHandlers","_handlers","_contexts","_createDispatcher","prototype","addHandler","handler","isHandlerAttached","push","_updateHasHandlers","removeHandler","idx","_getHandlerIndex","splice","length","handlerCount","undefined","dispatch","src","argsHandlers","argsContexts","i","Function","bind","apply","concat","compileFactory","lastNumberWeakMap","MAX_SAFE_INTEGER","Number","TWO_TO_THE_POWER_OF_TWENTY_NINE","TWO_TO_THE_POWER_OF_THIRTY","LAST_NUMBER_WEAK_MAP","WeakMap","generateUniqueNumber","cache","collection","lastNumber","get","nextNumber","size","has","Math","floor","random","Error","createGenerateUniqueNumber","set","addUniqueNumber","number","add","createAddUniqueNumber","_scriptName","createModule","document","currentScript","moduleArg","Module","ENVIRONMENT_IS_WEB","window","ENVIRONMENT_IS_WORKER","WorkerGlobalScope","thisProgram","process","versions","node","type","quit_","status","toThrow","location","href","readAsync","readBinary","scriptDirectory","URL","url","xhr","XMLHttpRequest","open","responseType","send","Uint8Array","response","async","fetch","credentials","ok","arrayBuffer","wasmBinary","EXITSTATUS","readyPromiseResolve","readyPromiseReject","wasmMemory","HEAP8","HEAPU8","HEAP32","HEAPU32","HEAPF64","HEAP64","out","console","log","err","error","ABORT","assert","condition","text","abort","checkStackCookie","max","_emscripten_stack_get_end","cookie1","cookie2","ptrToString","runtimeInitialized","updateMemoryViews","b","buffer","Int8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array","wasmBinaryFile","runDependencies","dependenciesFulfilled","what","e","WebAssembly","RuntimeError","instantiateAsync","binary","binaryFile","imports","instantiateStreaming","reason","file","getBinarySync","getWasmBinary","instantiate","instantiateArrayBuffer","ExitStatus","name","constructor","message","wasmTable","functionsInTableMap","callRuntimeCallbacks","callbacks","shift","onPostRuns","addOnPostRun","cb","onPreRuns","addOnPreRun","noExitRuntime","ptr","toString","padStart","UTF8Decoder","TextDecoder","UTF8ArrayToString","heapOrArray","maxBytesToRead","NaN","endIdx","endPtr","decode","subarray","str","u0","u1","u2","String","fromCharCode","ch","UTF8ToString","bigintToI53Checked","num","runtimeKeepaliveCounter","MONTH_DAYS_LEAP_CUMULATIVE","MONTH_DAYS_REGULAR_CUMULATIVE","ydayFromDate","date","year","getFullYear","getMonth","getDate","timers","handleException","_emscripten_stack_get_current","keepRuntimeAlive","_proc_exit","code","exitJS","implicit","_exit","_emscripten_get_now","performance","now","stringToUTF8Array","heap","outIdx","maxBytesToWrite","startIdx","u","codePointAt","stringToUTF8","outPtr","_emscripten_date_now","Date","readEmAsmArgsArray","alignMemory","alignment","ceil","growMemory","pages","byteLength","grow","ENV","getEnvStrings","strings","env","USER","LOGNAME","PATH","PWD","HOME","LANG","navigator","language","replace","_","x","lengthBytesUTF8","len","c","charCodeAt","printCharBuffers","printChar","stream","curr","onInits","uleb128Encode","n","target","wasmTableMirror","getWasmTableEntry","funcPtr","func","freeTableIndexes","setWasmTableEntry","sig","rtn","offset","count","item","updateTableMap","getFunctionAddress","ret","pop","RangeError","getEmptyTableSlot","TypeError","wrapped","typeNames","j","f","d","p","parameters","results","sigToWasmTypes","typeSectionBody","sigRet","slice","sigParam","typeCodes","paramType","generateFuncType","bytes","Instance","convertJsFunctionToWasm","_main","_emscripten_bind_VoidPtr___destroy___0","_emscripten_bind_Cloudpilot_Cloudpilot_0","_emscripten_bind_Cloudpilot_Malloc_1","_emscripten_bind_Cloudpilot_Free_1","_emscripten_bind_Cloudpilot_Nullptr_0","_emscripten_bind_Cloudpilot_EnableLogging_1","_emscripten_bind_Cloudpilot_InitializeSession_3","_emscripten_bind_Cloudpilot_GetCyclesPerSecond_0","_emscripten_bind_Cloudpilot_RunEmulation_1","_emscripten_bind_Cloudpilot_SetClockFactor_1","_emscripten_bind_Cloudpilot_CopyFrame_0","_emscripten_bind_Cloudpilot_IsScreenDirty_0","_emscripten_bind_Cloudpilot_MarkScreenClean_0","_emscripten_bind_Cloudpilot_MinMemoryForDevice_1","_emscripten_bind_Cloudpilot_FramebufferSizeForDevice_1","_emscripten_bind_Cloudpilot_TotalMemoryForDevice_1","_emscripten_bind_Cloudpilot_QueuePenMove_2","_emscripten_bind_Cloudpilot_QueuePenUp_0","_emscripten_bind_Cloudpilot_QueueButtonDown_1","_emscripten_bind_Cloudpilot_QueueButtonUp_1","_emscripten_bind_Cloudpilot_QueueKeyboardEvent_1","_emscripten_bind_Cloudpilot_IsPowerOff_0","_emscripten_bind_Cloudpilot_IsUIInitialized_0","_emscripten_bind_Cloudpilot_GetOSVersion_0","_emscripten_bind_Cloudpilot_IsSetupComplete_0","_emscripten_bind_Cloudpilot_Reset_0","_emscripten_bind_Cloudpilot_ResetNoExtensions_0","_emscripten_bind_Cloudpilot_ResetHard_0","_emscripten_bind_Cloudpilot_InstallDb_2","_emscripten_bind_Cloudpilot_GetPalette2bitMapping_0","_emscripten_bind_Cloudpilot_GetMemoryPtr_0","_emscripten_bind_Cloudpilot_GetDirtyPagesPtr_0","_emscripten_bind_Cloudpilot_GetMemorySize_0","_emscripten_bind_Cloudpilot_ImportMemoryImage_2","_emscripten_bind_Cloudpilot_GetRomPtr_0","_emscripten_bind_Cloudpilot_GetRomSize_0","_emscripten_bind_Cloudpilot_GetSavestatePtr_0","_emscripten_bind_Cloudpilot_GetSavestateSize_0","_emscripten_bind_Cloudpilot_SaveState_0","_emscripten_bind_Cloudpilot_LoadState_2","_emscripten_bind_Cloudpilot_GetHotsyncName_0","_emscripten_bind_Cloudpilot_SetHotsyncName_1","_emscripten_bind_Cloudpilot_RegisterPwmHandler_1","_emscripten_bind_Cloudpilot_StartBackup_0","_emscripten_bind_Cloudpilot_SetClipboardIntegration_1","_emscripten_bind_Cloudpilot_GetClipboardIntegration_0","_emscripten_bind_Cloudpilot_IsSuspended_0","_emscripten_bind_Cloudpilot_GetSuspendContext_0","_emscripten_bind_Cloudpilot_SetNetworkRedirection_1","_emscripten_bind_Cloudpilot_GetNetworkRedirection_0","_emscripten_bind_Cloudpilot_RegisterProxyDisconnectHandler_1","_emscripten_bind_Cloudpilot_SetHotsyncNameManagement_1","_emscripten_bind_Cloudpilot_LaunchAppByName_1","_emscripten_bind_Cloudpilot_LaunchAppByDbHeader_2","_emscripten_bind_Cloudpilot_ClearExternalStorage_0","_emscripten_bind_Cloudpilot_AllocateCard_2","_emscripten_bind_Cloudpilot_AdoptCard_3","_emscripten_bind_Cloudpilot_MountCard_1","_emscripten_bind_Cloudpilot_RemoveCard_1","_emscripten_bind_Cloudpilot_GetCardData_1","_emscripten_bind_Cloudpilot_GetCardDirtyPages_1","_emscripten_bind_Cloudpilot_GetCardSize_1","_emscripten_bind_Cloudpilot_RemountCards_0","_emscripten_bind_Cloudpilot_GetSupportLevel_1","_emscripten_bind_Cloudpilot_GetMountedKey_0","_emscripten_bind_Cloudpilot_GetTransportIR_0","_emscripten_bind_Cloudpilot_GetTransportSerial_0","_emscripten_bind_Cloudpilot___destroy___0","_emscripten_bind_RomInfo_RomInfo_2","_emscripten_bind_RomInfo_IsValid_0","_emscripten_bind_RomInfo_CardVersion_0","_emscripten_bind_RomInfo_CardName_0","_emscripten_bind_RomInfo_RomVersion_0","_emscripten_bind_RomInfo_RomVersionString_0","_emscripten_bind_RomInfo_Supports_1","_emscripten_bind_RomInfo___destroy___0","_emscripten_bind_Frame_GetLineWidth_0","_emscripten_bind_Frame_GetBpp_0","_emscripten_bind_Frame_GetLines_0","_emscripten_bind_Frame_GetMargin_0","_emscripten_bind_Frame_GetBytesPerLine_0","_emscripten_bind_Frame_GetFirstDirtyLine_0","_emscripten_bind_Frame_GetLastDirtyLine_0","_emscripten_bind_Frame_GetHasChanges_0","_emscripten_bind_Frame_GetBuffer_0","_emscripten_bind_Frame_GetBufferSize_0","_emscripten_bind_Frame_GetScaleX_0","_emscripten_bind_Frame_GetScaleY_0","_emscripten_bind_Frame___destroy___0","_emscripten_bind_DbBackup_Init_1","_emscripten_bind_DbBackup_IsInProgress_0","_emscripten_bind_DbBackup_IsDone_0","_emscripten_bind_DbBackup_GetCurrentDatabase_0","_emscripten_bind_DbBackup_Save_0","_emscripten_bind_DbBackup_Skip_0","_emscripten_bind_DbBackup_GetArchivePtr_0","_emscripten_bind_DbBackup_GetArchiveSize_0","_emscripten_bind_DbBackup___destroy___0","_emscripten_bind_SuspendContextClipboardCopy_Cancel_0","_emscripten_bind_SuspendContextClipboardCopy_Resume_0","_emscripten_bind_SuspendContextClipboardCopy_GetClipboardContent_0","_emscripten_bind_SuspendContextClipboardCopy___destroy___0","_emscripten_bind_SuspendContextClipboardPaste_Cancel_0","_emscripten_bind_SuspendContextClipboardPaste_Resume_1","_emscripten_bind_SuspendContextClipboardPaste___destroy___0","_emscripten_bind_SuspendContextNetworkConnect_Cancel_0","_emscripten_bind_SuspendContextNetworkConnect_Resume_0","_emscripten_bind_SuspendContextNetworkConnect___destroy___0","_emscripten_bind_SuspendContextNetworkRpc_Cancel_0","_emscripten_bind_SuspendContextNetworkRpc_GetRequestSize_0","_emscripten_bind_SuspendContextNetworkRpc_GetRequestData_0","_emscripten_bind_SuspendContextNetworkRpc_ReceiveResponse_2","_emscripten_bind_SuspendContextNetworkRpc___destroy___0","_emscripten_bind_SuspendContextSerialSync_Cancel_0","_emscripten_bind_SuspendContextSerialSync_Resume_0","_emscripten_bind_SuspendContextSerialSync___destroy___0","_emscripten_bind_SuspendContext_GetKind_0","_emscripten_bind_SuspendContext_Cancel_0","_emscripten_bind_SuspendContext_AsContextClipboardCopy_0","_emscripten_bind_SuspendContext_AsContextClipboardPaste_0","_emscripten_bind_SuspendContext_AsContextNetworkConnect_0","_emscripten_bind_SuspendContext_AsContextNetworkRpc_0","_emscripten_bind_SuspendContext_AsContextSerialSync_0","_emscripten_bind_SuspendContext___destroy___0","_emscripten_bind_SessionImage_SessionImage_0","_emscripten_bind_SessionImage_GetDeviceId_0","_emscripten_bind_SessionImage_SetDeviceId_1","_emscripten_bind_SessionImage_GetRomImage_0","_emscripten_bind_SessionImage_GetRomImageSize_0","_emscripten_bind_SessionImage_SetRomImage_2","_emscripten_bind_SessionImage_GetMemoryImage_0","_emscripten_bind_SessionImage_GetMemoryImageSize_0","_emscripten_bind_SessionImage_SetMemoryImage_2","_emscripten_bind_SessionImage_GetMetadata_0","_emscripten_bind_SessionImage_GetMetadataSize_0","_emscripten_bind_SessionImage_SetMetadata_2","_emscripten_bind_SessionImage_GetSavestate_0","_emscripten_bind_SessionImage_GetSavestateSize_0","_emscripten_bind_SessionImage_SetSavestate_2","_emscripten_bind_SessionImage_GetVersion_0","_emscripten_bind_SessionImage_Serialize_0","_emscripten_bind_SessionImage_GetSerializedImage_0","_emscripten_bind_SessionImage_GetSerializedImageSize_0","_emscripten_bind_SessionImage_Deserialize_2","_emscripten_bind_SessionImage___destroy___0","_emscripten_bind_SkinLoader_SkinLoader_1","_emscripten_bind_SkinLoader_GetData_0","_emscripten_bind_SkinLoader_GetSize_0","_emscripten_bind_SkinLoader___destroy___0","_emscripten_bind_EmTransportSerialBuffer_RxBytesPending_0","_emscripten_bind_EmTransportSerialBuffer_Receive_0","_emscripten_bind_EmTransportSerialBuffer_Send_3","_emscripten_bind_EmTransportSerialBuffer_IsOpen_0","_emscripten_bind_EmTransportSerialBuffer_Rts_0","_emscripten_bind_EmTransportSerialBuffer_Dtr_0","_emscripten_bind_EmTransportSerialBuffer_IsBreak_0","_emscripten_bind_EmTransportSerialBuffer_BufferSize_0","_emscripten_bind_EmTransportSerialBuffer_GetBaud_0","_emscripten_bind_EmTransportSerialBuffer_GetParity_0","_emscripten_bind_EmTransportSerialBuffer_GetStopBits_0","_emscripten_bind_EmTransportSerialBuffer_GetDataBits_0","_emscripten_bind_EmTransportSerialBuffer_GetHwrHandshake_0","_emscripten_bind_EmTransportSerialBuffer_GetModeSync_0","_emscripten_bind_EmTransportSerialBuffer_SetModeSync_1","_emscripten_bind_EmTransportSerialBuffer_IsFrameComplete_0","_emscripten_bind_EmTransportSerialBuffer_SetRequestTransferCallback_1","_emscripten_bind_EmTransportSerialBuffer___destroy___0","_emscripten_bind_GunzipContext_GunzipContext_3","_emscripten_bind_GunzipContext_GetState_0","_emscripten_bind_GunzipContext_Continue_0","_emscripten_bind_GunzipContext_GetUncompressedData_0","_emscripten_bind_GunzipContext_ReleaseUncompressedData_0","_emscripten_bind_GunzipContext_GetUncompressedSize_0","_emscripten_bind_GunzipContext_GetError_0","_emscripten_bind_GunzipContext___destroy___0","_emscripten_bind_ZipfileWalker_ZipfileWalker_2","_emscripten_bind_ZipfileWalker_GetState_0","_emscripten_bind_ZipfileWalker_Next_0","_emscripten_bind_ZipfileWalker_GetTotalEntries_0","_emscripten_bind_ZipfileWalker_GetCurrentEntrySize_0","_emscripten_bind_ZipfileWalker_GetCurrentEntryName_0","_emscripten_bind_ZipfileWalker_GetCurrentEntryContent_0","_emscripten_bind_ZipfileWalker___destroy___0","_emscripten_bind_SessionFile5_SessionFile5_0","_emscripten_bind_SessionFile5_IsSessionFile_2","_emscripten_bind_SessionFile5_GetDeviceId_0","_emscripten_bind_SessionFile5_SetDeviceId_1","_emscripten_bind_SessionFile5_GetMetadata_0","_emscripten_bind_SessionFile5_GetMetadataSize_0","_emscripten_bind_SessionFile5_SetMetadata_2","_emscripten_bind_SessionFile5_GetNor_0","_emscripten_bind_SessionFile5_GetNorSize_0","_emscripten_bind_SessionFile5_SetNor_2","_emscripten_bind_SessionFile5_GetNand_0","_emscripten_bind_SessionFile5_GetNandSize_0","_emscripten_bind_SessionFile5_SetNand_2","_emscripten_bind_SessionFile5_GetMemory_0","_emscripten_bind_SessionFile5_GetMemorySize_0","_emscripten_bind_SessionFile5_SetMemory_2","_emscripten_bind_SessionFile5_GetSavestate_0","_emscripten_bind_SessionFile5_GetSavestateSize_0","_emscripten_bind_SessionFile5_SetSavestate_2","_emscripten_bind_SessionFile5_GetRamSize_0","_emscripten_bind_SessionFile5_SetRamSize_1","_emscripten_bind_SessionFile5_Serialize_0","_emscripten_bind_SessionFile5_GetSerializedSession_0","_emscripten_bind_SessionFile5_GetSerializedSessionSize_0","_emscripten_bind_SessionFile5_GetVersion_0","_emscripten_bind_SessionFile5_Deserialize_2","_emscripten_bind_SessionFile5___destroy___0","_emscripten_bind_RomInfo5_RomInfo5_2","_emscripten_bind_RomInfo5_IsValid_0","_emscripten_bind_RomInfo5_GetCardName_0","_emscripten_bind_RomInfo5_GetManufacturer_0","_emscripten_bind_RomInfo5_GetRomName_0","_emscripten_bind_RomInfo5_GetCompanyId_0","_emscripten_bind_RomInfo5_GetHalId_0","_emscripten_bind_RomInfo5_NeedsNand_0","_emscripten_bind_RomInfo5_GetDeviceType_0","_emscripten_bind_RomInfo5_GetRecommendedRamSize_0","_emscripten_bind_RomInfo5___destroy___0","__emscripten_timeout","_emscripten_stack_init","ASM_CONSTS","$0","wasmImports","a","filename","line","s","msg","isAssert","fd","h","time","tmPtr","getSeconds","getMinutes","getHours","getDay","yday","getTimezoneOffset","start","summerOffset","winterOffset","dst","min","q","guessedOffset","dstOffset","nonDstOffset","trueOffset","setTime","getTime","getYear","timeMs","isNaN","BigInt","k","which","timeout_ms","clearTimeout","id","setTimeout","maybeExit","callUserCallback","r","timezone","daylight","std_name","dst_name","currentYear","winter","summer","stdTimezoneOffset","extractZone","timezoneOffset","sign","absOffset","abs","winterName","summerName","clk_id","ignored_precision","ptime","clock_id","nsec","round","t","sigPtr","argbuf","args","buf","wide","readEmAsmArgs","runEmAsmFunction","g","o","requestedSize","oldSize","maxHeapSize","cutDown","overGrownHeapSize","newSize","l","__environ","environ_buf","bufSize","envp","string","Infinity","m","penviron_count","penviron_buf_size","iov","iovcnt","pnum","whence","newOffset","wasmExports","receiveInstance","instance","assignWasmExports","removeRunDependency","path","info","Promise","resolve","reject","mod","inst","createWasm","WrapperObject","getCache","__class__","__cache__","wrapPointer","create","preInit","run","doRun","entryFunction","callMain","postRun","preRun","obj","obj1","obj2","ensureCache","pos","temps","needed","prepare","alloc","array","view","BYTES_PER_ELEMENT","copy","ensureString","intArray","stringy","u8array","Array","VoidPtr","Cloudpilot","RomInfo","Frame","DbBackup","SuspendContextClipboardCopy","SuspendContextClipboardPaste","SuspendContextNetworkConnect","SuspendContextNetworkRpc","SuspendContextSerialSync","SuspendContext","SessionImage","SkinLoader","EmTransportSerialBuffer","GunzipContext","data","slizeSize","ZipfileWalker","bufferSize","SessionFile5","RomInfo5","__destroy__","Malloc","Free","Nullptr","EnableLogging","logging","InitializeSession","deviceType","GetCyclesPerSecond","RunEmulation","cycles","SetClockFactor","clockFactor","CopyFrame","IsScreenDirty","MarkScreenClean","MinMemoryForDevice","deviceId","FramebufferSizeForDevice","TotalMemoryForDevice","QueuePenMove","y","QueuePenUp","QueueButtonDown","QueueButtonUp","QueueKeyboardEvent","IsPowerOff","IsUIInitialized","GetOSVersion","IsSetupComplete","Reset","ResetNoExtensions","ResetHard","InstallDb","GetPalette2bitMapping","GetMemoryPtr","GetDirtyPagesPtr","GetMemorySize","ImportMemoryImage","GetRomPtr","GetRomSize","GetSavestatePtr","GetSavestateSize","SaveState","LoadState","GetHotsyncName","SetHotsyncName","RegisterPwmHandler","handlerPtr","StartBackup","SetClipboardIntegration","toggle","GetClipboardIntegration","IsSuspended","GetSuspendContext","SetNetworkRedirection","GetNetworkRedirection","RegisterProxyDisconnectHandler","SetHotsyncNameManagement","LaunchAppByName","LaunchAppByDbHeader","ClearExternalStorage","AllocateCard","key","blockCount","AdoptCard","MountCard","RemoveCard","GetCardData","GetCardDirtyPages","GetCardSize","RemountCards","GetSupportLevel","GetMountedKey","GetTransportIR","GetTransportSerial","IsValid","CardVersion","CardName","RomVersion","RomVersionString","Supports","GetLineWidth","GetBpp","GetLines","GetMargin","GetBytesPerLine","GetFirstDirtyLine","GetLastDirtyLine","GetHasChanges","GetBuffer","GetBufferSize","GetScaleX","GetScaleY","Init","includeRomDatabases","IsInProgress","IsDone","GetCurrentDatabase","Save","Skip","GetArchivePtr","GetArchiveSize","Cancel","Resume","GetClipboardContent","clipboardContent","GetRequestSize","GetRequestData","ReceiveResponse","GetKind","AsContextClipboardCopy","AsContextClipboardPaste","AsContextNetworkConnect","AsContextNetworkRpc","AsContextSerialSync","GetDeviceId","SetDeviceId","GetRomImage","GetRomImageSize","SetRomImage","image","GetMemoryImage","GetMemoryImageSize","SetMemoryImage","GetMetadata","GetMetadataSize","SetMetadata","metadata","GetSavestate","SetSavestate","savestate","GetVersion","Serialize","GetSerializedImage","GetSerializedImageSize","Deserialize","GetData","GetSize","RxBytesPending","Receive","Send","Count","frameComplete","IsOpen","Rts","Dtr","IsBreak","BufferSize","GetBaud","GetParity","GetStopBits","GetDataBits","GetHwrHandshake","GetModeSync","SetModeSync","sync","IsFrameComplete","SetRequestTransferCallback","GetState","Continue","GetUncompressedData","ReleaseUncompressedData","GetUncompressedSize","GetError","Next","GetTotalEntries","GetCurrentEntrySize","GetCurrentEntryName","GetCurrentEntryContent","IsSessionFile","GetNor","GetNorSize","SetNor","GetNand","GetNandSize","SetNand","GetMemory","SetMemory","GetRamSize","SetRamSize","GetSerializedSession","GetSerializedSessionSize","Size","GetCardName","GetManufacturer","GetRomName","GetCompanyId","GetHalId","NeedsNand","GetDeviceType","GetRecommendedRamSize","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","call","getter","__esModule","definition","enumerable","chunkId","globalThis","prop","hasOwnProperty","Symbol","toStringTag","scriptUrl","importScripts","tagName","toUpperCase","scripts","getElementsByTagName","test","baseURI","__decorate","decorators","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","result","done","then","SuppressedError","DeviceId","nextId","SUPPORTED_DEVICES_CLOUDPILOT","palmPilot","pilot","iii","palmVx","palmV","palmVII","palmVIIEZ","palmVIIx","iiixe","iiix","iiie","m500","m505","m515","m520","iiic","m100","m105","m125","m130","i705","i710","handera330","handera330c","pegS300","pegS320","pegS500c","pegT400","pegN600c","pegT600c","pegN700c","pegT650c","pegNR70","acerS11","lp168","guard","propertyKey","oldMethod","p1","p2","deviceTypeUarmToDeviceId","te2","frankene2","fatalErrorEvent","pwmUpdateEvent","proxyDisconnectEvent","amIdead","cloudpilot","addFunction","frequency","dutyCycle","transportIR","wrapTransport","transportSerial","urlOrFunction","print","printErr","warn","locateFile","instantiateWasm","destroy","hasFatalError","enableLogging","getRomInfo","rom","copyIn","getRomInfoCloudpilot","getRomInfoUarm","initializeSession","cyclesPerSecond","runEmulation","getFrame","nativeFrame","bufferPtr","getPointer","bpp","bytesPerLine","lines","lineWidth","margin","firstDirtyLine","lastDirtyLine","hasChanges","scaleX","scaleY","isScreenDirty","markScreenClean","minRamForDevice","framebufferSizeForDevice","totalMemorySizeForDevice","queuePenMove","queuePenUp","queueButtonDown","button","queueButtonUp","queueKeyboardEvent","char","isPowerOff","isUiInitialized","isSetupComplete","getOSVersion","reset","resetNoExtensions","resetHard","installDb","getPalette2bitMapping","getMemory","getMemory32","getDirtyPages","memorySize","loadMemory","memory","memory32","imagesMatch","copyIn32","getRomImage","getSavestate","saveState","loadState","state","getHotsyncName","setClockFactor","factor","setHotsyncName","backup","worker","dbBackup","wrap","getArchive","copyOut","setClipboardIntegration","getClipboardIntegration","isSuspended","getSuspendKind","cancelSuspend","getSuspendContextClipboardCopy","getSuspendContextClipboardPaste","setNetworkRedirection","getNetworkRedirection","getSuspendContextNetworkConnect","getSuspendContextNetworkRpc","getSuspendContextSerialSync","copyBuffer","freeBuffer","setHotsyncNameManagement","resolveBuffer","withZipfileWalker","walker","newWalker","nativeWalker","setPrototypeOf","decorateZipfileWalker","serializeSessionImage","sessionImage","engine","nand","metadataLength","serializedMetadata","TextEncoder","encode","JSON","stringify","serializeSessionImageCloudpilot","romLength","memoryLength","savestateLength","serializeSessionImageUarm","nandLength","forEach","deserializeSessionImage","DataView","byteOffset","getUint32","identifySessionEngine","deserializeSessionImageCloudpilot","deserializeSessionImageUarm","launchAppByName","launchAppByDbHeader","header","headerPtr","clearExternalStorage","allocateCard","decompress","compressedData","gunzipContext","getCardData","dataPtr","getCardDirtyPages","dirtyPagesPtr","imageSize","dirtyPagesSize","getMountedKey","mountCard","removeCard","remountCards","remountFailed","RemountFailed","getCardSupportLevel","loadSkin","skinLoader","getTransportIR","getTransportSerial","fn","romInfoNative","cardVersion","cardName","romVersion","romVersionString","supportedDevices","filter","romName","manufacturer","companyId","halId","needsNand","recommendedRamSize","nativeImage","includes","parse","version","nativeSession","deviceTypeUarmFromDeviceId","unguarded","Proxy","val","transport","frameCompleteEvent","MIME_TYPE_WASM","loadAndCompileModule","binaryUrl","statusText","mimeType","headers","compileStreaming","moduleData","compile","deviceDimensions","screenSize","width","height","silkscreenHeight","silkscreenOvershoot","siklscreenShift","isColor","engineType","DeviceOrientation","isMacOSSafari","isIOS","platform","match","maxTouchPoints","prerender","source","cachedWidth","cachedHeight","canvas","createElement","ctx","getContext","drawImage","indexOf","loadImage","Image","onload","onerror","userAgent","toLowerCase","svgToUrl","svg","btoa","images","Map","loadSkinElement","elt","skin","all","prerenderedImage","E_CANCELED","Semaphore","_value","_cancelError","_queue","_weightedWaiters","acquire","weight","priority","task","findIndexFromEnd","other","_dispatchItem","runExclusive","callback_1","release","waitForUnlock","_couldLockImmediately","v","insertSorted","isLocked","getValue","setValue","_dispatchQueue","cancel","entry","_drainUnlockWaiters","previousValue","_newReleaser","called","waiters","waiter","queuedPriority","findIndex","predicate","Mutex","cancelError","_semaphore","releaser","Watcher","query","changeEvent","last","update","current","audioContextCtor","AudioContext","webkitAudioContext","timeout","AbstractAudioService","emulationService","pcmWorkletUrl","initialize","mutex","initializeAudioUnguarded","updateState","audio","updateGain","shouldRun","enablePcmStreaming","disablePcmStreaming","isRunning","oldState","resume","suspend","onPwmUpdate","pwmUpdate","pendingPwmUpdate","applyPwmUpdate","onContextStateChange","oldAudioState","gainNode","gain","shouldMute","muted","workletBound","openSessionEvent","emulationStateChangeEvent","palmosStateChangeEvent","addEventListener","visibilityState","__cpeAudioDriver","isInitialized","mute","isMuted","reactivateRequired","reactivate","runHidden","unbind","pcmPort","bindWorkletNode","disconnectPwmSource","unbindWorkletNode","registerWorklet","savedWorker","Worker","ready","audioWorklet","addModule","loader","workletNode","createAudioContext","destination","channelCount","AudioWorkletNode","numberOfOutputs","outputChannelCount","processorOptions","sampleRateTo","sampleRate","createGain","channelInterpretation","connect","latencyHint","createBuffer","getChannelData","bufferSourceNode","createBufferSource","loop","stop","disconnect","getVolume","dispatchPcmControlMessage","transferables","port","postMessage","EmbeddedAudioService","session","super","volume","setVolume","setSession","runInBackground","BACKGROUND","FOREGROUND","GRAYSCALE_PALETTE_RGBA","fill","map","fg","GRAYSCALE_PALETTE_HEX","reverse","join","DEFAULT_DEVICE","BACKGROUND_COLOR_SILKSCREEN","BACKGROUND_COLOR_GRAYSCALE_DEVICE","BACKGROUND_ACTIVE_BUTTON","calculateLayout","device","pixelRatio","dimensions","scale","borderWidth","frameDevice","frameCanvas","dist","coord","separatorHeight","buttonHeight","buttonHeightForScreenSize","screenHeight","screenWidth","screenLeft","screenTop","screenBottom","silkscreenTop","silkscreenBottom","softSilkscreenHeight","buttonWidth","buttonTop","buttonBottom","radiusDpadSelect","angleDpad","PI","atan","AbstractCanvasDisplayService","layout","dpad","onResize","getOrientation","portrait","portrait180","updateEmulationCanvas","setupTransformation","drawEmulationCanvas","onAfterUpdateCanvas","eventToPalmCoordinates","clip","bb","getBoundingClientRect","contentX","contentY","contentWidth","contentHeight","top","left","clientX","clientY","landscape90","tmp","landscape270","totalHeight","isSilkscreen","coords","isButtons","determineButton","center","rel","tanPhi","tan","initWithCanvas","getDeviceId","fillCanvasRect","frameColor","fillRect","backgroundColor","drawSilkscreen","drawButtons","activeButtons","imageSmoothingEnabled","imageSmoothingQuality","buttonsImage","topLeft","topRight","bottomLeft","bottomRight","phi","beginPath","moveTo","lineTo","cos","sin","arc","fillStyle","devicePixelRatio","resetTransform","translate","rotate","silkscreenImage","lastEmulationCanvas","style","rect","silkscreenSkinElement","buttonsSkinElement","GAME_ICON_SVG","GAME_ICON_PRERENDERED","EmbeddedCanvasDisplayService","orientation","initializeUnguarded","dpadEnabled","gameModeIndicatorEnabled","gameModeActive","lastActiveButtons","setDpadEnabled","updateOrientation","toggleGameModeIndicator","setGameModeIndicatorEnabled","isGameModeIndicatorEnabled","getCanvas","drawGameModeIndicator","indicatorSize","iconSize","padding","iconPadding","theCanvas","objectFit","Average","capacity","initialValue","queue","calculateAverage","acc","Fifo","peekLast","replaceLast","flush","PORT_MAP","ONGOING_REQUESTS","scheduledIntervalsState","scheduledTimeoutsState","brokerImplementation","fullBrokerImplementation","partialBrokerImplementation","port1","port2","MessageChannel","portId","isSupported","sender","ongoingRequests","createOrGetOngoingRequests","delete","isMessagePort","method","params","notify","functions","entries","createBroker","clearInterval","timerId","timerType","setInterval","delay","symbol","schedule","timeOrigin","loadOrReturnBroker","broker","blob","Blob","createObjectURL","loadBroker","revokeObjectURL","createLoadOrReturnBroker","AnimationFrameScheduler","handle","requestAnimationFrame","timestamp","cancelAnimationFrame","isScheduled","getKind","TimeoutScheduler","fps","nextTick","SerialPortImpl","onFrameComplete","receiveEvent","isFrameComplete","dispatchEvent","isSync","setModeSync","modeSync","getModeSync","bytesPending","crc32Table","Timed","timer","exec","SnapshotContainerImpl","cloudpilotInstance","materialize","timed","mergeBack","snapshotMemory","materializeSnapshot","updateMemoryCrc","pageCount","pageSize","storageKey","updateSnapshotStorage","snapshotStorage","dirtyPages","snapshotDoneEvent","snapshotReleaseEvent","memoryCrcCheck","timestampStart","initializeMemory","pageCountTotal","offsets","pageData","withCrc","isIdle","getStorageKey","refresh","persistenceSuccess","timeBlocking","timeBackground","success","timeTotal","getSnapshotMemory","getSnapshotNand","getSnapshotStorage","getMemoryCrc","memoryCrc","mergeBackSnapshot","snapshot","pageIndex","iPage","bitfield","mask","crc","crc32","EngineCloudpilotImpl","clandestineExecute","settings","pendingPwmUpdates","onSerialPortDispatch","processTimesliceNow","onSchedule","newFrameEvent","lastPwmUpdateEvent","advanceEmulationHandle","advanceEmulation","timePerFrameAverage","timestampLastFrame","onSnapshotRelease","snapshotReleaseCallbacks","configuredHotsyncNameUpdateEvent","timesliceEvent","suspendEvent","snapshotEvent","running","powerOff","uiInitialized","suspended","emulationSpeed","speedAverage","frameCounter","clockEmulator","scheduler","serialPortIR","serialPortSerial","canvasTmp","serialSyncStartedAt","lastSnapshotAt","snapshotContainer","supportsKeyboardIO","shutdown","fatalError","penDown","penUp","buttonDown","buttonUp","keyStroke","isLcdEnabled","isUIInitialized","isSlowdown","openSession","card","memoryLoaded","load","resetFPS","requestSnapshot","waitForPendingSnapshot","blitFrame","frame","imageData","ImageData","imageData32","bg","iDest","offsetSrc","mapping","palette","buffer32","scaling","contextTmp","putImageData","updateSettings","clipboardIntegration","networkIntegration","manageHotsyncName","releaseCard","getFullState","getSerialPortSerial","getSerialPortIR","getStatistics","hostSpeed","averageFps","calculateFPS","failedDatabases","db","archive","launchAppByHeader","schedulerKind","timePerFrame","updateEmulationSpeed","currentSpeed","normalizedSpeed","checkAndUpdateHotsyncName","deviceHotsyncName","configuredHotsyncName","hotsyncName","wasSuspended","speed","cyclesToRun","timestampBeforeCycle","virtualTimePassed","realTimePassed","slizeSizeSeconds","automaticSnapshotInterval","RpcHost","dispatchMessage","nextRpcId","pendingCalls","dispatchRpcMessage","getTransferables","pagePool","scheduledPages","nandSize","rpcHost","sdSize","memoryPages","offsetsMemory","nandPages","offsetsNand","snapshotNand","uarmSnapshot","updateSnapshot","updateSnapshotSd","oldSnapshot","timeStorageBlocking","timeStorageBackground","scheduledPageCount","sd","snapshotSd","remoteSnapshot","EngineUarmImpl","mesage","onVisibilityChange","backgrounded","onMessage","fatal","sizeSeconds","currentIps","currentIpsMax","lcdWasEnabled","lcdEnabled","returnPendingFrame","pendingFrame","osVersion","pcmChannel","uarmModule","workerUrl","handlers","cleanupHandlers","evt","removeEventListener","onError","once","terminate","currentSpeedMips","currentMaxSpeedMips","getPcmPort","pcmStreaming","ctrl","targetMips","warnSlowdownThreshold","cardProvider","sizes","statistics","cardState","inserted","Uint8ClampedArray","includeRom","DEFAULT_ENGINE_SETTINGS","disableAudio","maxHostLoad","AbstractEmulationService","cloudpilotPromise","onEngineNewFrameEvent","clearCanvas","onEngineTimesliceEvent","sliceSizeSeconds","onAfterAdvanceEmulation","onEngineSuspendEvent","handleSuspend","onEngineConfigureHotsyncNameEvent","updateConfiguredHotsyncName","onSnapshotEvent","handleSnapshot","onSnapshotDoneEvent","onPalmosStateChangeEvent","handlePalmosStateChange","onFatalError","handleFatalInNativeCode","newSessionEvent","lastPenUpdate","engineSettings","blocked","handlePointerMove","ts","transformSilkscreenX","transformSilkscreenY","handlePointerUp","handleButtonDown","handleButtonUp","handleKeyDown","isBlocked","updateEngineSettings","unbindEngineHandlers","createEngine","bindEngineHandlers","resetCanvas","doResume","enforceRunState","doStop","doBlock","doUnblock","getUarmWorkerUrl","getUarmModule","EmbeddedEmulationService","uarmModuleFactory","uarmWorkerUrl","pause","initWithRom","initWithSessionImage","syncSettings","getSession","disablePcmAudio","getEngine","GenericEventHandlingService","canvasDisplayService","handleMouseDown","area","determineArea","interactionMouse","buttonPrimary","handleMouseMove","buttons","handeMouseUp","interaction","handleTouchStart","handled","changedTouches","touch","interactionsTouch","identifier","cancelable","preventDefault","handleTouchMove","buttonSecondary","handleTouchEnd","enableKeyboardEvents","isToggleGameMode","gameMode","onToggleGameMode","buttonFromEvent","keyCode","keyCodeFromEvent","ctrlKey","metaKey","handleKeyUp","btn","clear","keyEventTarget","Set","enableGamemodeHotkey","pointerEventTarget","isGameMode","setGameMode","enableGameMode","setGameModeHotkeyEnabled","isGameModeHotkeyEnabled","caputure","from","values","shiftKey","isGameModeActive","EmbeddedEventHandlingService","gameModeChangeEvent","DEFAULT_SESSION","disableDpad","CARD_KEY","EmulatorImpl","onTimeslice","powerOffWatcher","uiInitializedWatcher","hotsyncNameWatcher","audioInitializedEvent","eventHandlingService","audioService","loadRom","rominfo","enableDpad","loadSession","deviceOrientation","insertCompressedCardImage","cardImage","decompressedImage","insertCardImage","isCardMountedUnguarded","ejectCard","isCardMounted","setCanvas","releaseCanvas","bindInput","releaseInput","installDatabase","installDatabaseUnguarded","installAndLaunchDatabase","launchDatabase","installFromZipfile","installFromZipfileAndLaunch","launchFile","launch","content","launchDatabaseUnguarded","launchByName","database","setSpeed","getSpeed","setDisablePcmAudio","getDisablePcmAudio","setMaxHostLoad","getMaxHostLoad","setDisableDpad","getDisableDpad","initializeAudio","isAudioInitialized","setOrientation","setRunHidden","getRunHidden","powerOffChangeEvent","isUiInitializedChangeEvent","hotsyncNameChangeEvent","assertEngineInitialized","hasDPad","Button","VERSION","creaeteUarmModuleFactory","preload","createEmulator","options","createEmulatorFactory","wasmModule","cachedInstantiate","cloudpilotModuleUrl","preloadUarm","uarmModuleUrl"],"sourceRoot":""}