!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cloudpilot=t():e.cloudpilot=t()}(self,(()=>(()=>{var e={492:e=>{var t,i=(t="undefined"!=typeof document?document.currentScript?.src:void 0,function(e={}){var i,r,n,o,s=e,a=new Promise(((e,t)=>{i=e,r=t})),p="object"==typeof window,c="function"==typeof importScripts,u=("object"==typeof process&&"object"==typeof process.versions&&process.versions.node,Object.assign({},s)),l="./this.program",d=(e,t)=>{throw t},h="";(p||c)&&(c?h=self.location.href:"undefined"!=typeof document&&document.currentScript&&(h=document.currentScript.src),t&&(h=t),h=h.startsWith("blob:")?"":h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1),c&&(o=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),n=e=>fetch(e,{credentials:"same-origin"}).then((e=>e.ok?e.arrayBuffer():Promise.reject(new Error(e.status+" : "+e.url)))));var _,m,y=s.print||console.log.bind(console),f=s.printErr||console.error.bind(console);Object.assign(s,u),u=null,s.arguments&&s.arguments,s.thisProgram&&(l=s.thisProgram),s.quit&&(d=s.quit),s.wasmBinary&&(_=s.wasmBinary);var v,g,b,S,C,w,I=!1;function G(e,t){e||B(t)}function E(){var e=m.buffer;s.HEAP8=g=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAPU8=b=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=S=new Int32Array(e),s.HEAPU32=C=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=w=new Float64Array(e)}function D(){if(!I){var e=Ur();0==e&&(e+=4);var t=C[e>>2],i=C[e+4>>2];34821223==t&&2310721022==i||B(`Stack overflow! Stack cookie has been overwritten at ${Q(e)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${Q(i)} ${Q(t)}`),1668509029!=C[0]&&B("Runtime error: The application has corrupted its heap memory area (address zero)!")}}var x=[],P=[],k=[],M=[],R=0,z=null,T=null;function B(e){s.onAbort?.(e),f(e="Aborted("+e+")"),I=!0,v=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}var H,A,N=e=>e.startsWith("data:application/octet-stream;base64,");function L(e){if(e==H&&_)return new Uint8Array(_);if(o)return o(e);throw"both async and sync fetching of the wasm failed"}function F(e,t,i){return function(e){return _?Promise.resolve().then((()=>L(e))):n(e).then((e=>new Uint8Array(e)),(()=>L(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then(i,(e=>{f(`failed to asynchronously prepare wasm: ${e}`),B(e)}))}var U={425840:e=>{O.grow(65536);for(let t=0;t<=65535;t++)O.set(O.length-65535-1+t,O.get(C[(e>>>2)+t]));return O.length-65535-1}};function j(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var O,W,V,q=e=>{for(;e.length>0;)e.shift()(s)},K=s.noExitRuntime||!0,Q=e=>"0x"+(e>>>=0).toString(16).padStart(8,"0"),Z="undefined"!=typeof TextDecoder?new TextDecoder:void 0,$=(e,t,i)=>{for(var r=t+i,n=t;e[n]&&!(n>=r);)++n;if(n-t>16&&e.buffer&&Z)return Z.decode(e.subarray(t,n));for(var o="";t<n;){var s=e[t++];if(128&s){var a=63&e[t++];if(192!=(224&s)){var p=63&e[t++];if((s=224==(240&s)?(15&s)<<12|a<<6|p:(7&s)<<18|a<<12|p<<6|63&e[t++])<65536)o+=String.fromCharCode(s);else{var c=s-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&s)<<6|a)}else o+=String.fromCharCode(s)}return o},Y=(e,t)=>e?$(b,e,t):"",X=(e,t)=>t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,J=[0,31,60,91,121,152,182,213,244,274,305,335],ee=[0,31,59,90,120,151,181,212,243,273,304,334],te=e=>{var t;return((t=e.getFullYear())%4!=0||t%100==0&&t%400!=0?ee:J)[e.getMonth()]+e.getDate()-1},ie=(e,t,i,r)=>{if(!(r>0))return 0;for(var n=i,o=i+r-1,s=0;s<e.length;++s){var a=e.charCodeAt(s);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++s)),a<=127){if(i>=o)break;t[i++]=a}else if(a<=2047){if(i+1>=o)break;t[i++]=192|a>>6,t[i++]=128|63&a}else if(a<=65535){if(i+2>=o)break;t[i++]=224|a>>12,t[i++]=128|a>>6&63,t[i++]=128|63&a}else{if(i+3>=o)break;t[i++]=240|a>>18,t[i++]=128|a>>12&63,t[i++]=128|a>>6&63,t[i++]=128|63&a}}return t[i]=0,i-n},re=(e,t,i)=>ie(e,b,t,i),ne=[],oe=e=>{var t=(e-m.buffer.byteLength+65535)/65536;try{return m.grow(t),E(),1}catch(e){}},se={},ae=()=>{if(!ae.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"};for(var t in se)void 0===se[t]?delete e[t]:e[t]=se[t];var i=[];for(var t in e)i.push(`${t}=${e[t]}`);ae.strings=i}return ae.strings},pe=[null,[],[]],ce=(e,t)=>{var i;v=e,v=i=e,K||(s.onExit?.(i),I=!0),d(i,new j(i))},ue=e=>{for(var t=0,i=0;i<e.length;++i){var r=e.charCodeAt(i);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++i):t+=3}return t},le=(e,t)=>{e<128?t.push(e):t.push(e%128|128,e>>7)},de=[],he=[],_e=(e,t)=>{O.set(e,t),de[e]=O.get(e)},me={a:(e,t,i,r)=>{B(`Assertion failed: ${Y(e)}, at: `+[t?Y(t):"unknown filename",i,r?Y(r):"unknown function"])},q:function(e){const t=new Error(Y(e));throw t.isAssert=!0,t},l:function(e,t,i){X(t,i)},h:()=>{B("")},g:()=>1,c:(e,t,i)=>b.copyWithin(e,t,t+i),i:function(e,t,i){var r=X(e,t),n=new Date(1e3*r);S[i>>2]=n.getSeconds(),S[i+4>>2]=n.getMinutes(),S[i+8>>2]=n.getHours(),S[i+12>>2]=n.getDate(),S[i+16>>2]=n.getMonth(),S[i+20>>2]=n.getFullYear()-1900,S[i+24>>2]=n.getDay();var o=0|te(n);S[i+28>>2]=o,S[i+36>>2]=-60*n.getTimezoneOffset();var s=new Date(n.getFullYear(),0,1),a=new Date(n.getFullYear(),6,1).getTimezoneOffset(),p=s.getTimezoneOffset(),c=0|(a!=p&&n.getTimezoneOffset()==Math.min(p,a));S[i+32>>2]=c},j:function(e){var t,i=(()=>{var t=new Date(S[e+20>>2]+1900,S[e+16>>2],S[e+12>>2],S[e+8>>2],S[e+4>>2],S[e>>2],0),i=S[e+32>>2],r=t.getTimezoneOffset(),n=new Date(t.getFullYear(),0,1),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),s=n.getTimezoneOffset(),a=Math.min(s,o);if(i<0)S[e+32>>2]=Number(o!=s&&a==r);else if(i>0!=(a==r)){var p=Math.max(s,o),c=i>0?a:p;t.setTime(t.getTime()+6e4*(c-r))}S[e+24>>2]=t.getDay();var u=0|te(t);S[e+28>>2]=u,S[e>>2]=t.getSeconds(),S[e+4>>2]=t.getMinutes(),S[e+8>>2]=t.getHours(),S[e+12>>2]=t.getDate(),S[e+16>>2]=t.getMonth(),S[e+20>>2]=t.getYear();var l=t.getTime();return isNaN(l)?-1:l/1e3})();return A=i,t=+Math.abs(A)>=1?A>0?+Math.floor(A/4294967296)>>>0:~~+Math.ceil((A-+(~~A>>>0))/4294967296)>>>0:0,Lr(t),i>>>0},p:(e,t,i,r)=>{var n=(new Date).getFullYear(),o=new Date(n,0,1),s=new Date(n,6,1),a=o.getTimezoneOffset(),p=s.getTimezoneOffset(),c=Math.max(a,p);C[e>>2]=60*c,S[t>>2]=Number(a!=p);var u=e=>{var t=e>=0?"-":"+",i=Math.abs(e);return`UTC${t}${String(Math.floor(i/60)).padStart(2,"0")}${String(i%60).padStart(2,"0")}`},l=u(a),d=u(p);p<a?(re(l,i,17),re(d,r,17)):(re(l,r,17),re(d,i,17))},r:(e,t,i)=>((e,t,i)=>{var r=((e,t)=>{var i;for(ne.length=0;i=b[e++];){var r=105!=i;t+=(r&=112!=i)&&t%8?4:0,ne.push(112==i?C[t>>2]:105==i?S[t>>2]:w[t>>3]),t+=r?8:4}return ne})(t,i);return U[e](...r)})(e,t,i),b:()=>Date.now(),o:e=>{var t=b.length,i=2147483648;if((e>>>=0)>i)return!1;for(var r,n=1;n<=4;n*=2){var o=t*(1+.2/n);o=Math.min(o,e+100663296);var s=Math.min(i,(r=Math.max(e,o))+(65536-r%65536)%65536);if(oe(s))return!0}return!1},m:(e,t)=>{var i=0;return ae().forEach(((r,n)=>{var o=t+i;C[e+4*n>>2]=o,((e,t)=>{for(var i=0;i<e.length;++i)g[t++]=e.charCodeAt(i);g[t]=0})(r,o),i+=r.length+1})),0},n:(e,t)=>{var i=ae();C[e>>2]=i.length;var r=0;return i.forEach((e=>r+=e.length+1)),C[t>>2]=r,0},d:e=>52,f:(e,t,i,r)=>52,k:function(e,t,i,r,n){return X(t,i),70},e:(e,t,i,r)=>{for(var n,o,s,a=0,p=0;p<i;p++){var c=C[t>>2],u=C[t+4>>2];t+=8;for(var l=0;l<u;l++)n=e,o=b[c+l],s=void 0,s=pe[n],0===o||10===o?((1===n?y:f)($(s,0)),s.length=0):s.push(o);a+=u}return C[r>>2]=a,0}},ye=function(){var e,t,i,n,o,a,p={a:me};function c(e,t){var i;return ye=e.exports,m=ye.s,E(),O=ye.Uc,i=ye.t,P.unshift(i),function(e){if(R--,s.monitorRunDependencies?.(R),0==R&&(null!==z&&(clearInterval(z),z=null),T)){var t=T;T=null,t()}}(),ye}if(R++,s.monitorRunDependencies?.(R),s.instantiateWasm)try{return s.instantiateWasm(p,c)}catch(e){f(`Module.instantiateWasm callback failed with error: ${e}`),r(e)}return H||(H=N(a="cloudpilot_web.wasm")?a:(o=a,s.locateFile?s.locateFile(o,h):h+o)),(e=_,t=H,i=p,n=function(e){c(e.instance)},e||"function"!=typeof WebAssembly.instantiateStreaming||N(t)||"function"!=typeof fetch?F(t,i,n):fetch(t,{credentials:"same-origin"}).then((e=>WebAssembly.instantiateStreaming(e,i).then(n,(function(e){return f(`wasm streaming compile failed: ${e}`),f("falling back to ArrayBuffer instantiation"),F(t,i,n)}))))).catch(r),{}}(),fe=(s._malloc=e=>(s._malloc=ye.u)(e),s._free=e=>(s._free=ye.v)(e),s._main=(e,t)=>(fe=s._main=ye.w)(e,t)),ve=(s._webidl_free=e=>(s._webidl_free=ye.x)(e),s._webidl_malloc=e=>(s._webidl_malloc=ye.y)(e),s._emscripten_bind_VoidPtr___destroy___0=e=>(ve=s._emscripten_bind_VoidPtr___destroy___0=ye.z)(e)),ge=s._emscripten_bind_Cloudpilot_Cloudpilot_0=()=>(ge=s._emscripten_bind_Cloudpilot_Cloudpilot_0=ye.A)(),be=s._emscripten_bind_Cloudpilot_Malloc_1=(e,t)=>(be=s._emscripten_bind_Cloudpilot_Malloc_1=ye.B)(e,t),Se=s._emscripten_bind_Cloudpilot_Free_1=(e,t)=>(Se=s._emscripten_bind_Cloudpilot_Free_1=ye.C)(e,t),Ce=s._emscripten_bind_Cloudpilot_Nullptr_0=e=>(Ce=s._emscripten_bind_Cloudpilot_Nullptr_0=ye.D)(e),we=s._emscripten_bind_Cloudpilot_InitializeSession_3=(e,t,i,r)=>(we=s._emscripten_bind_Cloudpilot_InitializeSession_3=ye.E)(e,t,i,r),Ie=s._emscripten_bind_Cloudpilot_GetCyclesPerSecond_0=e=>(Ie=s._emscripten_bind_Cloudpilot_GetCyclesPerSecond_0=ye.F)(e),Ge=s._emscripten_bind_Cloudpilot_RunEmulation_1=(e,t)=>(Ge=s._emscripten_bind_Cloudpilot_RunEmulation_1=ye.G)(e,t),Ee=s._emscripten_bind_Cloudpilot_SetClockFactor_1=(e,t)=>(Ee=s._emscripten_bind_Cloudpilot_SetClockFactor_1=ye.H)(e,t),De=s._emscripten_bind_Cloudpilot_CopyFrame_0=e=>(De=s._emscripten_bind_Cloudpilot_CopyFrame_0=ye.I)(e),xe=s._emscripten_bind_Cloudpilot_IsScreenDirty_0=e=>(xe=s._emscripten_bind_Cloudpilot_IsScreenDirty_0=ye.J)(e),Pe=s._emscripten_bind_Cloudpilot_MarkScreenClean_0=e=>(Pe=s._emscripten_bind_Cloudpilot_MarkScreenClean_0=ye.K)(e),ke=s._emscripten_bind_Cloudpilot_MinMemoryForDevice_1=(e,t)=>(ke=s._emscripten_bind_Cloudpilot_MinMemoryForDevice_1=ye.L)(e,t),Me=s._emscripten_bind_Cloudpilot_FramebufferSizeForDevice_1=(e,t)=>(Me=s._emscripten_bind_Cloudpilot_FramebufferSizeForDevice_1=ye.M)(e,t),Re=s._emscripten_bind_Cloudpilot_TotalMemoryForDevice_1=(e,t)=>(Re=s._emscripten_bind_Cloudpilot_TotalMemoryForDevice_1=ye.N)(e,t),ze=s._emscripten_bind_Cloudpilot_QueuePenMove_2=(e,t,i)=>(ze=s._emscripten_bind_Cloudpilot_QueuePenMove_2=ye.O)(e,t,i),Te=s._emscripten_bind_Cloudpilot_QueuePenUp_0=e=>(Te=s._emscripten_bind_Cloudpilot_QueuePenUp_0=ye.P)(e),Be=s._emscripten_bind_Cloudpilot_QueueButtonDown_1=(e,t)=>(Be=s._emscripten_bind_Cloudpilot_QueueButtonDown_1=ye.Q)(e,t),He=s._emscripten_bind_Cloudpilot_QueueButtonUp_1=(e,t)=>(He=s._emscripten_bind_Cloudpilot_QueueButtonUp_1=ye.R)(e,t),Ae=s._emscripten_bind_Cloudpilot_QueueKeyboardEvent_2=(e,t,i)=>(Ae=s._emscripten_bind_Cloudpilot_QueueKeyboardEvent_2=ye.S)(e,t,i),Ne=s._emscripten_bind_Cloudpilot_IsPowerOff_0=e=>(Ne=s._emscripten_bind_Cloudpilot_IsPowerOff_0=ye.T)(e),Le=s._emscripten_bind_Cloudpilot_IsUIInitialized_0=e=>(Le=s._emscripten_bind_Cloudpilot_IsUIInitialized_0=ye.U)(e),Fe=s._emscripten_bind_Cloudpilot_GetOSVersion_0=e=>(Fe=s._emscripten_bind_Cloudpilot_GetOSVersion_0=ye.V)(e),Ue=s._emscripten_bind_Cloudpilot_IsSetupComplete_0=e=>(Ue=s._emscripten_bind_Cloudpilot_IsSetupComplete_0=ye.W)(e),je=s._emscripten_bind_Cloudpilot_Reset_0=e=>(je=s._emscripten_bind_Cloudpilot_Reset_0=ye.X)(e),Oe=s._emscripten_bind_Cloudpilot_ResetNoExtensions_0=e=>(Oe=s._emscripten_bind_Cloudpilot_ResetNoExtensions_0=ye.Y)(e),We=s._emscripten_bind_Cloudpilot_ResetHard_0=e=>(We=s._emscripten_bind_Cloudpilot_ResetHard_0=ye.Z)(e),Ve=s._emscripten_bind_Cloudpilot_InstallDb_2=(e,t,i)=>(Ve=s._emscripten_bind_Cloudpilot_InstallDb_2=ye._)(e,t,i),qe=s._emscripten_bind_Cloudpilot_GetPalette2bitMapping_0=e=>(qe=s._emscripten_bind_Cloudpilot_GetPalette2bitMapping_0=ye.$)(e),Ke=s._emscripten_bind_Cloudpilot_GetMemoryPtr_0=e=>(Ke=s._emscripten_bind_Cloudpilot_GetMemoryPtr_0=ye.aa)(e),Qe=s._emscripten_bind_Cloudpilot_GetDirtyPagesPtr_0=e=>(Qe=s._emscripten_bind_Cloudpilot_GetDirtyPagesPtr_0=ye.ba)(e),Ze=s._emscripten_bind_Cloudpilot_GetMemorySize_0=e=>(Ze=s._emscripten_bind_Cloudpilot_GetMemorySize_0=ye.ca)(e),$e=s._emscripten_bind_Cloudpilot_ImportMemoryImage_2=(e,t,i)=>($e=s._emscripten_bind_Cloudpilot_ImportMemoryImage_2=ye.da)(e,t,i),Ye=s._emscripten_bind_Cloudpilot_GetRomPtr_0=e=>(Ye=s._emscripten_bind_Cloudpilot_GetRomPtr_0=ye.ea)(e),Xe=s._emscripten_bind_Cloudpilot_GetRomSize_0=e=>(Xe=s._emscripten_bind_Cloudpilot_GetRomSize_0=ye.fa)(e),Je=s._emscripten_bind_Cloudpilot_GetSavestatePtr_0=e=>(Je=s._emscripten_bind_Cloudpilot_GetSavestatePtr_0=ye.ga)(e),et=s._emscripten_bind_Cloudpilot_GetSavestateSize_0=e=>(et=s._emscripten_bind_Cloudpilot_GetSavestateSize_0=ye.ha)(e),tt=s._emscripten_bind_Cloudpilot_SaveState_0=e=>(tt=s._emscripten_bind_Cloudpilot_SaveState_0=ye.ia)(e),it=s._emscripten_bind_Cloudpilot_LoadState_2=(e,t,i)=>(it=s._emscripten_bind_Cloudpilot_LoadState_2=ye.ja)(e,t,i),rt=s._emscripten_bind_Cloudpilot_GetHotsyncName_0=e=>(rt=s._emscripten_bind_Cloudpilot_GetHotsyncName_0=ye.ka)(e),nt=s._emscripten_bind_Cloudpilot_SetHotsyncName_1=(e,t)=>(nt=s._emscripten_bind_Cloudpilot_SetHotsyncName_1=ye.la)(e,t),ot=s._emscripten_bind_Cloudpilot_RegisterPwmHandler_1=(e,t)=>(ot=s._emscripten_bind_Cloudpilot_RegisterPwmHandler_1=ye.ma)(e,t),st=s._emscripten_bind_Cloudpilot_StartBackup_0=e=>(st=s._emscripten_bind_Cloudpilot_StartBackup_0=ye.na)(e),at=s._emscripten_bind_Cloudpilot_SetClipboardIntegration_1=(e,t)=>(at=s._emscripten_bind_Cloudpilot_SetClipboardIntegration_1=ye.oa)(e,t),pt=s._emscripten_bind_Cloudpilot_GetClipboardIntegration_0=e=>(pt=s._emscripten_bind_Cloudpilot_GetClipboardIntegration_0=ye.pa)(e),ct=s._emscripten_bind_Cloudpilot_IsSuspended_0=e=>(ct=s._emscripten_bind_Cloudpilot_IsSuspended_0=ye.qa)(e),ut=s._emscripten_bind_Cloudpilot_GetSuspendContext_0=e=>(ut=s._emscripten_bind_Cloudpilot_GetSuspendContext_0=ye.ra)(e),lt=s._emscripten_bind_Cloudpilot_SetNetworkRedirection_1=(e,t)=>(lt=s._emscripten_bind_Cloudpilot_SetNetworkRedirection_1=ye.sa)(e,t),dt=s._emscripten_bind_Cloudpilot_GetNetworkRedirection_0=e=>(dt=s._emscripten_bind_Cloudpilot_GetNetworkRedirection_0=ye.ta)(e),ht=s._emscripten_bind_Cloudpilot_RegisterProxyDisconnectHandler_1=(e,t)=>(ht=s._emscripten_bind_Cloudpilot_RegisterProxyDisconnectHandler_1=ye.ua)(e,t),_t=s._emscripten_bind_Cloudpilot_SetHotsyncNameManagement_1=(e,t)=>(_t=s._emscripten_bind_Cloudpilot_SetHotsyncNameManagement_1=ye.va)(e,t),mt=s._emscripten_bind_Cloudpilot_LaunchAppByName_1=(e,t)=>(mt=s._emscripten_bind_Cloudpilot_LaunchAppByName_1=ye.wa)(e,t),yt=s._emscripten_bind_Cloudpilot_LaunchAppByDbHeader_2=(e,t,i)=>(yt=s._emscripten_bind_Cloudpilot_LaunchAppByDbHeader_2=ye.xa)(e,t,i),ft=s._emscripten_bind_Cloudpilot_DeviceSupportsCardSize_1=(e,t)=>(ft=s._emscripten_bind_Cloudpilot_DeviceSupportsCardSize_1=ye.ya)(e,t),vt=s._emscripten_bind_Cloudpilot_ClearExternalStorage_0=e=>(vt=s._emscripten_bind_Cloudpilot_ClearExternalStorage_0=ye.za)(e),gt=s._emscripten_bind_Cloudpilot_AllocateCard_2=(e,t,i)=>(gt=s._emscripten_bind_Cloudpilot_AllocateCard_2=ye.Aa)(e,t,i),bt=s._emscripten_bind_Cloudpilot_AdoptCard_3=(e,t,i,r)=>(bt=s._emscripten_bind_Cloudpilot_AdoptCard_3=ye.Ba)(e,t,i,r),St=s._emscripten_bind_Cloudpilot_MountCard_1=(e,t)=>(St=s._emscripten_bind_Cloudpilot_MountCard_1=ye.Ca)(e,t),Ct=s._emscripten_bind_Cloudpilot_RemoveCard_1=(e,t)=>(Ct=s._emscripten_bind_Cloudpilot_RemoveCard_1=ye.Da)(e,t),wt=s._emscripten_bind_Cloudpilot_GetCardData_1=(e,t)=>(wt=s._emscripten_bind_Cloudpilot_GetCardData_1=ye.Ea)(e,t),It=s._emscripten_bind_Cloudpilot_GetCardDirtyPages_1=(e,t)=>(It=s._emscripten_bind_Cloudpilot_GetCardDirtyPages_1=ye.Fa)(e,t),Gt=s._emscripten_bind_Cloudpilot_GetCardSize_1=(e,t)=>(Gt=s._emscripten_bind_Cloudpilot_GetCardSize_1=ye.Ga)(e,t),Et=s._emscripten_bind_Cloudpilot_RemountCards_0=e=>(Et=s._emscripten_bind_Cloudpilot_RemountCards_0=ye.Ha)(e),Dt=s._emscripten_bind_Cloudpilot_GetSupportLevel_1=(e,t)=>(Dt=s._emscripten_bind_Cloudpilot_GetSupportLevel_1=ye.Ia)(e,t),xt=s._emscripten_bind_Cloudpilot_GetMountedKey_0=e=>(xt=s._emscripten_bind_Cloudpilot_GetMountedKey_0=ye.Ja)(e),Pt=s._emscripten_bind_Cloudpilot_GetTransportIR_0=e=>(Pt=s._emscripten_bind_Cloudpilot_GetTransportIR_0=ye.Ka)(e),kt=s._emscripten_bind_Cloudpilot_GetTransportSerial_0=e=>(kt=s._emscripten_bind_Cloudpilot_GetTransportSerial_0=ye.La)(e),Mt=s._emscripten_bind_Cloudpilot___destroy___0=e=>(Mt=s._emscripten_bind_Cloudpilot___destroy___0=ye.Ma)(e),Rt=s._emscripten_bind_RomInfo_RomInfo_2=(e,t)=>(Rt=s._emscripten_bind_RomInfo_RomInfo_2=ye.Na)(e,t),zt=s._emscripten_bind_RomInfo_IsValid_0=e=>(zt=s._emscripten_bind_RomInfo_IsValid_0=ye.Oa)(e),Tt=s._emscripten_bind_RomInfo_CardVersion_0=e=>(Tt=s._emscripten_bind_RomInfo_CardVersion_0=ye.Pa)(e),Bt=s._emscripten_bind_RomInfo_CardName_0=e=>(Bt=s._emscripten_bind_RomInfo_CardName_0=ye.Qa)(e),Ht=s._emscripten_bind_RomInfo_RomVersion_0=e=>(Ht=s._emscripten_bind_RomInfo_RomVersion_0=ye.Ra)(e),At=s._emscripten_bind_RomInfo_RomVersionString_0=e=>(At=s._emscripten_bind_RomInfo_RomVersionString_0=ye.Sa)(e),Nt=s._emscripten_bind_RomInfo_Supports_1=(e,t)=>(Nt=s._emscripten_bind_RomInfo_Supports_1=ye.Ta)(e,t),Lt=s._emscripten_bind_RomInfo___destroy___0=e=>(Lt=s._emscripten_bind_RomInfo___destroy___0=ye.Ua)(e),Ft=s._emscripten_bind_Frame_GetLineWidth_0=e=>(Ft=s._emscripten_bind_Frame_GetLineWidth_0=ye.Va)(e),Ut=s._emscripten_bind_Frame_GetBpp_0=e=>(Ut=s._emscripten_bind_Frame_GetBpp_0=ye.Wa)(e),jt=s._emscripten_bind_Frame_GetLines_0=e=>(jt=s._emscripten_bind_Frame_GetLines_0=ye.Xa)(e),Ot=s._emscripten_bind_Frame_GetMargin_0=e=>(Ot=s._emscripten_bind_Frame_GetMargin_0=ye.Ya)(e),Wt=s._emscripten_bind_Frame_GetBytesPerLine_0=e=>(Wt=s._emscripten_bind_Frame_GetBytesPerLine_0=ye.Za)(e),Vt=s._emscripten_bind_Frame_GetFirstDirtyLine_0=e=>(Vt=s._emscripten_bind_Frame_GetFirstDirtyLine_0=ye._a)(e),qt=s._emscripten_bind_Frame_GetLastDirtyLine_0=e=>(qt=s._emscripten_bind_Frame_GetLastDirtyLine_0=ye.$a)(e),Kt=s._emscripten_bind_Frame_GetHasChanges_0=e=>(Kt=s._emscripten_bind_Frame_GetHasChanges_0=ye.ab)(e),Qt=s._emscripten_bind_Frame_GetBuffer_0=e=>(Qt=s._emscripten_bind_Frame_GetBuffer_0=ye.bb)(e),Zt=s._emscripten_bind_Frame_GetBufferSize_0=e=>(Zt=s._emscripten_bind_Frame_GetBufferSize_0=ye.cb)(e),$t=s._emscripten_bind_Frame_GetScaleX_0=e=>($t=s._emscripten_bind_Frame_GetScaleX_0=ye.db)(e),Yt=s._emscripten_bind_Frame_GetScaleY_0=e=>(Yt=s._emscripten_bind_Frame_GetScaleY_0=ye.eb)(e),Xt=s._emscripten_bind_Frame___destroy___0=e=>(Xt=s._emscripten_bind_Frame___destroy___0=ye.fb)(e),Jt=s._emscripten_bind_DbBackup_Init_1=(e,t)=>(Jt=s._emscripten_bind_DbBackup_Init_1=ye.gb)(e,t),ei=s._emscripten_bind_DbBackup_IsInProgress_0=e=>(ei=s._emscripten_bind_DbBackup_IsInProgress_0=ye.hb)(e),ti=s._emscripten_bind_DbBackup_IsDone_0=e=>(ti=s._emscripten_bind_DbBackup_IsDone_0=ye.ib)(e),ii=s._emscripten_bind_DbBackup_GetCurrentDatabase_0=e=>(ii=s._emscripten_bind_DbBackup_GetCurrentDatabase_0=ye.jb)(e),ri=s._emscripten_bind_DbBackup_Save_0=e=>(ri=s._emscripten_bind_DbBackup_Save_0=ye.kb)(e),ni=s._emscripten_bind_DbBackup_Skip_0=e=>(ni=s._emscripten_bind_DbBackup_Skip_0=ye.lb)(e),oi=s._emscripten_bind_DbBackup_GetArchivePtr_0=e=>(oi=s._emscripten_bind_DbBackup_GetArchivePtr_0=ye.mb)(e),si=s._emscripten_bind_DbBackup_GetArchiveSize_0=e=>(si=s._emscripten_bind_DbBackup_GetArchiveSize_0=ye.nb)(e),ai=s._emscripten_bind_DbBackup___destroy___0=e=>(ai=s._emscripten_bind_DbBackup___destroy___0=ye.ob)(e),pi=s._emscripten_bind_SuspendContextClipboardCopy_Cancel_0=e=>(pi=s._emscripten_bind_SuspendContextClipboardCopy_Cancel_0=ye.pb)(e),ci=s._emscripten_bind_SuspendContextClipboardCopy_Resume_0=e=>(ci=s._emscripten_bind_SuspendContextClipboardCopy_Resume_0=ye.qb)(e),ui=s._emscripten_bind_SuspendContextClipboardCopy_GetClipboardContent_0=e=>(ui=s._emscripten_bind_SuspendContextClipboardCopy_GetClipboardContent_0=ye.rb)(e),li=s._emscripten_bind_SuspendContextClipboardCopy___destroy___0=e=>(li=s._emscripten_bind_SuspendContextClipboardCopy___destroy___0=ye.sb)(e),di=s._emscripten_bind_SuspendContextClipboardPaste_Cancel_0=e=>(di=s._emscripten_bind_SuspendContextClipboardPaste_Cancel_0=ye.tb)(e),hi=s._emscripten_bind_SuspendContextClipboardPaste_Resume_1=(e,t)=>(hi=s._emscripten_bind_SuspendContextClipboardPaste_Resume_1=ye.ub)(e,t),_i=s._emscripten_bind_SuspendContextClipboardPaste___destroy___0=e=>(_i=s._emscripten_bind_SuspendContextClipboardPaste___destroy___0=ye.vb)(e),mi=s._emscripten_bind_SuspendContextNetworkConnect_Cancel_0=e=>(mi=s._emscripten_bind_SuspendContextNetworkConnect_Cancel_0=ye.wb)(e),yi=s._emscripten_bind_SuspendContextNetworkConnect_Resume_1=(e,t)=>(yi=s._emscripten_bind_SuspendContextNetworkConnect_Resume_1=ye.xb)(e,t),fi=s._emscripten_bind_SuspendContextNetworkConnect___destroy___0=e=>(fi=s._emscripten_bind_SuspendContextNetworkConnect___destroy___0=ye.yb)(e),vi=s._emscripten_bind_SuspendContextNetworkRpc_Cancel_0=e=>(vi=s._emscripten_bind_SuspendContextNetworkRpc_Cancel_0=ye.zb)(e),gi=s._emscripten_bind_SuspendContextNetworkRpc_GetRequestSize_0=e=>(gi=s._emscripten_bind_SuspendContextNetworkRpc_GetRequestSize_0=ye.Ab)(e),bi=s._emscripten_bind_SuspendContextNetworkRpc_GetRequestData_0=e=>(bi=s._emscripten_bind_SuspendContextNetworkRpc_GetRequestData_0=ye.Bb)(e),Si=s._emscripten_bind_SuspendContextNetworkRpc_ReceiveResponse_2=(e,t,i)=>(Si=s._emscripten_bind_SuspendContextNetworkRpc_ReceiveResponse_2=ye.Cb)(e,t,i),Ci=s._emscripten_bind_SuspendContextNetworkRpc___destroy___0=e=>(Ci=s._emscripten_bind_SuspendContextNetworkRpc___destroy___0=ye.Db)(e),wi=s._emscripten_bind_SuspendContextSerialSync_Cancel_0=e=>(wi=s._emscripten_bind_SuspendContextSerialSync_Cancel_0=ye.Eb)(e),Ii=s._emscripten_bind_SuspendContextSerialSync_Resume_0=e=>(Ii=s._emscripten_bind_SuspendContextSerialSync_Resume_0=ye.Fb)(e),Gi=s._emscripten_bind_SuspendContextSerialSync___destroy___0=e=>(Gi=s._emscripten_bind_SuspendContextSerialSync___destroy___0=ye.Gb)(e),Ei=s._emscripten_bind_SuspendContext_GetKind_0=e=>(Ei=s._emscripten_bind_SuspendContext_GetKind_0=ye.Hb)(e),Di=s._emscripten_bind_SuspendContext_Cancel_0=e=>(Di=s._emscripten_bind_SuspendContext_Cancel_0=ye.Ib)(e),xi=s._emscripten_bind_SuspendContext_AsContextClipboardCopy_0=e=>(xi=s._emscripten_bind_SuspendContext_AsContextClipboardCopy_0=ye.Jb)(e),Pi=s._emscripten_bind_SuspendContext_AsContextClipboardPaste_0=e=>(Pi=s._emscripten_bind_SuspendContext_AsContextClipboardPaste_0=ye.Kb)(e),ki=s._emscripten_bind_SuspendContext_AsContextNetworkConnect_0=e=>(ki=s._emscripten_bind_SuspendContext_AsContextNetworkConnect_0=ye.Lb)(e),Mi=s._emscripten_bind_SuspendContext_AsContextNetworkRpc_0=e=>(Mi=s._emscripten_bind_SuspendContext_AsContextNetworkRpc_0=ye.Mb)(e),Ri=s._emscripten_bind_SuspendContext_AsContextSerialSync_0=e=>(Ri=s._emscripten_bind_SuspendContext_AsContextSerialSync_0=ye.Nb)(e),zi=s._emscripten_bind_SuspendContext___destroy___0=e=>(zi=s._emscripten_bind_SuspendContext___destroy___0=ye.Ob)(e),Ti=s._emscripten_bind_SessionImage_SessionImage_0=()=>(Ti=s._emscripten_bind_SessionImage_SessionImage_0=ye.Pb)(),Bi=s._emscripten_bind_SessionImage_GetDeviceId_0=e=>(Bi=s._emscripten_bind_SessionImage_GetDeviceId_0=ye.Qb)(e),Hi=s._emscripten_bind_SessionImage_SetDeviceId_1=(e,t)=>(Hi=s._emscripten_bind_SessionImage_SetDeviceId_1=ye.Rb)(e,t),Ai=s._emscripten_bind_SessionImage_GetRomImage_0=e=>(Ai=s._emscripten_bind_SessionImage_GetRomImage_0=ye.Sb)(e),Ni=s._emscripten_bind_SessionImage_GetRomImageSize_0=e=>(Ni=s._emscripten_bind_SessionImage_GetRomImageSize_0=ye.Tb)(e),Li=s._emscripten_bind_SessionImage_SetRomImage_2=(e,t,i)=>(Li=s._emscripten_bind_SessionImage_SetRomImage_2=ye.Ub)(e,t,i),Fi=s._emscripten_bind_SessionImage_GetMemoryImage_0=e=>(Fi=s._emscripten_bind_SessionImage_GetMemoryImage_0=ye.Vb)(e),Ui=s._emscripten_bind_SessionImage_GetMemoryImageSize_0=e=>(Ui=s._emscripten_bind_SessionImage_GetMemoryImageSize_0=ye.Wb)(e),ji=s._emscripten_bind_SessionImage_SetMemoryImage_2=(e,t,i)=>(ji=s._emscripten_bind_SessionImage_SetMemoryImage_2=ye.Xb)(e,t,i),Oi=s._emscripten_bind_SessionImage_GetMetadata_0=e=>(Oi=s._emscripten_bind_SessionImage_GetMetadata_0=ye.Yb)(e),Wi=s._emscripten_bind_SessionImage_GetMetadataSize_0=e=>(Wi=s._emscripten_bind_SessionImage_GetMetadataSize_0=ye.Zb)(e),Vi=s._emscripten_bind_SessionImage_SetMetadata_2=(e,t,i)=>(Vi=s._emscripten_bind_SessionImage_SetMetadata_2=ye._b)(e,t,i),qi=s._emscripten_bind_SessionImage_GetSavestate_0=e=>(qi=s._emscripten_bind_SessionImage_GetSavestate_0=ye.$b)(e),Ki=s._emscripten_bind_SessionImage_GetSavestateSize_0=e=>(Ki=s._emscripten_bind_SessionImage_GetSavestateSize_0=ye.ac)(e),Qi=s._emscripten_bind_SessionImage_SetSavestate_2=(e,t,i)=>(Qi=s._emscripten_bind_SessionImage_SetSavestate_2=ye.bc)(e,t,i),Zi=s._emscripten_bind_SessionImage_GetVersion_0=e=>(Zi=s._emscripten_bind_SessionImage_GetVersion_0=ye.cc)(e),$i=s._emscripten_bind_SessionImage_Serialize_0=e=>($i=s._emscripten_bind_SessionImage_Serialize_0=ye.dc)(e),Yi=s._emscripten_bind_SessionImage_GetSerializedImage_0=e=>(Yi=s._emscripten_bind_SessionImage_GetSerializedImage_0=ye.ec)(e),Xi=s._emscripten_bind_SessionImage_GetSerializedImageSize_0=e=>(Xi=s._emscripten_bind_SessionImage_GetSerializedImageSize_0=ye.fc)(e),Ji=s._emscripten_bind_SessionImage_Deserialize_2=(e,t,i)=>(Ji=s._emscripten_bind_SessionImage_Deserialize_2=ye.gc)(e,t,i),er=s._emscripten_bind_SessionImage___destroy___0=e=>(er=s._emscripten_bind_SessionImage___destroy___0=ye.hc)(e),tr=s._emscripten_bind_SkinLoader_SkinLoader_1=e=>(tr=s._emscripten_bind_SkinLoader_SkinLoader_1=ye.ic)(e),ir=s._emscripten_bind_SkinLoader_GetData_0=e=>(ir=s._emscripten_bind_SkinLoader_GetData_0=ye.jc)(e),rr=s._emscripten_bind_SkinLoader_GetSize_0=e=>(rr=s._emscripten_bind_SkinLoader_GetSize_0=ye.kc)(e),nr=s._emscripten_bind_SkinLoader___destroy___0=e=>(nr=s._emscripten_bind_SkinLoader___destroy___0=ye.lc)(e),or=s._emscripten_bind_EmTransportSerialBuffer_RxBytesPending_0=e=>(or=s._emscripten_bind_EmTransportSerialBuffer_RxBytesPending_0=ye.mc)(e),sr=s._emscripten_bind_EmTransportSerialBuffer_Receive_0=e=>(sr=s._emscripten_bind_EmTransportSerialBuffer_Receive_0=ye.nc)(e),ar=s._emscripten_bind_EmTransportSerialBuffer_Send_3=(e,t,i,r)=>(ar=s._emscripten_bind_EmTransportSerialBuffer_Send_3=ye.oc)(e,t,i,r),pr=s._emscripten_bind_EmTransportSerialBuffer_IsOpen_0=e=>(pr=s._emscripten_bind_EmTransportSerialBuffer_IsOpen_0=ye.pc)(e),cr=s._emscripten_bind_EmTransportSerialBuffer_Rts_0=e=>(cr=s._emscripten_bind_EmTransportSerialBuffer_Rts_0=ye.qc)(e),ur=s._emscripten_bind_EmTransportSerialBuffer_Dtr_0=e=>(ur=s._emscripten_bind_EmTransportSerialBuffer_Dtr_0=ye.rc)(e),lr=s._emscripten_bind_EmTransportSerialBuffer_IsBreak_0=e=>(lr=s._emscripten_bind_EmTransportSerialBuffer_IsBreak_0=ye.sc)(e),dr=s._emscripten_bind_EmTransportSerialBuffer_BufferSize_0=e=>(dr=s._emscripten_bind_EmTransportSerialBuffer_BufferSize_0=ye.tc)(e),hr=s._emscripten_bind_EmTransportSerialBuffer_GetBaud_0=e=>(hr=s._emscripten_bind_EmTransportSerialBuffer_GetBaud_0=ye.uc)(e),_r=s._emscripten_bind_EmTransportSerialBuffer_GetParity_0=e=>(_r=s._emscripten_bind_EmTransportSerialBuffer_GetParity_0=ye.vc)(e),mr=s._emscripten_bind_EmTransportSerialBuffer_GetStopBits_0=e=>(mr=s._emscripten_bind_EmTransportSerialBuffer_GetStopBits_0=ye.wc)(e),yr=s._emscripten_bind_EmTransportSerialBuffer_GetDataBits_0=e=>(yr=s._emscripten_bind_EmTransportSerialBuffer_GetDataBits_0=ye.xc)(e),fr=s._emscripten_bind_EmTransportSerialBuffer_GetHwrHandshake_0=e=>(fr=s._emscripten_bind_EmTransportSerialBuffer_GetHwrHandshake_0=ye.yc)(e),vr=s._emscripten_bind_EmTransportSerialBuffer_GetModeSync_0=e=>(vr=s._emscripten_bind_EmTransportSerialBuffer_GetModeSync_0=ye.zc)(e),gr=s._emscripten_bind_EmTransportSerialBuffer_SetModeSync_1=(e,t)=>(gr=s._emscripten_bind_EmTransportSerialBuffer_SetModeSync_1=ye.Ac)(e,t),br=s._emscripten_bind_EmTransportSerialBuffer_IsFrameComplete_0=e=>(br=s._emscripten_bind_EmTransportSerialBuffer_IsFrameComplete_0=ye.Bc)(e),Sr=s._emscripten_bind_EmTransportSerialBuffer_SetRequestTransferCallback_1=(e,t)=>(Sr=s._emscripten_bind_EmTransportSerialBuffer_SetRequestTransferCallback_1=ye.Cc)(e,t),Cr=s._emscripten_bind_EmTransportSerialBuffer___destroy___0=e=>(Cr=s._emscripten_bind_EmTransportSerialBuffer___destroy___0=ye.Dc)(e),wr=s._emscripten_bind_GunzipContext_GunzipContext_3=(e,t,i)=>(wr=s._emscripten_bind_GunzipContext_GunzipContext_3=ye.Ec)(e,t,i),Ir=s._emscripten_bind_GunzipContext_GetState_0=e=>(Ir=s._emscripten_bind_GunzipContext_GetState_0=ye.Fc)(e),Gr=s._emscripten_bind_GunzipContext_Continue_0=e=>(Gr=s._emscripten_bind_GunzipContext_Continue_0=ye.Gc)(e),Er=s._emscripten_bind_GunzipContext_GetUncompressedData_0=e=>(Er=s._emscripten_bind_GunzipContext_GetUncompressedData_0=ye.Hc)(e),Dr=s._emscripten_bind_GunzipContext_ReleaseUncompressedData_0=e=>(Dr=s._emscripten_bind_GunzipContext_ReleaseUncompressedData_0=ye.Ic)(e),xr=s._emscripten_bind_GunzipContext_GetUncompressedSize_0=e=>(xr=s._emscripten_bind_GunzipContext_GetUncompressedSize_0=ye.Jc)(e),Pr=s._emscripten_bind_GunzipContext_GetError_0=e=>(Pr=s._emscripten_bind_GunzipContext_GetError_0=ye.Kc)(e),kr=s._emscripten_bind_GunzipContext___destroy___0=e=>(kr=s._emscripten_bind_GunzipContext___destroy___0=ye.Lc)(e),Mr=s._emscripten_bind_ZipfileWalker_ZipfileWalker_2=(e,t)=>(Mr=s._emscripten_bind_ZipfileWalker_ZipfileWalker_2=ye.Mc)(e,t),Rr=s._emscripten_bind_ZipfileWalker_GetState_0=e=>(Rr=s._emscripten_bind_ZipfileWalker_GetState_0=ye.Nc)(e),zr=s._emscripten_bind_ZipfileWalker_Next_0=e=>(zr=s._emscripten_bind_ZipfileWalker_Next_0=ye.Oc)(e),Tr=s._emscripten_bind_ZipfileWalker_GetTotalEntries_0=e=>(Tr=s._emscripten_bind_ZipfileWalker_GetTotalEntries_0=ye.Pc)(e),Br=s._emscripten_bind_ZipfileWalker_GetCurrentEntrySize_0=e=>(Br=s._emscripten_bind_ZipfileWalker_GetCurrentEntrySize_0=ye.Qc)(e),Hr=s._emscripten_bind_ZipfileWalker_GetCurrentEntryName_0=e=>(Hr=s._emscripten_bind_ZipfileWalker_GetCurrentEntryName_0=ye.Rc)(e),Ar=s._emscripten_bind_ZipfileWalker_GetCurrentEntryContent_0=e=>(Ar=s._emscripten_bind_ZipfileWalker_GetCurrentEntryContent_0=ye.Sc)(e),Nr=s._emscripten_bind_ZipfileWalker___destroy___0=e=>(Nr=s._emscripten_bind_ZipfileWalker___destroy___0=ye.Tc)(e),Lr=e=>(Lr=ye.Vc)(e),Fr=()=>(Fr=ye.Wc)(),Ur=()=>(Ur=ye.Xc)(),jr=()=>(jr=ye.Yc)();function Or(){function e(){V||(V=!0,s.calledRun=!0,I||(D(),q(P),D(),q(k),i(s),s.onRuntimeInitialized?.(),Wr&&function(){var e=fe;try{var t=e(0,0);return ce(t),t}catch(e){return(e=>{if(e instanceof j||"unwind"==e)return v;D(),e instanceof WebAssembly.RuntimeError&&jr()<=0&&f("Stack overflow detected.  You can try increasing -sSTACK_SIZE (currently set to 1048576)"),d(1,e)})(e)}}(),function(){if(D(),s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;)e=s.postRun.shift(),M.unshift(e);var e;q(M)}()))}var t;R>0||(Fr(),0==(t=Ur())&&(t+=4),C[t>>2]=34821223,C[t+4>>2]=2310721022,C[0]=1668509029,function(){if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)e=s.preRun.shift(),x.unshift(e);var e;q(x)}(),R>0||(s.setStatus?(s.setStatus("Running..."),setTimeout((function(){setTimeout((function(){s.setStatus("")}),1),e()}),1)):e(),D()))}if(s.___original_main=()=>(s.___original_main=ye.Zc)(),s.addFunction=(e,t)=>{var i=(e=>(W||(W=new WeakMap,((e,t)=>{if(W)for(var i=0;i<0+t;i++){var r=(o=void 0,(o=de[n=i])||(n>=de.length&&(de.length=n+1),de[n]=o=O.get(n)),o);r&&W.set(r,i)}var n,o})(0,O.length)),W.get(e)||0))(e);if(i)return i;var r=(()=>{if(he.length)return he.pop();try{O.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return O.length-1})();try{_e(r,e)}catch(i){if(!(i instanceof TypeError))throw i;var n=((e,t)=>{if("function"==typeof WebAssembly.Function)return new WebAssembly.Function((e=>{for(var t={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},i={parameters:[],results:"v"==e[0]?[]:[t[e[0]]]},r=1;r<e.length;++r)i.parameters.push(t[e[r]]);return i})(t),e);var i=[1];((e,t)=>{var i=e.slice(0,1),r=e.slice(1),n={i:127,p:127,j:126,f:125,d:124,e:111};t.push(96),le(r.length,t);for(var o=0;o<r.length;++o)t.push(n[r[o]]);"v"==i?t.push(0):t.push(1,n[i])})(t,i);var r=[0,97,115,109,1,0,0,0,1];le(i.length,r),r.push(...i),r.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var n=new WebAssembly.Module(new Uint8Array(r));return new WebAssembly.Instance(n,{e:{f:e}}).exports.f})(e,t);_e(r,n)}return W.set(e,r),r},s.UTF8ToString=Y,T=function e(){V||Or(),V||(T=e)},s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();var Wr=!0;function Vr(){}function qr(e){return(e||Vr).__cache__}function Kr(e,t){var i=qr(t),r=i[e];return r||((r=Object.create((t||Vr).prototype)).ptr=e,i[e]=r)}s.noInitialRun&&(Wr=!1),Or(),Vr.prototype=Object.create(Vr.prototype),Vr.prototype.constructor=Vr,Vr.prototype.__class__=Vr,Vr.__cache__={},s.WrapperObject=Vr,s.getCache=qr,s.wrapPointer=Kr,s.castObject=function(e,t){return Kr(e.ptr,t)},s.NULL=Kr(0),s.destroy=function(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete qr(e.__class__)[e.ptr]},s.compare=function(e,t){return e.ptr===t.ptr},s.getPointer=function(e){return e.ptr},s.getClass=function(e){return e.__class__};var Qr={buffer:0,size:0,pos:0,temps:[],needed:0,prepare(){if(Qr.needed){for(var e=0;e<Qr.temps.length;e++)s._webidl_free(Qr.temps[e]);Qr.temps.length=0,s._webidl_free(Qr.buffer),Qr.buffer=0,Qr.size+=Qr.needed,Qr.needed=0}Qr.buffer||(Qr.size+=128,Qr.buffer=s._webidl_malloc(Qr.size),G(Qr.buffer)),Qr.pos=0},alloc(e,t){G(Qr.buffer);var i,r,n=t.BYTES_PER_ELEMENT,o=e.length*n;return i=o,8,o=8*Math.ceil(i/8),Qr.pos+o>=Qr.size?(G(o>0),Qr.needed+=o,r=s._webidl_malloc(o),Qr.temps.push(r)):(r=Qr.buffer+Qr.pos,Qr.pos+=o),r},copy(e,t,i){i/=t.BYTES_PER_ELEMENT;for(var r=0;r<e.length;r++)t[i+r]=e[r]}};function Zr(e){if("string"==typeof e){var t=(n=ue(r=e)+1,o=new Array(n),ie(r,o,0,o.length),o),i=Qr.alloc(t,g);return Qr.copy(t,g,i),i}var r,n,o;return e}function $r(){throw"cannot construct a VoidPtr, no constructor in IDL"}function Yr(){this.ptr=ge(),qr(Yr)[this.ptr]=this}function Xr(e,t){e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),this.ptr=Rt(e,t),qr(Xr)[this.ptr]=this}function Jr(){throw"cannot construct a Frame, no constructor in IDL"}function en(){throw"cannot construct a DbBackup, no constructor in IDL"}function tn(){throw"cannot construct a SuspendContextClipboardCopy, no constructor in IDL"}function rn(){throw"cannot construct a SuspendContextClipboardPaste, no constructor in IDL"}function nn(){throw"cannot construct a SuspendContextNetworkConnect, no constructor in IDL"}function on(){throw"cannot construct a SuspendContextNetworkRpc, no constructor in IDL"}function sn(){throw"cannot construct a SuspendContextSerialSync, no constructor in IDL"}function an(){throw"cannot construct a SuspendContext, no constructor in IDL"}function pn(){this.ptr=Ti(),qr(pn)[this.ptr]=this}function cn(e){Qr.prepare(),e=e&&"object"==typeof e?e.ptr:Zr(e),this.ptr=tr(e),qr(cn)[this.ptr]=this}function un(){throw"cannot construct a EmTransportSerialBuffer, no constructor in IDL"}function ln(e,t,i){e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),this.ptr=wr(e,t,i),qr(ln)[this.ptr]=this}function dn(e,t){e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),this.ptr=Mr(e,t),qr(dn)[this.ptr]=this}return $r.prototype=Object.create(Vr.prototype),$r.prototype.constructor=$r,$r.prototype.__class__=$r,$r.__cache__={},s.VoidPtr=$r,$r.prototype.__destroy__=$r.prototype.__destroy__=function(){var e=this.ptr;ve(e)},Yr.prototype=Object.create(Vr.prototype),Yr.prototype.constructor=Yr,Yr.prototype.__class__=Yr,Yr.__cache__={},s.Cloudpilot=Yr,Yr.prototype.Malloc=Yr.prototype.Malloc=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),Kr(be(t,e),$r)},Yr.prototype.Free=Yr.prototype.Free=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),Se(t,e)},Yr.prototype.Nullptr=Yr.prototype.Nullptr=function(){var e=this.ptr;return Kr(Ce(e),$r)},Yr.prototype.InitializeSession=Yr.prototype.InitializeSession=function(e,t,i){var r=this.ptr;return Qr.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i=i&&"object"==typeof i?i.ptr:Zr(i),!!we(r,e,t,i)},Yr.prototype.GetCyclesPerSecond=Yr.prototype.GetCyclesPerSecond=function(){var e=this.ptr;return Ie(e)},Yr.prototype.RunEmulation=Yr.prototype.RunEmulation=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),Ge(t,e)},Yr.prototype.SetClockFactor=Yr.prototype.SetClockFactor=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),Ee(t,e)},Yr.prototype.CopyFrame=Yr.prototype.CopyFrame=function(){var e=this.ptr;return Kr(De(e),Jr)},Yr.prototype.IsScreenDirty=Yr.prototype.IsScreenDirty=function(){var e=this.ptr;return!!xe(e)},Yr.prototype.MarkScreenClean=Yr.prototype.MarkScreenClean=function(){var e=this.ptr;Pe(e)},Yr.prototype.MinMemoryForDevice=Yr.prototype.MinMemoryForDevice=function(e){var t=this.ptr;return Qr.prepare(),e=e&&"object"==typeof e?e.ptr:Zr(e),ke(t,e)},Yr.prototype.FramebufferSizeForDevice=Yr.prototype.FramebufferSizeForDevice=function(e){var t=this.ptr;return Qr.prepare(),e=e&&"object"==typeof e?e.ptr:Zr(e),Me(t,e)},Yr.prototype.TotalMemoryForDevice=Yr.prototype.TotalMemoryForDevice=function(e){var t=this.ptr;return Qr.prepare(),e=e&&"object"==typeof e?e.ptr:Zr(e),Re(t,e)},Yr.prototype.QueuePenMove=Yr.prototype.QueuePenMove=function(e,t){var i=this.ptr;e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),ze(i,e,t)},Yr.prototype.QueuePenUp=Yr.prototype.QueuePenUp=function(){var e=this.ptr;Te(e)},Yr.prototype.QueueButtonDown=Yr.prototype.QueueButtonDown=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),Be(t,e)},Yr.prototype.QueueButtonUp=Yr.prototype.QueueButtonUp=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),He(t,e)},Yr.prototype.QueueKeyboardEvent=Yr.prototype.QueueKeyboardEvent=function(e,t){var i=this.ptr;e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),Ae(i,e,t)},Yr.prototype.IsPowerOff=Yr.prototype.IsPowerOff=function(){var e=this.ptr;return!!Ne(e)},Yr.prototype.IsUIInitialized=Yr.prototype.IsUIInitialized=function(){var e=this.ptr;return!!Le(e)},Yr.prototype.GetOSVersion=Yr.prototype.GetOSVersion=function(){var e=this.ptr;return Fe(e)},Yr.prototype.IsSetupComplete=Yr.prototype.IsSetupComplete=function(){var e=this.ptr;return!!Ue(e)},Yr.prototype.Reset=Yr.prototype.Reset=function(){var e=this.ptr;je(e)},Yr.prototype.ResetNoExtensions=Yr.prototype.ResetNoExtensions=function(){var e=this.ptr;Oe(e)},Yr.prototype.ResetHard=Yr.prototype.ResetHard=function(){var e=this.ptr;We(e)},Yr.prototype.InstallDb=Yr.prototype.InstallDb=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),Ve(i,e,t)},Yr.prototype.GetPalette2bitMapping=Yr.prototype.GetPalette2bitMapping=function(){var e=this.ptr;return qe(e)},Yr.prototype.GetMemoryPtr=Yr.prototype.GetMemoryPtr=function(){var e=this.ptr;return Kr(Ke(e),$r)},Yr.prototype.GetDirtyPagesPtr=Yr.prototype.GetDirtyPagesPtr=function(){var e=this.ptr;return Kr(Qe(e),$r)},Yr.prototype.GetMemorySize=Yr.prototype.GetMemorySize=function(){var e=this.ptr;return Ze(e)},Yr.prototype.ImportMemoryImage=Yr.prototype.ImportMemoryImage=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),!!$e(i,e,t)},Yr.prototype.GetRomPtr=Yr.prototype.GetRomPtr=function(){var e=this.ptr;return Kr(Ye(e),$r)},Yr.prototype.GetRomSize=Yr.prototype.GetRomSize=function(){var e=this.ptr;return Xe(e)},Yr.prototype.GetSavestatePtr=Yr.prototype.GetSavestatePtr=function(){var e=this.ptr;return Kr(Je(e),$r)},Yr.prototype.GetSavestateSize=Yr.prototype.GetSavestateSize=function(){var e=this.ptr;return et(e)},Yr.prototype.SaveState=Yr.prototype.SaveState=function(){var e=this.ptr;return!!tt(e)},Yr.prototype.LoadState=Yr.prototype.LoadState=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),!!it(i,e,t)},Yr.prototype.GetHotsyncName=Yr.prototype.GetHotsyncName=function(){var e=this.ptr;return Y(rt(e))},Yr.prototype.SetHotsyncName=Yr.prototype.SetHotsyncName=function(e){var t=this.ptr;Qr.prepare(),e=e&&"object"==typeof e?e.ptr:Zr(e),nt(t,e)},Yr.prototype.RegisterPwmHandler=Yr.prototype.RegisterPwmHandler=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),ot(t,e)},Yr.prototype.StartBackup=Yr.prototype.StartBackup=function(){var e=this.ptr;return Kr(st(e),en)},Yr.prototype.SetClipboardIntegration=Yr.prototype.SetClipboardIntegration=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),at(t,e)},Yr.prototype.GetClipboardIntegration=Yr.prototype.GetClipboardIntegration=function(){var e=this.ptr;return!!pt(e)},Yr.prototype.IsSuspended=Yr.prototype.IsSuspended=function(){var e=this.ptr;return!!ct(e)},Yr.prototype.GetSuspendContext=Yr.prototype.GetSuspendContext=function(){var e=this.ptr;return Kr(ut(e),an)},Yr.prototype.SetNetworkRedirection=Yr.prototype.SetNetworkRedirection=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),lt(t,e)},Yr.prototype.GetNetworkRedirection=Yr.prototype.GetNetworkRedirection=function(){var e=this.ptr;return!!dt(e)},Yr.prototype.RegisterProxyDisconnectHandler=Yr.prototype.RegisterProxyDisconnectHandler=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),ht(t,e)},Yr.prototype.SetHotsyncNameManagement=Yr.prototype.SetHotsyncNameManagement=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),_t(t,e)},Yr.prototype.LaunchAppByName=Yr.prototype.LaunchAppByName=function(e){var t=this.ptr;return Qr.prepare(),e=e&&"object"==typeof e?e.ptr:Zr(e),!!mt(t,e)},Yr.prototype.LaunchAppByDbHeader=Yr.prototype.LaunchAppByDbHeader=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),!!yt(i,e,t)},Yr.prototype.DeviceSupportsCardSize=Yr.prototype.DeviceSupportsCardSize=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),!!ft(t,e)},Yr.prototype.ClearExternalStorage=Yr.prototype.ClearExternalStorage=function(){var e=this.ptr;vt(e)},Yr.prototype.AllocateCard=Yr.prototype.AllocateCard=function(e,t){var i=this.ptr;return Qr.prepare(),e=e&&"object"==typeof e?e.ptr:Zr(e),t&&"object"==typeof t&&(t=t.ptr),!!gt(i,e,t)},Yr.prototype.AdoptCard=Yr.prototype.AdoptCard=function(e,t,i){var r=this.ptr;return Qr.prepare(),e=e&&"object"==typeof e?e.ptr:Zr(e),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!bt(r,e,t,i)},Yr.prototype.MountCard=Yr.prototype.MountCard=function(e){var t=this.ptr;return Qr.prepare(),e=e&&"object"==typeof e?e.ptr:Zr(e),!!St(t,e)},Yr.prototype.RemoveCard=Yr.prototype.RemoveCard=function(e){var t=this.ptr;return Qr.prepare(),e=e&&"object"==typeof e?e.ptr:Zr(e),!!Ct(t,e)},Yr.prototype.GetCardData=Yr.prototype.GetCardData=function(e){var t=this.ptr;return Qr.prepare(),e=e&&"object"==typeof e?e.ptr:Zr(e),Kr(wt(t,e),$r)},Yr.prototype.GetCardDirtyPages=Yr.prototype.GetCardDirtyPages=function(e){var t=this.ptr;return Qr.prepare(),e=e&&"object"==typeof e?e.ptr:Zr(e),Kr(It(t,e),$r)},Yr.prototype.GetCardSize=Yr.prototype.GetCardSize=function(e){var t=this.ptr;return Qr.prepare(),e=e&&"object"==typeof e?e.ptr:Zr(e),Gt(t,e)},Yr.prototype.RemountCards=Yr.prototype.RemountCards=function(){var e=this.ptr;Et(e)},Yr.prototype.GetSupportLevel=Yr.prototype.GetSupportLevel=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),Dt(t,e)},Yr.prototype.GetMountedKey=Yr.prototype.GetMountedKey=function(){var e=this.ptr;return Y(xt(e))},Yr.prototype.GetTransportIR=Yr.prototype.GetTransportIR=function(){var e=this.ptr;return Kr(Pt(e),un)},Yr.prototype.GetTransportSerial=Yr.prototype.GetTransportSerial=function(){var e=this.ptr;return Kr(kt(e),un)},Yr.prototype.__destroy__=Yr.prototype.__destroy__=function(){var e=this.ptr;Mt(e)},Xr.prototype=Object.create(Vr.prototype),Xr.prototype.constructor=Xr,Xr.prototype.__class__=Xr,Xr.__cache__={},s.RomInfo=Xr,Xr.prototype.IsValid=Xr.prototype.IsValid=function(){var e=this.ptr;return!!zt(e)},Xr.prototype.CardVersion=Xr.prototype.CardVersion=function(){var e=this.ptr;return Tt(e)},Xr.prototype.CardName=Xr.prototype.CardName=function(){var e=this.ptr;return Y(Bt(e))},Xr.prototype.RomVersion=Xr.prototype.RomVersion=function(){var e=this.ptr;return Ht(e)},Xr.prototype.RomVersionString=Xr.prototype.RomVersionString=function(){var e=this.ptr;return Y(At(e))},Xr.prototype.Supports=Xr.prototype.Supports=function(e){var t=this.ptr;return Qr.prepare(),e=e&&"object"==typeof e?e.ptr:Zr(e),!!Nt(t,e)},Xr.prototype.__destroy__=Xr.prototype.__destroy__=function(){var e=this.ptr;Lt(e)},Jr.prototype=Object.create(Vr.prototype),Jr.prototype.constructor=Jr,Jr.prototype.__class__=Jr,Jr.__cache__={},s.Frame=Jr,Jr.prototype.GetLineWidth=Jr.prototype.GetLineWidth=function(){var e=this.ptr;return Ft(e)},Jr.prototype.GetBpp=Jr.prototype.GetBpp=function(){var e=this.ptr;return Ut(e)},Jr.prototype.GetLines=Jr.prototype.GetLines=function(){var e=this.ptr;return jt(e)},Jr.prototype.GetMargin=Jr.prototype.GetMargin=function(){var e=this.ptr;return Ot(e)},Jr.prototype.GetBytesPerLine=Jr.prototype.GetBytesPerLine=function(){var e=this.ptr;return Wt(e)},Jr.prototype.GetFirstDirtyLine=Jr.prototype.GetFirstDirtyLine=function(){var e=this.ptr;return Vt(e)},Jr.prototype.GetLastDirtyLine=Jr.prototype.GetLastDirtyLine=function(){var e=this.ptr;return qt(e)},Jr.prototype.GetHasChanges=Jr.prototype.GetHasChanges=function(){var e=this.ptr;return!!Kt(e)},Jr.prototype.GetBuffer=Jr.prototype.GetBuffer=function(){var e=this.ptr;return Kr(Qt(e),$r)},Jr.prototype.GetBufferSize=Jr.prototype.GetBufferSize=function(){var e=this.ptr;return Zt(e)},Jr.prototype.GetScaleX=Jr.prototype.GetScaleX=function(){var e=this.ptr;return $t(e)},Jr.prototype.GetScaleY=Jr.prototype.GetScaleY=function(){var e=this.ptr;return Yt(e)},Jr.prototype.__destroy__=Jr.prototype.__destroy__=function(){var e=this.ptr;Xt(e)},en.prototype=Object.create(Vr.prototype),en.prototype.constructor=en,en.prototype.__class__=en,en.__cache__={},s.DbBackup=en,en.prototype.Init=en.prototype.Init=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),!!Jt(t,e)},en.prototype.IsInProgress=en.prototype.IsInProgress=function(){var e=this.ptr;return!!ei(e)},en.prototype.IsDone=en.prototype.IsDone=function(){var e=this.ptr;return!!ti(e)},en.prototype.GetCurrentDatabase=en.prototype.GetCurrentDatabase=function(){var e=this.ptr;return Y(ii(e))},en.prototype.Save=en.prototype.Save=function(){var e=this.ptr;return!!ri(e)},en.prototype.Skip=en.prototype.Skip=function(){var e=this.ptr;ni(e)},en.prototype.GetArchivePtr=en.prototype.GetArchivePtr=function(){var e=this.ptr;return Kr(oi(e),$r)},en.prototype.GetArchiveSize=en.prototype.GetArchiveSize=function(){var e=this.ptr;return si(e)},en.prototype.__destroy__=en.prototype.__destroy__=function(){var e=this.ptr;ai(e)},tn.prototype=Object.create(Vr.prototype),tn.prototype.constructor=tn,tn.prototype.__class__=tn,tn.__cache__={},s.SuspendContextClipboardCopy=tn,tn.prototype.Cancel=tn.prototype.Cancel=function(){var e=this.ptr;pi(e)},tn.prototype.Resume=tn.prototype.Resume=function(){var e=this.ptr;ci(e)},tn.prototype.GetClipboardContent=tn.prototype.GetClipboardContent=function(){var e=this.ptr;return Y(ui(e))},tn.prototype.__destroy__=tn.prototype.__destroy__=function(){var e=this.ptr;li(e)},rn.prototype=Object.create(Vr.prototype),rn.prototype.constructor=rn,rn.prototype.__class__=rn,rn.__cache__={},s.SuspendContextClipboardPaste=rn,rn.prototype.Cancel=rn.prototype.Cancel=function(){var e=this.ptr;di(e)},rn.prototype.Resume=rn.prototype.Resume=function(e){var t=this.ptr;Qr.prepare(),e=e&&"object"==typeof e?e.ptr:Zr(e),hi(t,e)},rn.prototype.__destroy__=rn.prototype.__destroy__=function(){var e=this.ptr;_i(e)},nn.prototype=Object.create(Vr.prototype),nn.prototype.constructor=nn,nn.prototype.__class__=nn,nn.__cache__={},s.SuspendContextNetworkConnect=nn,nn.prototype.Cancel=nn.prototype.Cancel=function(){var e=this.ptr;mi(e)},nn.prototype.Resume=nn.prototype.Resume=function(e){var t=this.ptr;Qr.prepare(),e=e&&"object"==typeof e?e.ptr:Zr(e),yi(t,e)},nn.prototype.__destroy__=nn.prototype.__destroy__=function(){var e=this.ptr;fi(e)},on.prototype=Object.create(Vr.prototype),on.prototype.constructor=on,on.prototype.__class__=on,on.__cache__={},s.SuspendContextNetworkRpc=on,on.prototype.Cancel=on.prototype.Cancel=function(){var e=this.ptr;vi(e)},on.prototype.GetRequestSize=on.prototype.GetRequestSize=function(){var e=this.ptr;return gi(e)},on.prototype.GetRequestData=on.prototype.GetRequestData=function(){var e=this.ptr;return Kr(bi(e),$r)},on.prototype.ReceiveResponse=on.prototype.ReceiveResponse=function(e,t){var i=this.ptr;e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),Si(i,e,t)},on.prototype.__destroy__=on.prototype.__destroy__=function(){var e=this.ptr;Ci(e)},sn.prototype=Object.create(Vr.prototype),sn.prototype.constructor=sn,sn.prototype.__class__=sn,sn.__cache__={},s.SuspendContextSerialSync=sn,sn.prototype.Cancel=sn.prototype.Cancel=function(){var e=this.ptr;wi(e)},sn.prototype.Resume=sn.prototype.Resume=function(){var e=this.ptr;Ii(e)},sn.prototype.__destroy__=sn.prototype.__destroy__=function(){var e=this.ptr;Gi(e)},an.prototype=Object.create(Vr.prototype),an.prototype.constructor=an,an.prototype.__class__=an,an.__cache__={},s.SuspendContext=an,an.prototype.GetKind=an.prototype.GetKind=function(){var e=this.ptr;return Ei(e)},an.prototype.Cancel=an.prototype.Cancel=function(){var e=this.ptr;Di(e)},an.prototype.AsContextClipboardCopy=an.prototype.AsContextClipboardCopy=function(){var e=this.ptr;return Kr(xi(e),tn)},an.prototype.AsContextClipboardPaste=an.prototype.AsContextClipboardPaste=function(){var e=this.ptr;return Kr(Pi(e),rn)},an.prototype.AsContextNetworkConnect=an.prototype.AsContextNetworkConnect=function(){var e=this.ptr;return Kr(ki(e),nn)},an.prototype.AsContextNetworkRpc=an.prototype.AsContextNetworkRpc=function(){var e=this.ptr;return Kr(Mi(e),on)},an.prototype.AsContextSerialSync=an.prototype.AsContextSerialSync=function(){var e=this.ptr;return Kr(Ri(e),sn)},an.prototype.__destroy__=an.prototype.__destroy__=function(){var e=this.ptr;zi(e)},pn.prototype=Object.create(Vr.prototype),pn.prototype.constructor=pn,pn.prototype.__class__=pn,pn.__cache__={},s.SessionImage=pn,pn.prototype.GetDeviceId=pn.prototype.GetDeviceId=function(){var e=this.ptr;return Y(Bi(e))},pn.prototype.SetDeviceId=pn.prototype.SetDeviceId=function(e){var t=this.ptr;return Qr.prepare(),e=e&&"object"==typeof e?e.ptr:Zr(e),Kr(Hi(t,e),pn)},pn.prototype.GetRomImage=pn.prototype.GetRomImage=function(){var e=this.ptr;return Kr(Ai(e),$r)},pn.prototype.GetRomImageSize=pn.prototype.GetRomImageSize=function(){var e=this.ptr;return Ni(e)},pn.prototype.SetRomImage=pn.prototype.SetRomImage=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),Kr(Li(i,e,t),pn)},pn.prototype.GetMemoryImage=pn.prototype.GetMemoryImage=function(){var e=this.ptr;return Kr(Fi(e),$r)},pn.prototype.GetMemoryImageSize=pn.prototype.GetMemoryImageSize=function(){var e=this.ptr;return Ui(e)},pn.prototype.SetMemoryImage=pn.prototype.SetMemoryImage=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),Kr(ji(i,e,t),pn)},pn.prototype.GetMetadata=pn.prototype.GetMetadata=function(){var e=this.ptr;return Kr(Oi(e),$r)},pn.prototype.GetMetadataSize=pn.prototype.GetMetadataSize=function(){var e=this.ptr;return Wi(e)},pn.prototype.SetMetadata=pn.prototype.SetMetadata=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),Kr(Vi(i,e,t),pn)},pn.prototype.GetSavestate=pn.prototype.GetSavestate=function(){var e=this.ptr;return Kr(qi(e),$r)},pn.prototype.GetSavestateSize=pn.prototype.GetSavestateSize=function(){var e=this.ptr;return Ki(e)},pn.prototype.SetSavestate=pn.prototype.SetSavestate=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),Kr(Qi(i,e,t),pn)},pn.prototype.GetVersion=pn.prototype.GetVersion=function(){var e=this.ptr;return Zi(e)},pn.prototype.Serialize=pn.prototype.Serialize=function(){var e=this.ptr;return!!$i(e)},pn.prototype.GetSerializedImage=pn.prototype.GetSerializedImage=function(){var e=this.ptr;return Kr(Yi(e),$r)},pn.prototype.GetSerializedImageSize=pn.prototype.GetSerializedImageSize=function(){var e=this.ptr;return Xi(e)},pn.prototype.Deserialize=pn.prototype.Deserialize=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),!!Ji(i,e,t)},pn.prototype.__destroy__=pn.prototype.__destroy__=function(){var e=this.ptr;er(e)},cn.prototype=Object.create(Vr.prototype),cn.prototype.constructor=cn,cn.prototype.__class__=cn,cn.__cache__={},s.SkinLoader=cn,cn.prototype.GetData=cn.prototype.GetData=function(){var e=this.ptr;return Kr(ir(e),$r)},cn.prototype.GetSize=cn.prototype.GetSize=function(){var e=this.ptr;return rr(e)},cn.prototype.__destroy__=cn.prototype.__destroy__=function(){var e=this.ptr;nr(e)},un.prototype=Object.create(Vr.prototype),un.prototype.constructor=un,un.prototype.__class__=un,un.__cache__={},s.EmTransportSerialBuffer=un,un.prototype.RxBytesPending=un.prototype.RxBytesPending=function(){var e=this.ptr;return or(e)},un.prototype.Receive=un.prototype.Receive=function(){var e=this.ptr;return Kr(sr(e),$r)},un.prototype.Send=un.prototype.Send=function(e,t,i){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),ar(r,e,t,i)},un.prototype.IsOpen=un.prototype.IsOpen=function(){var e=this.ptr;return!!pr(e)},un.prototype.Rts=un.prototype.Rts=function(){var e=this.ptr;return cr(e)},un.prototype.Dtr=un.prototype.Dtr=function(){var e=this.ptr;return!!ur(e)},un.prototype.IsBreak=un.prototype.IsBreak=function(){var e=this.ptr;return!!lr(e)},un.prototype.BufferSize=un.prototype.BufferSize=function(){var e=this.ptr;return dr(e)},un.prototype.GetBaud=un.prototype.GetBaud=function(){var e=this.ptr;return hr(e)},un.prototype.GetParity=un.prototype.GetParity=function(){var e=this.ptr;return _r(e)},un.prototype.GetStopBits=un.prototype.GetStopBits=function(){var e=this.ptr;return mr(e)},un.prototype.GetDataBits=un.prototype.GetDataBits=function(){var e=this.ptr;return yr(e)},un.prototype.GetHwrHandshake=un.prototype.GetHwrHandshake=function(){var e=this.ptr;return fr(e)},un.prototype.GetModeSync=un.prototype.GetModeSync=function(){var e=this.ptr;return!!vr(e)},un.prototype.SetModeSync=un.prototype.SetModeSync=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),gr(t,e)},un.prototype.IsFrameComplete=un.prototype.IsFrameComplete=function(){var e=this.ptr;return!!br(e)},un.prototype.SetRequestTransferCallback=un.prototype.SetRequestTransferCallback=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),Sr(t,e)},un.prototype.__destroy__=un.prototype.__destroy__=function(){var e=this.ptr;Cr(e)},ln.prototype=Object.create(Vr.prototype),ln.prototype.constructor=ln,ln.prototype.__class__=ln,ln.__cache__={},s.GunzipContext=ln,ln.prototype.GetState=ln.prototype.GetState=function(){var e=this.ptr;return Ir(e)},ln.prototype.Continue=ln.prototype.Continue=function(){var e=this.ptr;return Gr(e)},ln.prototype.GetUncompressedData=ln.prototype.GetUncompressedData=function(){var e=this.ptr;return Kr(Er(e),$r)},ln.prototype.ReleaseUncompressedData=ln.prototype.ReleaseUncompressedData=function(){var e=this.ptr;return Kr(Dr(e),$r)},ln.prototype.GetUncompressedSize=ln.prototype.GetUncompressedSize=function(){var e=this.ptr;return xr(e)},ln.prototype.GetError=ln.prototype.GetError=function(){var e=this.ptr;return Y(Pr(e))},ln.prototype.__destroy__=ln.prototype.__destroy__=function(){var e=this.ptr;kr(e)},dn.prototype=Object.create(Vr.prototype),dn.prototype.constructor=dn,dn.prototype.__class__=dn,dn.__cache__={},s.ZipfileWalker=dn,dn.prototype.GetState=dn.prototype.GetState=function(){var e=this.ptr;return Rr(e)},dn.prototype.Next=dn.prototype.Next=function(){var e=this.ptr;return zr(e)},dn.prototype.GetTotalEntries=dn.prototype.GetTotalEntries=function(){var e=this.ptr;return Tr(e)},dn.prototype.GetCurrentEntrySize=dn.prototype.GetCurrentEntrySize=function(){var e=this.ptr;return Br(e)},dn.prototype.GetCurrentEntryName=dn.prototype.GetCurrentEntryName=function(){var e=this.ptr;return Y(Hr(e))},dn.prototype.GetCurrentEntryContent=dn.prototype.GetCurrentEntryContent=function(){var e=this.ptr;return Kr(Ar(e),$r)},dn.prototype.__destroy__=dn.prototype.__destroy__=function(){var e=this.ptr;Nr(e)},a});e.exports=i},650:function(e,t){!function(e){"use strict";var t,i=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,r=536870912,n=1073741824,o=new WeakMap,s=function(e,t){return function(o){var s=t.get(o),a=void 0===s?o.size:s<n?s+1:0;if(!o.has(a))return e(o,a);if(o.size<r){for(;o.has(a);)a=Math.floor(Math.random()*n);return e(o,a)}if(o.size>i)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;o.has(a);)a=Math.floor(Math.random()*i);return e(o,a)}}((t=o,function(e,i){return t.set(e,i),i}),o),a=function(e){return function(t){var i=e(t);return t.add(i),i}}(s);e.addUniqueNumber=a,e.generateUniqueNumber=s}(t)},37:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[];i[0]=function(){return function(){}},i[1]=function(e,t){return void 0===t?e:function(i){e(i,t)}};var r=function(){function e(){this.hasHandlers=!1,this._handlers=[],this._contexts=[],this._createDispatcher()}return e.prototype.addHandler=function(e,t){return this.isHandlerAttached(e,t)||(this._handlers.push(e),this._contexts.push(t),this._createDispatcher(),this._updateHasHandlers()),this},e.prototype.removeHandler=function(e,t){var i=this._getHandlerIndex(e,t);return void 0!==i&&(this._handlers.splice(i,1),this._contexts.splice(i,1),this._createDispatcher(),this._updateHasHandlers()),this},e.prototype.isHandlerAttached=function(e,t){return void 0!==this._getHandlerIndex(e,t)},e.prototype._updateHasHandlers=function(){this.hasHandlers=!!this._handlers.length},e.prototype._getHandlerIndex=function(e,t){var i,r=this._handlers.length;for(i=0;i<r&&(this._handlers[i]!==e||this._contexts[i]!==t);i++);return i<r?i:void 0},e.prototype._createDispatcher=function(){var e;this.dispatch=(e=this._handlers.length,i[e]||(i[e]=function(e){for(var t="return function dispatcher"+e+"(payload) {\n",i=[],r=[],n=0;n<e;n++)i.push("cb"+n),r.push("ctx"+n),t+="    cb"+n+"(payload, ctx"+n+");\n";return t+="};",new(Function.bind.apply(Function,[void 0].concat(i.concat(r),[t])))}(e)),i[e]).apply(this,this._handlers.concat(this._contexts))},e}();t.default=r},819:(e,t,i)=>{"use strict";var r=i(37);t.j=r.default}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";function e(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s}function t(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{p(r.next(e))}catch(e){o(e)}}function a(e){try{p(r.throw(e))}catch(e){o(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}p((r=r.apply(e,t||[])).next())}))}var n,o,s;i.r(r),i.d(r,{Button:()=>se,DeviceId:()=>n,DeviceOrientation:()=>o,VERSION:()=>ae,createEmulator:()=>pe,createEmulatorFactory:()=>ce}),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError,(s=n||(n={})).palmPilot="PalmPilot",s.pilot="Pilot",s.iii="PalmIII",s.palmVx="PalmVx",s.palmV="PalmV",s.palmVII="PalmVII",s.palmVIIEZ="PalmVIIEZ",s.palmVIIx="PalmVIIx",s.iiic="PalmIIIc",s.iiix="PalmIIIx",s.iiixe="PalmIIIxe",s.iiie="PalmIIIe",s.m500="PalmM500",s.m505="PalmM505",s.m515="PalmM515",s.m520="PalmM520",s.m100="PalmM100",s.m105="PalmM105",s.m125="PalmM125",s.m130="PalmM130",s.i705="Palmi705",s.i710="PalmI710",s.handera330="HandEra330",s.handera330c="HandEra330c",s.pegS300="PEG-S300",s.pegS320="PEG-S320",s.pegS500c="PEG-S500C",s.pegT400="PEG-T400",s.pegN600c="PEG-N600C/N610C",s.pegT600c="PEG-T600",s.pegN700c="PEG-N700C/N710C",s.pegT650c="YSX1230",s.pegNR70="NR70",s.acerS11="Acer-S11",s.lp168="Legend-P168",function(e){e.portrait="portrait",e.landscape90="landscape90",e.landscape270="landscape270",e.portrait180="portrait180"}(o||(o={})),new Error("timeout while waiting for mutex to become available"),new Error("mutex already locked");const a=new Error("request for lock canceled");class p{constructor(e,t=a){this._value=e,this._cancelError=t,this._weightedQueues=[],this._weightedWaiters=[]}acquire(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise(((t,i)=>{this._weightedQueues[e-1]||(this._weightedQueues[e-1]=[]),this._weightedQueues[e-1].push({resolve:t,reject:i}),this._dispatch()}))}runExclusive(e,t=1){return i=this,r=void 0,o=function*(){const[i,r]=yield this.acquire(t);try{return yield e(i)}finally{r()}},new((n=void 0)||(n=Promise))((function(e,t){function s(e){try{p(o.next(e))}catch(e){t(e)}}function a(e){try{p(o.throw(e))}catch(e){t(e)}}function p(t){var i;t.done?e(t.value):(i=t.value,i instanceof n?i:new n((function(e){e(i)}))).then(s,a)}p((o=o.apply(i,r||[])).next())}));var i,r,n,o}waitForUnlock(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((t=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),this._weightedWaiters[e-1].push(t),this._dispatch()}))}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatch()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatch()}cancel(){this._weightedQueues.forEach((e=>e.forEach((e=>e.reject(this._cancelError))))),this._weightedQueues=[]}_dispatch(){var e;for(let t=this._value;t>0;t--){const i=null===(e=this._weightedQueues[t-1])||void 0===e?void 0:e.shift();if(!i)continue;const r=this._value,n=t;this._value-=t,t=this._value+1,i.resolve([r,this._newReleaser(n)])}this._drainUnlockWaiters()}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){for(let e=this._value;e>0;e--)this._weightedWaiters[e-1]&&(this._weightedWaiters[e-1].forEach((e=>e())),this._weightedWaiters[e-1]=[])}}class c{constructor(e){this._semaphore=new p(1,e)}acquire(){return e=this,t=void 0,r=function*(){const[,e]=yield this._semaphore.acquire();return e},new((i=void 0)||(i=Promise))((function(n,o){function s(e){try{p(r.next(e))}catch(e){o(e)}}function a(e){try{p(r.throw(e))}catch(e){o(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}p((r=r.apply(e,t||[])).next())}));var e,t,i,r}runExclusive(e){return this._semaphore.runExclusive((()=>e()))}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}const u="safari"in window,l=!!navigator.platform.match(/iPhone|iPad|iPod/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,d=(l&&navigator.userAgent.match(/(crios)|(fxios)/i),navigator.userAgent.match(/ pwashell$/i),navigator.userAgent.match(/android/i),navigator.userAgent.toLowerCase().indexOf("firefox"),window.AudioContext||window.webkitAudioContext);function h(e,t=100){return new Promise(((i,r)=>{setTimeout((()=>r(new Error("timeout"))),t),e.then(i,r)}))}class _{constructor(e){this.emulationService=e,this.initialize=()=>this.mutex.runExclusive((()=>t(this,void 0,void 0,(function*(){for(let e=0;e<3;e++)if(yield this.initializeAudioUnguarded())return!1;return!0})))),this.updateState=(e=!1)=>this.mutex.runExclusive((()=>t(this,void 0,void 0,(function*(){if(!this.context)return;if(this.isRunning()===this.shouldRun())return;e||this.isRunning()||!this.shouldRun()||this.applyPwmUpdate();const t=this.context.state;if(this.shouldRun())try{this.updateGain(),yield h(this.context.resume()),console.log("resume audio context")}catch(e){console.error(`failed to resume audio from state ${t}`)}else try{yield h(this.context.suspend()),console.log("suspend audio context")}catch(e){console.error(`failed to suspend audio from state ${t}`)}console.log(`audio context state change ${t} -> ${this.context.state}`)})))),this.onPwmUpdate=e=>t(this,void 0,void 0,(function*(){this.pendingPwmUpdate=e,this.initialized&&(this.shouldRun()!==this.isRunning()&&this.updateState(!0),this.shouldRun()&&this.applyPwmUpdate())})),this.mutex=new c,this.initialized=!1,this.muted=!1,this.emulationService.pwmUpdateEvent.addHandler(this.onPwmUpdate),this.emulationService.emulationStateChangeEvent.addHandler((()=>this.updateState())),this.emulationService.powerOffChangeEvent.addHandler((()=>this.updateState())),l||document.addEventListener("visibilitychange",(()=>this.updateState()))}isInitialized(){return this.initialized}mute(e){this.muted=e,this.updateState()}isMuted(){return this.muted}shouldRun(){return this.emulationService.isRunning()&&!this.emulationService.isPowerOff()&&!this.muted&&this.gain()>0&&("hidden"!==document.visibilityState||l||this.runHidden())}updateGain(){this.gainNode&&(this.gainNode.gain.value=this.gain())}initializeAudioUnguarded(){return t(this,void 0,void 0,(function*(){if(this.initialized)return!0;try{this.context=new d}catch(e){return console.error(e),console.error("web audio not available"),!1}try{this.context.destination.channelCount=1}catch(e){console.warn("audio driver: failed to set channel count")}try{yield this.start()}catch(e){return console.error(e),console.error("failed to initialize audio context"),!1}return this.context.addEventListener("statechange",(()=>{var e;"interrupted"===(null===(e=this.context)||void 0===e?void 0:e.state)&&this.updateState()})),this.gainNode=this.context.createGain(),this.gainNode.channelCount=1,this.gainNode.channelInterpretation="speakers",this.gainNode.gain.value=this.gain(),this.gainNode.connect(this.context.destination),this.applyPwmUpdate(),this.initialized=!0,!0}))}start(){return t(this,void 0,void 0,(function*(){this.context&&(yield h(this.context.resume()),this.updateState(),console.log("audio context initialized"))}))}isRunning(){var e;return"running"===(null===(e=this.context)||void 0===e?void 0:e.state)}applyPwmUpdate(){if(!this.context||!this.pendingPwmUpdate)return;const{frequency:e,dutyCycle:t}=this.pendingPwmUpdate,i=this.context.sampleRate;if(this.pendingPwmUpdate=void 0,e<=0||t<=0||e>=i)return void this.disconnectSource();const r=this.context.createBuffer(1,Math.round(i/e),i),n=r.getChannelData(0);for(let e=0;e<n.length;e++)n[e]=e/n.length<t?1:0;const o=this.context.createBufferSource();o.channelCount=1,o.channelInterpretation="speakers",o.loop=!0,o.buffer=r,this.disconnectSource(),o.connect(this.gainNode),o.start(),this.bufferSourceNode=o,this.pendingPwmUpdate=void 0}disconnectSource(){this.bufferSourceNode&&(this.bufferSourceNode.stop(),this.bufferSourceNode.disconnect(),this.bufferSourceNode=void 0)}gain(){return this.getVolume()/2}}class m extends _{constructor(){super(...arguments),this.volume=.5}setVolume(e){this.volume=Math.max(Math.min(e,1),0),this.updateGain()}getVolume(){return this.volume}runHidden(){return!1}}function y(e,i){let r,n;const o=document.createElement("canvas");return(s,a)=>t(this,void 0,void 0,(function*(){if(r===s&&n===a)return o;o.width=s,o.height=a;const t=o.getContext("2d");if(!t)throw new Error("get a new browser");return t.drawImage(yield e,0,0,o.width,o.height),(u||l)&&(yield i).indexOf("data:image")>=0&&(yield new Promise((e=>setTimeout(e,0))),t.drawImage(yield e,0,0,o.width,o.height)),r=s,n=a,o}))}function f(e){return new Promise(((t,i)=>{const r=new Image;r.onload=()=>t(r),r.onerror=()=>i(),r.src=e}))}const v=e=>`data:image/svg+xml;base64,${btoa(e)}`;var g,b;function S(e){switch(e){case n.i710:case n.m520:return{screenSize:1,width:320,height:320,silkscreenHeight:120};case n.handera330:case n.handera330c:case n.lp168:return{screenSize:2,width:240,height:320,silkscreenHeight:0};case n.pegS300:case n.pegS320:case n.pegS500c:return{screenSize:0,width:160,height:160,silkscreenHeight:76};case n.pegT600c:case n.pegT400:case n.pegT650c:return{screenSize:1,width:320,height:320,silkscreenHeight:140,silkscreenOvershoot:10};case n.pegN600c:case n.pegN700c:return{screenSize:1,width:320,height:320,silkscreenHeight:120};case n.pegNR70:return{screenSize:3,width:320,height:480,silkscreenHeight:0};case n.acerS11:return{screenSize:0,width:160,height:160,silkscreenHeight:60,siklscreenShift:8};default:return{screenSize:0,width:160,height:160,silkscreenHeight:60}}}function C(e){switch(e){case n.pilot:case n.palmPilot:case n.iii:case n.palmV:case n.palmVx:case n.iiix:case n.iiixe:case n.iiie:case n.m100:case n.m105:case n.m125:case n.m500:case n.palmVII:case n.palmVIIEZ:case n.palmVIIx:case n.i705:case n.handera330:case n.pegS300:case n.pegS320:case n.pegT400:case n.acerS11:return!1;default:return!0}}(b=g||(g={})).sdcard="sdcard",b.memorystick="memorystick",b.none="none";var w=i(819);const I=[135,135,105],G=[0,0,0],E=new Array(16).fill(0).map(((e,t)=>G.map(((e,i)=>Math.floor((t*e+(15-t)*I[i])/15))))).map((([e,t,i])=>4278190080|i<<16|t<<8|e)),D=E.map((e=>{var t;return"#"+(null===(t=(16777215&e).toString(16).padStart(6,"0").match(/(..?)/g))||void 0===t?void 0:t.reverse().join(""))})),x=n.m515,P=D[2],k=D[0],M="rgba(0,0,0,0.2)";function R(e){const t=S(e),i=(0===t.screenSize?3:2)*devicePixelRatio,r={frameDevice:1,frameCanvas:i},n=e=>({frameDevice:e,frameCanvas:e*i}),o=e=>({frameDevice:e,frameCanvas:r.frameCanvas+e*i}),s=t.silkscreenHeight>0?n(1):n(0),a=n(function(e){switch(e){case 3:case 1:return 60;case 2:return 45;default:return 30}}(t.screenSize));return{scale:i,borderWidth:r,height:n(2*r.frameDevice+t.height+s.frameDevice+t.silkscreenHeight+a.frameDevice),width:n(2*r.frameDevice+t.width),screenHeight:n(t.height),screenWidth:n(t.width),screenLeft:o(0),screenTop:o(0),screenBottom:o(t.height),separatorHeight:s,silkscreenHeight:n(t.silkscreenHeight),silkscreenTop:o(t.height+s.frameDevice),silkscreenBottom:o(t.height+s.frameDevice+t.silkscreenHeight),softSilkscreenHeight:n(t.silkscreenHeight>0?0:t.height-t.width),buttonHeight:a,buttonWidth:a,buttonTop:o(t.height+s.frameDevice+t.silkscreenHeight),buttonBottom:o(t.height+s.frameDevice+t.silkscreenHeight+a.frameDevice)}}class z{constructor(e){this.skinLoader=e,this.layout=R(x),this.onResize=new w.j}get width(){switch(this.getOrientation()){case o.portrait:case o.portrait180:case void 0:return this.layout.width.frameCanvas;default:return this.layout.height.frameCanvas}}get height(){switch(this.getOrientation()){case o.portrait:case o.portrait180:case void 0:return this.layout.height.frameCanvas;default:return this.layout.width.frameCanvas}}updateEmulationCanvas(e){this.drawEmulationCanvas(e),this.onAfterUpdateCanvas()}eventToPalmCoordinates(e,t=!1){if(!this.ctx)return;const i=this.ctx.canvas.getBoundingClientRect();let r,n,s,a;i.width/i.height>this.width/this.height?(a=i.height,s=this.width/this.height*i.height,n=i.top,r=i.left+(i.width-s)/2):(s=i.width,a=this.height/this.width*i.width,r=i.left,n=i.top+(i.height-a)/2);let p=(e.clientX-r)/s*this.width/this.layout.scale,c=(e.clientY-n)/a*this.height/this.layout.scale;switch(this.getOrientation()){case o.landscape90:{const e=c;c=this.layout.height.frameDevice-p,p=e;break}case o.landscape270:{const e=c;c=p,p=this.layout.width.frameDevice-e;break}case o.portrait180:p=this.layout.width.frameDevice-p,c=this.layout.height.frameDevice-c}p-=this.layout.borderWidth.frameDevice,c-=this.layout.borderWidth.frameDevice,c>=this.layout.screenHeight.frameDevice&&(c<=this.layout.screenHeight.frameDevice+this.layout.separatorHeight.frameDevice?c=this.layout.screenHeight.frameDevice:c-=this.layout.separatorHeight.frameDevice);const u=this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice+this.layout.buttonHeight.frameDevice;if(t)p<0&&(p=0),p>=this.layout.screenWidth.frameDevice&&(p=this.layout.screenWidth.frameDevice-1),c<0&&(c=0),c>=u&&(c=u-1);else if(p<0||p>=this.layout.screenWidth.frameDevice||c<0||c>=u)return;return[p,c]}isSilkscreen(e){const[,t]=e;return!this.isButtons(e)&&t>=this.layout.screenHeight.frameDevice}isButtons([,e]){return e>=this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice}determineButton([e,t]){return e>=this.layout.screenWidth.frameDevice-this.layout.buttonWidth.frameDevice?3:e>=this.layout.screenWidth.frameDevice-2*this.layout.buttonWidth.frameDevice?2:e>=2*this.layout.buttonWidth.frameDevice?t>=this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice+this.layout.buttonHeight.frameDevice/2?5:4:e>=this.layout.buttonWidth.frameDevice?1:0}initWithCanvas(e){var i;return void 0===e&&(e=null===(i=this.ctx)||void 0===i?void 0:i.canvas),t(this,void 0,void 0,(function*(){if(!e)return;this.layout=R(this.getDeviceId()),this.onResize.dispatch(),e.width=this.width,e.height=this.height;const t=e.getContext("2d");if(!t)throw new Error("canvas not supported - get a new browser");this.ctx=t,this.setupTransformation(),this.fillCanvasRect(0,0,this.layout.width.frameCanvas,this.layout.height.frameCanvas,this.frameColor()),this.fillRect(0,0,this.layout.screenWidth.frameDevice,this.layout.screenHeight.frameDevice+this.layout.silkscreenHeight.frameDevice+this.layout.separatorHeight.frameDevice+this.layout.buttonHeight.frameDevice,this.backgroundColor()),this.drawEmulationCanvas(),yield Promise.all([this.drawSilkscreen(),this.drawButtons()])}))}drawButtons(e=[]){return t(this,void 0,void 0,(function*(){this.ctx&&(this.setupTransformation(),this.ctx.imageSmoothingEnabled=!0,this.ctx.imageSmoothingQuality="high",this.ctx.drawImage(yield this.buttonsImage()(this.layout.screenWidth.frameCanvas,this.layout.buttonHeight.frameCanvas),this.layout.screenLeft.frameCanvas,this.layout.buttonTop.frameCanvas,this.layout.screenWidth.frameCanvas,this.layout.buttonHeight.frameCanvas),e.includes(0)&&this.fillRect(0,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,M),e.includes(1)&&this.fillRect(this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,M),e.includes(2)&&this.fillRect(this.layout.screenWidth.frameDevice-2*this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,M),e.includes(3)&&this.fillRect(this.layout.screenWidth.frameDevice-this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice,M),e.includes(4)&&this.fillRect(2*this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice,this.layout.screenWidth.frameDevice-4*this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice/2,M),e.includes(5)&&this.fillRect(2*this.layout.buttonWidth.frameDevice,this.layout.buttonTop.frameDevice+this.layout.buttonHeight.frameDevice/2,this.layout.screenWidth.frameDevice-4*this.layout.buttonWidth.frameDevice,this.layout.buttonHeight.frameDevice/2,M))}))}onAfterUpdateCanvas(){}setupTransformation(){var e;if(this.ctx)switch(null===(e=this.ctx)||void 0===e||e.resetTransform(),this.getOrientation()){case o.portrait:case void 0:break;case o.landscape90:this.ctx.translate(this.layout.height.frameCanvas,0),this.ctx.rotate(Math.PI/2);break;case o.landscape270:this.ctx.translate(0,this.layout.width.frameCanvas),this.ctx.rotate(3*Math.PI/2);break;case o.portrait180:this.ctx.translate(this.layout.width.frameCanvas,this.layout.height.frameCanvas),this.ctx.rotate(Math.PI)}}drawSilkscreen(){return t(this,void 0,void 0,(function*(){0!==this.layout.silkscreenHeight.frameCanvas&&this.ctx&&(this.setupTransformation(),this.fillRect(this.layout.screenLeft.frameDevice,this.layout.silkscreenTop.frameDevice,this.layout.screenWidth.frameDevice,this.layout.silkscreenHeight.frameDevice,P),this.ctx.imageSmoothingEnabled=!0,this.ctx.imageSmoothingQuality="high",this.ctx.drawImage(yield this.silkscreenImage()(this.layout.screenWidth.frameCanvas,this.layout.silkscreenHeight.frameCanvas),this.layout.borderWidth.frameCanvas,this.layout.silkscreenTop.frameCanvas,this.layout.screenWidth.frameCanvas,this.layout.silkscreenHeight.frameCanvas))}))}drawEmulationCanvas(e=this.lastEmulationCanvas){e&&this.ctx&&(this.lastEmulationCanvas=e,this.ctx.imageSmoothingEnabled=!1,this.ctx.drawImage(e,this.layout.screenLeft.frameCanvas,this.layout.screenTop.frameCanvas,this.layout.screenWidth.frameCanvas,this.layout.screenHeight.frameCanvas))}fillRect(e,t,i,r,n){this.ctx&&(this.ctx.beginPath(),this.ctx.rect(this.layout.borderWidth.frameCanvas+this.layout.scale*e,this.layout.borderWidth.frameCanvas+this.layout.scale*t,this.layout.scale*i,this.layout.scale*r),this.ctx.fillStyle=n,this.ctx.fill())}fillCanvasRect(e,t,i,r,n){this.ctx&&(this.ctx.beginPath(),this.ctx.rect(e,t,i,r),this.ctx.fillStyle=n,this.ctx.fill())}silkscreenImage(){return this.skinLoader.loadSkinElement(this.silkscreenSkinElement())}silkscreenSkinElement(){switch(this.getDeviceId()){case n.pegT600c:case n.pegT650c:return"silkscreen/clie-t600.svg";case n.pegN700c:case n.pegN600c:return"silkscreen/clie-n610.svg";case n.pegS320:case n.pegS300:return"silkscreen/clie-s300.svg";case n.pegS500c:return"silkscreen/clie-s500.svg";case n.pegT400:return"silkscreen/clie-t415.svg";case n.acerS11:return"silkscreen/acer-s10.svg";case n.palmPilot:case n.pilot:case n.iii:case n.palmVII:return"silkscreen/pilot.svg";case n.m500:return"silkscreen/m500.svg";case n.m505:case n.m515:case n.m520:return"silkscreen/m515.svg";case n.iiic:return"silkscreen/iiic.svg";case n.m100:case n.m105:case n.m125:return"silkscreen/m100.svg";case n.m130:return"silkscreen/m130.svg";case n.i710:return"silkscreen/tungstenw.svg";case n.i705:return"silkscreen/i705.svg";case n.iiic:case n.iiix:case n.iiixe:case n.palmVx:case n.palmV:case n.palmVIIEZ:case n.palmVIIx:default:return"silkscreen/v.svg"}}buttonsImage(){return this.skinLoader.loadSkinElement(this.buttonsSkinElement())}buttonsSkinElement(){switch(this.getDeviceId()){case n.acerS11:return"hard-buttons/acer-s10.svg";case n.pegNR70:return"hard-buttons/clie-nr70.svg";case n.pegN700c:return"hard-buttons/clie-n700.svg";case n.pegN600c:return"hard-buttons/clie-n610.svg";case n.pegS300:return"hard-buttons/clie-s300.svg";case n.pegS500c:return"hard-buttons/clie-s500.svg";case n.pegS320:return"hard-buttons/clie-s320.svg";case n.pegT400:case n.pegT600c:case n.pegT650c:return"hard-buttons/clie-t415.svg";case n.pilot:case n.palmPilot:return"hard-buttons/pilot.svg";case n.m500:return"hard-buttons/m500.svg";case n.m505:case n.m515:case n.m520:return"hard-buttons/m515.svg";case n.iiic:return"hard-buttons/iiic.svg";case n.m100:case n.m105:return"hard-buttons/m100.svg";case n.m125:return"hard-buttons/m125.svg";case n.m130:return"hard-buttons/m130.svg";case n.i710:return"hard-buttons/tungstenw.svg";case n.iii:case n.iiix:case n.iiixe:case n.palmVII:case n.palmVIIEZ:case n.palmVIIx:return"hard-buttons/iiix.svg";case n.iiie:return"hard-buttons/iiie.svg";case n.i705:return"hard-buttons/i705.svg";case n.handera330:return"hard-buttons/handera330.svg";case n.handera330c:return"hard-buttons/handera330c.svg";case n.lp168:return"hard-buttons/lp168.svg";case n.palmVx:case n.palmV:default:return"hard-buttons/v.svg"}}backgroundColor(){return C(this.getDeviceId())?"white":k}frameColor(){return C(this.getDeviceId())?"white":"#ccc"}}const T='<svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><title>Game Controller</title><path d="M467.51 248.83c-18.4-83.18-45.69-136.24-89.43-149.17A91.5 91.5 0 00352 96c-26.89 0-48.11 16-96 16s-69.15-16-96-16a99.09 99.09 0 00-27.2 3.66C89 112.59 61.94 165.7 43.33 248.83c-19 84.91-15.56 152 21.58 164.88 26 9 49.25-9.61 71.27-37 25-31.2 55.79-40.8 119.82-40.8s93.62 9.6 118.66 40.8c22 27.41 46.11 45.79 71.42 37.16 41.02-14.01 40.44-79.13 21.43-165.04z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"/><circle cx="292" cy="224" r="20"/><path d="M336 288a20 20 0 1120-19.95A20 20 0 01336 288z"/><circle cx="336" cy="180" r="20"/><circle cx="380" cy="224" r="20"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M160 176v96M208 224h-96"/></svg>',B=y(f(v(T)),T);class H extends z{constructor(){super(...arguments),this.deviceId=n.m515,this.orientation=o.portrait,this.gameModeIndicatorEnabled=!0,this.gameModeActive=!1,this.lastActiveButtons=void 0}initialize(e,i=this.deviceId,r=this.orientation){var n;return t(this,void 0,void 0,(function*(){this.deviceId=i,this.orientation=r;const t=e||(null===(n=this.ctx)||void 0===n?void 0:n.canvas);t&&(t.width=this.width,t.height=this.height,t.style.objectFit="contain"),yield this.initWithCanvas(e)}))}updateOrientation(e){this.orientation=e,this.initialize()}toggleGameModeIndicator(e){this.gameModeActive=e,this.drawButtons(this.lastActiveButtons)}setGameModeIndicatorEnabled(e){this.gameModeIndicatorEnabled=e,this.drawButtons(this.lastActiveButtons)}isGameModeIndicatorEnabled(){return this.gameModeIndicatorEnabled}getCanvas(){var e;return null===(e=this.ctx)||void 0===e?void 0:e.canvas}drawButtons(e=[]){const i=Object.create(null,{drawButtons:{get:()=>super.drawButtons}});return t(this,void 0,void 0,(function*(){this.lastActiveButtons=e,yield i.drawButtons.call(this,e),this.gameModeActive&&this.gameModeIndicatorEnabled&&(yield this.drawGameModeIndicator())}))}getDeviceId(){return this.deviceId}getOrientation(){return this.orientation}drawGameModeIndicator(){return t(this,void 0,void 0,(function*(){if(!this.ctx)return;const e=Math.floor(.1*this.layout.screenWidth.frameCanvas),t=Math.floor(.8*e),i=Math.floor(.1*e),r=Math.floor(.11*e);this.fillCanvasRect(this.layout.screenLeft.frameCanvas-i+this.layout.screenWidth.frameCanvas-e,this.layout.buttonTop.frameCanvas+this.layout.buttonHeight.frameCanvas-e-i,e,e,"rgba(200, 200, 200, 0.7)"),this.ctx.drawImage(yield B(e,e),this.layout.screenLeft.frameCanvas+this.layout.screenWidth.frameCanvas-i-e+r,this.layout.buttonTop.frameCanvas+this.layout.buttonHeight.frameCanvas-e-i+r,t,t)}))}}var A=i(650);const N=((e,t)=>{let i=null;return()=>{if(null!==i)return i;const e=new Blob(['(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error(\'There is no interval scheduled with the given id "\'.concat(t,\'".\'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error(\'The given type "\'.concat(i,\'" is not supported\'));(e=>{const r=t.get(e);if(void 0===r)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error(\'The given method "\'.concat(s.method,\'" is not supported\'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error(\'The given type "\'.concat(d,\'" is not supported\'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();'],{type:"application/javascript; charset=utf-8"}),t=URL.createObjectURL(e);return i=(e=>{const t=new Map([[0,()=>{}]]),i=new Map([[0,()=>{}]]),r=new Map,n=new Worker(e);return n.addEventListener("message",(({data:e})=>{if(void 0!==(n=e).method&&"call"===n.method){const{params:{timerId:n,timerType:o}}=e;if("interval"===o){const e=t.get(n);if("number"==typeof e){const t=r.get(e);if(void 0===t||t.timerId!==n||t.timerType!==o)throw new Error("The timer is in an undefined state.")}else{if(void 0===e)throw new Error("The timer is in an undefined state.");e()}}else if("timeout"===o){const e=i.get(n);if("number"==typeof e){const t=r.get(e);if(void 0===t||t.timerId!==n||t.timerType!==o)throw new Error("The timer is in an undefined state.")}else{if(void 0===e)throw new Error("The timer is in an undefined state.");e(),i.delete(n)}}}else{if(!(e=>null===e.error&&"number"==typeof e.id)(e)){const{error:{message:t}}=e;throw new Error(t)}{const{id:n}=e,o=r.get(n);if(void 0===o)throw new Error("The timer is in an undefined state.");const{timerId:s,timerType:a}=o;r.delete(n),"interval"===a?t.delete(s):i.delete(s)}}var n})),{clearInterval:e=>{const i=(0,A.generateUniqueNumber)(r);r.set(i,{timerId:e,timerType:"interval"}),t.set(e,i),n.postMessage({id:i,method:"clear",params:{timerId:e,timerType:"interval"}})},clearTimeout:e=>{const t=(0,A.generateUniqueNumber)(r);r.set(t,{timerId:e,timerType:"timeout"}),i.set(e,t),n.postMessage({id:t,method:"clear",params:{timerId:e,timerType:"timeout"}})},setInterval:(e,i)=>{const r=(0,A.generateUniqueNumber)(t);return t.set(r,(()=>{e(),"function"==typeof t.get(r)&&n.postMessage({id:null,method:"set",params:{delay:i,now:performance.now(),timerId:r,timerType:"interval"}})})),n.postMessage({id:null,method:"set",params:{delay:i,now:performance.now(),timerId:r,timerType:"interval"}}),r},setTimeout:(e,t)=>{const r=(0,A.generateUniqueNumber)(i);return i.set(r,e),n.postMessage({id:null,method:"set",params:{delay:t,now:performance.now(),timerId:r,timerType:"timeout"}}),r}}})(t),setTimeout((()=>URL.revokeObjectURL(t))),i}})();var L;!function(e){e[e.animationFrame=0]="animationFrame",e[e.timeout=1]="timeout"}(L||(L={}));class F{constructor(e){this.callback=e}schedule(){void 0===this.handle&&(this.handle=requestAnimationFrame((e=>{this.handle=void 0,this.callback(e)})))}cancel(){void 0!==this.handle&&(cancelAnimationFrame(this.handle),this.handle=void 0)}isScheduled(){return void 0!==this.handle}getKind(){return L.animationFrame}}class U{constructor(e,t=60){this.callback=e,this.fps=t}schedule(){if(void 0!==this.handle)return;const e=performance.now(),t=1e3*Math.ceil(e/1e3*this.fps)/this.fps;var i,r;this.handle=(i=()=>{this.handle=void 0,this.callback(performance.now())},r=Math.max(t-e,0),N().setTimeout(i,r))}cancel(){var e;void 0!==this.handle&&(e=this.handle,N().clearTimeout(e),this.handle=void 0)}isScheduled(){return void 0!==this.handle}getKind(){return L.timeout}}class j{constructor(e,t){this.queue=new Array(e).fill(0),this.reset(t)}reset(e=0){this.next=1,this.size=1,this.queue[0]=e}push(e){return this.queue[this.next]=e,this.next=(this.next+1)%this.queue.length,this.size<this.queue.length&&this.size++,this}calculateAverage(){let e=0;for(let t=0;t<this.size;t++)e+=this.queue[t];return e/this.size}}class O{constructor(e){this.start=0,this.size=0,this.buffer=new Array(e)}push(e){return this.size<this.buffer.length?this.buffer[(this.start+this.size++)%this.buffer.length]=e:(this.start=(this.start+1)%this.buffer.length,this.buffer[(this.start+this.size-1)%this.buffer.length]=e),this}pop(){if(0===this.size)return;const e=this.buffer[this.start];return this.start=(this.start+1)%this.buffer.length,this.size--,e}peekLast(){if(0!==this.size)return this.buffer[(this.start+this.size-1)%this.buffer.length]}replaceLast(e){return this.size>0&&(this.buffer[(this.start+this.size-1)%this.buffer.length]=e),this}count(){return this.size}flush(){return this.start=0,this.size=0,this}}class W{constructor(){this.onFrameComplete=()=>{this.transport&&this.receiveEvent.dispatch({data:this.transport.Receive(),isFrameComplete:this.transport.IsFrameComplete()})},this.receiveEvent=new w.j,this.dispatchEvent=new w.j,this.isSync=!1}bind(e){this.transport!==e&&(this.transport&&this.transport.frameCompleteEvent.removeHandler(this.onFrameComplete),e.frameCompleteEvent.addHandler(this.onFrameComplete),e.SetModeSync(this.isSync),this.transport=e)}send(e,t){this.transport&&(this.transport.IsOpen()||!this.transport.GetModeSync()?(this.transport.Send(e,t),setTimeout((()=>this.dispatchEvent.dispatch()),0)):this.receiveEvent.dispatch({data:void 0,isFrameComplete:!0}))}setModeSync(e){var t;this.isSync=e,null===(t=this.transport)||void 0===t||t.SetModeSync(e)}getModeSync(){var e,t,i;return null!==(i=null===(t=null===(e=this.transport)||void 0===e?void 0:e.GetModeSync)||void 0===t?void 0:t.call(e))&&void 0!==i&&i}dispatch(){if(!this.transport)return;const e=this.transport.RxBytesPending();0!==e&&(this.transport.GetModeSync()&&e<1024||this.receiveEvent.dispatch({data:this.transport.Receive(),isFrameComplete:this.transport.IsFrameComplete()}))}}class V{constructor(){this.onPwmUpdate=e=>{this.pendingPwmUpdates.count()>0&&this.pendingPwmUpdates.peekLast().frequency<0?this.pendingPwmUpdates.replaceLast(e):this.pendingPwmUpdates.push(e)},this.advanceEmulation=e=>{if(this.isDirty=!1,!this.isRunning)return;if(!this.cloudpilotInstance||this.hasFatalError()||e<this.clockEmulator)return;this.cloudpilotInstance.isSuspended()&&5===this.cloudpilotInstance.getSuspendKind()&&e-this.serialSyncStartedAt>250&&(console.log("serial sync timeout, waking emulator"),this.cloudpilotInstance.getSuspendContextSerialSync().Cancel());const t=this.cloudpilotInstance.isSuspended();let i=!1;this.cloudpilotInstance.setClockFactor(this.emulationSpeed*this.getConfiguredSpeed()),e-this.clockEmulator>1e3/30&&(this.clockEmulator=e-1e3/30);const r=(e-this.clockEmulator)/1e3*this.cloudpilotInstance.cyclesPerSecond(),n=performance.now();let o=0;for(;o<r;)if(o+=this.cloudpilotInstance.runEmulation(Math.ceil(r-o)),this.cloudpilotInstance.isSuspended()){i=!0;break}const s=o/this.cloudpilotInstance.cyclesPerSecond()*1e3,a=performance.now()-n;this.clockEmulator+=Math.max(s,a),this.speedAverage.push(s/(a>0?a:s/1e3)*this.emulationSpeed),this.updateEmulationSpeed(this.speedAverage.calculateAverage()),i&&!t&&(5===this.cloudpilotInstance.getSuspendKind()?this.serialSyncStartedAt=performance.now():this.handleSuspend());const p=this.cloudpilotInstance.isPowerOff(),c=this.cloudpilotInstance.isUiInitialized();if(p!==this.powerOff||c!==this.uiInitialized){const e=this.powerOff;this.powerOff=p,this.uiInitialized=c,e!==this.powerOff&&this.powerOffChangeEvent.dispatch(this.powerOff),this.isDirty=!0}c&&!p&&this.manageHotsyncName()&&!i&&this.checkAndUpdateHotsyncName(),this.serialPortIR.dispatch(),this.serialPortSerial.dispatch(),this.onAfterAdvanceEmulation(e,o)},this.newFrameEvent=new w.j,this.pwmUpdateEvent=new w.j,this.emulationStateChangeEvent=new w.j,this.powerOffChangeEvent=new w.j,this.deviceId=n.m515,this.clockEmulator=0,this.scheduler=new F((e=>this.onSchedule(e))),this.canvas=document.createElement("canvas"),this.canvasTmp=document.createElement("canvas"),this.lastPenUpdate=0,this.penDown=!1,this.running=!1,this.powerOff=!1,this.uiInitialized=!1,this.pendingPwmUpdates=new O(10),this.lastPwmUpdateEvent=0,this.emulationSpeed=1,this.speedAverage=new j(20),this.timePerFrameAverage=new j(60),this.timestampLastFrame=0,this.frameCounter=0,this.isDirty=!1,this.serialPortIR=new W,this.serialPortSerial=new W,this.serialSyncStartedAt=0,this.serialPortIR.dispatchEvent.addHandler((()=>this.advanceEmulation(performance.now()))),this.serialPortSerial.dispatchEvent.addHandler((()=>this.advanceEmulation(performance.now())))}handlePointerMove(e,t,i){if(!this.handleInput())return;const r=performance.now();if(this.penDown=!0,!(r-this.lastPenUpdate<25)&&this.cloudpilotInstance){if(i){const i=S(this.deviceId);e=this.transformSilkscreenX(e,i),t=this.transformSilkscreenY(t,i)}this.cloudpilotInstance.queuePenMove(Math.floor(e),Math.floor(t)),this.lastPenUpdate=r}}handlePointerUp(){this.handleInput()&&(this.cloudpilotInstance&&this.penDown&&this.cloudpilotInstance.queuePenUp(),this.lastPenUpdate=0,this.penDown=!1)}handleButtonDown(e){this.handleInput()&&this.cloudpilotInstance&&this.cloudpilotInstance.queueButtonDown(e)}handleButtonUp(e){this.handleInput()&&this.cloudpilotInstance&&this.cloudpilotInstance.queueButtonUp(e)}handleKeyDown(e,t=!1){this.handleInput()&&this.cloudpilotInstance&&this.cloudpilotInstance.queueKeyboardEvent(e,t)}reset(){this.cloudpilotInstance&&this.cloudpilotInstance.reset()}resetNoExtensions(){this.cloudpilotInstance&&this.cloudpilotInstance.resetNoExtensions()}resetHard(){this.cloudpilotInstance&&this.cloudpilotInstance.resetHard()}isRunning(){return this.running}isPowerOff(){return this.powerOff}isUiInitialized(){return this.uiInitialized}getCanvas(){return this.canvas}getStatistics(){return{hostSpeed:this.speedAverage.calculateAverage(),emulationSpeed:this.emulationSpeed,averageFps:this.calculateFPS()}}getEmulationSpeed(){return this.emulationSpeed}isSuspended(){return!!this.cloudpilotInstance&&this.cloudpilotInstance.isSuspended()}getSerialPortSerial(){if(!this.serialPortSerial)throw new Error("emulator not initialized");return this.serialPortSerial}getSerialPortIR(){if(!this.serialPortIR)throw new Error("emulator not initialized");return this.serialPortIR}onAfterAdvanceEmulation(e,t){}handleSuspend(){}callScheduler(){this.scheduler.schedule()}handleInput(){return!0}openSession(e,t,i,r,n){let o=!1;return!!e.initializeSession(t,i)&&(r&&(r.length%4!=0?console.warn("memory size is not a multiple of 4; ignoring image"):(o=e.loadMemory(new Uint32Array(r.buffer,r.byteOffset,r.length>>>2)),o||console.warn("failed to load memory"))),o&&n&&e.loadState(n),e.remountCards(),this.cloudpilotInstance&&this.cloudpilotInstance.pwmUpdateEvent.removeHandler(this.onPwmUpdate),e.pwmUpdateEvent.addHandler(this.onPwmUpdate),this.cloudpilotInstance!==e&&(this.serialPortIR.bind(e.getTransportIR()),this.serialPortSerial.bind(e.getTransportSerial())),this.cloudpilotInstance=e,this.deviceId=i,this.resetCanvas(),this.pendingPwmUpdates.flush(),this.lastPwmUpdateEvent=0,this.deviceHotsyncName=void 0,this.emulationSpeed=1,this.frameCounter=0,this.speedAverage.reset(1),this.powerOff=e.isPowerOff(),this.uiInitialized=e.isUiInitialized(),this.frameCounter=0,!0)}resetCanvas(){const e=S(this.deviceId);this.canvas.width=this.canvasTmp.width=e.width,this.canvas.height=this.canvasTmp.height=e.height;const t=this.canvas.getContext("2d");if(!t)throw new Error("get a new browser");this.context=t;const i=this.canvasTmp.getContext("2d");if(!i)throw new Error("get a new browser");this.contextTmp=i,this.clearCanvas(),this.imageData=void 0}doResume(){this.cloudpilotInstance&&(this.clockEmulator=performance.now(),this.schedule(),this.setRunning(!0),this.resetFPS())}doPause(){this.stopLoop()}doStop(){this.stopLoop()}stopLoop(){this.running&&(this.scheduler.cancel(),void 0!==this.advanceEmulationHandle&&(window.clearTimeout(this.advanceEmulationHandle),this.advanceEmulationHandle=void 0),this.setRunning(!1))}resetFPS(){this.timePerFrameAverage.reset(),this.timestampLastFrame=performance.now()}calculateFPS(){const e=this.timePerFrameAverage.calculateAverage();return e&&1e3/e}transformSilkscreenX(e,t){if(void 0===t.silkscreenOvershoot)return e;const i=t.width/(t.width+2*t.silkscreenOvershoot);return(e-t.width/2)/i+t.width/2}transformSilkscreenY(e,t){return void 0===t.siklscreenShift?e:e+t.siklscreenShift}setRunning(e){e!==this.running&&(this.running=e,this.emulationStateChangeEvent.dispatch(e))}updateEmulationSpeed(e){if(e>=1&&this.emulationSpeed>=1)return;const t=Math.min(Math.max(Math.floor(10*e)/10,.1),1);t<=this.emulationSpeed?this.emulationSpeed=t:this.emulationSpeed=e-t>=.05?t:this.emulationSpeed}performScreenUpdate(){var e;(null===(e=this.cloudpilotInstance)||void 0===e?void 0:e.isScreenDirty())&&(this.updateScreen(),this.cloudpilotInstance.markScreenClean(),this.frameCounter++)}onSchedule(e){this.hasFatalError()||(this.skipEmulationUpdate()||(this.performScreenUpdate(),this.pendingPwmUpdates.count()>0&&e-this.lastPwmUpdateEvent>10&&(this.pwmUpdateEvent.dispatch(this.pendingPwmUpdates.pop()),this.lastPwmUpdateEvent=e),void 0===this.advanceEmulationHandle&&(this.advanceEmulationHandle=window.setTimeout((()=>{this.advanceEmulationHandle=void 0,this.advanceEmulation(e)}),0)),this.timePerFrameAverage.push(Math.max(0,e-this.timestampLastFrame)),this.timestampLastFrame=e),this.schedule())}schedule(){this.scheduler.cancel(),this.getConfiguredSchdedulerKind()!==this.scheduler.getKind()&&(this.scheduler=this.getConfiguredSchdedulerKind()===L.animationFrame?new F((e=>this.onSchedule(e))):new U((e=>this.onSchedule(e)))),this.callScheduler()}checkAndUpdateHotsyncName(){if(!this.cloudpilotInstance)return;void 0===this.deviceHotsyncName&&(this.deviceHotsyncName=this.cloudpilotInstance.getHotsyncName());const e=this.getConfiguredHotsyncName();void 0===e?this.updateConfiguredHotsyncName(this.deviceHotsyncName):e!==this.deviceHotsyncName&&e.length<=40&&this.cloudpilotInstance.isSetupComplete()&&(this.cloudpilotInstance.setHotsyncName(e),this.deviceHotsyncName=e)}clearCanvas(){const e=this.deviceId,t=S(e);this.context.beginPath(),this.context.rect(0,0,t.width,t.height),this.context.fillStyle=C(e)?"white":D[0],this.context.fill()}updateScreen(){if(!this.cloudpilotInstance)return;const e=this.cloudpilotInstance.getFrame();if(this.cloudpilotInstance.isPowerOff())return this.clearCanvas(),void this.newFrameEvent.dispatch(this.canvas);if(!e.hasChanges)return;if(e.lines*e.scaleY===this.canvas.height&&e.lineWidth*e.scaleX===this.canvas.width){this.imageData&&this.imageData.width===e.lineWidth&&this.imageData.height===e.lines||(this.imageData=new ImageData(e.lineWidth,e.lines));const t=new Uint32Array(this.imageData.data.buffer);switch(e.bpp){case 1:{const i=E[15],r=E[0];let n=0;for(let o=e.firstDirtyLine;o<=e.lastDirtyLine;o++){const s=o*e.bytesPerLine;for(let o=e.margin;o<e.lineWidth+e.margin;o++)t[n++]=e.buffer[s+(o>>>3)]&128>>>(7&o)?i:r}break}case 2:{const i=this.cloudpilotInstance.getPalette2bitMapping(),r=[E[15&i],E[i>>>4&15],E[i>>>8&15],E[i>>>12&15]];let n=0;for(let i=e.firstDirtyLine;i<=e.lastDirtyLine;i++){const o=i*e.bytesPerLine;for(let i=e.margin;i<e.lineWidth+e.margin;i++)t[n++]=r[e.buffer[o+(i>>>2)]>>6-2*(3&i)&3]}break}case 4:{let i=0;for(let r=e.firstDirtyLine;r<=e.lastDirtyLine;r++){const n=r*e.bytesPerLine;for(let r=e.margin;r<e.lineWidth+e.margin;r++)t[i++]=E[e.buffer[n+(r>>>1)]>>>4-4*(1&r)&15]}break}case 24:{const i=new Uint32Array(e.buffer.buffer,e.buffer.byteOffset,e.buffer.byteLength>>>2);if(0===e.margin)t.subarray(0,e.lineWidth*(e.lastDirtyLine-e.firstDirtyLine+1)).set(i.subarray(e.firstDirtyLine*e.lineWidth,e.lineWidth*(e.lastDirtyLine+1)));else{let r=0;for(let n=e.firstDirtyLine;n<=e.lastDirtyLine;n++){let o=n*(e.bytesPerLine>>>2)+e.margin;for(let n=0;n<e.lineWidth;n++)t[r++]=i[o++]}}}}}if(!this.imageData)return;const t=1!==e.scaleX||1!==e.scaleY;(t?this.contextTmp:this.context).putImageData(this.imageData,0,e.firstDirtyLine,0,0,e.lineWidth,e.lastDirtyLine-e.firstDirtyLine+1),t&&(this.context.imageSmoothingEnabled=!1,this.context.drawImage(this.canvasTmp,0,e.firstDirtyLine,e.lineWidth,e.lastDirtyLine-e.firstDirtyLine+1,0,e.firstDirtyLine*e.scaleY,e.lineWidth*e.scaleX,(e.lastDirtyLine-e.firstDirtyLine+1)*e.scaleY)),this.newFrameEvent.dispatch(this.canvas)}}class q extends V{constructor(){super(...arguments),this.timesliceEvent=new w.j}pause(){this.doPause()}resume(){this.doResume()}initWithRom(e,t,i,r){return this.isRunning()&&(this.doStop(),this.session=void 0),e.clearExternalStorage(),!!this.openSession(e,t,i)&&(this.session=r,!0)}initWithSessionImage(e,t,i){return this.isRunning()&&(this.doStop(),this.session=void 0),e.clearExternalStorage(),!!this.openSession(e,t.rom,t.deviceId,t.memory,t.savestate)&&(this.session=i,!0)}getSession(){return this.session}forceUpdateHotsyncName(){this.cloudpilotInstance&&this.cloudpilotInstance.isUiInitialized()&&!this.cloudpilotInstance.isPowerOff()&&this.checkAndUpdateHotsyncName()}getConfiguredSpeed(){var e,t;return null!==(t=null===(e=this.session)||void 0===e?void 0:e.speed)&&void 0!==t?t:1}manageHotsyncName(){return!0}getConfiguredHotsyncName(){var e;return null===(e=this.session)||void 0===e?void 0:e.hotsyncName}updateConfiguredHotsyncName(e){this.session&&(this.session.hotsyncName=e)}getConfiguredSchdedulerKind(){var e;return(null===(e=this.session)||void 0===e?void 0:e.runInBackground)?L.timeout:L.animationFrame}hasFatalError(){var e;return!!(null===(e=this.cloudpilotInstance)||void 0===e?void 0:e.hasFatalError())}skipEmulationUpdate(){return!1}onAfterAdvanceEmulation(e,t){this.timesliceEvent.dispatch()}handleInput(){return this.isRunning()}}class K{constructor(e,t){this.emulationService=e,this.canvasDisplayService=t,this.handleMouseDown=e=>{if(0!==e.button)return;const t=this.canvasDisplayService.eventToPalmCoordinates(e);if(!t)return;const i=this.determineArea(t);if(2===i){const e=this.canvasDisplayService.determineButton(t);this.interactionMouse={area:i,buttonPrimary:e},this.handleButtonDown(e)}else this.interactionMouse={area:i},this.emulationService.handlePointerMove(...t,1===i)},this.handleMouseMove=e=>{var t,i;if(!(1&e.buttons&&this.interactionMouse&&2!==(null===(t=this.interactionMouse)||void 0===t?void 0:t.area)))return;const r=this.canvasDisplayService.eventToPalmCoordinates(e,!0);r&&this.emulationService.handlePointerMove(...r,1===(null===(i=this.interactionMouse)||void 0===i?void 0:i.area))},this.handeMouseUp=e=>{if(0!==e.button)return;const t=this.interactionMouse;switch(this.interactionMouse=void 0,null==t?void 0:t.area){case 2:this.handleButtonUp(t.buttonPrimary);break;case 0:case 1:this.emulationService.handlePointerUp()}},this.handleTouchStart=e=>{let t=!1;for(let i=0;i<e.changedTouches.length;i++){const r=e.changedTouches.item(i);if(!r)continue;const n=this.canvasDisplayService.eventToPalmCoordinates(r);if(!n)continue;t=!0;const o=this.determineArea(n);if(2===o){const e=this.canvasDisplayService.determineButton(n);this.interactionsTouch.set(r.identifier,{area:o,buttonPrimary:e}),this.handleButtonDown(e)}else this.interactionsTouch.set(r.identifier,{area:o}),this.emulationService.handlePointerMove(...n,1===o)}t&&!1!==e.cancelable&&e.preventDefault()},this.handleTouchMove=e=>{let t=!1;for(let i=0;i<e.changedTouches.length;i++){const r=e.changedTouches.item(i);if(!r)continue;const n=this.interactionsTouch.get(r.identifier);if(!n)continue;t=!0;const o=n.area;switch(o){case 2:{const e=this.canvasDisplayService.eventToPalmCoordinates(r);if(!e||2!==this.determineArea(e)){this.handleButtonUp(n.buttonSecondary),n.buttonSecondary=void 0;break}const t=this.canvasDisplayService.determineButton(e);t===n.buttonPrimary?(this.handleButtonUp(n.buttonSecondary),n.buttonSecondary=void 0):t!==n.buttonSecondary&&(this.handleButtonUp(n.buttonSecondary),n.buttonSecondary=t,this.handleButtonDown(t));break}case 0:case 1:{const e=this.canvasDisplayService.eventToPalmCoordinates(r,!0);if(!e)continue;this.emulationService.handlePointerMove(...e,1===o);break}default:continue}}t&&!1!==e.cancelable&&e.preventDefault()},this.handleTouchEnd=e=>{let t=!1;for(let i=0;i<e.changedTouches.length;i++){const r=e.changedTouches.item(i);if(!r)continue;const n=this.interactionsTouch.get(r.identifier);switch(n&&(t=!0),this.interactionsTouch.delete(r.identifier),null==n?void 0:n.area){case 2:this.handleButtonUp(n.buttonPrimary),this.handleButtonUp(n.buttonSecondary);break;case 0:case 1:this.emulationService.handlePointerUp()}}t&&!1!==e.cancelable&&e.preventDefault()},this.handleKeyDown=e=>{if(this.emulationService.isSuspended()||!this.enableKeyboardEvents())return;if(this.isToggleGameMode(e))return e.preventDefault(),this.gameMode=!this.gameMode,void this.onToggleGameMode();const t=this.buttonFromEvent(e);if(void 0!==t)return this.handleButtonDown(t),void e.preventDefault();const i=this.keyCodeFromEvent(e);void 0!==i&&(this.emulationService.handleKeyDown(i),e.preventDefault())},this.handleKeyUp=e=>{if(this.emulationService.isSuspended()||!this.enableKeyboardEvents())return;const t=this.buttonFromEvent(e);if(void 0!==t)return this.handleButtonUp(t),void e.preventDefault();if("Control"===e.key){for(const e of this.activeButtons)this.emulationService.handleButtonUp(e);this.activeButtons.clear(),this.canvasDisplayService.drawButtons([])}},this.keyEventTarget=window,this.interactionsTouch=new Map,this.activeButtons=new Set,this.gameMode=!1,this.enableGamemodeHotkey=!0}bind(e,t=window){this.pointerEventTarget&&this.release(),this.pointerEventTarget=e,this.keyEventTarget=t||window,this.addEventListener(e,"mousedown",this.handleMouseDown),this.addEventListener(window,"mouseup",this.handeMouseUp),this.addEventListener(window,"mousemove",this.handleMouseMove),this.addEventListener(e,"touchstart",this.handleTouchStart),this.addEventListener(e,"touchmove",this.handleTouchMove),this.addEventListener(e,"touchend",this.handleTouchEnd),this.addEventListener(e,"touchcancel",this.handleTouchEnd),this.addEventListener(this.keyEventTarget,"keydown",this.handleKeyDown),this.addEventListener(this.keyEventTarget,"keyup",this.handleKeyUp)}release(){if(this.pointerEventTarget){this.removeEventListener(this.pointerEventTarget,"mousedown",this.handleMouseDown),this.removeEventListener(window,"mouseup",this.handeMouseUp),this.removeEventListener(window,"mousemove",this.handleMouseMove),this.removeEventListener(this.pointerEventTarget,"touchstart",this.handleTouchStart),this.removeEventListener(this.pointerEventTarget,"touchmove",this.handleTouchMove),this.removeEventListener(this.pointerEventTarget,"touchend",this.handleTouchEnd),this.removeEventListener(this.pointerEventTarget,"touchcancel",this.handleTouchEnd),this.removeEventListener(this.keyEventTarget,"keydown",this.handleKeyDown),this.removeEventListener(this.keyEventTarget,"keyup",this.handleKeyUp);for(const e of this.activeButtons)this.handleButtonUp(e);this.activeButtons.clear(),this.interactionsTouch.clear(),this.interactionMouse=void 0,this.pointerEventTarget=void 0}}isGameMode(){return this.gameMode}setGameMode(e){this.gameMode=e,this.onToggleGameMode()}setGameModeHotkeyEnabled(e){this.enableGamemodeHotkey=e}isGameModeHotkeyEnabled(){return this.enableGamemodeHotkey}enableKeyboardEvents(){return!0}onToggleGameMode(){}addEventListener(e,t,i,r){e.addEventListener(t,i,r)}removeEventListener(e,t,i,r){e.removeEventListener(t,i,r)}determineArea(e){return this.canvasDisplayService.isButtons(e)?2:this.canvasDisplayService.isSilkscreen(e)?1:0}handleButtonDown(e){this.activeButtons.has(e)||(this.activeButtons.add(e),this.emulationService.handleButtonDown(e),this.canvasDisplayService.drawButtons(Array.from(this.activeButtons.values())))}handleButtonUp(e){void 0!==e&&this.activeButtons.has(e)&&(this.activeButtons.delete(e),this.emulationService.handleButtonUp(e),this.canvasDisplayService.drawButtons(Array.from(this.activeButtons.values())))}isToggleGameMode(e){return this.isGameModeHotkeyEnabled()&&("Shift"===e.key&&e.ctrlKey||"Control"===e.key&&e.shiftKey)}isGameModeActive(e){return!this.gameMode&&e.ctrlKey||this.gameMode&&!e.ctrlKey}buttonFromEvent(e){switch(e.key){case"PageUp":return 4;case"PageDown":return 5}if(this.isGameModeActive(e))switch(e.key){case"w":case"i":case"ArrowUp":return 4;case"s":case"k":case"ArrowDown":return 5;case"a":case"j":case"y":case"z":case"ArrowLeft":return 0;case"q":case"u":case"x":return 1;case"e":case"o":case"c":return 2;case"d":case"l":case"v":case"ArrowRight":return 3}}keyCodeFromEvent(e){if(!this.isGameModeActive(e)){if(1===e.key.length&&e.key.charCodeAt(0)<=255)return e.key.charCodeAt(0);switch(e.key){case"ArrowLeft":return 28;case"ArrowRight":return 29;case"ArrowUp":return 30;case"ArrowDown":return 31;case"Backspace":return 8;case"Tab":return 9;case"Enter":return 10;default:return}}}}class Q extends K{constructor(e,t){super(e,t),this.gameModeChangeEvent=new w.j,this.canvasDisplayService=t}onToggleGameMode(){this.canvasDisplayService.toggleGameModeIndicator(this.isGameMode()),this.gameModeChangeEvent.dispatch(this.isGameMode())}}class Z{constructor(e){this.cloudpilot=e,this.images=new Map}loadSkinElement(e){if(this.images.has(e))return this.images.get(e);const t=this.cloudpilot.then((t=>t.loadSkin(e))).then((t=>t?Promise.all([t,f(v(t))]):Promise.reject(new Error(`failed to load skin ${e}`)))),i=y(t.then((([,e])=>e)),t.then((([e])=>e)));return this.images.set(e,i),i}}class ${constructor(e){this.query=e,this.changeEvent=new w.j,this.last=e()}update(){const e=this.query();e!==this.last&&(this.changeEvent.dispatch(e),this.last=e)}}const Y={hotsyncName:void 0,orientation:o.portrait,runInBackground:!1,speed:1,deviceId:n.m515},X="MEMORY_CARD";class J{constructor(e){this.cloudpilot=e,this.onTimeslice=()=>{this.powerOffWatcher.update(),this.uiInitializedWatcher.update(),this.hotsyncNameWatcher.update()},this.audioInitializedEvent=new w.j,this.session=Object.assign({},Y),this.emulationService=new q,this.canvasDisplayService=new H(new Z(Promise.resolve(e))),this.eventHandlingService=new Q(this.emulationService,this.canvasDisplayService),this.audioService=new m(this.emulationService),this.emulationService.newFrameEvent.addHandler((e=>this.canvasDisplayService.updateEmulationCanvas(e))),this.timesliceEvent.addHandler(this.onTimeslice),this.powerOffWatcher=new $((()=>this.isPowerOff())),this.uiInitializedWatcher=new $((()=>this.isUiInitialized())),this.hotsyncNameWatcher=new $((()=>this.getHotsyncName()||""))}getStatistics(){return this.emulationService.getStatistics()}loadRom(e,t){if(void 0===t){const i=this.cloudpilot.getRomInfo(e);if(!i||0===i.supportedDevices.length)throw new Error("unsupported device");t=i.supportedDevices[0]}if(this.session=Object.assign(Object.assign({},Y),{deviceId:t}),this.emulationService.initWithRom(this.cloudpilot,e,t,this.session))return this.canvasDisplayService.initialize(void 0,t,this.session.orientation),this;throw new Error("failed to initialize session")}loadSession(e){var t,i,r,n,s;const a=this.cloudpilot.deserializeSessionImage(e);if(!a)throw new Error("bad session image");if(this.session={hotsyncName:null===(t=a.metadata)||void 0===t?void 0:t.hotsyncName,speed:null!==(r=null===(i=a.metadata)||void 0===i?void 0:i.speed)&&void 0!==r?r:1,orientation:null!==(s=null===(n=a.metadata)||void 0===n?void 0:n.deviceOrientation)&&void 0!==s?s:o.portrait,runInBackground:!1,deviceId:a.deviceId},this.emulationService.initWithSessionImage(this.cloudpilot,a,this.session))return this.canvasDisplayService.initialize(void 0,a.deviceId,this.session.orientation),this;throw new Error("failed to initialize session")}insertCompressedCardImage(e){if(!this.cloudpilot.decompressCard(X,e))throw new Error("failed to decompress and mount card image");if(!this.cloudpilot.mountCard(X))throw new Error("failed to mount card image");return this}insertCardImage(e){if(e.length%512!=0)throw new Error("card image size must be a multiple of 512");if(!this.cloudpilot.allocateCard(X,e.length))throw new Error("failed to allocate card image");const t=this.cloudpilot.getCardData(X);if(!t)throw new Error("failed to allocate card image");if(t.set(new Uint32Array(e.buffer,e.byteOffset,e.byteLength>>>2)),!this.cloudpilot.mountCard(X))throw new Error("failed to mount card image");return this}ejectCard(){if(!this.isCardMounted())return this;if(!this.cloudpilot.removeCard(X))throw new Error("failed to eject card");return this}isCardMounted(){return this.cloudpilot.getMountedKey()===X}setCanvas(e){return this.canvasDisplayService.initialize(e,this.session.deviceId,this.session.orientation),this}bindInput(e){const t=this.canvasDisplayService.getCanvas();if(!t)throw new Error("you must set up the canvas setCanvas before calling bindInput");return this.eventHandlingService.bind(t,e),this}releaseInput(){return this.eventHandlingService.release(),this}installDatabase(e){if(this.cloudpilot.installDb(e)<0)throw new Error("failed to install database");return this}installAndLaunchDatabase(e){return this.installDatabase(e).launchDatabase(e)}installFromZipfile(e){return this.installFromZipfileAndLaunch(e)}installFromZipfileAndLaunch(e,t){let i;if(this.cloudpilot.withZipfileWalkerSync(e,(e=>{for(;0===e.GetState();){const r=e.GetCurrentEntryContent(),n=e.GetCurrentEntryName();if(!r)throw new Error(`unable to read ${n} from zupfile`);this.installDatabase(r),n.toLowerCase()===(null==t?void 0:t.toLowerCase())&&(i=r.subarray(0,32).slice()),e.Next()}if(-1===e.GetState())throw new Error("error reading zipfile")})),void 0!==t&&!i)throw new Error(`database ${t} not found `);return i&&this.launchDatabase(i),this}launchByName(e){if(!this.cloudpilot.launchAppByName(e))throw new Error(`failed to launch ${e}`);return this}launchDatabase(e){if(!this.cloudpilot.launchAppByDbHeader(e))throw new Error("failed to launch database");return this}reset(){return this.emulationService.reset(),this}resetNoExtensions(){return this.emulationService.resetNoExtensions(),this}resetHard(){return this.emulationService.resetHard(),this}isRunning(){return this.emulationService.isRunning()}isPowerOff(){return this.emulationService.isPowerOff()}isUiInitialized(){return this.emulationService.isUiInitialized()}resume(){return this.emulationService.resume(),this}pause(){return this.emulationService.pause(),this}buttonDown(e){return this.emulationService.handleButtonDown(e),this}buttonUp(e){return this.emulationService.handleButtonUp(e),this}setSpeed(e){return this.session.speed=e,this}getSpeed(){return this.session.speed}setVolume(e){return this.audioService.setVolume(e),this}getVolume(){return this.audioService.getVolume()}initializeAudio(){return t(this,void 0,void 0,(function*(){return yield this.audioService.initialize(),this.audioService.isInitialized()}))}isAudioInitialized(){return this.audioService.isInitialized()}setOrientation(e){return this.session.orientation=e,this.canvasDisplayService.updateOrientation(this.session.orientation),this}getOrientation(){return this.session.orientation}setHotsyncName(e){return this.session.hotsyncName=e,this.emulationService.forceUpdateHotsyncName(),this}getHotsyncName(){return this.session.hotsyncName}setRunHidden(e){return this.session.runInBackground=e,this}getRunHidden(){return this.session.runInBackground}isGameMode(){return this.eventHandlingService.isGameMode()}setGameMode(e){return this.eventHandlingService.setGameMode(e),this}isGameModeHotkeyEnabled(){return this.eventHandlingService.isGameModeHotkeyEnabled()}setGameModeHotkeyEnabled(e){return this.eventHandlingService.setGameModeHotkeyEnabled(e),this}isGameModeIndicatorEnabled(){return this.canvasDisplayService.isGameModeIndicatorEnabled()}setGameModeIndicatorEnabled(e){return this.canvasDisplayService.setGameModeIndicatorEnabled(e),this}getSerialPortIR(){return this.emulationService.getSerialPortIR()}getSerialPortSerial(){return this.emulationService.getSerialPortSerial()}get powerOffChangeEvent(){return this.powerOffWatcher.changeEvent}get isUiInitializedChangeEvent(){return this.uiInitializedWatcher.changeEvent}get hotsyncNameChangeEvent(){return this.hotsyncNameWatcher.changeEvent}get gameModeChangeEvent(){return this.eventHandlingService.gameModeChangeEvent}get timesliceEvent(){return this.emulationService.timesliceEvent}}var ee=i(492),te=i.n(ee);let ie=0;const re=[n.palmPilot,n.pilot,n.iii,n.palmVx,n.palmV,n.palmVII,n.palmVIIEZ,n.palmVIIx,n.iiixe,n.iiix,n.iiie,n.m500,n.m505,n.m515,n.m520,n.iiic,n.m100,n.m105,n.m125,n.m130,n.i705,n.i710,n.handera330,n.handera330c,n.pegS300,n.pegS320,n.pegS500c,n.pegT400,n.pegN600c,n.pegT600c,n.pegN700c,n.pegT650c,n.pegNR70,n.acerS11,n.lp168];function ne(){return(e,t,i)=>{const r=i.value;return i.value=function(e,t){return this.guard((()=>r.call(this,e,t)))},i}}class oe{constructor(e){this.module=e,this.fatalErrorEvent=new w.j,this.pwmUpdateEvent=new w.j,this.proxyDisconnectEvent=new w.j,this.amIdead=!1,this.cloudpilot=new e.Cloudpilot,this.cloudpilot.RegisterPwmHandler(e.addFunction(((e,t)=>this.pwmUpdateEvent.dispatch({frequency:e,dutyCycle:t})),"vdd")),this.cloudpilot.RegisterProxyDisconnectHandler(e.addFunction((t=>this.proxyDisconnectEvent.dispatch(e.UTF8ToString(t))),"vi")),this.transportIR=this.wrapTransport(this.cloudpilot.GetTransportIR()),this.transportSerial=this.wrapTransport(this.cloudpilot.GetTransportSerial())}static create(e){return t(this,void 0,void 0,(function*(){const t=ie++;return new oe(yield te()(Object.assign(Object.assign({print:e=>console.log(`${t}: ${e}`),printErr:e=>console.error(`${t}: ${e}`)},"string"==typeof e?{locateFile:()=>e}:{}),"function"==typeof e?{instantiateWasm:e}:{})))}))}destroy(){this.module.destroy(this.cloudpilot)}hasFatalError(){return this.amIdead}getRomInfo(e){const t=this.copyIn(e),i=new this.module.RomInfo(t,e.length);let r;return i.IsValid()&&(r={cardVersion:i.CardVersion(),cardName:i.CardName(),romVersion:i.RomVersion(),romVersionString:i.RomVersionString(),supportedDevices:re.filter(i.Supports.bind(i))}),this.cloudpilot.Free(t),this.module.destroy(i),r}initializeSession(e,t){const i=this.copyIn(e),r=this.cloudpilot.InitializeSession(i,e.length,t);return this.cloudpilot.Free(i),r}cyclesPerSecond(){return this.cloudpilot.GetCyclesPerSecond()}runEmulation(e){return this.cloudpilot.RunEmulation(e)}getFrame(){const e=this.cloudpilot.CopyFrame(),t=this.module.getPointer(e.GetBuffer());return{bpp:e.GetBpp(),bytesPerLine:e.GetBytesPerLine(),lines:e.GetLines(),lineWidth:e.GetLineWidth(),margin:e.GetMargin(),firstDirtyLine:e.GetFirstDirtyLine(),lastDirtyLine:e.GetLastDirtyLine(),hasChanges:e.GetHasChanges(),scaleX:e.GetScaleX(),scaleY:e.GetScaleY(),buffer:this.module.HEAPU8.subarray(t,t+e.GetBufferSize())}}isScreenDirty(){return this.cloudpilot.IsScreenDirty()}markScreenClean(){this.cloudpilot.MarkScreenClean()}minRamForDevice(e){return 1024*this.cloudpilot.MinMemoryForDevice(e)}framebufferSizeForDevice(e){return 1024*this.cloudpilot.FramebufferSizeForDevice(e)}totalMemorySizeForDevice(e){return 1024*this.cloudpilot.TotalMemoryForDevice(e)}queuePenMove(e,t){this.cloudpilot.QueuePenMove(e,t)}queuePenUp(){this.cloudpilot.QueuePenUp()}queueButtonDown(e){this.cloudpilot.QueueButtonDown(e)}queueButtonUp(e){this.cloudpilot.QueueButtonUp(e)}queueKeyboardEvent(e,t){this.cloudpilot.QueueKeyboardEvent(e,t)}isPowerOff(){return!!this.cloudpilot.IsPowerOff()}isUiInitialized(){return!!this.cloudpilot.IsUIInitialized()}isSetupComplete(){return!!this.cloudpilot.IsSetupComplete()}getOSVersion(){return this.cloudpilot.GetOSVersion()}reset(){this.cloudpilot.Reset()}resetNoExtensions(){this.cloudpilot.ResetNoExtensions()}resetHard(){this.cloudpilot.ResetHard()}installDb(e){const t=this.copyIn(e),i=this.cloudpilot.InstallDb(t,e.length);return this.cloudpilot.Free(t),i}getPalette2bitMapping(){return this.cloudpilot.GetPalette2bitMapping()}getMemory(){const e=this.module.getPointer(this.cloudpilot.GetMemoryPtr());return this.module.HEAPU8.subarray(e,e+this.cloudpilot.GetMemorySize())}getMemory32(){let e=this.module.getPointer(this.cloudpilot.GetMemoryPtr());if(3&e)throw new Error("unaligned pointer");return e>>>=2,this.module.HEAPU32.subarray(e,e+(this.cloudpilot.GetMemorySize()>>>2))}getDirtyPages(){const e=this.module.getPointer(this.cloudpilot.GetDirtyPagesPtr()),t=this.cloudpilot.GetMemorySize(),i=(t>>>13)+(t%8192==0?0:1);return this.module.HEAPU8.subarray(e,e+i)}loadMemory(e){const t=this.getMemory32();if((()=>{if(e.length!==t.length||e.length<256)return!1;for(let i=256;i>0;i--){if(e[e.length-i]!==t[t.length-i])return!1;if(4294967295===t[t.length-i])break}return!0})())return t.set(e),!0;{const t=this.copyIn32(e),i=this.cloudpilot.ImportMemoryImage(t,e.length<<2);return this.cloudpilot.Free(t),i}}getRomImage(){const e=this.module.getPointer(this.cloudpilot.GetRomPtr());return this.module.HEAPU8.subarray(e,e+this.cloudpilot.GetRomSize())}getSavestate(){const e=this.module.getPointer(this.cloudpilot.GetSavestatePtr());return this.module.HEAPU8.subarray(e,e+this.cloudpilot.GetSavestateSize())}saveState(){return!!this.cloudpilot.SaveState()}loadState(e){const t=this.copyIn(e),i=this.cloudpilot.LoadState(t,e.length);return this.cloudpilot.Free(t),i}getHotsyncName(){return this.cloudpilot.GetHotsyncName()}setClockFactor(e){this.cloudpilot.SetClockFactor(e)}setHotsyncName(e){this.cloudpilot.SetHotsyncName(e)}backup(e){return t(this,void 0,void 0,(function*(){const t=this.guard((()=>this.cloudpilot.StartBackup()));try{return yield e(this.wrap(t))}finally{this.module.destroy(t)}}))}getArchive(e){const t=e.GetArchiveSize();return this.copyOut(e.GetArchivePtr(),t)}setClipboardIntegration(e){this.cloudpilot.SetClipboardIntegration(e)}getClipboardIntegration(){return this.cloudpilot.GetClipboardIntegration()}isSuspended(){return this.cloudpilot.IsSuspended()}getSuspendKind(){return this.cloudpilot.GetSuspendContext().GetKind()}cancelSuspend(){this.cloudpilot.GetSuspendContext().Cancel()}getSuspendContextClipboardCopy(){return this.wrap(this.cloudpilot.GetSuspendContext().AsContextClipboardCopy())}getSuspendContextClipboardPaste(){return this.wrap(this.cloudpilot.GetSuspendContext().AsContextClipboardPaste())}setNetworkRedirection(e){this.cloudpilot.SetNetworkRedirection(e)}getNetworkRedirection(){return this.cloudpilot.GetNetworkRedirection()}getSuspendContextNetworkConnect(){return this.wrap(this.cloudpilot.GetSuspendContext().AsContextNetworkConnect())}getSuspendContextNetworkRpc(){return this.wrap(this.cloudpilot.GetSuspendContext().AsContextNetworkRpc())}getSuspendContextSerialSync(){return this.wrap(this.cloudpilot.GetSuspendContext().AsContextSerialSync())}copyBuffer(e){return this.copyIn(e)}freeBuffer(e){this.cloudpilot.Free(e)}setHotsyncNameManagement(e){this.cloudpilot.SetHotsyncNameManagement(e)}resolveBuffer(e,t){const i=this.module.getPointer(e);return this.module.HEAPU8.subarray(i,i+t)}withZipfileWalker(e,i){return t(this,void 0,void 0,(function*(){const t=this.guard((()=>{const t=this.copyIn(e),i=new this.module.ZipfileWalker(e.length,t);return this.cloudpilot.Free(t),i}));try{return yield i(function(e,t){return Object.setPrototypeOf({GetCurrentEntryContent:()=>{const i=t.getPointer(e.GetCurrentEntryContent()),r=e.GetCurrentEntrySize();return i>0&&r>0?t.HEAPU8.subarray(i,i+r):void 0}},e)}(this.wrap(t),this.module))}finally{this.module.destroy(t)}}))}withZipfileWalkerSync(e,t){const i=this.guard((()=>{const t=this.copyIn(e),i=new this.module.ZipfileWalker(e.length,t);return this.cloudpilot.Free(t),i}));try{return t(this.wrap(Object.setPrototypeOf({GetCurrentEntryContent:()=>this.copyOut(i.GetCurrentEntryContent(),i.GetCurrentEntrySize())},i)))}finally{this.module.destroy(i)}}serializeSessionImage(e){var t,i;const r=new this.module.SessionImage,n=this.cloudpilot.Nullptr(),o=this.copyIn(e.rom),s=e.memory?this.copyIn(e.memory):n,a=void 0!==e.savestate?this.copyIn(e.savestate):n;let p=n,c=0;if(void 0!==e.metadata){const t=(new TextEncoder).encode(JSON.stringify(e.metadata));c=t.length,p=this.copyIn(t)}r.SetRomImage(o,e.rom.length),r.SetMemoryImage(s,(null===(t=e.memory)||void 0===t?void 0:t.length)||0),r.SetDeviceId(e.deviceId),r.SetSavestate(a,(null===(i=e.savestate)||void 0===i?void 0:i.length)||0),r.SetMetadata(p,c);const u=r.Serialize()?this.copyOut(r.GetSerializedImage(),r.GetSerializedImageSize()):void 0;return this.module.destroy(r),[o,s,a,p].forEach((e=>this.cloudpilot.Free(e))),u}deserializeSessionImage(e){if(!e)return;const t=new this.module.SessionImage,i=this.copyIn(e),r=(()=>{if(!t.Deserialize(i,e.length))return;const r=this.copyOut(t.GetRomImage(),t.GetRomImageSize()),n=this.copyOut(t.GetMemoryImage(),t.GetMemoryImageSize()),o=this.copyOut(t.GetSavestate(),t.GetSavestateSize()),s=t.GetDeviceId();if(!re.includes(s))return void console.warn(`unsupported device ${s}`);let a;const p=this.copyOut(t.GetMetadata(),t.GetMetadataSize());if(p)try{a=JSON.parse((new TextDecoder).decode(p))}catch(e){console.warn("invalid metadata",e)}return{deviceId:s,rom:r,memory:n,savestate:o,metadata:a,version:t.GetVersion()}})();return this.module.destroy(t),this.cloudpilot.Free(i),r}launchAppByName(e){return this.cloudpilot.LaunchAppByName(e)}launchAppByDbHeader(e){if(e.length<32)return!1;const t=this.copyIn(e.subarray(0,32)),i=this.cloudpilot.LaunchAppByDbHeader(t,32);return this.cloudpilot.Free(t),i}deviceSupportsCardSize(e){return this.cloudpilot.DeviceSupportsCardSize(e)}clearExternalStorage(){this.cloudpilot.ClearExternalStorage()}allocateCard(e,t){return this.cloudpilot.AllocateCard(e,t>>>9)}decompressCard(e,t){const i=this.copyIn(t);let r;try{for(r=new this.module.GunzipContext(i,t.length,524288);0===r.GetState();)r.Continue();return-1===r.GetState()?(console.error(`gunzip failed: ${r.GetError()}`),!1):r.GetUncompressedSize()%512!=0?(console.error("failed to allocate card: invalid size of decompressed image"),!1):this.cloudpilot.AdoptCard(e,r.ReleaseUncompressedData(),r.GetUncompressedSize()>>>9)}finally{this.cloudpilot.Free(i),r&&this.module.destroy(r)}}getCardData(e){const t=this.module.getPointer(this.cloudpilot.GetCardData(e));if(0!==t)return this.module.HEAPU32.subarray(t>>>2,t+this.cloudpilot.GetCardSize(e)>>2)}getCardDirtyPages(e){const t=this.module.getPointer(this.cloudpilot.GetCardDirtyPages(e));if(0===t)return;const i=function(e){const t=(e>>>13)+(e%8192>0?1:0);return(t>>>3)+(t%8>0?1:0)}(this.cloudpilot.GetCardSize(e));return this.module.HEAPU8.subarray(t,t+i)}getMountedKey(){return this.cloudpilot.GetMountedKey()}mountCard(e){return this.cloudpilot.MountCard(e)}removeCard(e){return this.cloudpilot.RemoveCard(e)}remountCards(){this.cloudpilot.RemountCards()}getCardSupportLevel(e){return this.cloudpilot.GetSupportLevel(e)}loadSkin(e){const t=new this.module.SkinLoader(e);try{const e=this.module.getPointer(t.GetData());if(0===e)return;return(new TextDecoder).decode(this.module.HEAPU8.subarray(e,e+t.GetSize()))}finally{this.module.destroy(t)}}getTransportIR(){return this.transportIR}getTransportSerial(){return this.transportSerial}guard(e){if(this.amIdead)throw new Error("cloudpilot instance is dead");try{return e()}catch(e){throw this.amIdead=!0,this.cloudpilot=void 0,this.fatalErrorEvent.dispatch(e instanceof Error?e:new Error("unknown error")),e}}copyIn(e){const t=this.cloudpilot.Malloc(e.length),i=this.module.getPointer(t);return this.module.HEAPU8.subarray(i,i+e.length).set(e),t}copyIn32(e){const t=this.cloudpilot.Malloc(e.length<<2),i=this.module.getPointer(t);return this.module.HEAPU32.subarray(i>>>2,(i>>>2)+e.length).set(e),t}copyOut(e,t){const i=this.module.getPointer(e);return i>0&&t>0?this.module.HEAPU8.subarray(i,i+t).slice():void 0}wrap(e){return new Proxy(e,{get:(e,t)=>{const i=e[t];return"function"!=typeof i?i:(...t)=>this.guard((()=>i.apply(e,t)))}})}wrapTransport(e){const t=new w.j;return e.SetRequestTransferCallback(this.module.addFunction((()=>t.dispatch()),"v")),this.wrap(Object.setPrototypeOf({Receive:()=>{const t=e.RxBytesPending();return this.copyOut(e.Receive(),t)},Send:(t,i)=>{var r;const n=t&&this.copyIn(t);e.Send(null!==(r=null==t?void 0:t.length)&&void 0!==r?r:0,null!=n?n:this.cloudpilot.Nullptr(),i),n&&this.cloudpilot.Free(n)},frameCompleteEvent:t},e))}}var se;e([ne()],oe.prototype,"getRomInfo",null),e([ne()],oe.prototype,"initializeSession",null),e([ne()],oe.prototype,"cyclesPerSecond",null),e([ne()],oe.prototype,"runEmulation",null),e([ne()],oe.prototype,"getFrame",null),e([ne()],oe.prototype,"isScreenDirty",null),e([ne()],oe.prototype,"markScreenClean",null),e([ne()],oe.prototype,"minRamForDevice",null),e([ne()],oe.prototype,"framebufferSizeForDevice",null),e([ne()],oe.prototype,"totalMemorySizeForDevice",null),e([ne()],oe.prototype,"queuePenMove",null),e([ne()],oe.prototype,"queuePenUp",null),e([ne()],oe.prototype,"queueButtonDown",null),e([ne()],oe.prototype,"queueButtonUp",null),e([ne()],oe.prototype,"queueKeyboardEvent",null),e([ne()],oe.prototype,"isPowerOff",null),e([ne()],oe.prototype,"isUiInitialized",null),e([ne()],oe.prototype,"isSetupComplete",null),e([ne()],oe.prototype,"getOSVersion",null),e([ne()],oe.prototype,"reset",null),e([ne()],oe.prototype,"resetNoExtensions",null),e([ne()],oe.prototype,"resetHard",null),e([ne()],oe.prototype,"installDb",null),e([ne()],oe.prototype,"getPalette2bitMapping",null),e([ne()],oe.prototype,"getMemory",null),e([ne()],oe.prototype,"getMemory32",null),e([ne()],oe.prototype,"getDirtyPages",null),e([ne()],oe.prototype,"loadMemory",null),e([ne()],oe.prototype,"getRomImage",null),e([ne()],oe.prototype,"getSavestate",null),e([ne()],oe.prototype,"saveState",null),e([ne()],oe.prototype,"loadState",null),e([ne()],oe.prototype,"getHotsyncName",null),e([ne()],oe.prototype,"setClockFactor",null),e([ne()],oe.prototype,"setHotsyncName",null),e([ne()],oe.prototype,"setClipboardIntegration",null),e([ne()],oe.prototype,"getClipboardIntegration",null),e([ne()],oe.prototype,"isSuspended",null),e([ne()],oe.prototype,"getSuspendKind",null),e([ne()],oe.prototype,"cancelSuspend",null),e([ne()],oe.prototype,"getSuspendContextClipboardCopy",null),e([ne()],oe.prototype,"getSuspendContextClipboardPaste",null),e([ne()],oe.prototype,"setNetworkRedirection",null),e([ne()],oe.prototype,"getNetworkRedirection",null),e([ne()],oe.prototype,"getSuspendContextNetworkConnect",null),e([ne()],oe.prototype,"getSuspendContextNetworkRpc",null),e([ne()],oe.prototype,"getSuspendContextSerialSync",null),e([ne()],oe.prototype,"copyBuffer",null),e([ne()],oe.prototype,"freeBuffer",null),e([ne()],oe.prototype,"setHotsyncNameManagement",null),e([ne()],oe.prototype,"resolveBuffer",null),e([ne()],oe.prototype,"serializeSessionImage",null),e([ne()],oe.prototype,"deserializeSessionImage",null),e([ne()],oe.prototype,"launchAppByName",null),e([ne()],oe.prototype,"launchAppByDbHeader",null),e([ne()],oe.prototype,"deviceSupportsCardSize",null),e([ne()],oe.prototype,"clearExternalStorage",null),e([ne()],oe.prototype,"allocateCard",null),e([ne()],oe.prototype,"decompressCard",null),e([ne()],oe.prototype,"getCardData",null),e([ne()],oe.prototype,"getCardDirtyPages",null),e([ne()],oe.prototype,"getMountedKey",null),e([ne()],oe.prototype,"mountCard",null),e([ne()],oe.prototype,"removeCard",null),e([ne()],oe.prototype,"remountCards",null),e([ne()],oe.prototype,"getCardSupportLevel",null),e([ne()],oe.prototype,"loadSkin",null),function(e){e[e.cal=0]="cal",e[e.phone=1]="phone",e[e.todo=2]="todo",e[e.notes=3]="notes",e[e.up=4]="up",e[e.down=5]="down",e[e.power=6]="power",e[e.cradle=7]="cradle"}(se||(se={}));const ae="1.10.4-93e308a (preview)";function pe(e){return t(this,void 0,void 0,(function*(){return new J(yield oe.create(e))}))}function ce(e){const i=function(e){const i=WebAssembly.compileStreaming?WebAssembly.compileStreaming(fetch(e)):fetch(e).then((e=>e.arrayBuffer())).then((e=>WebAssembly.compile(e)));return(e,r)=>t(this,void 0,void 0,(function*(){return r(yield WebAssembly.instantiate(yield i,e))}))}(null!=e?e:"cloudpilot_web.wasm");return()=>oe.create(i).then((e=>new J(e)))}})(),r})()));
//# sourceMappingURL=cloudpilot-emu.js.map